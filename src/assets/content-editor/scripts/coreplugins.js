!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=21)}([function(t,e,n){(function(){var e,i,r,o,a,s,l,c,u,d,h,f,p,g={}.hasOwnProperty;p=n(1),f=p.isObject,h=p.isFunction,d=p.isEmpty,u=p.getValue,a=null,e=null,i=null,r=null,o=null,l=null,c=null,s=null,t.exports=function(){function t(t){this.parent=t,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.children=[],a||(a=n(2),e=n(3),i=n(4),r=n(5),o=n(6),l=n(11),c=n(12),s=n(13))}return t.prototype.element=function(t,e,n){var i,r,o,a,s,l,c,p,m,v;if(l=null,null==e&&(e={}),e=u(e),f(e)||(n=(m=[e,n])[0],e=m[1]),null!=t&&(t=u(t)),Array.isArray(t))for(o=0,c=t.length;o<c;o++)r=t[o],l=this.element(r);else if(h(t))l=this.element(t.apply());else if(f(t)){for(s in t)if(g.call(t,s))if(v=t[s],h(v)&&(v=v.apply()),f(v)&&d(v)&&(v=null),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===s.indexOf(this.stringify.convertAttKey))l=this.attribute(s.substr(this.stringify.convertAttKey.length),v);else if(!this.options.separateArrayItems&&Array.isArray(v))for(a=0,p=v.length;a<p;a++)r=v[a],(i={})[s]=r,l=this.element(i);else f(v)?(l=this.element(s)).element(v):l=this.element(s,v)}else l=!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===t.indexOf(this.stringify.convertTextKey)?this.text(n):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===t.indexOf(this.stringify.convertCDataKey)?this.cdata(n):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===t.indexOf(this.stringify.convertCommentKey)?this.comment(n):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===t.indexOf(this.stringify.convertRawKey)?this.raw(n):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===t.indexOf(this.stringify.convertPIKey)?this.instruction(t.substr(this.stringify.convertPIKey.length),n):this.node(t,e,n);if(null==l)throw new Error("Could not create any elements with: "+t+". "+this.debugInfo());return l},t.prototype.insertBefore=function(t,e,n){var i,r,o;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(t));return r=this.parent.children.indexOf(this),o=this.parent.children.splice(r),i=this.parent.element(t,e,n),Array.prototype.push.apply(this.parent.children,o),i},t.prototype.insertAfter=function(t,e,n){var i,r,o;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(t));return r=this.parent.children.indexOf(this),o=this.parent.children.splice(r+1),i=this.parent.element(t,e,n),Array.prototype.push.apply(this.parent.children,o),i},t.prototype.remove=function(){var t;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return t=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[t,t-t+1].concat([])),this.parent},t.prototype.node=function(t,e,n){var i,r;return null!=t&&(t=u(t)),e||(e={}),e=u(e),f(e)||(n=(r=[e,n])[0],e=r[1]),i=new a(this,t,e),null!=n&&i.text(n),this.children.push(i),i},t.prototype.text=function(t){var e;return e=new c(this,t),this.children.push(e),this},t.prototype.cdata=function(t){var n;return n=new e(this,t),this.children.push(n),this},t.prototype.comment=function(t){var e;return e=new i(this,t),this.children.push(e),this},t.prototype.commentBefore=function(t){var e,n;return e=this.parent.children.indexOf(this),n=this.parent.children.splice(e),this.parent.comment(t),Array.prototype.push.apply(this.parent.children,n),this},t.prototype.commentAfter=function(t){var e,n;return e=this.parent.children.indexOf(this),n=this.parent.children.splice(e+1),this.parent.comment(t),Array.prototype.push.apply(this.parent.children,n),this},t.prototype.raw=function(t){var e;return e=new l(this,t),this.children.push(e),this},t.prototype.instruction=function(t,e){var n,i,r,o,a;if(null!=t&&(t=u(t)),null!=e&&(e=u(e)),Array.isArray(t))for(o=0,a=t.length;o<a;o++)n=t[o],this.instruction(n);else if(f(t))for(n in t)g.call(t,n)&&(i=t[n],this.instruction(n,i));else h(e)&&(e=e.apply()),r=new s(this,t,e),this.children.push(r);return this},t.prototype.instructionBefore=function(t,e){var n,i;return n=this.parent.children.indexOf(this),i=this.parent.children.splice(n),this.parent.instruction(t,e),Array.prototype.push.apply(this.parent.children,i),this},t.prototype.instructionAfter=function(t,e){var n,i;return n=this.parent.children.indexOf(this),i=this.parent.children.splice(n+1),this.parent.instruction(t,e),Array.prototype.push.apply(this.parent.children,i),this},t.prototype.declaration=function(t,e,n){var i,o;return i=this.document(),o=new r(i,t,e,n),i.children[0]instanceof r?i.children[0]=o:i.children.unshift(o),i.root()||i},t.prototype.doctype=function(t,e){var n,i,r,a,s,l,c,u,d;for(n=this.document(),i=new o(n,t,e),r=a=0,l=(u=n.children).length;a<l;r=++a)if(u[r]instanceof o)return n.children[r]=i,i;for(r=s=0,c=(d=n.children).length;s<c;r=++s)if(d[r].isRoot)return n.children.splice(r,0,i),i;return n.children.push(i),i},t.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},t.prototype.root=function(){var t;for(t=this;t;){if(t.isDocument)return t.rootObject;if(t.isRoot)return t;t=t.parent}},t.prototype.document=function(){var t;for(t=this;t;){if(t.isDocument)return t;t=t.parent}},t.prototype.end=function(t){return this.document().end(t)},t.prototype.prev=function(){var t;if((t=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[t-1]},t.prototype.next=function(){var t;if(-1===(t=this.parent.children.indexOf(this))||t===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[t+1]},t.prototype.importDocument=function(t){var e;return(e=t.root().clone()).parent=this,e.isRoot=!1,this.children.push(e),this},t.prototype.debugInfo=function(t){var e,n;return null!=(t=t||this.name)||(null!=(e=this.parent)?e.name:void 0)?null==t?"parent: <"+this.parent.name+">":(null!=(n=this.parent)?n.name:void 0)?"node: <"+t+">, parent: <"+this.parent.name+">":"node: <"+t+">":""},t.prototype.ele=function(t,e,n){return this.element(t,e,n)},t.prototype.nod=function(t,e,n){return this.node(t,e,n)},t.prototype.txt=function(t){return this.text(t)},t.prototype.dat=function(t){return this.cdata(t)},t.prototype.com=function(t){return this.comment(t)},t.prototype.ins=function(t,e){return this.instruction(t,e)},t.prototype.doc=function(){return this.document()},t.prototype.dec=function(t,e,n){return this.declaration(t,e,n)},t.prototype.dtd=function(t,e){return this.doctype(t,e)},t.prototype.e=function(t,e,n){return this.element(t,e,n)},t.prototype.n=function(t,e,n){return this.node(t,e,n)},t.prototype.t=function(t){return this.text(t)},t.prototype.d=function(t){return this.cdata(t)},t.prototype.c=function(t){return this.comment(t)},t.prototype.r=function(t){return this.raw(t)},t.prototype.i=function(t,e){return this.instruction(t,e)},t.prototype.u=function(){return this.up()},t.prototype.importXMLBuilder=function(t){return this.importDocument(t)},t}()}).call(this)},function(t,e){(function(){var e,n,i,r,o,a,s,l=[].slice,c={}.hasOwnProperty;e=function(){var t,e,n,i,r,a;if(a=arguments[0],r=2<=arguments.length?l.call(arguments,1):[],o(Object.assign))Object.assign.apply(null,arguments);else for(t=0,n=r.length;t<n;t++)if(null!=(i=r[t]))for(e in i)c.call(i,e)&&(a[e]=i[e]);return a},o=function(t){return!!t&&"[object Function]"===Object.prototype.toString.call(t)},a=function(t){var e;return!!t&&("function"==(e=typeof t)||"object"===e)},i=function(t){return o(Array.isArray)?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},r=function(t){var e;if(i(t))return!t.length;for(e in t)if(c.call(t,e))return!1;return!0},s=function(t){var e,n;return a(t)&&(n=Object.getPrototypeOf(t))&&(e=n.constructor)&&"function"==typeof e&&e instanceof e&&Function.prototype.toString.call(e)===Function.prototype.toString.call(Object)},n=function(t){return o(t.valueOf)?t.valueOf():t},t.exports.assign=e,t.exports.isFunction=o,t.exports.isObject=a,t.exports.isArray=i,t.exports.isEmpty=r,t.exports.isPlainObject=s,t.exports.getValue=n}).call(this)},function(t,e,n){(function(){var e,i,r,o,a,s,l={}.hasOwnProperty;s=n(1),a=s.isObject,o=s.isFunction,r=s.getValue,i=n(0),e=n(18),t.exports=function(t){function n(t,e,i){if(n.__super__.constructor.call(this,t),null==e)throw new Error("Missing element name. "+this.debugInfo());this.name=this.stringify.eleName(e),this.attributes={},null!=i&&this.attribute(i),t.isDocument&&(this.isRoot=!0,this.documentObject=t,t.rootObject=this)}return function(t,e){for(var n in e)l.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,i),n.prototype.clone=function(){var t,e,n,i;for(e in(n=Object.create(this)).isRoot&&(n.documentObject=null),n.attributes={},i=this.attributes)l.call(i,e)&&(t=i[e],n.attributes[e]=t.clone());return n.children=[],this.children.forEach(function(t){var e;return(e=t.clone()).parent=n,n.children.push(e)}),n},n.prototype.attribute=function(t,n){var i,s;if(null!=t&&(t=r(t)),a(t))for(i in t)l.call(t,i)&&(s=t[i],this.attribute(i,s));else o(n)&&(n=n.apply()),this.options.skipNullAttributes&&null==n||(this.attributes[t]=new e(this,t,n));return this},n.prototype.removeAttribute=function(t){var e,n,i;if(null==t)throw new Error("Missing attribute name. "+this.debugInfo());if(t=r(t),Array.isArray(t))for(n=0,i=t.length;n<i;n++)e=t[n],delete this.attributes[e];else delete this.attributes[t];return this},n.prototype.toString=function(t){return this.options.writer.set(t).element(this)},n.prototype.att=function(t,e){return this.attribute(t,e)},n.prototype.a=function(t,e){return this.attribute(t,e)},n}()}).call(this)},function(t,e,n){(function(){var e,i={}.hasOwnProperty;e=n(0),t.exports=function(t){function n(t,e){if(n.__super__.constructor.call(this,t),null==e)throw new Error("Missing CDATA text. "+this.debugInfo());this.text=this.stringify.cdata(e)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(t){return this.options.writer.set(t).cdata(this)},n}()}).call(this)},function(t,e,n){(function(){var e,i={}.hasOwnProperty;e=n(0),t.exports=function(t){function n(t,e){if(n.__super__.constructor.call(this,t),null==e)throw new Error("Missing comment text. "+this.debugInfo());this.text=this.stringify.comment(e)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(t){return this.options.writer.set(t).comment(this)},n}()}).call(this)},function(t,e,n){(function(){var e,i,r={}.hasOwnProperty;i=n(1).isObject,e=n(0),t.exports=function(t){function n(t,e,r,o){var a;n.__super__.constructor.call(this,t),i(e)&&(e=(a=e).version,r=a.encoding,o=a.standalone),e||(e="1.0"),this.version=this.stringify.xmlVersion(e),null!=r&&(this.encoding=this.stringify.xmlEncoding(r)),null!=o&&(this.standalone=this.stringify.xmlStandalone(o))}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,e),n.prototype.toString=function(t){return this.options.writer.set(t).declaration(this)},n}()}).call(this)},function(t,e,n){(function(){var e,i,r,o,a,s,l={}.hasOwnProperty;s=n(1).isObject,a=n(0),e=n(7),r=n(8),i=n(9),o=n(10),t.exports=function(t){function n(t,e,i){var r,o;n.__super__.constructor.call(this,t),this.name="!DOCTYPE",this.documentObject=t,s(e)&&(e=(r=e).pubID,i=r.sysID),null==i&&(i=(o=[e,i])[0],e=o[1]),null!=e&&(this.pubID=this.stringify.dtdPubID(e)),null!=i&&(this.sysID=this.stringify.dtdSysID(i))}return function(t,e){for(var n in e)l.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,a),n.prototype.element=function(t,e){var n;return n=new i(this,t,e),this.children.push(n),this},n.prototype.attList=function(t,n,i,r,o){var a;return a=new e(this,t,n,i,r,o),this.children.push(a),this},n.prototype.entity=function(t,e){var n;return n=new r(this,!1,t,e),this.children.push(n),this},n.prototype.pEntity=function(t,e){var n;return n=new r(this,!0,t,e),this.children.push(n),this},n.prototype.notation=function(t,e){var n;return n=new o(this,t,e),this.children.push(n),this},n.prototype.toString=function(t){return this.options.writer.set(t).docType(this)},n.prototype.ele=function(t,e){return this.element(t,e)},n.prototype.att=function(t,e,n,i,r){return this.attList(t,e,n,i,r)},n.prototype.ent=function(t,e){return this.entity(t,e)},n.prototype.pent=function(t,e){return this.pEntity(t,e)},n.prototype.not=function(t,e){return this.notation(t,e)},n.prototype.up=function(){return this.root()||this.documentObject},n}()}).call(this)},function(t,e,n){(function(){var e,i={}.hasOwnProperty;e=n(0),t.exports=function(t){function n(t,e,i,r,o,a){if(n.__super__.constructor.call(this,t),null==e)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==i)throw new Error("Missing DTD attribute name. "+this.debugInfo(e));if(!r)throw new Error("Missing DTD attribute type. "+this.debugInfo(e));if(!o)throw new Error("Missing DTD attribute default. "+this.debugInfo(e));if(0!==o.indexOf("#")&&(o="#"+o),!o.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(e));if(a&&!o.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(e));this.elementName=this.stringify.eleName(e),this.attributeName=this.stringify.attName(i),this.attributeType=this.stringify.dtdAttType(r),this.defaultValue=this.stringify.dtdAttDefault(a),this.defaultValueType=o}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,e),n.prototype.toString=function(t){return this.options.writer.set(t).dtdAttList(this)},n}()}).call(this)},function(t,e,n){(function(){var e,i,r={}.hasOwnProperty;i=n(1).isObject,e=n(0),t.exports=function(t){function n(t,e,r,o){if(n.__super__.constructor.call(this,t),null==r)throw new Error("Missing DTD entity name. "+this.debugInfo(r));if(null==o)throw new Error("Missing DTD entity value. "+this.debugInfo(r));if(this.pe=!!e,this.name=this.stringify.eleName(r),i(o)){if(!o.pubID&&!o.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(r));if(o.pubID&&!o.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(r));if(null!=o.pubID&&(this.pubID=this.stringify.dtdPubID(o.pubID)),null!=o.sysID&&(this.sysID=this.stringify.dtdSysID(o.sysID)),null!=o.nData&&(this.nData=this.stringify.dtdNData(o.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(r))}else this.value=this.stringify.dtdEntityValue(o)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,e),n.prototype.toString=function(t){return this.options.writer.set(t).dtdEntity(this)},n}()}).call(this)},function(t,e,n){(function(){var e,i={}.hasOwnProperty;e=n(0),t.exports=function(t){function n(t,e,i){if(n.__super__.constructor.call(this,t),null==e)throw new Error("Missing DTD element name. "+this.debugInfo());i||(i="(#PCDATA)"),Array.isArray(i)&&(i="("+i.join(",")+")"),this.name=this.stringify.eleName(e),this.value=this.stringify.dtdElementValue(i)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,e),n.prototype.toString=function(t){return this.options.writer.set(t).dtdElement(this)},n}()}).call(this)},function(t,e,n){(function(){var e,i={}.hasOwnProperty;e=n(0),t.exports=function(t){function n(t,e,i){if(n.__super__.constructor.call(this,t),null==e)throw new Error("Missing DTD notation name. "+this.debugInfo(e));if(!i.pubID&&!i.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(e));this.name=this.stringify.eleName(e),null!=i.pubID&&(this.pubID=this.stringify.dtdPubID(i.pubID)),null!=i.sysID&&(this.sysID=this.stringify.dtdSysID(i.sysID))}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,e),n.prototype.toString=function(t){return this.options.writer.set(t).dtdNotation(this)},n}()}).call(this)},function(t,e,n){(function(){var e,i={}.hasOwnProperty;e=n(0),t.exports=function(t){function n(t,e){if(n.__super__.constructor.call(this,t),null==e)throw new Error("Missing raw text. "+this.debugInfo());this.value=this.stringify.raw(e)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(t){return this.options.writer.set(t).raw(this)},n}()}).call(this)},function(t,e,n){(function(){var e,i={}.hasOwnProperty;e=n(0),t.exports=function(t){function n(t,e){if(n.__super__.constructor.call(this,t),null==e)throw new Error("Missing element text. "+this.debugInfo());this.value=this.stringify.eleText(e)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(t){return this.options.writer.set(t).text(this)},n}()}).call(this)},function(t,e,n){(function(){var e,i={}.hasOwnProperty;e=n(0),t.exports=function(t){function n(t,e,i){if(n.__super__.constructor.call(this,t),null==e)throw new Error("Missing instruction target. "+this.debugInfo());this.target=this.stringify.insTarget(e),i&&(this.value=this.stringify.insValue(i))}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(t){return this.options.writer.set(t).processingInstruction(this)},n}()}).call(this)},function(t,e,n){(function(){var e,i,r,o,a,s,l,c,u,d,h,f,p,g={}.hasOwnProperty;l=n(5),c=n(6),e=n(3),i=n(4),u=n(2),h=n(11),f=n(12),d=n(13),r=n(7),o=n(9),a=n(8),s=n(10),p=n(20),t.exports=function(t){function n(t){n.__super__.constructor.call(this,t)}return function(t,e){for(var n in e)g.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,p),n.prototype.document=function(t){var e,n,r,o,a;for(this.textispresent=!1,o="",n=0,r=(a=t.children).length;n<r;n++)e=a[n],o+=function(){switch(!1){case!(e instanceof l):return this.declaration(e);case!(e instanceof c):return this.docType(e);case!(e instanceof i):return this.comment(e);case!(e instanceof d):return this.processingInstruction(e);default:return this.element(e,0)}}.call(this);return this.pretty&&o.slice(-this.newline.length)===this.newline&&(o=o.slice(0,-this.newline.length)),o},n.prototype.attribute=function(t){return" "+t.name+'="'+t.value+'"'},n.prototype.cdata=function(t,e){return this.space(e)+"<![CDATA["+t.text+"]]>"+this.newline},n.prototype.comment=function(t,e){return this.space(e)+"\x3c!-- "+t.text+" --\x3e"+this.newline},n.prototype.declaration=function(t,e){var n;return n=this.space(e),n+='<?xml version="'+t.version+'"',null!=t.encoding&&(n+=' encoding="'+t.encoding+'"'),null!=t.standalone&&(n+=' standalone="'+t.standalone+'"'),(n+=this.spacebeforeslash+"?>")+this.newline},n.prototype.docType=function(t,n){var l,c,u,h,f;if(n||(n=0),h=this.space(n),h+="<!DOCTYPE "+t.root().name,t.pubID&&t.sysID?h+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(h+=' SYSTEM "'+t.sysID+'"'),t.children.length>0){for(h+=" [",h+=this.newline,c=0,u=(f=t.children).length;c<u;c++)l=f[c],h+=function(){switch(!1){case!(l instanceof r):return this.dtdAttList(l,n+1);case!(l instanceof o):return this.dtdElement(l,n+1);case!(l instanceof a):return this.dtdEntity(l,n+1);case!(l instanceof s):return this.dtdNotation(l,n+1);case!(l instanceof e):return this.cdata(l,n+1);case!(l instanceof i):return this.comment(l,n+1);case!(l instanceof d):return this.processingInstruction(l,n+1);default:throw new Error("Unknown DTD node type: "+l.constructor.name)}}.call(this);h+="]"}return(h+=this.spacebeforeslash+">")+this.newline},n.prototype.element=function(t,n){var r,o,a,s,l,c,p,m,v,y,E,b,C;for(p in n||(n=0),C=!1,this.textispresent?(this.newline="",this.pretty=!1):(this.newline=this.newlinedefault,this.pretty=this.prettydefault),m="",m+=(b=this.space(n))+"<"+t.name,v=t.attributes)g.call(v,p)&&(r=v[p],m+=this.attribute(r));if(0===t.children.length||t.children.every(function(t){return""===t.value}))this.allowEmpty?m+="></"+t.name+">"+this.newline:m+=this.spacebeforeslash+"/>"+this.newline;else if(this.pretty&&1===t.children.length&&null!=t.children[0].value)m+=">",m+=t.children[0].value,m+="</"+t.name+">"+this.newline;else{if(this.dontprettytextnodes)for(a=0,l=(y=t.children).length;a<l;a++)if(null!=(o=y[a]).value){this.textispresent++,C=!0;break}for(this.textispresent&&(this.newline="",this.pretty=!1,b=this.space(n)),m+=">"+this.newline,s=0,c=(E=t.children).length;s<c;s++)o=E[s],m+=function(){switch(!1){case!(o instanceof e):return this.cdata(o,n+1);case!(o instanceof i):return this.comment(o,n+1);case!(o instanceof u):return this.element(o,n+1);case!(o instanceof h):return this.raw(o,n+1);case!(o instanceof f):return this.text(o,n+1);case!(o instanceof d):return this.processingInstruction(o,n+1);default:throw new Error("Unknown XML node type: "+o.constructor.name)}}.call(this);C&&this.textispresent--,this.textispresent||(this.newline=this.newlinedefault,this.pretty=this.prettydefault),m+=b+"</"+t.name+">"+this.newline}return m},n.prototype.processingInstruction=function(t,e){var n;return n=this.space(e)+"<?"+t.target,t.value&&(n+=" "+t.value),n+(this.spacebeforeslash+"?>")+this.newline},n.prototype.raw=function(t,e){return this.space(e)+t.value+this.newline},n.prototype.text=function(t,e){return this.space(e)+t.value+this.newline},n.prototype.dtdAttList=function(t,e){var n;return n=this.space(e)+"<!ATTLIST "+t.elementName+" "+t.attributeName+" "+t.attributeType,"#DEFAULT"!==t.defaultValueType&&(n+=" "+t.defaultValueType),t.defaultValue&&(n+=' "'+t.defaultValue+'"'),n+(this.spacebeforeslash+">")+this.newline},n.prototype.dtdElement=function(t,e){return this.space(e)+"<!ELEMENT "+t.name+" "+t.value+this.spacebeforeslash+">"+this.newline},n.prototype.dtdEntity=function(t,e){var n;return n=this.space(e)+"<!ENTITY",t.pe&&(n+=" %"),n+=" "+t.name,t.value?n+=' "'+t.value+'"':(t.pubID&&t.sysID?n+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(n+=' SYSTEM "'+t.sysID+'"'),t.nData&&(n+=" NDATA "+t.nData)),n+(this.spacebeforeslash+">")+this.newline},n.prototype.dtdNotation=function(t,e){var n;return n=this.space(e)+"<!NOTATION "+t.name,t.pubID&&t.sysID?n+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.pubID?n+=' PUBLIC "'+t.pubID+'"':t.sysID&&(n+=' SYSTEM "'+t.sysID+'"'),n+(this.spacebeforeslash+">")+this.newline},n.prototype.openNode=function(t,e){var n,i,r,o;if(e||(e=0),t instanceof u){for(i in r=this.space(e)+"<"+t.name,o=t.attributes)g.call(o,i)&&(n=o[i],r+=this.attribute(n));return r+(t.children?">":"/>")+this.newline}return r=this.space(e)+"<!DOCTYPE "+t.rootNodeName,t.pubID&&t.sysID?r+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(r+=' SYSTEM "'+t.sysID+'"'),r+(t.children?" [":">")+this.newline},n.prototype.closeNode=function(t,e){switch(e||(e=0),!1){case!(t instanceof u):return this.space(e)+"</"+t.name+">"+this.newline;case!(t instanceof c):return this.space(e)+"]>"+this.newline}},n}()}).call(this)},function(t,e){
/**
 * @license AngularJS v1.5.9
 * (c) 2010-2016 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(t){"use strict";function e(t,e){return e=e||Error,function(){var n,i,r=arguments,o=r[0],a="["+(t?t+":":"")+o+"] ";for(a+=r[1].replace(/\{\d+\}/g,function(t){var e=+t.slice(1,-1)+2;return e<r.length?jt(r[e]):t}),a+="\nhttp://errors.angularjs.org/1.5.9/"+(t?t+"/":"")+o,i=2,n="?";i<r.length;i++,n="&")a+=n+"p"+(i-2)+"="+encodeURIComponent(jt(r[i]));return new e(a)}}var n=/^\/(.+)\/([a-z]*)$/,i="validity",r=Object.prototype.hasOwnProperty,o=function(t){return M(t)?t.toLowerCase():t},a=function(t){return M(t)?t.toUpperCase():t};"i"!=="I".toLowerCase()&&(o=function(t){return M(t)?t.replace(/[A-Z]/g,function(t){return String.fromCharCode(32|t.charCodeAt(0))}):t},a=function(t){return M(t)?t.replace(/[a-z]/g,function(t){return String.fromCharCode(-33&t.charCodeAt(0))}):t});var s,l,c,u,d=[].slice,h=[].splice,f=[].push,p=Object.prototype.toString,g=Object.getPrototypeOf,m=e("ng"),v=t.angular||(t.angular={}),y=0;function E(t){if(null==t||U(t))return!1;if(q(t)||M(t)||l&&t instanceof l)return!0;var e="length"in Object(t)&&t.length;return j(e)&&(e>=0&&(e-1 in t||t instanceof Array)||"function"==typeof t.item)}function b(t,e,n){var i,o;if(t)if(H(t))for(i in t)"prototype"===i||"length"===i||"name"===i||t.hasOwnProperty&&!t.hasOwnProperty(i)||e.call(n,t[i],i,t);else if(q(t)||E(t)){var a="object"!=typeof t;for(i=0,o=t.length;i<o;i++)(a||i in t)&&e.call(n,t[i],i,t)}else if(t.forEach&&t.forEach!==b)t.forEach(e,n,t);else if(F(t))for(i in t)e.call(n,t[i],i,t);else if("function"==typeof t.hasOwnProperty)for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t);else for(i in t)r.call(t,i)&&e.call(n,t[i],i,t);return t}function C(t,e,n){for(var i=Object.keys(t).sort(),r=0;r<i.length;r++)e.call(n,t[i[r]],i[r]);return i}function T(t){return function(e,n){t(n,e)}}function w(){return++y}function I(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function O(t,e,n){for(var i=t.$$hashKey,r=0,o=e.length;r<o;++r){var a=e[r];if(L(a)||H(a))for(var s=Object.keys(a),l=0,c=s.length;l<c;l++){var u=s[l],d=a[u];n&&L(d)?B(d)?t[u]=new Date(d.valueOf()):V(d)?t[u]=new RegExp(d):d.nodeName?t[u]=d.cloneNode(!0):J(d)?t[u]=d.clone():(L(t[u])||(t[u]=q(d)?[]:{}),O(t[u],[d],!0)):t[u]=d}}return I(t,i),t}function D(t){return O(t,d.call(arguments,1),!1)}function _(t){return O(t,d.call(arguments,1),!0)}function k(t){return parseInt(t,10)}s=t.document.documentMode;var R=Number.isNaN||function(t){return t!=t};function x(t,e){return D(Object.create(t),e)}function S(){}function K(t){return t}function $(t){return function(){return t}}function A(t){return H(t.toString)&&t.toString!==p}function N(t){return void 0===t}function P(t){return void 0!==t}function L(t){return null!==t&&"object"==typeof t}function F(t){return null!==t&&"object"==typeof t&&!g(t)}function M(t){return"string"==typeof t}function j(t){return"number"==typeof t}function B(t){return"[object Date]"===p.call(t)}S.$inject=[],K.$inject=[];var q=Array.isArray;function H(t){return"function"==typeof t}function V(t){return"[object RegExp]"===p.call(t)}function U(t){return t&&t.window===t}function z(t){return t&&t.$evalAsync&&t.$watch}function W(t){return"boolean"==typeof t}function X(t){return t&&H(t.then)}var G=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/,Y=function(t){return M(t)?t.trim():t},Q=function(t){return t.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function J(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function Z(t){return o(t.nodeName||t[0]&&t[0].nodeName)}function tt(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),n}function et(t,e){var n,i,o=[],a=[];if(e){if((i=e)&&j(i.length)&&G.test(p.call(i))||(n=e,"[object ArrayBuffer]"===p.call(n)))throw m("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===e)throw m("cpi","Can't copy! Source and destination are identical.");return q(e)?e.length=0:b(e,function(t,n){"$$hashKey"!==n&&delete e[n]}),o.push(t),a.push(e),s(t,e)}return l(t);function s(t,e){var n,i=e.$$hashKey;if(q(t))for(var o=0,a=t.length;o<a;o++)e.push(l(t[o]));else if(F(t))for(n in t)e[n]=l(t[n]);else if(t&&"function"==typeof t.hasOwnProperty)for(n in t)t.hasOwnProperty(n)&&(e[n]=l(t[n]));else for(n in t)r.call(t,n)&&(e[n]=l(t[n]));return I(e,i),e}function l(t){if(!L(t))return t;var e=o.indexOf(t);if(-1!==e)return a[e];if(U(t)||z(t))throw m("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var n=!1,i=function(t){switch(p.call(t)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new t.constructor(l(t.buffer),t.byteOffset,t.length);case"[object ArrayBuffer]":if(!t.slice){var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}return t.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new t.constructor(t.valueOf());case"[object RegExp]":var n=new RegExp(t.source,t.toString().match(/[^\/]*$/)[0]);return n.lastIndex=t.lastIndex,n;case"[object Blob]":return new t.constructor([t],{type:t.type})}if(H(t.cloneNode))return t.cloneNode(!0)}(t);return void 0===i&&(i=q(t)?[]:Object.create(g(t)),n=!0),o.push(t),a.push(i),n?s(t,i):i}}function nt(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n,i,r,o=typeof t;if(o===typeof e&&"object"===o){if(!q(t)){if(B(t))return!!B(e)&&nt(t.getTime(),e.getTime());if(V(t))return!!V(e)&&t.toString()===e.toString();if(z(t)||z(e)||U(t)||U(e)||q(e)||B(e)||V(e))return!1;for(i in r=$t(),t)if("$"!==i.charAt(0)&&!H(t[i])){if(!nt(t[i],e[i]))return!1;r[i]=!0}for(i in e)if(!(i in r)&&"$"!==i.charAt(0)&&P(e[i])&&!H(e[i]))return!1;return!0}if(!q(e))return!1;if((n=t.length)===e.length){for(i=0;i<n;i++)if(!nt(t[i],e[i]))return!1;return!0}}return!1}var it=function(){if(!P(it.rules)){var e=t.document.querySelector("[ng-csp]")||t.document.querySelector("[data-ng-csp]");if(e){var n=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");it.rules={noUnsafeEval:!n||-1!==n.indexOf("no-unsafe-eval"),noInlineStyle:!n||-1!==n.indexOf("no-inline-style")}}else it.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(t){return!0}}(),noInlineStyle:!1}}return it.rules},rt=function(){if(P(rt.name_))return rt.name_;var e,n,i,r,o=bt.length;for(n=0;n<o;++n)if(i=bt[n],e=t.document.querySelector("["+i.replace(":","\\:")+"jq]")){r=e.getAttribute(i+"jq");break}return rt.name_=r};function ot(t,e,n){return t.concat(d.call(e,n))}function at(t,e){return d.call(t,e||0)}function st(t,e){var n=arguments.length>2?at(arguments,2):[];return!H(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,ot(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function lt(e,n){var i=n;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?i=void 0:U(n)?i="$WINDOW":n&&t.document===n?i="$DOCUMENT":z(n)&&(i="$SCOPE"),i}function ct(t,e){if(!N(t))return j(e)||(e=e?2:null),JSON.stringify(t,lt,e)}function ut(t){return M(t)?JSON.parse(t):t}var dt=/:/g;function ht(t,e){t=t.replace(dt,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return R(n)?e:n}function ft(t,e,n){n=n?-1:1;var i=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,n*(ht(e,i)-i))}function pt(t){t=l(t).clone();try{t.empty()}catch(t){}var e=l("<div>").append(t).html();try{return t[0].nodeType===Nt?o(e):e.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(t,e){return"<"+o(e)})}catch(t){return o(e)}}function gt(t){try{return decodeURIComponent(t)}catch(t){}}function mt(t){var e={};return b((t||"").split("&"),function(t){var n,i,o;t&&(i=t=t.replace(/\+/g,"%20"),-1!==(n=t.indexOf("="))&&(i=t.substring(0,n),o=t.substring(n+1)),P(i=gt(i))&&(o=!P(o)||gt(o),r.call(e,i)?q(e[i])?e[i].push(o):e[i]=[e[i],o]:e[i]=o))}),e}function vt(t){var e=[];return b(t,function(t,n){q(t)?b(t,function(t){e.push(Et(n,!0)+(!0===t?"":"="+Et(t,!0)))}):e.push(Et(n,!0)+(!0===t?"":"="+Et(t,!0)))}),e.length?e.join("&"):""}function yt(t){return Et(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Et(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}var bt=["ng-","data-ng-","ng:","x-ng-"],Ct=function(t){if(!t.currentScript)return!0;var e=t.currentScript.getAttribute("src"),n=t.createElement("a");n.href=e;var i=n.protocol;if(t.location.protocol===i)return!0;switch(i){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}}(t.document);function Tt(e,n,i){L(i)||(i={}),i=D({strictDi:!1},i);var r=function(){if((e=l(e)).injector()){var r=e[0]===t.document?"document":pt(e);throw m("btstrpd","App already bootstrapped with this element '{0}'",r.replace(/</,"&lt;").replace(/>/,"&gt;"))}(n=n||[]).unshift(["$provide",function(t){t.value("$rootElement",e)}]),i.debugInfoEnabled&&n.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),n.unshift("ng");var o=Be(n,i.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,i){t.$apply(function(){e.data("$injector",i),n(e)(t)})}]),o},o=/^NG_ENABLE_DEBUG_INFO!/,a=/^NG_DEFER_BOOTSTRAP!/;if(t&&o.test(t.name)&&(i.debugInfoEnabled=!0,t.name=t.name.replace(o,"")),t&&!a.test(t.name))return r();t.name=t.name.replace(a,""),v.resumeBootstrap=function(t){return b(t,function(t){n.push(t)}),r()},H(v.resumeDeferredBootstrap)&&v.resumeDeferredBootstrap()}function wt(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function It(t){var e=v.element(t).injector();if(!e)throw m("test","no injector found for element argument to getTestability");return e.get("$$testability")}var Ot=/[A-Z]/g;function Dt(t,e){return e=e||"_",t.replace(Ot,function(t,n){return(n?e:"")+t.toLowerCase()})}var _t=!1;function kt(t,e,n){if(!t)throw m("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function Rt(t,e,n){return n&&q(t)&&(t=t[t.length-1]),kt(H(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function xt(t,e){if("hasOwnProperty"===t)throw m("badname","hasOwnProperty is not a valid {0} name",e)}function St(t,e,n){if(!e)return t;for(var i,r=e.split("."),o=t,a=r.length,s=0;s<a;s++)i=r[s],t&&(t=(o=t)[i]);return!n&&H(t)?st(o,t):t}function Kt(t){for(var e,n=t[0],i=t[t.length-1],r=1;n!==i&&(n=n.nextSibling);r++)(e||t[r]!==n)&&(e||(e=l(d.call(t,0,r))),e.push(n));return e||t}function $t(){return Object.create(null)}var At=1,Nt=3,Pt=8,Lt=9,Ft=11;function Mt(t,e){if(q(t)){e=e||[];for(var n=0,i=t.length;n<i;n++)e[n]=t[n]}else if(L(t))for(var r in e=e||{},t)"$"===r.charAt(0)&&"$"===r.charAt(1)||(e[r]=t[r]);return e||t}function jt(t){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):N(t)?"undefined":"string"!=typeof t?function(t){var e=[];return JSON.stringify(t,function(t,n){if(L(n=lt(t,n))){if(e.indexOf(n)>=0)return"...";e.push(n)}return n})}(t):t}var Bt={full:"1.5.9",major:1,minor:5,dot:9,codeName:"timeturning-lockdown"};se.expando="ng339";var qt=se.cache={},Ht=1,Vt=function(t,e,n){t.addEventListener(e,n,!1)},Ut=function(t,e,n){t.removeEventListener(e,n,!1)};se._data=function(t){return this.cache[t[this.expando]]||{}};var zt=/([:\-_]+(.))/g,Wt=/^moz([A-Z])/,Xt={mouseleave:"mouseout",mouseenter:"mouseover"},Gt=e("jqLite");function Yt(t){return t.replace(zt,function(t,e,n,i){return i?n.toUpperCase():n}).replace(Wt,"Moz$1")}var Qt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Jt=/<|&#?\w+;/,Zt=/<([\w:-]+)/,te=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ee={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ne(t){return!Jt.test(t)}function ie(t){var e=t.nodeType;return e===At||!e||e===Lt}function re(t,e){var n,i,r,o,a=e.createDocumentFragment(),s=[];if(ne(t))s.push(e.createTextNode(t));else{for(n=a.appendChild(e.createElement("div")),i=(Zt.exec(t)||["",""])[1].toLowerCase(),r=ee[i]||ee._default,n.innerHTML=r[1]+t.replace(te,"<$1></$2>")+r[2],o=r[0];o--;)n=n.lastChild;s=ot(s,n.childNodes),(n=a.firstChild).textContent=""}return a.textContent="",a.innerHTML="",b(s,function(t){a.appendChild(t)}),a}function oe(t,e){var n=t.parentNode;n&&n.replaceChild(e,t),e.appendChild(t)}ee.optgroup=ee.option,ee.tbody=ee.tfoot=ee.colgroup=ee.caption=ee.thead,ee.th=ee.td;var ae=t.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))};function se(e){if(e instanceof se)return e;var n,i,r,o;if(M(e)&&(e=Y(e),n=!0),!(this instanceof se)){if(n&&"<"!==e.charAt(0))throw Gt("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new se(e)}ve(this,n?(i=e,r=r||t.document,(o=Qt.exec(i))?[r.createElement(o[1])]:(o=re(i,r))?o.childNodes:[]):e)}function le(t){return t.cloneNode(!0)}function ce(t,e){if(e||de(t),t.querySelectorAll)for(var n=t.querySelectorAll("*"),i=0,r=n.length;i<r;i++)de(n[i])}function ue(t,e,n,i){if(P(i))throw Gt("offargs","jqLite#off() does not support the `selector` argument");var r=he(t),o=r&&r.events,a=r&&r.handle;if(a)if(e){var s=function(e){var i=o[e];P(n)&&tt(i||[],n),P(n)&&i&&i.length>0||(Ut(t,e,a),delete o[e])};b(e.split(" "),function(t){s(t),Xt[t]&&s(Xt[t])})}else for(e in o)"$destroy"!==e&&Ut(t,e,a),delete o[e]}function de(t,e){var n=t.ng339,i=n&&qt[n];if(i){if(e)return void delete i.data[e];i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),ue(t)),delete qt[n],t.ng339=void 0}}function he(t,e){var n=t.ng339,i=n&&qt[n];return e&&!i&&(t.ng339=n=++Ht,i=qt[n]={events:{},data:{},handle:void 0}),i}function fe(t,e,n){if(ie(t)){var i=P(n),r=!i&&e&&!L(e),o=!e,a=he(t,!r),s=a&&a.data;if(i)s[e]=n;else{if(o)return s;if(r)return s&&s[e];D(s,e)}}}function pe(t,e){return!!t.getAttribute&&(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1}function ge(t,e){e&&t.setAttribute&&b(e.split(" "),function(e){t.setAttribute("class",Y((" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Y(e)+" "," ")))})}function me(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");b(e.split(" "),function(t){t=Y(t),-1===n.indexOf(" "+t+" ")&&(n+=t+" ")}),t.setAttribute("class",Y(n))}}function ve(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var i=0;i<n;i++)t[t.length++]=e[i]}else t[t.length++]=e}}function ye(t,e){return Ee(t,"$"+(e||"ngController")+"Controller")}function Ee(t,e,n){t.nodeType===Lt&&(t=t.documentElement);for(var i=q(e)?e:[e];t;){for(var r=0,o=i.length;r<o;r++)if(P(n=l.data(t,i[r])))return n;t=t.parentNode||t.nodeType===Ft&&t.host}}function be(t){for(ce(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function Ce(t,e){e||ce(t);var n=t.parentNode;n&&n.removeChild(t)}var Te=se.prototype={ready:function(e){var n=!1;function i(){n||(n=!0,e())}"complete"===t.document.readyState?t.setTimeout(i):(this.on("DOMContentLoaded",i),se(t).on("load",i))},toString:function(){var t=[];return b(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(t){return l(t>=0?this[t]:this[this.length+t])},length:0,push:f,sort:[].sort,splice:[].splice},we={};b("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(t){we[o(t)]=t});var Ie={};b("input,select,option,textarea,button,form,details".split(","),function(t){Ie[t]=!0});var Oe={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};function De(t,e){var n=we[e.toLowerCase()];return n&&Ie[Z(t)]&&n}function _e(t,e,n){n.call(t,e)}function ke(t,e,n){var i=e.relatedTarget;i&&(i===t||ae.call(t,i))||n.call(t,e)}function Re(){this.$get=function(){return D(se,{hasClass:function(t,e){return t.attr&&(t=t[0]),pe(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),me(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),ge(t,e)}})}}function xe(t,e){var n=t&&t.$$hashKey;if(n)return"function"==typeof n&&(n=t.$$hashKey()),n;var i=typeof t;return"function"===i||"object"===i&&null!==t?t.$$hashKey=i+":"+(e||w)():i+":"+t}function Se(t,e){if(e){var n=0;this.nextUid=function(){return++n}}b(t,this.put,this)}b({data:fe,removeData:de,hasData:function(t){for(var e in qt[t.ng339])return!0;return!1},cleanData:function(t){for(var e=0,n=t.length;e<n;e++)de(t[e])}},function(t,e){se[e]=t}),b({data:fe,inheritedData:Ee,scope:function(t){return l.data(t,"$scope")||Ee(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return l.data(t,"$isolateScope")||l.data(t,"$isolateScopeNoTemplate")},controller:ye,injector:function(t){return Ee(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:pe,css:function(t,e,n){if(e=Yt(e),!P(n))return t.style[e];t.style[e]=n},attr:function(t,e,n){var i=t.nodeType;if(i!==Nt&&2!==i&&i!==Pt){var r=o(e);if(we[r]){if(!P(n))return t[e]||(t.attributes.getNamedItem(e)||S).specified?r:void 0;n?(t[e]=!0,t.setAttribute(e,r)):(t[e]=!1,t.removeAttribute(r))}else if(P(n))t.setAttribute(e,n);else if(t.getAttribute){var a=t.getAttribute(e,2);return null===a?void 0:a}}},prop:function(t,e,n){if(!P(n))return t[e];t[e]=n},text:function(){return t.$dv="",t;function t(t,e){if(N(e)){var n=t.nodeType;return n===At||n===Nt?t.textContent:""}t.textContent=e}}(),val:function(t,e){if(N(e)){if(t.multiple&&"select"===Z(t)){var n=[];return b(t.options,function(t){t.selected&&n.push(t.value||t.text)}),0===n.length?null:n}return t.value}t.value=e},html:function(t,e){if(N(e))return t.innerHTML;ce(t,!0),t.innerHTML=e},empty:be},function(t,e){se.prototype[e]=function(e,n){var i,r,o=this.length;if(t!==be&&N(2===t.length&&t!==pe&&t!==ye?e:n)){if(L(e)){for(i=0;i<o;i++)if(t===fe)t(this[i],e);else for(r in e)t(this[i],r,e[r]);return this}for(var a=t.$dv,s=N(a)?Math.min(o,1):o,l=0;l<s;l++){var c=t(this[l],e,n);a=a?a+c:c}return a}for(i=0;i<o;i++)t(this[i],e,n);return this}}),b({removeData:de,on:function(t,e,n,i){if(P(i))throw Gt("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(ie(t)){var r=he(t,!0),o=r.events,a=r.handle;a||(a=r.handle=function(t,e){var n=function(n,i){n.isDefaultPrevented=function(){return n.defaultPrevented};var r=e[i||n.type],o=r?r.length:0;if(o){if(N(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped};var s=r.specialHandlerWrapper||_e;o>1&&(r=Mt(r));for(var l=0;l<o;l++)n.isImmediatePropagationStopped()||s(t,n,r[l])}};return n.elem=t,n}(t,o));for(var s=e.indexOf(" ")>=0?e.split(" "):[e],l=s.length,c=function(e,i,r){var s=o[e];s||((s=o[e]=[]).specialHandlerWrapper=i,"$destroy"===e||r||Vt(t,e,a)),s.push(n)};l--;)e=s[l],Xt[e]?(c(Xt[e],ke),c(e,void 0,!0)):c(e)}},off:ue,one:function(t,e,n){(t=l(t)).on(e,function i(){t.off(e,n),t.off(e,i)}),t.on(e,n)},replaceWith:function(t,e){var n,i=t.parentNode;ce(t),b(new se(e),function(e){n?i.insertBefore(e,n.nextSibling):i.replaceChild(e,t),n=e})},children:function(t){var e=[];return b(t.childNodes,function(t){t.nodeType===At&&e.push(t)}),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(n===At||n===Ft)for(var i=0,r=(e=new se(e)).length;i<r;i++){var o=e[i];t.appendChild(o)}},prepend:function(t,e){if(t.nodeType===At){var n=t.firstChild;b(new se(e),function(e){t.insertBefore(e,n)})}},wrap:function(t,e){oe(t,l(e).eq(0).clone()[0])},remove:Ce,detach:function(t){Ce(t,!0)},after:function(t,e){for(var n=t,i=t.parentNode,r=0,o=(e=new se(e)).length;r<o;r++){var a=e[r];i.insertBefore(a,n.nextSibling),n=a}},addClass:me,removeClass:ge,toggleClass:function(t,e,n){e&&b(e.split(" "),function(e){var i=n;N(i)&&(i=!pe(t,e)),(i?me:ge)(t,e)})},parent:function(t){var e=t.parentNode;return e&&e.nodeType!==Ft?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:le,triggerHandler:function(t,e,n){var i,r,o,a=e.type||e,s=he(t),l=s&&s.events,c=l&&l[a];c&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:S,type:a,target:t},e.type&&(i=D(i,e)),r=Mt(c),o=n?[i].concat(n):[i],b(r,function(e){i.isImmediatePropagationStopped()||e.apply(t,o)}))}},function(t,e){se.prototype[e]=function(e,n,i){for(var r,o=0,a=this.length;o<a;o++)N(r)?P(r=t(this[o],e,n,i))&&(r=l(r)):ve(r,t(this[o],e,n,i));return P(r)?r:this},se.prototype.bind=se.prototype.on,se.prototype.unbind=se.prototype.off}),Se.prototype={put:function(t,e){this[xe(t,this.nextUid)]=e},get:function(t){return this[xe(t,this.nextUid)]},remove:function(t){var e=this[t=xe(t,this.nextUid)];return delete this[t],e}};var Ke=[function(){this.$get=[function(){return Se}]}],$e=/^([^\(]+?)=>/,Ae=/^[^\(]*\(\s*([^\)]*)\)/m,Ne=/,/,Pe=/^\s*(_?)(\S+?)\1\s*$/,Le=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Fe=e("$injector");function Me(t){return Function.prototype.toString.call(t)+" "}function je(t){var e=Me(t).replace(Le,"");return e.match($e)||e.match(Ae)}function Be(t,e){e=!0===e;var n={},i="Provider",r=[],o=new Se([],!0),a={$provide:{provider:p(g),factory:p(m),service:p(function(t,e){return m(t,["$injector",function(t){return t.instantiate(e)}])}),value:p(function(t,e){return m(t,$(e),!1)}),constant:p(function(t,e){xt(t,"constant"),a[t]=e,c[t]=e}),decorator:function(t,e){var n=l.get(t+i),r=n.$get;n.$get=function(){var t=h.invoke(r,n);return h.invoke(e,null,{$delegate:t})}}}},l=a.$injector=y(a,function(t,e){throw v.isString(e)&&r.push(e),Fe("unpr","Unknown provider: {0}",r.join(" <- "))}),c={},d=y(c,function(t,e){var n=l.get(t+i,e);return h.invoke(n.$get,n,void 0,t)}),h=d;a["$injector"+i]={$get:$(d)};var f=function t(e){kt(N(e)||q(e),"modulesToLoad","not an array");var n,i=[];return b(e,function(e){if(!o.get(e)){o.put(e,!0);try{M(e)?(n=u(e),i=i.concat(t(n.requires)).concat(n._runBlocks),r(n._invokeQueue),r(n._configBlocks)):H(e)?i.push(l.invoke(e)):q(e)?i.push(l.invoke(e)):Rt(e,"module")}catch(t){throw q(e)&&(e=e[e.length-1]),t.message&&t.stack&&-1===t.stack.indexOf(t.message)&&(t=t.message+"\n"+t.stack),Fe("modulerr","Failed to instantiate module {0} due to:\n{1}",e,t.stack||t.message||t)}}function r(t){var e,n;for(e=0,n=t.length;e<n;e++){var i=t[e],r=l.get(i[0]);r[i[1]].apply(r,i[2])}}}),i}(t);return(h=d.get("$injector")).strictDi=e,b(f,function(t){t&&h.invoke(t)}),h;function p(t){return function(e,n){if(!L(e))return t(e,n);b(e,T(t))}}function g(t,e){if(xt(t,"service"),(H(e)||q(e))&&(e=l.instantiate(e)),!e.$get)throw Fe("pget","Provider '{0}' must define $get factory method.",t);return a[t+i]=e}function m(t,e,n){return g(t,{$get:!1!==n?function(t,e){return function(){var n=h.invoke(e,this);if(N(n))throw Fe("undef","Provider '{0}' must return a value from $get factory method.",t);return n}}(t,e):e})}function y(t,o){function l(e,i){if(t.hasOwnProperty(e)){if(t[e]===n)throw Fe("cdep","Circular dependency found: {0}",e+" <- "+r.join(" <- "));return t[e]}try{return r.unshift(e),t[e]=n,t[e]=o(e,i),t[e]}catch(i){throw t[e]===n&&delete t[e],i}finally{r.shift()}}function c(t,n,i){for(var r=[],o=Be.$$annotate(t,e,i),a=0,s=o.length;a<s;a++){var c=o[a];if("string"!=typeof c)throw Fe("itkn","Incorrect injection token! Expected service name as string, got {0}",c);r.push(n&&n.hasOwnProperty(c)?n[c]:l(c,i))}return r}return{invoke:function(t,e,n,i){"string"==typeof n&&(i=n,n=null);var r,o=c(t,n,i);return q(t)&&(t=t[t.length-1]),r=t,s<=11||"function"!=typeof r||!/^(?:class\b|constructor\()/.test(Me(r))?t.apply(e,o):(o.unshift(null),new(Function.prototype.bind.apply(t,o)))},instantiate:function(t,e,n){var i=q(t)?t[t.length-1]:t,r=c(t,e,n);return r.unshift(null),new(Function.prototype.bind.apply(i,r))},get:l,annotate:Be.$$annotate,has:function(e){return a.hasOwnProperty(e+i)||t.hasOwnProperty(e)}}}}function qe(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(n,i,r){var o=n.document;function a(t){if(t){t.scrollIntoView();var e=function(){var t=s.yOffset;if(H(t))t=t();else if(J(t)){var e=t[0];t="fixed"!==n.getComputedStyle(e).position?0:e.getBoundingClientRect().bottom}else j(t)||(t=0);return t}();if(e){var i=t.getBoundingClientRect().top;n.scrollBy(0,i-e)}}else n.scrollTo(0,0)}function s(t){var e,n,r;(t=M(t)?t:i.hash())?(e=o.getElementById(t))?a(e):(n=o.getElementsByName(t),r=null,Array.prototype.some.call(n,function(t){if("a"===Z(t))return r=t,!0}),(e=r)?a(e):"top"===t&&a(null)):a(null)}return e&&r.$watch(function(){return i.hash()},function(e,n){var i,o;e===n&&""===e||(i=function(){r.$evalAsync(s)},"complete"===(o=o||t).document.readyState?o.setTimeout(i):l(o).on("load",i))}),s}]}Be.$$annotate=function(t,e,n){var i,r;if("function"==typeof t){if(!(i=t.$inject)){if(i=[],t.length){if(e)throw M(n)&&n||(n=t.name||function(t){var e=je(t);return e?"function("+(e[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(t)),Fe("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);b(je(t)[1].split(Ne),function(t){t.replace(Pe,function(t,e,n){i.push(n)})})}t.$inject=i}}else q(t)?(Rt(t[r=t.length-1],"fn"),i=t.slice(0,r)):Rt(t,"fn",!0);return i};var He=e("$animate"),Ve=1;function Ue(t,e){return t||e?t?e?(q(t)&&(t=t.join(" ")),q(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function ze(t){return L(t)?t:{}}var We=function(){this.$get=S},Xe=function(){var t=new Se,e=[];this.$get=["$$AnimateRunner","$rootScope",function(n,i){return{enabled:S,on:S,off:S,pin:S,push:function(a,s,l,c){c&&c(),(l=l||{}).from&&a.css(l.from),l.to&&a.css(l.to),(l.addClass||l.removeClass)&&function(n,a,s){var l=t.get(n)||{},c=r(l,a,!0),u=r(l,s,!1);(c||u)&&(t.put(n,l),e.push(n),1===e.length&&i.$$postDigest(o))}(a,l.addClass,l.removeClass);var u=new n;return u.complete(),u}};function r(t,e,n){var i=!1;return e&&b(e=M(e)?e.split(" "):q(e)?e:[],function(e){e&&(i=!0,t[e]=n)}),i}function o(){b(e,function(e){var n=t.get(e);if(n){var i=function(t){M(t)&&(t=t.split(" "));var e=$t();return b(t,function(t){t.length&&(e[t]=!0)}),e}(e.attr("class")),r="",o="";b(n,function(t,e){t!==!!i[e]&&(t?r+=(r.length?" ":"")+e:o+=(o.length?" ":"")+e)}),b(e,function(t){r&&me(t,r),o&&ge(t,o)}),t.remove(e)}}),e.length=0}}]},Ge=["$provide",function(t){var e=this;this.$$registeredAnimations=Object.create(null),this.register=function(n,i){if(n&&"."!==n.charAt(0))throw He("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var r=n+"-animation";e.$$registeredAnimations[n.substr(1)]=r,t.factory(r,i)},this.classNameFilter=function(t){if(1===arguments.length&&(this.$$classNameFilter=t instanceof RegExp?t:null,this.$$classNameFilter&&new RegExp("(\\s+|\\/)ng-animate(\\s+|\\/)").test(this.$$classNameFilter.toString())))throw He("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',"ng-animate");return this.$$classNameFilter},this.$get=["$$animateQueue",function(t){function e(t,e,n){if(n){var i=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.nodeType===Ve)return n}}(n);!i||i.parentNode||i.previousElementSibling||(n=null)}n?n.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.end&&t.end()},enter:function(n,i,r,o){return i=i&&l(i),r=r&&l(r),e(n,i=i||r.parent(),r),t.push(n,"enter",ze(o))},move:function(n,i,r,o){return i=i&&l(i),r=r&&l(r),e(n,i=i||r.parent(),r),t.push(n,"move",ze(o))},leave:function(e,n){return t.push(e,"leave",ze(n),function(){e.remove()})},addClass:function(e,n,i){return(i=ze(i)).addClass=Ue(i.addclass,n),t.push(e,"addClass",i)},removeClass:function(e,n,i){return(i=ze(i)).removeClass=Ue(i.removeClass,n),t.push(e,"removeClass",i)},setClass:function(e,n,i,r){return(r=ze(r)).addClass=Ue(r.addClass,n),r.removeClass=Ue(r.removeClass,i),t.push(e,"setClass",r)},animate:function(e,n,i,r,o){return(o=ze(o)).from=o.from?D(o.from,n):n,o.to=o.to?D(o.to,i):i,r=r||"ng-inline-animate",o.tempClasses=Ue(o.tempClasses,r),t.push(e,"animate",o)}}}]}],Ye=function(){this.$get=["$$rAF",function(t){var e=[];function n(n){e.push(n),e.length>1||t(function(){for(var t=0;t<e.length;t++)e[t]();e=[]})}return function(){var t=!1;return n(function(){t=!0}),function(e){t?e():n(e)}}}]},Qe=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function(t,e,n,i,r){function o(t){this.setHost(t);var e=n();this._doneCallbacks=[],this._tick=function(t){var n=i[0];n&&n.hidden?function(t){r(t,0,!1)}(t):e(t)},this._state=0}return o.chain=function(t,e){var n=0;!function i(){n!==t.length?t[n](function(t){!1!==t?(n++,i()):e(!1)}):e(!0)}()},o.all=function(t,e){var n=0,i=!0;function r(r){i=i&&r,++n===t.length&&e(i)}b(t,function(t){t.done(r)})},o.prototype={setHost:function(t){this.host=t||{}},done:function(t){2===this._state?t():this._doneCallbacks.push(t)},progress:S,getPromise:function(){if(!this.promise){var e=this;this.promise=t(function(t,n){e.done(function(e){!1===e?n():t()})})}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},catch:function(t){return this.getPromise().catch(t)},finally:function(t){return this.getPromise().finally(t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;0===e._state&&(e._state=1,e._tick(function(){e._resolve(t)}))},_resolve:function(t){2!==this._state&&(b(this._doneCallbacks,function(e){e(t)}),this._doneCallbacks.length=0,this._state=2)}},o}]},Je=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(t,e,n){return function(e,i){var r=i||{};r.$$prepared||(r=et(r)),r.cleanupStyles&&(r.from=r.to=null),r.from&&(e.css(r.from),r.from=null);var o,a=new n;return{start:s,end:s};function s(){return t(function(){r.addClass&&(e.addClass(r.addClass),r.addClass=null),r.removeClass&&(e.removeClass(r.removeClass),r.removeClass=null),r.to&&(e.css(r.to),r.to=null),o||a.complete(),o=!0}),a}}}]};function Ze(){this.$get=["$window","$log","$sniffer","$document",function(t,e,n,i){return new function(t,e,n,i){var r=this,o=t.location,a=t.history,s=t.setTimeout,c=t.clearTimeout,u={};r.isMock=!1;var d=0,h=[];function f(t){try{t.apply(null,at(arguments,1))}finally{if(0==--d)for(;h.length;)try{h.pop()()}catch(t){n.error(t)}}}r.$$completeOutstandingRequest=f,r.$$incOutstandingRequestCount=function(){d++},r.notifyWhenNoOutstandingRequests=function(t){0===d?t():h.push(t)};var p,g,m=o.href,v=e.find("base"),y=null,E=i.history?function(){try{return a.state}catch(t){}}:S;O(),g=p,r.url=function(e,n,s){if(N(s)&&(s=null),o!==t.location&&(o=t.location),a!==t.history&&(a=t.history),e){var l=g===s;if(m===e&&(!i.history||l))return r;var c=m&&Gn(m)===Gn(e);return m=e,g=s,!i.history||c&&l?(c||(y=e),n?o.replace(e):c?o.hash=function(t){var e=t.indexOf("#");return-1===e?"":t.substr(e)}(e):o.href=e,o.href!==e&&(y=e)):(a[n?"replaceState":"pushState"](s,"",e),O(),g=p),y&&(y=e),r}return y||o.href.replace(/%27/g,"'")},r.state=function(){return p};var C=[],T=!1;function w(){y=null,O(),D()}var I=null;function O(){nt(p=N(p=E())?null:p,I)&&(p=I),I=p}function D(){m===r.url()&&g===p||(m=r.url(),g=p,b(C,function(t){t(r.url(),p)}))}r.onUrlChange=function(e){return T||(i.history&&l(t).on("popstate",w),l(t).on("hashchange",w),T=!0),C.push(e),e},r.$$applicationDestroyed=function(){l(t).off("hashchange popstate",w)},r.$$checkUrlChange=D,r.baseHref=function(){var t=v.attr("href");return t?t.replace(/^(https?:)?\/\/[^\/]*/,""):""},r.defer=function(t,e){var n;return d++,n=s(function(){delete u[n],f(t)},e||0),u[n]=!0,n},r.defer.cancel=function(t){return!!u[t]&&(delete u[t],c(t),f(S),!0)}}(t,i,e,n)}]}function tn(){this.$get=function(){var t={};function n(n,i){if(n in t)throw e("$cacheFactory")("iid","CacheId '{0}' is already taken!",n);var r=0,o=D({},i,{id:n}),a=$t(),s=i&&i.capacity||Number.MAX_VALUE,l=$t(),c=null,u=null;return t[n]={put:function(t,e){if(!N(e))return s<Number.MAX_VALUE&&d(l[t]||(l[t]={key:t})),t in a||r++,a[t]=e,r>s&&this.remove(u.key),e},get:function(t){if(s<Number.MAX_VALUE){var e=l[t];if(!e)return;d(e)}return a[t]},remove:function(t){if(s<Number.MAX_VALUE){var e=l[t];if(!e)return;e===c&&(c=e.p),e===u&&(u=e.n),h(e.n,e.p),delete l[t]}t in a&&(delete a[t],r--)},removeAll:function(){a=$t(),r=0,l=$t(),c=u=null},destroy:function(){a=null,o=null,l=null,delete t[n]},info:function(){return D({},o,{size:r})}};function d(t){t!==c&&(u?u===t&&(u=t.n):u=t,h(t.n,t.p),h(t,c),(c=t).n=null)}function h(t,e){t!==e&&(t&&(t.p=e),e&&(e.n=t))}}return n.info=function(){var e={};return b(t,function(t,n){e[n]=t.info()}),e},n.get=function(e){return t[e]},n}}function en(){this.$get=["$cacheFactory",function(t){return t("templates")}]}var nn=e("$compile"),rn=new function(){};function on(e,n){var i={},a="Directive",c=/^\s*directive:\s*([\w\-]+)\s+(.*)$/,u=/(([\w\-]+)(?::([^;]+))?;?)/,d=function(t){var e,n={},i="ngSrc,ngSrcset,src,srcset".split(",");for(e=0;e<i.length;e++)n[i[e]]=!0;return n}(),h=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,f=/^(on[a-z]+|formaction)$/,g=$t();function m(t,e,n){var i=/^\s*([@&<]|=(\*?))(\??)\s*(\w*)\s*$/,r=$t();return b(t,function(t,o){if(t in g)r[o]=g[t];else{var a=t.match(i);if(!a)throw nn("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",e,o,t,n?"controller bindings definition":"isolate scope definition");r[o]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||o},a[4]&&(g[t]=r[o])}}),r}function v(t,e){var n={isolateScope:null,bindToController:null};if(L(t.scope)&&(!0===t.bindToController?(n.bindToController=m(t.scope,e,!0),n.isolateScope={}):n.isolateScope=m(t.scope,e,!1)),L(t.bindToController)&&(n.bindToController=m(t.bindToController,e,!0)),L(n.bindToController)){var i=t.controller,r=t.controllerAs;if(!i)throw nn("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);if(!fn(i,r))throw nn("noident","Cannot bind to controller without identifier for directive '{0}'.",e)}return n}this.directive=function t(n,r){return xt(n,"directive"),M(n)?(function(t){var e=t.charAt(0);if(!e||e!==o(e))throw nn("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw nn("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}(n),kt(r,"directiveFactory"),i.hasOwnProperty(n)||(i[n]=[],e.factory(n+a,["$injector","$exceptionHandler",function(t,e){var r=[];return b(i[n],function(i,o){try{var a=t.invoke(i);H(a)?a={compile:$(a)}:!a.compile&&a.link&&(a.compile=$(a.link)),a.priority=a.priority||0,a.index=o,a.name=a.name||n,a.require=function(t){var e=t.require||t.controller&&t.name;return!q(e)&&L(e)&&b(e,function(t,n){var i=t.match(h);t.substring(i[0].length)||(e[n]=i[0]+n)}),e}(a),a.restrict=a.restrict||"EA",a.$$moduleName=i.$$moduleName,r.push(a)}catch(t){e(t)}}),r}])),i[n].push(r)):b(n,T(t)),this},this.component=function(t,e){var n=e.controller||function(){};function i(t){function i(e){return H(e)||q(e)?function(n,i){return t.invoke(e,this,{$element:n,$attrs:i})}:e}var r=e.template||e.templateUrl?e.template:"",o={controller:n,controllerAs:fn(e.controller)||e.controllerAs||"$ctrl",template:i(r),templateUrl:i(e.templateUrl),transclude:e.transclude,scope:{},bindToController:e.bindings||{},restrict:"E",require:e.require};return b(e,function(t,e){"$"===e.charAt(0)&&(o[e]=t)}),o}return b(e,function(t,e){"$"===e.charAt(0)&&(i[e]=t,H(n)&&(n[e]=t))}),i.$inject=["$injector"],this.directive(t,i)},this.aHrefSanitizationWhitelist=function(t){return P(t)?(n.aHrefSanitizationWhitelist(t),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return P(t)?(n.imgSrcSanitizationWhitelist(t),this):n.imgSrcSanitizationWhitelist()};var y=!0;this.debugInfoEnabled=function(t){return P(t)?(y=t,this):y};var E=10;this.onChangesTtl=function(t){return arguments.length?(E=t,this):E};var C=!0;this.commentDirectivesEnabled=function(t){return arguments.length?(C=t,this):C};var w=!0;this.cssClassDirectivesEnabled=function(t){return arguments.length?(w=t,this):w},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(e,n,g,m,T,I,O,_,k,R){var $,A=/^\w/,F=t.document.createElement("div"),j=C,B=w,V=E;function U(){try{if(!--V)throw $=void 0,nn("infchng","{0} $onChanges() iterations reached. Aborting!\n",E);O.$apply(function(){for(var t=[],e=0,n=$.length;e<n;++e)try{$[e]()}catch(e){t.push(e)}if($=void 0,t.length)throw t})}finally{V++}}function X(t,e){if(e){var n,i,r,o=Object.keys(e);for(n=0,i=o.length;n<i;n++)this[r=o[n]]=e[r]}else this.$attr={};this.$$element=t}function G(t,e){try{t.addClass(e)}catch(t){}}X.prototype={$normalize:ln,$addClass:function(t){t&&t.length>0&&k.addClass(this.$$element,t)},$removeClass:function(t){t&&t.length>0&&k.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=cn(t,e);n&&n.length&&k.addClass(this.$$element,n);var i=cn(e,t);i&&i.length&&k.removeClass(this.$$element,i)},$set:function(t,e,n,i){var r,o=De(this.$$element[0],t),a=Oe[t],s=t;if(o?(this.$$element.prop(t,e),i=o):a&&(this[a]=e,s=a),this[t]=e,i?this.$attr[t]=i:(i=this.$attr[t])||(this.$attr[t]=i=Dt(t,"-")),"a"===(r=Z(this.$$element))&&("href"===t||"xlinkHref"===t)||"img"===r&&"src"===t)this[t]=e=R(e,"src"===t);else if("img"===r&&"srcset"===t&&P(e)){for(var l="",c=Y(e),u=/\s/.test(c)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,d=c.split(u),h=Math.floor(d.length/2),f=0;f<h;f++){var p=2*f;l+=R(Y(d[p]),!0),l+=" "+Y(d[p+1])}var m=Y(d[2*f]).split(/\s/);l+=R(Y(m[0]),!0),2===m.length&&(l+=" "+Y(m[1])),this[t]=e=l}!1!==n&&(null===e||N(e)?this.$$element.removeAttr(i):A.test(i)?this.$$element.attr(i,e):function(t,e,n){F.innerHTML="<span "+e+">";var i=F.firstChild.attributes,r=i[0];i.removeNamedItem(r.name),r.value=n,t.attributes.setNamedItem(r)}(this.$$element[0],i,e));var v=this.$$observers;v&&b(v[s],function(t){try{t(e)}catch(t){g(t)}})},$observe:function(t,e){var n=this,i=n.$$observers||(n.$$observers=$t()),r=i[t]||(i[t]=[]);return r.push(e),O.$evalAsync(function(){r.$$inter||!n.hasOwnProperty(t)||N(n[t])||e(n[t])}),function(){tt(r,e)}}};var Q=n.startSymbol(),J=n.endSymbol(),et="{{"===Q&&"}}"===J?K:function(t){return t.replace(/\{\{/g,Q).replace(/}}/g,J)},it=/^ngAttr[A-Z]/,rt=/^(.+)Start$/;return ot.$$addBindingInfo=y?function(t,e){var n=t.data("$binding")||[];q(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:S,ot.$$addBindingClass=y?function(t){G(t,"ng-binding")}:S,ot.$$addScopeInfo=y?function(t,e,n,i){var r=n?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(r,e)}:S,ot.$$addScopeClass=y?function(t,e){G(t,e?"ng-isolate-scope":"ng-scope")}:S,ot.$$createComment=function(e,n){var i="";return y&&(i=" "+(e||"")+": ",n&&(i+=n+" ")),t.document.createComment(i)},ot;function ot(e,n,i,r,o){e instanceof l||(e=l(e));for(var a=/\S+/,s=0,c=e.length;s<c;s++){var u=e[s];u.nodeType===Nt&&u.nodeValue.match(a)&&oe(u,e[s]=t.document.createElement("span"))}var d=lt(e,n,e,i,r,o);ot.$$addScopeClass(e);var h=null;return function(t,n,i){kt(t,"scope"),o&&o.needsNewScope&&(t=t.$parent.$new());var r,a,s,c=(i=i||{}).parentBoundTranscludeFn,u=i.transcludeControllers,f=i.futureParentElement;if(c&&c.$$boundTransclude&&(c=c.$$boundTransclude),h||(a=(r=f)&&r[0],h=a&&"foreignobject"!==Z(a)&&p.call(a).match(/SVG/)?"svg":"html"),s="html"!==h?l(It(h,l("<div>").append(e).html())):n?Te.clone.call(e):e,u)for(var g in u)s.data("$"+g+"Controller",u[g].instance);return ot.$$addScopeInfo(s,t),n&&n(s,t),d&&d(t,s,s,c),s}}function lt(t,e,n,i,r,o){for(var a,s,c,u,d,h,f,p=[],g=0;g<t.length;g++)a=new X,(c=(s=ut(t[g],[],a,0===g?i:void 0,r)).length?gt(s,t[g],a,e,n,null,[],[],o):null)&&c.scope&&ot.$$addScopeClass(a.$$element),d=c&&c.terminal||!(u=t[g].childNodes)||!u.length?null:lt(u,c?(c.transcludeOnThisElement||!c.templateOnThisElement)&&c.transclude:e),(c||d)&&(p.push(g,c,d),h=!0,f=f||c),o=null;return h?function(t,n,i,r){var o,a,s,c,u,d,h,g;if(f){var m=n.length;for(g=new Array(m),u=0;u<p.length;u+=3)g[h=p[u]]=n[h]}else g=n;for(u=0,d=p.length;u<d;)s=g[p[u++]],o=p[u++],a=p[u++],o?(o.scope?(c=t.$new(),ot.$$addScopeInfo(l(s),c)):c=t,o(a,c,s,i,o.transcludeOnThisElement?ct(t,o.transclude,r):!o.templateOnThisElement&&r?r:!r&&e?ct(t,e):null)):a&&a(t,s.childNodes,void 0,r)}:null}function ct(t,e,n){function i(i,r,o,a,s){return i||((i=t.$new(!1,s)).$$transcluded=!0),e(i,r,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})}var r=i.$$slots=$t();for(var o in e.$$slots)e.$$slots[o]?r[o]=ct(t,e.$$slots[o],n):r[o]=null;return i}function ut(t,e,i,r,o){var a,l,d,h=t.nodeType,f=i.$attr;switch(h){case At:yt(e,ln(l=Z(t)),"E",r,o);for(var p,g,m,v,y,E,b=t.attributes,C=0,T=b&&b.length;C<T;C++){var w=!1,I=!1;g=(p=b[C]).name,y=Y(p.value),v=ln(g),(E=it.test(v))&&(g=g.replace(sn,"").substr(8).replace(/_(.)/g,function(t,e){return e.toUpperCase()}));var O=v.match(rt);O&&Et(O[1])&&(w=g,I=g.substr(0,g.length-5)+"end",g=g.substr(0,g.length-6)),f[m=ln(g.toLowerCase())]=g,!E&&i.hasOwnProperty(m)||(i[m]=y,De(t,m)&&(i[m]=!0)),Ot(t,e,y,m,E),yt(e,m,"A",r,o,w,I)}if("input"===l&&"hidden"===t.getAttribute("type")&&t.setAttribute("autocomplete","off"),!B)break;if(L(d=t.className)&&(d=d.animVal),M(d)&&""!==d)for(;a=u.exec(d);)yt(e,m=ln(a[2]),"C",r,o)&&(i[m]=Y(a[3])),d=d.substr(a.index+a[0].length);break;case Nt:if(11===s)for(;t.parentNode&&t.nextSibling&&t.nextSibling.nodeType===Nt;)t.nodeValue=t.nodeValue+t.nextSibling.nodeValue,t.parentNode.removeChild(t.nextSibling);!function(t,e){var i=n(e,!0);i&&t.push({priority:0,compile:function(t){var e=t.parent(),n=!!e.length;return n&&ot.$$addBindingClass(e),function(t,e){var r=e.parent();n||ot.$$addBindingClass(r),ot.$$addBindingInfo(r,i.expressions),t.$watch(i,function(t){e[0].nodeValue=t})}}})}(e,t.nodeValue);break;case Pt:if(!j)break;!function(t,e,n,i,r){try{var o=c.exec(t.nodeValue);if(o){var a=ln(o[1]);yt(e,a,"M",i,r)&&(n[a]=Y(o[2]))}}catch(t){}}(t,e,i,r,o)}return e.sort(Tt),e}function dt(t,e,n){var i=[],r=0;if(e&&t.hasAttribute&&t.hasAttribute(e))do{if(!t)throw nn("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n);t.nodeType===At&&(t.hasAttribute(e)&&r++,t.hasAttribute(n)&&r--),i.push(t),t=t.nextSibling}while(r>0);else i.push(t);return l(i)}function ht(t,e,n){return function(i,r,o,a,s){return r=dt(r[0],e,n),t(i,r,o,a,s)}}function ft(t,e,n,i,r,o){var a;return t?ot(e,n,i,r,o):function(){return a||(a=ot(e,n,i,r,o),e=n=o=null),a.apply(this,arguments)}}function gt(t,e,n,i,r,o,a,s,c){c=c||{};for(var u,d,h,f,p,m=-Number.MAX_VALUE,v=c.newScopeDirective,y=c.controllerDirectives,E=c.newIsolateScopeDirective,C=c.templateDirective,T=c.nonTlbTranscludeDirective,w=!1,O=!1,_=c.hasElementTranscludeDirective,k=n.$$element=l(e),R=o,x=i,S=!1,K=!1,$=0,A=t.length;$<A;$++){var P=(u=t[$]).$$start,F=u.$$end;if(P&&(k=dt(e,P,F)),h=void 0,m>u.priority)break;if((p=u.scope)&&(u.templateUrl||(L(p)?(wt("new/isolated scope",E||v,u,k),E=u):wt("new/isolated scope",E,u,k)),v=v||u),d=u.name,!S&&(u.replace&&(u.templateUrl||u.template)||u.transclude&&!u.$$tlb)){for(var M,j=$+1;M=t[j++];)if(M.transclude&&!M.$$tlb||M.replace&&(M.templateUrl||M.template)){K=!0;break}S=!0}if(!u.templateUrl&&u.controller&&(p=u.controller,y=y||$t(),wt("'"+d+"' controller",y[d],u,k),y[d]=u),p=u.transclude)if(w=!0,u.$$tlb||(wt("transclusion",T,u,k),T=u),"element"===p)_=!0,m=u.priority,h=k,k=n.$$element=l(ot.$$createComment(d,n[d])),e=k[0],_t(r,at(h),e),h[0].$$parentNode=h[0].parentNode,x=ft(K,h,i,m,R&&R.name,{nonTlbTranscludeDirective:T});else{var B=$t();if(h=l(le(e)).contents(),L(p)){h=[];var V=$t(),U=$t();for(var W in b(p,function(t,e){var n="?"===t.charAt(0);t=n?t.substring(1):t,V[t]=e,B[e]=null,U[e]=n}),b(k.contents(),function(t){var e=V[ln(Z(t))];e?(U[e]=!0,B[e]=B[e]||[],B[e].push(t)):h.push(t)}),b(U,function(t,e){if(!t)throw nn("reqslot","Required transclusion slot `{0}` was not filled.",e)}),B)B[W]&&(B[W]=ft(K,B[W],i))}k.empty(),(x=ft(K,h,i,void 0,void 0,{needsNewScope:u.$$isolateScope||u.$$newScope})).$$slots=B}if(u.template)if(O=!0,wt("template",C,u,k),C=u,p=H(u.template)?u.template(k,n):u.template,p=et(p),u.replace){if(R=u,h=ne(p)?[]:un(It(u.templateNamespace,Y(p))),e=h[0],1!==h.length||e.nodeType!==At)throw nn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",d,"");_t(r,k,e);var G={$attr:{}},Q=ut(e,[],G),J=t.splice($+1,t.length-($+1));(E||v)&&vt(Q,E,v),t=t.concat(Q).concat(J),bt(n,G),A=t.length}else k.html(p);if(u.templateUrl)O=!0,wt("template",C,u,k),C=u,u.replace&&(R=u),it=Ct(t.splice($,t.length-$),k,n,r,w&&x,a,s,{controllerDirectives:y,newScopeDirective:v!==u&&v,newIsolateScopeDirective:E,templateDirective:C,nonTlbTranscludeDirective:T}),A=t.length;else if(u.compile)try{f=u.compile(k,n,x);var tt=u.$$originalDirective||u;H(f)?nt(null,st(tt,f),P,F):f&&nt(st(tt,f.pre),st(tt,f.post),P,F)}catch(t){g(t,pt(k))}u.terminal&&(it.terminal=!0,m=Math.max(m,u.priority))}return it.scope=v&&!0===v.scope,it.transcludeOnThisElement=w,it.templateOnThisElement=O,it.transclude=x,c.hasElementTranscludeDirective=_,it;function nt(t,e,n,i){t&&(n&&(t=ht(t,n,i)),t.require=u.require,t.directiveName=d,(E===u||u.$$isolateScope)&&(t=Rt(t,{isolateScope:!0})),a.push(t)),e&&(n&&(e=ht(e,n,i)),e.require=u.require,e.directiveName=d,(E===u||u.$$isolateScope)&&(e=Rt(e,{isolateScope:!0})),s.push(e))}function it(t,i,r,o,c){var u,d,h,f,p,m,T,w,O,k;for(var R in e===r?(O=n,w=n.$$element):O=new X(w=l(r),n),p=i,E?f=i.$new(!0):v&&(p=i.$parent),c&&((T=function(t,e,n,i){var r;if(z(t)||(i=n,n=e,e=t,t=void 0),_&&(r=m),n||(n=_?w.parent():w),!i)return c(t,e,r,n,A);var o=c.$$slots[i];if(o)return o(t,e,r,n,A);if(N(o))throw nn("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',i,pt(w))}).$$boundTransclude=c,T.isSlotFilled=function(t){return!!c.$$slots[t]}),y&&(m=function(t,e,n,i,r,o,a){var s=$t();for(var l in i){var c=i[l],u={$scope:c===a||c.$$isolateScope?r:o,$element:t,$attrs:e,$transclude:n},d=c.controller;"@"===d&&(d=e[c.name]);var h=I(d,u,!0,c.controllerAs);s[c.name]=h,t.data("$"+c.name+"Controller",h.instance)}return s}(w,O,T,y,f,i,E)),E&&(ot.$$addScopeInfo(w,f,!0,!(C&&(C===E||C===E.$$originalDirective))),ot.$$addScopeClass(w,!0),f.$$isolateBindings=E.$$isolateBindings,(k=St(i,O,f,f.$$isolateBindings,E)).removeWatches&&f.$on("$destroy",k.removeWatches)),m){var x=y[R],S=m[R],K=x.$$bindings.bindToController;S.identifier&&K?S.bindingInfo=St(p,O,S.instance,K,x):S.bindingInfo={};var $=S();$!==S.instance&&(S.instance=$,w.data("$"+x.name+"Controller",$),S.bindingInfo.removeWatches&&S.bindingInfo.removeWatches(),S.bindingInfo=St(p,O,S.instance,K,x))}for(b(y,function(t,e){var n=t.require;t.bindToController&&!q(n)&&L(n)&&D(m[e].instance,mt(e,n,w,m))}),b(m,function(t){var e=t.instance;if(H(e.$onChanges))try{e.$onChanges(t.bindingInfo.initialChanges)}catch(t){g(t)}if(H(e.$onInit))try{e.$onInit()}catch(t){g(t)}H(e.$doCheck)&&(p.$watch(function(){e.$doCheck()}),e.$doCheck()),H(e.$onDestroy)&&p.$on("$destroy",function(){e.$onDestroy()})}),u=0,d=a.length;u<d;u++)xt(h=a[u],h.isolateScope?f:i,w,O,h.require&&mt(h.directiveName,h.require,w,m),T);var A=i;for(E&&(E.template||null===E.templateUrl)&&(A=f),t&&t(A,r.childNodes,void 0,c),u=s.length-1;u>=0;u--)xt(h=s[u],h.isolateScope?f:i,w,O,h.require&&mt(h.directiveName,h.require,w,m),T);b(m,function(t){var e=t.instance;H(e.$postLink)&&e.$postLink()})}}function mt(t,e,n,i){var r;if(M(e)){var o=e.match(h),a=e.substring(o[0].length),s=o[1]||o[3],l="?"===o[2];if("^^"===s?n=n.parent():r=(r=i&&i[a])&&r.instance,!r){var c="$"+a+"Controller";r=s?n.inheritedData(c):n.data(c)}if(!r&&!l)throw nn("ctreq","Controller '{0}', required by directive '{1}', can't be found!",a,t)}else if(q(e)){r=[];for(var u=0,d=e.length;u<d;u++)r[u]=mt(t,e[u],n,i)}else L(e)&&(r={},b(e,function(e,o){r[o]=mt(t,e,n,i)}));return r||null}function vt(t,e,n){for(var i=0,r=t.length;i<r;i++)t[i]=x(t[i],{$$isolateScope:e,$$newScope:n})}function yt(t,n,r,o,s,l,c){if(n===s)return null;var u=null;if(i.hasOwnProperty(n))for(var d,h=e.get(n+a),f=0,p=h.length;f<p;f++)try{if(d=h[f],(N(o)||o>d.priority)&&-1!==d.restrict.indexOf(r)){if(l&&(d=x(d,{$$start:l,$$end:c})),!d.$$bindings){var m=d.$$bindings=v(d,d.name);L(m.isolateScope)&&(d.$$isolateBindings=m.isolateScope)}t.push(d),u=d}}catch(t){g(t)}return u}function Et(t){if(i.hasOwnProperty(t))for(var n=e.get(t+a),r=0,o=n.length;r<o;r++)if(n[r].multiElement)return!0;return!1}function bt(t,e){var n=e.$attr,i=t.$attr;b(t,function(i,r){"$"!==r.charAt(0)&&(e[r]&&e[r]!==i&&(i+=("style"===r?";":" ")+e[r]),t.$set(r,i,!0,n[r]))}),b(e,function(e,r){t.hasOwnProperty(r)||"$"===r.charAt(0)||(t[r]=e,"class"!==r&&"style"!==r&&(i[r]=n[r]))})}function Ct(t,e,n,i,r,o,a,s){var c,u,d=[],h=e[0],f=t.shift(),p=x(f,{templateUrl:null,transclude:null,replace:null,$$originalDirective:f}),g=H(f.templateUrl)?f.templateUrl(e,n):f.templateUrl,v=f.templateNamespace;return e.empty(),m(g).then(function(m){var y,E,C,T;if(m=et(m),f.replace){if(C=ne(m)?[]:un(It(v,Y(m))),y=C[0],1!==C.length||y.nodeType!==At)throw nn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",f.name,g);E={$attr:{}},_t(i,e,y);var w=ut(y,[],E);L(f.scope)&&vt(w,!0),t=w.concat(t),bt(n,E)}else y=h,e.html(m);for(t.unshift(p),c=gt(t,y,n,r,e,f,o,a,s),b(i,function(t,n){t===y&&(i[n]=e[0])}),u=lt(e[0].childNodes,r);d.length;){var I=d.shift(),O=d.shift(),D=d.shift(),_=d.shift(),k=e[0];if(!I.$$destroyed){if(O!==h){var R=O.className;s.hasElementTranscludeDirective&&f.replace||(k=le(y)),_t(D,l(O),k),G(l(k),R)}T=c.transcludeOnThisElement?ct(I,c.transclude,_):_,c(u,I,k,i,T)}}d=null}),function(t,e,n,i,r){var o=r;e.$$destroyed||(d?d.push(e,n,i,o):(c.transcludeOnThisElement&&(o=ct(e,c.transclude,r)),c(u,e,n,i,o)))}}function Tt(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function wt(t,e,n,i){function r(t){return t?" (module: "+t+")":""}if(e)throw nn("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,r(e.$$moduleName),n.name,r(n.$$moduleName),t,pt(i))}function It(e,n){switch(e=o(e||"html")){case"svg":case"math":var i=t.document.createElement("div");return i.innerHTML="<"+e+">"+n+"</"+e+">",i.childNodes[0].childNodes;default:return n}}function Ot(t,e,i,r,o){var a=function(t,e){if("srcdoc"===e)return _.HTML;var n=Z(t);if("src"===e||"ngSrc"===e){if(-1===["img","video","audio","source","track"].indexOf(n))return _.RESOURCE_URL}else if("xlinkHref"===e||"form"===n&&"action"===e)return _.RESOURCE_URL}(t,r);o=d[r]||o;var s=n(i,!0,a,o);if(s){if("multiple"===r&&"select"===Z(t))throw nn("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",pt(t));e.push({priority:100,compile:function(){return{pre:function(t,e,l){var c=l.$$observers||(l.$$observers=$t());if(f.test(r))throw nn("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var u=l[r];u!==i&&(s=u&&n(u,!0,a,o),i=u),s&&(l[r]=s(t),(c[r]||(c[r]=[])).$$inter=!0,(l.$$observers&&l.$$observers[r].$$scope||t).$watch(s,function(t,e){"class"===r&&t!==e?l.$updateClass(t,e):l.$set(r,t)}))}}}})}}function _t(e,n,i){var r,o,a=n[0],s=n.length,c=a.parentNode;if(e)for(r=0,o=e.length;r<o;r++)if(e[r]===a){e[r++]=i;for(var u=r,d=u+s-1,h=e.length;u<h;u++,d++)d<h?e[u]=e[d]:delete e[u];e.length-=s-1,e.context===a&&(e.context=i);break}c&&c.replaceChild(i,a);var f=t.document.createDocumentFragment();for(r=0;r<s;r++)f.appendChild(n[r]);for(l.hasData(a)&&(l.data(i,l.data(a)),l(a).off("$destroy")),l.cleanData(f.querySelectorAll("*")),r=1;r<s;r++)delete n[r];n[0]=i,n.length=1}function Rt(t,e){return D(function(){return t.apply(null,arguments)},t,e)}function xt(t,e,n,i,r,o){try{t(e,n,i,r,o)}catch(t){g(t,pt(n))}}function St(t,e,i,o,a){var s,l=[],c={};function u(e,n,r){H(i.$onChanges)&&n!==r&&($||(t.$$postDigest(U),$=[]),s||(s={},$.push(d)),s[e]&&(r=s[e].previousValue),s[e]=new an(r,n))}function d(){i.$onChanges(s),s=void 0}return b(o,function(o,s){var d,h,f,p,g,m=o.attrName,v=o.optional;switch(o.mode){case"@":v||r.call(e,m)||(i[s]=e[m]=void 0),e.$observe(m,function(t){if(M(t)||W(t)){var e=i[s];u(s,t,e),i[s]=t}}),e.$$observers[m].$$scope=t,M(d=e[m])?i[s]=n(d)(t):W(d)&&(i[s]=d),c[s]=new an(rn,i[s]);break;case"=":if(!r.call(e,m)){if(v)break;e[m]=void 0}if(v&&!e[m])break;h=T(e[m]),p=h.literal?nt:function(t,e){return t===e||t!=t&&e!=e},f=h.assign||function(){throw d=i[s]=h(t),nn("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",e[m],m,a.name)},d=i[s]=h(t);var y=function(e){return p(e,i[s])||(p(e,d)?f(t,e=i[s]):i[s]=e),d=e};y.$stateful=!0,g=o.collection?t.$watchCollection(e[m],y):t.$watch(T(e[m],y),null,h.literal),l.push(g);break;case"<":if(!r.call(e,m)){if(v)break;e[m]=void 0}if(v&&!e[m])break;h=T(e[m]);var E=i[s]=h(t);c[s]=new an(rn,i[s]),g=t.$watch(h,function(t,e){if(e===t){if(e===E)return;e=E}u(s,t,e),i[s]=t},h.literal),l.push(g);break;case"&":if((h=e.hasOwnProperty(m)?T(e[m]):S)===S&&v)break;i[s]=function(e){return h(t,e)}}}),{initialChanges:c,removeWatches:l.length&&function(){for(var t=0,e=l.length;t<e;++t)l[t]()}}}}]}function an(t,e){this.previousValue=t,this.currentValue=e}on.$inject=["$provide","$$sanitizeUriProvider"],an.prototype.isFirstChange=function(){return this.previousValue===rn};var sn=/^((?:x|data)[:\-_])/i;function ln(t){return Yt(t.replace(sn,""))}function cn(t,e){var n="",i=t.split(/\s+/),r=e.split(/\s+/);t:for(var o=0;o<i.length;o++){for(var a=i[o],s=0;s<r.length;s++)if(a===r[s])continue t;n+=(n.length>0?" ":"")+a}return n}function un(t){var e=(t=l(t)).length;if(e<=1)return t;for(;e--;)t[e].nodeType===Pt&&h.call(t,e,1);return t}var dn=e("$controller"),hn=/^(\S+)(\s+as\s+([\w$]+))?$/;function fn(t,e){if(e&&M(e))return e;if(M(t)){var n=hn.exec(t);if(n)return n[3]}}function pn(){var t={},n=!1;this.has=function(e){return t.hasOwnProperty(e)},this.register=function(e,n){xt(e,"controller"),L(e)?D(t,e):t[e]=n},this.allowGlobals=function(){n=!0},this.$get=["$injector","$window",function(i,r){return function(e,a,s,l){var c,u,d,h;if(s=!0===s,l&&M(l)&&(h=l),M(e)){if(!(u=e.match(hn)))throw dn("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",e);d=u[1],h=h||u[3],Rt(e=t.hasOwnProperty(d)?t[d]:St(a.$scope,d,!0)||(n?St(r,d,!0):void 0),d,!0)}if(s){var f=(q(e)?e[e.length-1]:e).prototype;return c=Object.create(f||null),h&&o(a,h,c,d||e.name),D(function(){var t=i.invoke(e,c,a,d);return t!==c&&(L(t)||H(t))&&(c=t,h&&o(a,h,c,d||e.name)),c},{instance:c,identifier:h})}return c=i.instantiate(e,a,d),h&&o(a,h,c,d||e.name),c};function o(t,n,i,r){if(!t||!L(t.$scope))throw e("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",r,n);t.$scope[n]=i}}]}function gn(){this.$get=["$window",function(t){return l(t.document)}]}function mn(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}var vn=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof l&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},yn="application/json",En={"Content-Type":yn+";charset=utf-8"},bn=/^\[|^\{(?!\{)/,Cn={"[":/]$/,"{":/}$/},Tn=/^\)\]\}',?\n/,wn=e("$http"),In=function(t){return function(){throw wn("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",t)}};function On(t){return L(t)?B(t)?t.toISOString():ct(t):t}function Dn(){this.$get=function(){return function(t){if(!t)return"";var e=[];return C(t,function(t,n){null===t||N(t)||(q(t)?b(t,function(t){e.push(Et(n)+"="+Et(On(t)))}):e.push(Et(n)+"="+Et(On(t))))}),e.join("&")}}}function _n(){this.$get=function(){return function(t){if(!t)return"";var e=[];return function t(n,i,r){null===n||N(n)||(q(n)?b(n,function(e,n){t(e,i+"["+(L(e)?n:"")+"]")}):L(n)&&!B(n)?C(n,function(e,n){t(e,i+(r?"":"[")+n+(r?"":"]"))}):e.push(Et(i)+"="+Et(On(n))))}(t,"",!0),e.join("&")}}}function kn(t,e){if(M(t)){var n=t.replace(Tn,"").trim();if(n){var i=e("Content-Type");(i&&0===i.indexOf(yn)||(o=(r=n).match(bn))&&Cn[o[0]].test(r))&&(t=ut(n))}}var r,o;return t}function Rn(t){var e,n=$t();function i(t,e){t&&(n[t]=n[t]?n[t]+", "+e:e)}return M(t)?b(t.split("\n"),function(t){e=t.indexOf(":"),i(o(Y(t.substr(0,e))),Y(t.substr(e+1)))}):L(t)&&b(t,function(t,e){i(o(e),Y(t))}),n}function xn(t){var e;return function(n){if(e||(e=Rn(t)),n){var i=e[o(n)];return void 0===i&&(i=null),i}return e}}function Sn(t,e,n,i){return H(i)?i(t,e,n):(b(i,function(i){t=i(t,e,n)}),t)}function Kn(t){return 200<=t&&t<300}function $n(){var t=this.defaults={transformResponse:[kn],transformRequest:[function(t){return!L(t)||(e=t,"[object File]"===p.call(e))||function(t){return"[object Blob]"===p.call(t)}(t)||function(t){return"[object FormData]"===p.call(t)}(t)?t:ct(t);var e}],headers:{common:{Accept:"application/json, text/plain, */*"},post:Mt(En),put:Mt(En),patch:Mt(En)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},n=!1;this.useApplyAsync=function(t){return P(t)?(n=!!t,this):n};var i=!0;this.useLegacyPromiseExtensions=function(t){return P(t)?(i=!!t,this):i};var r=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(s,l,c,u,d,h){var f=c("$http");t.paramSerializer=M(t.paramSerializer)?h.get(t.paramSerializer):t.paramSerializer;var p=[];function g(r){if(!L(r))throw e("$http")("badreq","Http request configuration must be an object.  Received: {0}",r);if(!M(r.url))throw e("$http")("badreq","Http request configuration url must be a string.  Received: {0}",r.url);var c=D({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer},r);c.headers=function(e){var n,i,r,a=t.headers,s=D({},e.headers);a=D({},a.common,a[o(e.method)]);t:for(n in a){for(r in i=o(n),s)if(o(r)===i)continue t;s[n]=a[n]}return function(t,e){var n,i={};return b(t,function(t,r){H(t)?null!=(n=t(e))&&(i[r]=n):i[r]=t}),i}(s,Mt(e))}(r),c.method=a(c.method),c.paramSerializer=M(c.paramSerializer)?h.get(c.paramSerializer):c.paramSerializer;var m=[],v=[],y=d.when(c);return b(p,function(t){(t.request||t.requestError)&&m.unshift(t.request,t.requestError),(t.response||t.responseError)&&v.push(t.response,t.responseError)}),y=E(y=(y=E(y,m)).then(function(e){var i=e.headers,r=Sn(e.data,xn(i),void 0,e.transformRequest);return N(r)&&b(i,function(t,e){"content-type"===o(e)&&delete i[e]}),N(e.withCredentials)&&!N(t.withCredentials)&&(e.withCredentials=t.withCredentials),function(e,i){var r,o,a=d.defer(),c=a.promise,h=e.headers,p=function(t,e){return e.length>0&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}(e.url,e.paramSerializer(e.params));if(g.pendingRequests.push(e),c.then(C,C),!e.cache&&!t.cache||!1===e.cache||"GET"!==e.method&&"JSONP"!==e.method||(r=L(e.cache)?e.cache:L(t.cache)?t.cache:f),r&&(P(o=r.get(p))?X(o)?o.then(E,E):q(o)?y(o[1],o[0],Mt(o[2]),o[3]):y(o,200,{},"OK"):r.put(p,c)),N(o)){var m=ur(e.url)?l()[e.xsrfCookieName||t.xsrfCookieName]:void 0;m&&(h[e.xsrfHeaderName||t.xsrfHeaderName]=m),s(e.method,p,i,function(t,e,i,o){function a(){y(e,t,i,o)}r&&(Kn(t)?r.put(p,[t,e,Rn(i),o]):r.remove(p)),n?u.$applyAsync(a):(a(),u.$$phase||u.$apply())},h,e.timeout,e.withCredentials,e.responseType,v(e.eventHandlers),v(e.uploadEventHandlers))}return c;function v(t){if(t){var e={};return b(t,function(t,i){e[i]=function(e){function i(){t(e)}n?u.$applyAsync(i):u.$$phase?i():u.$apply(i)}}),e}}function y(t,n,i,r){(Kn(n=n>=-1?n:0)?a.resolve:a.reject)({data:t,status:n,headers:xn(i),config:e,statusText:r})}function E(t){y(t.data,t.status,Mt(t.headers()),t.statusText)}function C(){var t=g.pendingRequests.indexOf(e);-1!==t&&g.pendingRequests.splice(t,1)}}(e,r).then(C,C)}),v),i?(y.success=function(t){return Rt(t,"fn"),y.then(function(e){t(e.data,e.status,e.headers,c)}),y},y.error=function(t){return Rt(t,"fn"),y.then(null,function(e){t(e.data,e.status,e.headers,c)}),y}):(y.success=In("success"),y.error=In("error")),y;function E(t,e){for(var n=0,i=e.length;n<i;){var r=e[n++],o=e[n++];t=t.then(r,o)}return e.length=0,t}function C(t){var e=D({},t);return e.data=Sn(t.data,t.headers,t.status,c.transformResponse),Kn(t.status)?e:d.reject(e)}}return b(r,function(t){p.unshift(M(t)?h.get(t):h.invoke(t))}),g.pendingRequests=[],function(t){b(arguments,function(t){g[t]=function(e,n){return g(D({},n||{},{method:t,url:e}))}})}("get","delete","head","jsonp"),function(t){b(arguments,function(t){g[t]=function(e,n,i){return g(D({},i||{},{method:t,url:e,data:n}))}})}("post","put","patch"),g.defaults=t,g}]}function An(){this.$get=function(){return function(){return new t.XMLHttpRequest}}}function Nn(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(t,e,n,i){return function(t,e,n,i,r){return function(a,s,l,c,u,d,h,f,p,g){if(t.$$incOutstandingRequestCount(),s=s||t.url(),"jsonp"===o(a))var m=i.createCallback(s),v=function(t,e,n){t=t.replace("JSON_CALLBACK",e);var o=r.createElement("script"),a=null;return o.type="text/javascript",o.src=t,o.async=!0,a=function(t){Ut(o,"load",a),Ut(o,"error",a),r.body.removeChild(o),o=null;var s=-1,l="unknown";t&&("load"!==t.type||i.wasCalled(e)||(t={type:"error"}),l=t.type,s="error"===t.type?404:200),n&&n(s,l)},Vt(o,"load",a),Vt(o,"error",a),r.body.appendChild(o),a}(s,m,function(t,e){var n=200===t&&i.getResponse(m);w(c,t,n,"",e),i.removeCallback(m)});else{var y=e(a,s);y.open(a,s,!0),b(u,function(t,e){P(t)&&y.setRequestHeader(e,t)}),y.onload=function(){var t=y.statusText||"",e="response"in y?y.response:y.responseText,n=1223===y.status?204:y.status;0===n&&(n=e?200:"file"===cr(s).protocol?404:0),w(c,n,e,y.getAllResponseHeaders(),t)};var E=function(){w(c,-1,null,null,"")};if(y.onerror=E,y.onabort=E,y.ontimeout=E,b(p,function(t,e){y.addEventListener(e,t)}),b(g,function(t,e){y.upload.addEventListener(e,t)}),h&&(y.withCredentials=!0),f)try{y.responseType=f}catch(t){if("json"!==f)throw t}y.send(N(l)?null:l)}if(d>0)var C=n(T,d);else X(d)&&d.then(T);function T(){v&&v(),y&&y.abort()}function w(e,i,r,o,a){P(C)&&n.cancel(C),v=y=null,e(i,r,o,a),t.$$completeOutstandingRequest(S)}}}(t,i,t.defer,e,n[0])}]}var Pn=v.$interpolateMinErr=e("$interpolate");function Ln(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(n,i,r){var o=t.length,a=e.length,s=new RegExp(t.replace(/./g,c),"g"),l=new RegExp(e.replace(/./g,c),"g");function c(t){return"\\\\\\"+t}function u(n){return n.replace(s,t).replace(l,e)}function d(t,e,n,i){var r=t.$watch(function(t){return r(),i(t)},e,n);return r}function h(s,l,c,h){var f;if(!s.length||-1===s.indexOf(t))return l||((f=$(u(s))).exp=s,f.expressions=[],f.$$watchDelegate=d),f;h=!!h;for(var p,g,m,v=0,y=[],E=[],b=s.length,C=[],T=[];v<b;){if(-1===(p=s.indexOf(t,v))||-1===(g=s.indexOf(e,p+o))){v!==b&&C.push(u(s.substring(v)));break}v!==p&&C.push(u(s.substring(v,p))),m=s.substring(p+o,g),y.push(m),E.push(n(m,O)),v=g+a,T.push(C.length),C.push("")}if(c&&C.length>1&&Pn.throwNoconcat(s),!l||y.length){var w=function(t){for(var e=0,n=y.length;e<n;e++){if(h&&N(t[e]))return;C[T[e]]=t[e]}return C.join("")},I=function(t){return c?r.getTrusted(c,t):r.valueOf(t)};return D(function(t){var e=0,n=y.length,r=new Array(n);try{for(;e<n;e++)r[e]=E[e](t);return w(r)}catch(t){i(Pn.interr(s,t))}},{exp:s,expressions:y,$$watchDelegate:function(t,e){var n;return t.$watchGroup(E,function(i,r){var o=w(i);H(e)&&e.call(this,o,i!==r?n:o,t),n=o})}})}function O(t){try{return t=I(t),h&&!P(t)?t:function(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=ct(t)}return t}(t)}catch(t){i(Pn.interr(s,t))}}}return h.startSymbol=function(){return t},h.endSymbol=function(){return e},h}]}function Fn(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(t,e,n,i,r){var o={};function a(a,s,l,c){var u=arguments.length>4,d=u?at(arguments,4):[],h=e.setInterval,f=e.clearInterval,p=0,g=P(c)&&!c,m=(g?i:n).defer(),v=m.promise;return l=P(l)?l:0,v.$$intervalId=h(function(){g?r.defer(y):t.$evalAsync(y),m.notify(p++),l>0&&p>=l&&(m.resolve(p),f(v.$$intervalId),delete o[v.$$intervalId]),g||t.$apply()},s),o[v.$$intervalId]=m,v;function y(){u?a.apply(null,d):a(p)}}return a.cancel=function(t){return!!(t&&t.$$intervalId in o)&&(o[t.$$intervalId].reject("canceled"),e.clearInterval(t.$$intervalId),delete o[t.$$intervalId],!0)},a}]}Pn.throwNoconcat=function(t){throw Pn("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},Pn.interr=function(t,e){return Pn("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var Mn=function(){this.$get=["$window",function(t){var e=t.angular.callbacks,n={};return{createCallback:function(t){var i="_"+(e.$$counter++).toString(36),r="angular.callbacks."+i,o=function(t){var e=function(t){e.data=t,e.called=!0};return e.id=t,e}(i);return n[r]=e[i]=o,r},wasCalled:function(t){return n[t].called},getResponse:function(t){return n[t].data},removeCallback:function(t){var i=n[t];delete e[i.id],delete n[t]}}}]},jn=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Bn={http:80,https:443,ftp:21},qn=e("$location");function Hn(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=yt(e[n]);return e.join("/")}function Vn(t,e){var n=cr(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=k(n.port)||Bn[n.protocol]||null}var Un=/^\s*[\\/]{2,}/;function zn(t,e){if(Un.test(t))throw qn("badpath",'Invalid url "{0}".',t);var n="/"!==t.charAt(0);n&&(t="/"+t);var i=cr(t);e.$$path=decodeURIComponent(n&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname),e.$$search=mt(i.search),e.$$hash=decodeURIComponent(i.hash),e.$$path&&"/"!==e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function Wn(t,e){return 0===t.lastIndexOf(e,0)}function Xn(t,e){if(Wn(e,t))return e.substr(t.length)}function Gn(t){var e=t.indexOf("#");return-1===e?t:t.substr(0,e)}function Yn(t){return t.replace(/(#.+)|#$/,"$1")}function Qn(t,e,n){this.$$html5=!0,n=n||"",Vn(t,this),this.$$parse=function(t){var n=Xn(e,t);if(!M(n))throw qn("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,e);zn(n,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var t=vt(this.$$search),n=this.$$hash?"#"+yt(this.$$hash):"";this.$$url=Hn(this.$$path)+(t?"?"+t:"")+n,this.$$absUrl=e+this.$$url.substr(1)},this.$$parseLinkUrl=function(i,r){return r&&"#"===r[0]?(this.hash(r.slice(1)),!0):(P(o=Xn(t,i))?(a=o,s=n&&P(o=Xn(n,o))?e+(Xn("/",o)||o):t+a):P(o=Xn(e,i))?s=e+o:e===i+"/"&&(s=e),s&&this.$$parse(s),!!s);var o,a,s}}function Jn(t,e,n){Vn(t,this),this.$$parse=function(i){var r,o=Xn(t,i)||Xn(e,i);N(o)||"#"!==o.charAt(0)?this.$$html5?r=o:(r="",N(o)&&(t=i,this.replace())):N(r=Xn(n,o))&&(r=o),zn(r,this),this.$$path=function(t,e,n){var i,r=/^\/[A-Z]:(\/.*)/;return Wn(e,n)&&(e=e.replace(n,"")),r.exec(e)?t:(i=r.exec(t))?i[1]:t}(this.$$path,r,t),this.$$compose()},this.$$compose=function(){var e=vt(this.$$search),i=this.$$hash?"#"+yt(this.$$hash):"";this.$$url=Hn(this.$$path)+(e?"?"+e:"")+i,this.$$absUrl=t+(this.$$url?n+this.$$url:"")},this.$$parseLinkUrl=function(e,n){return Gn(t)===Gn(e)&&(this.$$parse(e),!0)}}function Zn(t,e,n){this.$$html5=!0,Jn.apply(this,arguments),this.$$parseLinkUrl=function(i,r){return r&&"#"===r[0]?(this.hash(r.slice(1)),!0):(t===Gn(i)?o=i:(a=Xn(e,i))?o=t+n+a:e===i+"/"&&(o=e),o&&this.$$parse(o),!!o);var o,a},this.$$compose=function(){var e=vt(this.$$search),i=this.$$hash?"#"+yt(this.$$hash):"";this.$$url=Hn(this.$$path)+(e?"?"+e:"")+i,this.$$absUrl=t+n+this.$$url}}var ti={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:ei("$$absUrl"),url:function(t){if(N(t))return this.$$url;var e=jn.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:ei("$$protocol"),host:ei("$$host"),port:ei("$$port"),path:ni("$$path",function(t){return"/"===(t=null!==t?t.toString():"").charAt(0)?t:"/"+t}),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(M(t)||j(t))t=t.toString(),this.$$search=mt(t);else{if(!L(t))throw qn("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");b(t=et(t,{}),function(e,n){null==e&&delete t[n]}),this.$$search=t}break;default:N(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:ni("$$hash",function(t){return null!==t?t.toString():""}),replace:function(){return this.$$replace=!0,this}};function ei(t){return function(){return this[t]}}function ni(t,e){return function(n){return N(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function ii(){var t="",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return P(e)?(t=e,this):t},this.html5Mode=function(t){return W(t)?(e.enabled=t,this):L(t)?(W(t.enabled)&&(e.enabled=t.enabled),W(t.requireBase)&&(e.requireBase=t.requireBase),W(t.rewriteLinks)&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,i,r,o,a){var s,c,u,d,h=i.baseHref(),f=i.url();if(e.enabled){if(!h&&e.requireBase)throw qn("nobase","$location in HTML5 mode requires a <base> tag to be present!");u=(d=f).substring(0,d.indexOf("/",d.indexOf("//")+2))+(h||"/"),c=r.history?Qn:Zn}else u=Gn(f),c=Jn;var p=function(t){return t.substr(0,Gn(t).lastIndexOf("/")+1)}(u);(s=new c(u,p,"#"+t)).$$parseLinkUrl(f,f),s.$$state=i.state();var g=/^\s*(javascript|mailto):/i;function m(t,e,n){var r=s.url(),o=s.$$state;try{i.url(t,e,n),s.$$state=i.state()}catch(t){throw s.url(r),s.$$state=o,t}}o.on("click",function(t){if(e.rewriteLinks&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!==t.which&&2!==t.button){for(var r=l(t.target);"a"!==Z(r[0]);)if(r[0]===o[0]||!(r=r.parent())[0])return;var c=r.prop("href"),u=r.attr("href")||r.attr("xlink:href");L(c)&&"[object SVGAnimatedString]"===c.toString()&&(c=cr(c.animVal).href),g.test(c)||!c||r.attr("target")||t.isDefaultPrevented()||s.$$parseLinkUrl(c,u)&&(t.preventDefault(),s.absUrl()!==i.url()&&(n.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}),Yn(s.absUrl())!==Yn(f)&&i.url(s.absUrl(),!0);var v=!0;return i.onUrlChange(function(t,e){N(Xn(p,t))?a.location.href=t:(n.$evalAsync(function(){var i,r=s.absUrl(),o=s.$$state;t=Yn(t),s.$$parse(t),s.$$state=e,i=n.$broadcast("$locationChangeStart",t,r,e,o).defaultPrevented,s.absUrl()===t&&(i?(s.$$parse(r),s.$$state=o,m(r,!1,o)):(v=!1,y(r,o)))}),n.$$phase||n.$digest())}),n.$watch(function(){var t=Yn(i.url()),e=Yn(s.absUrl()),o=i.state(),a=s.$$replace,l=t!==e||s.$$html5&&r.history&&o!==s.$$state;(v||l)&&(v=!1,n.$evalAsync(function(){var e=s.absUrl(),i=n.$broadcast("$locationChangeStart",e,t,s.$$state,o).defaultPrevented;s.absUrl()===e&&(i?(s.$$parse(t),s.$$state=o):(l&&m(e,a,o===s.$$state?null:s.$$state),y(t,o)))})),s.$$replace=!1}),s;function y(t,e){n.$broadcast("$locationChangeSuccess",s.absUrl(),t,s.$$state,e)}}]}function ri(){var t=!0,e=this;this.debugEnabled=function(e){return P(e)?(t=e,this):t},this.$get=["$window",function(n){return{log:r("log"),info:r("info"),warn:r("warn"),error:r("error"),debug:(i=r("debug"),function(){t&&i.apply(e,arguments)})};var i;function r(t){var e=n.console||{},i=e[t]||e.log||S,r=!1;try{r=!!i.apply}catch(t){}return r?function(){var t=[];return b(arguments,function(e){t.push(function(t){return t instanceof Error&&(t.stack?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}(e))}),i.apply(e,t)}:function(t,e){i(t,null==e?"":e)}}}]}b([Zn,Jn,Qn],function(t){t.prototype=Object.create(ti),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==Qn||!this.$$html5)throw qn("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=N(e)?null:e,this}});var oi=e("$parse"),ai=[].constructor,si=(!1).constructor,li=Function.constructor,ci=(0).constructor,ui={}.constructor,di="".constructor,hi=ai.prototype,fi=si.prototype,pi=li.prototype,gi=ci.prototype,mi=ui.prototype,vi=di.prototype,yi=pi.call,Ei=pi.apply,bi=pi.bind,Ci=mi.valueOf;function Ti(t,e){if("__defineGetter__"===t||"__defineSetter__"===t||"__lookupGetter__"===t||"__lookupSetter__"===t||"__proto__"===t)throw oi("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",e);return t}function wi(t){return t+""}function Ii(t,e){if(t){if(t.constructor===t)throw oi("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t.window===t)throw oi("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",e);if(t.children&&(t.nodeName||t.prop&&t.attr&&t.find))throw oi("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",e);if(t===Object)throw oi("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",e)}return t}function Oi(t,e){if(t){if(t.constructor===t)throw oi("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",e);if(t===yi||t===Ei||t===bi)throw oi("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",e)}}function Di(t,e){if(t&&(t===ai||t===si||t===li||t===ci||t===ui||t===di||t===hi||t===fi||t===pi||t===gi||t===mi||t===vi))throw oi("isecaf","Assigning to a constructor or its prototype is disallowed! Expression: {0}",e)}var _i=$t();b("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(t){_i[t]=!0});var ki={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Ri=function(t){this.options=t};Ri.prototype={constructor:Ri,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var n=e+this.peek(),i=n+this.peek(2),r=_i[e],o=_i[n],a=_i[i];if(r||o||a){var s=a?i:o?n:e;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(t){return"0"<=t&&t<="9"&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||" "===t},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var n=t.charCodeAt(0),i=e.charCodeAt(0);return n>=55296&&n<=56319&&i>=56320&&i<=57343?t+e:t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var i=P(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw oi("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,i,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=o(this.text.charAt(this.index));if("."===n||this.isNumber(n))t+=n;else{var i=this.peek();if("e"===n&&this.isExpOperator(i))t+=n;else if(this.isExpOperator(n)&&i&&this.isNumber(i)&&"e"===t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||i&&this.isNumber(i)||"e"!==t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",i=t,r=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(i+=o,r){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else n+=ki[o]||o;r=!1}else if("\\"===o)r=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:i,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",e)}};var xi=function(t,e){this.lexer=t,this.options=e};function Si(t,e){return void 0!==t?t:e}function Ki(t,e){return void 0===t?e:void 0===e?t:t+e}function $i(t,e){var n,i,r;switch(t.type){case xi.Program:n=!0,b(t.body,function(t){$i(t.expression,e),n=n&&t.expression.constant}),t.constant=n;break;case xi.Literal:t.constant=!0,t.toWatch=[];break;case xi.UnaryExpression:$i(t.argument,e),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case xi.BinaryExpression:$i(t.left,e),$i(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case xi.LogicalExpression:$i(t.left,e),$i(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case xi.ConditionalExpression:$i(t.test,e),$i(t.alternate,e),$i(t.consequent,e),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case xi.Identifier:t.constant=!1,t.toWatch=[t];break;case xi.MemberExpression:$i(t.object,e),t.computed&&$i(t.property,e),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=[t];break;case xi.CallExpression:r=!!t.filter&&function(t,e){return!t(e).$stateful}(e,t.callee.name),n=r,i=[],b(t.arguments,function(t){$i(t,e),n=n&&t.constant,t.constant||i.push.apply(i,t.toWatch)}),t.constant=n,t.toWatch=r?i:[t];break;case xi.AssignmentExpression:$i(t.left,e),$i(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case xi.ArrayExpression:n=!0,i=[],b(t.elements,function(t){$i(t,e),n=n&&t.constant,t.constant||i.push.apply(i,t.toWatch)}),t.constant=n,t.toWatch=i;break;case xi.ObjectExpression:n=!0,i=[],b(t.properties,function(t){$i(t.value,e),n=n&&t.value.constant&&!t.computed,t.value.constant||i.push.apply(i,t.value.toWatch)}),t.constant=n,t.toWatch=i;break;case xi.ThisExpression:case xi.LocalsExpression:t.constant=!1,t.toWatch=[]}}function Ai(t){if(1===t.length){var e=t[0].expression,n=e.toWatch;return 1!==n.length?n:n[0]!==e?n:void 0}}function Ni(t){return t.type===xi.Identifier||t.type===xi.MemberExpression}function Pi(t){if(1===t.body.length&&Ni(t.body[0].expression))return{type:xi.AssignmentExpression,left:t.body[0].expression,right:{type:xi.NGValueParameter},operator:"="}}function Li(t){return 0===t.body.length||1===t.body.length&&(t.body[0].expression.type===xi.Literal||t.body[0].expression.type===xi.ArrayExpression||t.body[0].expression.type===xi.ObjectExpression)}function Fi(t){return t.constant}function Mi(t,e){this.astBuilder=t,this.$filter=e}function ji(t,e){this.astBuilder=t,this.$filter=e}xi.Program="Program",xi.ExpressionStatement="ExpressionStatement",xi.AssignmentExpression="AssignmentExpression",xi.ConditionalExpression="ConditionalExpression",xi.LogicalExpression="LogicalExpression",xi.BinaryExpression="BinaryExpression",xi.UnaryExpression="UnaryExpression",xi.CallExpression="CallExpression",xi.MemberExpression="MemberExpression",xi.Identifier="Identifier",xi.Literal="Literal",xi.ArrayExpression="ArrayExpression",xi.Property="Property",xi.ObjectExpression="ObjectExpression",xi.ThisExpression="ThisExpression",xi.LocalsExpression="LocalsExpression",xi.NGValueParameter="NGValueParameter",xi.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:xi.Program,body:t}},expressionStatement:function(){return{type:xi.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();return this.expect("=")&&(t={type:xi.AssignmentExpression,left:t,right:this.assignment(),operator:"="}),t},ternary:function(){var t,e,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:xi.ConditionalExpression,test:n,alternate:t,consequent:e}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:xi.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:xi.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:xi.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:xi.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:xi.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:xi.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:xi.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t,e;for(this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=et(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:xi.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());e=this.expect("(","[",".");)"("===e.text?(t={type:xi.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:xi.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:xi.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],n={type:xi.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return n},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do{t.push(this.filterChain())}while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:xi.Identifier,name:t.text}},constant:function(){return{type:xi.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:xi.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:xi.Property,kind:"init"},this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),{type:xi.ObjectExpression,properties:e}},throwError:function(t,e){throw oi("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw oi("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw oi("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,n,i){return this.peekAhead(0,t,e,n,i)},peekAhead:function(t,e,n,i,r){if(this.tokens.length>t){var o=this.tokens[t],a=o.text;if(a===e||a===n||a===i||a===r||!e&&!n&&!i&&!r)return o}return!1},expect:function(t,e,n,i){var r=this.peek(t,e,n,i);return!!r&&(this.tokens.shift(),r)},selfReferential:{this:{type:xi.ThisExpression},$locals:{type:xi.LocalsExpression}}},Mi.prototype={compile:function(t,e){var n=this,i=this.astBuilder.ast(t);this.state={nextId:0,filters:{},expensiveChecks:e,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},$i(i,n.$filter);var r,o="";if(this.stage="assign",r=Pi(i)){this.state.computing="assign";var a=this.nextId();this.recurse(r,a),this.return_(a),o="fn.assign="+this.generateFunction("assign","s,v,l")}var s=Ai(i.body);n.stage="inputs",b(s,function(t,e){var i="fn"+e;n.state[i]={vars:[],body:[],own:{}},n.state.computing=i;var r=n.nextId();n.recurse(t,r),n.return_(r),n.state.inputs.push(i),t.watchId=e}),this.state.computing="fn",this.stage="main",this.recurse(i);var l='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+o+this.watchFns()+"return fn;",c=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",l)(this.$filter,Ti,Ii,Oi,wi,Di,Si,Ki,t);return this.state=this.stage=void 0,c.literal=Li(i),c.constant=Fi(i),c},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return b(e,function(e){t.push("var "+e+"="+n.generateFunction(e,"s"))}),e.length&&t.push("fn.inputs=["+e.join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return b(this.state.filters,function(n,i){t.push(n+"=$filter("+e.escape(i)+")")}),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,n,i,r,o){var a,s,l,c,u,d=this;if(i=i||S,!o&&P(t.watchId))return e=e||this.nextId(),void this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,n,i,r,!0));switch(t.type){case xi.Program:b(t.body,function(e,n){d.recurse(e.expression,void 0,void 0,function(t){s=t}),n!==t.body.length-1?d.current().body.push(s,";"):d.return_(s)});break;case xi.Literal:c=this.escape(t.value),this.assign(e,c),i(c);break;case xi.UnaryExpression:this.recurse(t.argument,void 0,void 0,function(t){s=t}),c=t.operator+"("+this.ifDefined(s,0)+")",this.assign(e,c),i(c);break;case xi.BinaryExpression:this.recurse(t.left,void 0,void 0,function(t){a=t}),this.recurse(t.right,void 0,void 0,function(t){s=t}),c="+"===t.operator?this.plus(a,s):"-"===t.operator?this.ifDefined(a,0)+t.operator+this.ifDefined(s,0):"("+a+")"+t.operator+"("+s+")",this.assign(e,c),i(c);break;case xi.LogicalExpression:e=e||this.nextId(),d.recurse(t.left,e),d.if_("&&"===t.operator?e:d.not(e),d.lazyRecurse(t.right,e)),i(e);break;case xi.ConditionalExpression:e=e||this.nextId(),d.recurse(t.test,e),d.if_(e,d.lazyRecurse(t.alternate,e),d.lazyRecurse(t.consequent,e)),i(e);break;case xi.Identifier:e=e||this.nextId(),n&&(n.context="inputs"===d.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),n.computed=!1,n.name=t.name),Ti(t.name),d.if_("inputs"===d.stage||d.not(d.getHasOwnProperty("l",t.name)),function(){d.if_("inputs"===d.stage||"s",function(){r&&1!==r&&d.if_(d.not(d.nonComputedMember("s",t.name)),d.lazyAssign(d.nonComputedMember("s",t.name),"{}")),d.assign(e,d.nonComputedMember("s",t.name))})},e&&d.lazyAssign(e,d.nonComputedMember("l",t.name))),(d.state.expensiveChecks||qi(t.name))&&d.addEnsureSafeObject(e),i(e);break;case xi.MemberExpression:a=n&&(n.context=this.nextId())||this.nextId(),e=e||this.nextId(),d.recurse(t.object,a,void 0,function(){d.if_(d.notNull(a),function(){r&&1!==r&&d.addEnsureSafeAssignContext(a),t.computed?(s=d.nextId(),d.recurse(t.property,s),d.getStringValue(s),d.addEnsureSafeMemberName(s),r&&1!==r&&d.if_(d.not(d.computedMember(a,s)),d.lazyAssign(d.computedMember(a,s),"{}")),c=d.ensureSafeObject(d.computedMember(a,s)),d.assign(e,c),n&&(n.computed=!0,n.name=s)):(Ti(t.property.name),r&&1!==r&&d.if_(d.not(d.nonComputedMember(a,t.property.name)),d.lazyAssign(d.nonComputedMember(a,t.property.name),"{}")),c=d.nonComputedMember(a,t.property.name),(d.state.expensiveChecks||qi(t.property.name))&&(c=d.ensureSafeObject(c)),d.assign(e,c),n&&(n.computed=!1,n.name=t.property.name))},function(){d.assign(e,"undefined")}),i(e)},!!r);break;case xi.CallExpression:e=e||this.nextId(),t.filter?(s=d.filter(t.callee.name),l=[],b(t.arguments,function(t){var e=d.nextId();d.recurse(t,e),l.push(e)}),c=s+"("+l.join(",")+")",d.assign(e,c),i(e)):(s=d.nextId(),a={},l=[],d.recurse(t.callee,s,a,function(){d.if_(d.notNull(s),function(){d.addEnsureSafeFunction(s),b(t.arguments,function(t){d.recurse(t,d.nextId(),void 0,function(t){l.push(d.ensureSafeObject(t))})}),a.name?(d.state.expensiveChecks||d.addEnsureSafeObject(a.context),c=d.member(a.context,a.name,a.computed)+"("+l.join(",")+")"):c=s+"("+l.join(",")+")",c=d.ensureSafeObject(c),d.assign(e,c)},function(){d.assign(e,"undefined")}),i(e)}));break;case xi.AssignmentExpression:if(s=this.nextId(),a={},!Ni(t.left))throw oi("lval","Trying to assign a value to a non l-value");this.recurse(t.left,void 0,a,function(){d.if_(d.notNull(a.context),function(){d.recurse(t.right,s),d.addEnsureSafeObject(d.member(a.context,a.name,a.computed)),d.addEnsureSafeAssignContext(a.context),c=d.member(a.context,a.name,a.computed)+t.operator+s,d.assign(e,c),i(e||c)})},1);break;case xi.ArrayExpression:l=[],b(t.elements,function(t){d.recurse(t,d.nextId(),void 0,function(t){l.push(t)})}),c="["+l.join(",")+"]",this.assign(e,c),i(c);break;case xi.ObjectExpression:l=[],u=!1,b(t.properties,function(t){t.computed&&(u=!0)}),u?(e=e||this.nextId(),this.assign(e,"{}"),b(t.properties,function(t){t.computed?(a=d.nextId(),d.recurse(t.key,a)):a=t.key.type===xi.Identifier?t.key.name:""+t.key.value,s=d.nextId(),d.recurse(t.value,s),d.assign(d.member(e,a,t.computed),s)})):(b(t.properties,function(e){d.recurse(e.value,t.constant?void 0:d.nextId(),void 0,function(t){l.push(d.escape(e.key.type===xi.Identifier?e.key.name:""+e.key.value)+":"+t)})}),c="{"+l.join(",")+"}",this.assign(e,c)),i(e||c);break;case xi.ThisExpression:this.assign(e,"s"),i("s");break;case xi.LocalsExpression:this.assign(e,"l"),i("l");break;case xi.NGValueParameter:this.assign(e,"v"),i("v")}},getHasOwnProperty:function(t,e){var n=t+"."+e,i=this.current().own;return i.hasOwnProperty(n)||(i[n]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),i[n]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,n){if(!0===t)e();else{var i=this.current().body;i.push("if(",t,"){"),e(),i.push("}"),n&&(i.push("else{"),n(),i.push("}"))}},not:function(t){return"!("+t+")"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(e)?t+"."+e:t+'["'+e.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,n){return n?this.computedMember(t,e):this.nonComputedMember(t,e)},addEnsureSafeObject:function(t){this.current().body.push(this.ensureSafeObject(t),";")},addEnsureSafeMemberName:function(t){this.current().body.push(this.ensureSafeMemberName(t),";")},addEnsureSafeFunction:function(t){this.current().body.push(this.ensureSafeFunction(t),";")},addEnsureSafeAssignContext:function(t){this.current().body.push(this.ensureSafeAssignContext(t),";")},ensureSafeObject:function(t){return"ensureSafeObject("+t+",text)"},ensureSafeMemberName:function(t){return"ensureSafeMemberName("+t+",text)"},ensureSafeFunction:function(t){return"ensureSafeFunction("+t+",text)"},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},ensureSafeAssignContext:function(t){return"ensureSafeAssignContext("+t+",text)"},lazyRecurse:function(t,e,n,i,r,o){var a=this;return function(){a.recurse(t,e,n,i,r,o)}},lazyAssign:function(t,e){var n=this;return function(){n.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(M(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(j(t))return t.toString();if(!0===t)return"true";if(!1===t)return"false";if(null===t)return"null";if(void 0===t)return"undefined";throw oi("esc","IMPOSSIBLE")},nextId:function(t,e){var n="v"+this.state.nextId++;return t||this.current().vars.push(n+(e?"="+e:"")),n},current:function(){return this.state[this.state.computing]}},ji.prototype={compile:function(t,e){var n,i,r=this,o=this.astBuilder.ast(t);this.expression=t,this.expensiveChecks=e,$i(o,r.$filter),(n=Pi(o))&&(i=this.recurse(n));var a,s=Ai(o.body);s&&(a=[],b(s,function(t,e){var n=r.recurse(t);t.input=n,a.push(n),t.watchId=e}));var l=[];b(o.body,function(t){l.push(r.recurse(t.expression))});var c=0===o.body.length?S:1===o.body.length?l[0]:function(t,e){var n;return b(l,function(i){n=i(t,e)}),n};return i&&(c.assign=function(t,e,n){return i(t,n,e)}),a&&(c.inputs=a),c.literal=Li(o),c.constant=Fi(o),c},recurse:function(t,e,n){var i,r,o,a=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case xi.Literal:return this.value(t.value,e);case xi.UnaryExpression:return r=this.recurse(t.argument),this["unary"+t.operator](r,e);case xi.BinaryExpression:case xi.LogicalExpression:return i=this.recurse(t.left),r=this.recurse(t.right),this["binary"+t.operator](i,r,e);case xi.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case xi.Identifier:return Ti(t.name,a.expression),a.identifier(t.name,a.expensiveChecks||qi(t.name),e,n,a.expression);case xi.MemberExpression:return i=this.recurse(t.object,!1,!!n),t.computed||(Ti(t.property.name,a.expression),r=t.property.name),t.computed&&(r=this.recurse(t.property)),t.computed?this.computedMember(i,r,e,n,a.expression):this.nonComputedMember(i,r,a.expensiveChecks,e,n,a.expression);case xi.CallExpression:return o=[],b(t.arguments,function(t){o.push(a.recurse(t))}),t.filter&&(r=this.$filter(t.callee.name)),t.filter||(r=this.recurse(t.callee,!0)),t.filter?function(t,n,i,a){for(var s=[],l=0;l<o.length;++l)s.push(o[l](t,n,i,a));var c=r.apply(void 0,s,a);return e?{context:void 0,name:void 0,value:c}:c}:function(t,n,i,s){var l,c=r(t,n,i,s);if(null!=c.value){Ii(c.context,a.expression),Oi(c.value,a.expression);for(var u=[],d=0;d<o.length;++d)u.push(Ii(o[d](t,n,i,s),a.expression));l=Ii(c.value.apply(c.context,u),a.expression)}return e?{value:l}:l};case xi.AssignmentExpression:return i=this.recurse(t.left,!0,1),r=this.recurse(t.right),function(t,n,o,s){var l=i(t,n,o,s),c=r(t,n,o,s);return Ii(l.value,a.expression),Di(l.context),l.context[l.name]=c,e?{value:c}:c};case xi.ArrayExpression:return o=[],b(t.elements,function(t){o.push(a.recurse(t))}),function(t,n,i,r){for(var a=[],s=0;s<o.length;++s)a.push(o[s](t,n,i,r));return e?{value:a}:a};case xi.ObjectExpression:return o=[],b(t.properties,function(t){t.computed?o.push({key:a.recurse(t.key),computed:!0,value:a.recurse(t.value)}):o.push({key:t.key.type===xi.Identifier?t.key.name:""+t.key.value,computed:!1,value:a.recurse(t.value)})}),function(t,n,i,r){for(var a={},s=0;s<o.length;++s)o[s].computed?a[o[s].key(t,n,i,r)]=o[s].value(t,n,i,r):a[o[s].key]=o[s].value(t,n,i,r);return e?{value:a}:a};case xi.ThisExpression:return function(t){return e?{value:t}:t};case xi.LocalsExpression:return function(t,n){return e?{value:n}:n};case xi.NGValueParameter:return function(t,n,i){return e?{value:i}:i}}},"unary+":function(t,e){return function(n,i,r,o){var a=t(n,i,r,o);return a=P(a)?+a:0,e?{value:a}:a}},"unary-":function(t,e){return function(n,i,r,o){var a=t(n,i,r,o);return a=P(a)?-a:0,e?{value:a}:a}},"unary!":function(t,e){return function(n,i,r,o){var a=!t(n,i,r,o);return e?{value:a}:a}},"binary+":function(t,e,n){return function(i,r,o,a){var s=Ki(t(i,r,o,a),e(i,r,o,a));return n?{value:s}:s}},"binary-":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a),l=e(i,r,o,a),c=(P(s)?s:0)-(P(l)?l:0);return n?{value:c}:c}},"binary*":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)*e(i,r,o,a);return n?{value:s}:s}},"binary/":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)/e(i,r,o,a);return n?{value:s}:s}},"binary%":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)%e(i,r,o,a);return n?{value:s}:s}},"binary===":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)===e(i,r,o,a);return n?{value:s}:s}},"binary!==":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)!==e(i,r,o,a);return n?{value:s}:s}},"binary==":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)==e(i,r,o,a);return n?{value:s}:s}},"binary!=":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)!=e(i,r,o,a);return n?{value:s}:s}},"binary<":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)<e(i,r,o,a);return n?{value:s}:s}},"binary>":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)>e(i,r,o,a);return n?{value:s}:s}},"binary<=":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)<=e(i,r,o,a);return n?{value:s}:s}},"binary>=":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)>=e(i,r,o,a);return n?{value:s}:s}},"binary&&":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)&&e(i,r,o,a);return n?{value:s}:s}},"binary||":function(t,e,n){return function(i,r,o,a){var s=t(i,r,o,a)||e(i,r,o,a);return n?{value:s}:s}},"ternary?:":function(t,e,n,i){return function(r,o,a,s){var l=t(r,o,a,s)?e(r,o,a,s):n(r,o,a,s);return i?{value:l}:l}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(t,e,n,i,r){return function(o,a,s,l){var c=a&&t in a?a:o;i&&1!==i&&c&&!c[t]&&(c[t]={});var u=c?c[t]:void 0;return e&&Ii(u,r),n?{context:c,name:t,value:u}:u}},computedMember:function(t,e,n,i,r){return function(o,a,s,l){var c,u,d=t(o,a,s,l);return null!=d&&(Ti(c=wi(c=e(o,a,s,l)),r),i&&1!==i&&(Di(d),d&&!d[c]&&(d[c]={})),Ii(u=d[c],r)),n?{context:d,name:c,value:u}:u}},nonComputedMember:function(t,e,n,i,r,o){return function(a,s,l,c){var u=t(a,s,l,c);r&&1!==r&&(Di(u),u&&!u[e]&&(u[e]={}));var d=null!=u?u[e]:void 0;return(n||qi(e))&&Ii(d,o),i?{context:u,name:e,value:d}:d}},inputs:function(t,e){return function(n,i,r,o){return o?o[e]:t(n,i,r)}}};var Bi=function(t,e,n){this.lexer=t,this.$filter=e,this.options=n,this.ast=new xi(t,n),this.astCompiler=n.csp?new ji(this.ast,e):new Mi(this.ast,e)};function qi(t){return"constructor"===t}function Hi(t){return H(t.valueOf)?t.valueOf():Ci.call(t)}function Vi(){var t,e,n=$t(),i=$t(),r={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(t,e){r[t]=e},this.setIdentifierFns=function(n,i){return t=n,e=i,this},this.$get=["$filter",function(o){var a=it().noUnsafeEval,s={csp:a,expensiveChecks:!1,literals:et(r),isIdentifierStart:H(t)&&t,isIdentifierContinue:H(e)&&e},l={csp:a,expensiveChecks:!0,literals:et(r),isIdentifierStart:H(t)&&t,isIdentifierContinue:H(e)&&e},c=!1;return u.$$runningExpensiveChecks=function(){return c},u;function u(t,e,r){var a,u,d;switch(r=r||c,typeof t){case"string":d=t=t.trim();var v=r?i:n;if(!(a=v[d])){":"===t.charAt(0)&&":"===t.charAt(1)&&(u=!0,t=t.substring(2));var y=r?l:s,E=new Ri(y);(a=new Bi(E,o,y).parse(t)).constant?a.$$watchDelegate=g:u?a.$$watchDelegate=a.literal?p:f:a.inputs&&(a.$$watchDelegate=h),r&&(a=function t(e){if(!e)return e;i.$$watchDelegate=e.$$watchDelegate,i.assign=t(e.assign),i.constant=e.constant,i.literal=e.literal;for(var n=0;e.inputs&&n<e.inputs.length;++n)e.inputs[n]=t(e.inputs[n]);return i.inputs=e.inputs,i;function i(t,n,i,r){var o=c;c=!0;try{return e(t,n,i,r)}finally{c=o}}}(a)),v[d]=a}return m(a,e);case"function":return m(t,e);default:return m(S,e)}}function d(t,e){return null==t||null==e?t===e:("object"!=typeof t||"object"!=typeof(t=Hi(t)))&&(t===e||t!=t&&e!=e)}function h(t,e,n,i,r){var o,a=i.inputs;if(1===a.length){var s=d;return a=a[0],t.$watch(function(t){var e=a(t);return d(e,s)||(o=i(t,void 0,void 0,[e]),s=e&&Hi(e)),o},e,n,r)}for(var l=[],c=[],u=0,h=a.length;u<h;u++)l[u]=d,c[u]=null;return t.$watch(function(t){for(var e=!1,n=0,r=a.length;n<r;n++){var s=a[n](t);(e||(e=!d(s,l[n])))&&(c[n]=s,l[n]=s&&Hi(s))}return e&&(o=i(t,void 0,void 0,c)),o},e,n,r)}function f(t,e,n,i){var r,o;return r=t.$watch(function(t){return i(t)},function(t,n,i){o=t,H(e)&&e.apply(this,arguments),P(t)&&i.$$postDigest(function(){P(o)&&r()})},n)}function p(t,e,n,i){var r,o;return r=t.$watch(function(t){return i(t)},function(t,n,i){o=t,H(e)&&e.call(this,t,n,i),a(t)&&i.$$postDigest(function(){a(o)&&r()})},n);function a(t){var e=!0;return b(t,function(t){P(t)||(e=!1)}),e}}function g(t,e,n,i){var r=t.$watch(function(t){return r(),i(t)},e,n);return r}function m(t,e){if(!e)return t;var n=t.$$watchDelegate,i=!1,r=n!==p&&n!==f?function(n,r,o,a){var s=i&&a?a[0]:t(n,r,o,a);return e(s,n,r)}:function(n,i,r,o){var a=t(n,i,r,o),s=e(a,n,i);return P(a)?s:a};return t.$$watchDelegate&&t.$$watchDelegate!==h?r.$$watchDelegate=t.$$watchDelegate:e.$stateful||(r.$$watchDelegate=h,i=!t.inputs,r.inputs=t.inputs?t.inputs:[t]),r}}]}function Ui(){this.$get=["$rootScope","$exceptionHandler",function(t,e){return Wi(function(e){t.$evalAsync(e)},e)}]}function zi(){this.$get=["$browser","$exceptionHandler",function(t,e){return Wi(function(e){t.defer(e)},e)}]}function Wi(t,n){var i=e("$q",TypeError),r=function(){var t=new l;return t.resolve=a(t,t.resolve),t.reject=a(t,t.reject),t.notify=a(t,t.notify),t};function o(){this.$$state={status:0}}function a(t,e){return function(n){e.call(t,n)}}function s(e){!e.processScheduled&&e.pending&&(e.processScheduled=!0,t(function(){!function(t){var e,i,r;r=t.pending,t.processScheduled=!1,t.pending=void 0;for(var o=0,a=r.length;o<a;++o){i=r[o][0],e=r[o][t.status];try{H(e)?i.resolve(e(t.value)):1===t.status?i.resolve(t.value):i.reject(t.value)}catch(t){i.reject(t),n(t)}}}(e)}))}function l(){this.promise=new o}D(o.prototype,{then:function(t,e,n){if(N(t)&&N(e)&&N(n))return this;var i=new l;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([i,t,e,n]),this.$$state.status>0&&s(this.$$state),i.promise},catch:function(t){return this.then(null,t)},finally:function(t,e){return this.then(function(e){return u(e,!0,t)},function(e){return u(e,!1,t)},e)}}),D(l.prototype,{resolve:function(t){this.promise.$$state.status||(t===this.promise?this.$$reject(i("qcycle","Expected promise to be resolved with value other than itself '{0}'",t)):this.$$resolve(t))},$$resolve:function(t){var e,i=this,r=!1;try{(L(t)||H(t))&&(e=t&&t.then),H(e)?(this.promise.$$state.status=-1,e.call(t,function(t){r||(r=!0,i.$$resolve(t))},o,a(this,this.notify))):(this.promise.$$state.value=t,this.promise.$$state.status=1,s(this.promise.$$state))}catch(t){o(t),n(t)}function o(t){r||(r=!0,i.$$reject(t))}},reject:function(t){this.promise.$$state.status||this.$$reject(t)},$$reject:function(t){this.promise.$$state.value=t,this.promise.$$state.status=2,s(this.promise.$$state)},notify:function(e){var i=this.promise.$$state.pending;this.promise.$$state.status<=0&&i&&i.length&&t(function(){for(var t,r,o=0,a=i.length;o<a;o++){r=i[o][0],t=i[o][3];try{r.notify(H(t)?t(e):e)}catch(t){n(t)}}})}});var c=function(t,e){var n=new l;return e?n.resolve(t):n.reject(t),n.promise},u=function(t,e,n){var i=null;try{H(n)&&(i=n())}catch(t){return c(t,!1)}return X(i)?i.then(function(){return c(t,e)},function(t){return c(t,!1)}):c(t,e)},d=function(t,e,n,i){var r=new l;return r.resolve(t),r.promise.then(e,n,i)},h=d,f=function(t){if(!H(t))throw i("norslvr","Expected resolverFn, got '{0}'",t);var e=new l;return t(function(t){e.resolve(t)},function(t){e.reject(t)}),e.promise};return f.prototype=o.prototype,f.defer=r,f.reject=function(t){var e=new l;return e.reject(t),e.promise},f.when=d,f.resolve=h,f.all=function(t){var e=new l,n=0,i=q(t)?[]:{};return b(t,function(t,r){n++,d(t).then(function(t){i.hasOwnProperty(r)||(i[r]=t,--n||e.resolve(i))},function(t){i.hasOwnProperty(r)||e.reject(t)})}),0===n&&e.resolve(i),e.promise},f.race=function(t){var e=r();return b(t,function(t){d(t).then(e.resolve,e.reject)}),e.promise},f}function Xi(){this.$get=["$window","$timeout",function(t,e){var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame,i=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,r=!!n,o=r?function(t){var e=n(t);return function(){i(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};return o.supported=r,o}]}function Gi(){var t=10,n=e("$rootScope"),i=null,o=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$exceptionHandler","$parse","$browser",function(e,a,l){function c(t){t.currentScope.$$destroyed=!0}function u(){this.$id=w(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}u.prototype={constructor:u,$new:function(t,e){var n;return e=e||this,t?(n=new u).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=w(),this.$$ChildScope=null}return e.prototype=t,e}(this)),n=new this.$$ChildScope),n.$parent=e,n.$$prevSibling=e.$$childTail,e.$$childHead?(e.$$childTail.$$nextSibling=n,e.$$childTail=n):e.$$childHead=e.$$childTail=n,(t||e!==this)&&n.$on("$destroy",c),n},$watch:function(t,e,n,r){var o=a(t);if(o.$$watchDelegate)return o.$$watchDelegate(this,e,n,o,t);var s=this,l=s.$$watchers,c={fn:e,last:T,get:o,exp:r||t,eq:!!n};return i=null,H(e)||(c.fn=S),l||(l=s.$$watchers=[]),l.unshift(c),y(this,1),function(){tt(l,c)>=0&&y(s,-1),i=null}},$watchGroup:function(t,e){var n=new Array(t.length),i=new Array(t.length),r=[],o=this,a=!1,s=!0;if(!t.length){var l=!0;return o.$evalAsync(function(){l&&e(i,i,o)}),function(){l=!1}}if(1===t.length)return this.$watch(t[0],function(t,r,o){i[0]=t,n[0]=r,e(i,t===r?i:n,o)});function c(){a=!1,s?(s=!1,e(i,i,o)):e(i,n,o)}return b(t,function(t,e){var s=o.$watch(t,function(t,r){i[e]=t,n[e]=r,a||(a=!0,o.$evalAsync(c))});r.push(s)}),function(){for(;r.length;)r.shift()()}},$watchCollection:function(t,e){g.$stateful=!0;var n,i,o,s=this,l=e.length>1,c=0,u=a(t,g),d=[],h={},f=!0,p=0;function g(t){var e,o,a,s;if(!N(n=t)){if(L(n))if(E(n)){i!==d&&(p=(i=d).length=0,c++),e=n.length,p!==e&&(c++,i.length=p=e);for(var l=0;l<e;l++)s=i[l],a=n[l],s!=s&&a!=a||s===a||(c++,i[l]=a)}else{for(o in i!==h&&(i=h={},p=0,c++),e=0,n)r.call(n,o)&&(e++,a=n[o],s=i[o],o in i?s!=s&&a!=a||s===a||(c++,i[o]=a):(p++,i[o]=a,c++));if(p>e)for(o in c++,i)r.call(n,o)||(p--,delete i[o])}else i!==n&&(i=n,c++);return c}}return this.$watch(u,function(){if(f?(f=!1,e(n,n,s)):e(n,o,s),l)if(L(n))if(E(n)){o=new Array(n.length);for(var t=0;t<n.length;t++)o[t]=n[t]}else for(var i in o={},n)r.call(n,i)&&(o[i]=n[i]);else o=n})},$digest:function(){var r,a,s,c,u,p,y,E,b,C,w=t,O=[];m("$digest"),l.$$checkUrlChange(),this===d&&null!==o&&(l.defer.cancel(o),I()),i=null;do{p=!1,E=this;for(var D=0;D<h.length;D++){try{(C=h[D]).scope.$eval(C.expression,C.locals)}catch(t){e(t)}i=null}h.length=0;t:do{if(c=E.$$watchers)for(u=c.length;u--;)try{if(r=c[u])if((a=(0,r.get)(E))===(s=r.last)||(r.eq?nt(a,s):R(a)&&R(s))){if(r===i){p=!1;break t}}else p=!0,i=r,r.last=r.eq?et(a,null):a,(0,r.fn)(a,s===T?a:s,E),w<5&&(O[b=4-w]||(O[b]=[]),O[b].push({msg:H(r.exp)?"fn: "+(r.exp.name||r.exp.toString()):r.exp,newVal:a,oldVal:s}))}catch(t){e(t)}if(!(y=E.$$watchersCount&&E.$$childHead||E!==this&&E.$$nextSibling))for(;E!==this&&!(y=E.$$nextSibling);)E=E.$parent}while(E=y);if((p||h.length)&&!w--)throw v(),n("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,O)}while(p||h.length);for(v();g<f.length;)try{f[g++]()}catch(t){e(t)}f.length=g=0},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;for(var e in this.$broadcast("$destroy"),this.$$destroyed=!0,this===d&&l.$$applicationDestroyed(),y(this,-this.$$watchersCount),this.$$listenerCount)C(this,this.$$listenerCount[e],e);t&&t.$$childHead===this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail===this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=S,this.$on=this.$watch=this.$watchGroup=function(){return S},this.$$listeners={},this.$$nextSibling=null,function t(e){9===s&&(e.$$childHead&&t(e.$$childHead),e.$$nextSibling&&t(e.$$nextSibling)),e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}(this)}},$eval:function(t,e){return a(t)(this,e)},$evalAsync:function(t,e){d.$$phase||h.length||l.defer(function(){h.length&&d.$digest()}),h.push({scope:this,expression:a(t),locals:e})},$$postDigest:function(t){f.push(t)},$apply:function(t){try{m("$apply");try{return this.$eval(t)}finally{v()}}catch(t){e(t)}finally{try{d.$digest()}catch(t){throw e(t),t}}},$applyAsync:function(t){var e=this;t&&p.push(function(){e.$eval(t)}),t=a(t),null===o&&(o=l.defer(function(){d.$apply(I)}))},$on:function(t,e){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(e);var i=this;do{i.$$listenerCount[t]||(i.$$listenerCount[t]=0),i.$$listenerCount[t]++}while(i=i.$parent);var r=this;return function(){var i=n.indexOf(e);-1!==i&&(n[i]=null,C(r,1,t))}},$emit:function(t,n){var i,r,o,a=[],s=this,l=!1,c={name:t,targetScope:s,stopPropagation:function(){l=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},u=ot([c],arguments,1);do{for(i=s.$$listeners[t]||a,c.currentScope=s,r=0,o=i.length;r<o;r++)if(i[r])try{i[r].apply(null,u)}catch(t){e(t)}else i.splice(r,1),r--,o--;if(l)return c.currentScope=null,c;s=s.$parent}while(s);return c.currentScope=null,c},$broadcast:function(t,n){var i=this,r=this,o={name:t,targetScope:this,preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[t])return o;for(var a,s,l,c=ot([o],arguments,1);i=r;){for(o.currentScope=i,s=0,l=(a=i.$$listeners[t]||[]).length;s<l;s++)if(a[s])try{a[s].apply(null,c)}catch(t){e(t)}else a.splice(s,1),s--,l--;if(!(r=i.$$listenerCount[t]&&i.$$childHead||i!==this&&i.$$nextSibling))for(;i!==this&&!(r=i.$$nextSibling);)i=i.$parent}return o.currentScope=null,o}};var d=new u,h=d.$$asyncQueue=[],f=d.$$postDigestQueue=[],p=d.$$applyAsyncQueue=[],g=0;return d;function m(t){if(d.$$phase)throw n("inprog","{0} already in progress",d.$$phase);d.$$phase=t}function v(){d.$$phase=null}function y(t,e){do{t.$$watchersCount+=e}while(t=t.$parent)}function C(t,e,n){do{t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n]}while(t=t.$parent)}function T(){}function I(){for(;p.length;)try{p.shift()()}catch(t){e(t)}o=null}}]}function Yi(){var t=/^\s*(https?|ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return P(e)?(t=e,this):t},this.imgSrcSanitizationWhitelist=function(t){return P(t)?(e=t,this):e},this.$get=function(){return function(n,i){var r,o=i?e:t;return""===(r=cr(n).href)||r.match(o)?n:"unsafe:"+r}}}Bi.prototype={constructor:Bi,parse:function(t){return this.astCompiler.compile(t,this.options.expensiveChecks)}};var Qi=e("$sce"),Ji={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"};function Zi(t){var e=[];return P(t)&&b(t,function(t){e.push(function(t){if("self"===t)return t;if(M(t)){if(t.indexOf("***")>-1)throw Qi("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=Q(t).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+t+"$")}if(V(t))return new RegExp("^"+t.source+"$");throw Qi("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(t))}),e}function tr(){this.SCE_CONTEXTS=Ji;var t=["self"],e=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(t=Zi(e)),t},this.resourceUrlBlacklist=function(t){return arguments.length&&(e=Zi(t)),e},this.$get=["$injector",function(n){var i=function(t){throw Qi("unsafe","Attempting to use an unsafe value in a safe context.")};function r(t,e){return"self"===t?ur(e):!!t.exec(e.href)}function o(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}n.has("$sanitize")&&(i=n.get("$sanitize"));var a=o(),s={};return s[Ji.HTML]=o(a),s[Ji.CSS]=o(a),s[Ji.URL]=o(a),s[Ji.JS]=o(a),s[Ji.RESOURCE_URL]=o(s[Ji.URL]),{trustAs:function(t,e){var n=s.hasOwnProperty(t)?s[t]:null;if(!n)throw Qi("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||N(e)||""===e)return e;if("string"!=typeof e)throw Qi("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new n(e)},getTrusted:function(n,o){if(null===o||N(o)||""===o)return o;var a=s.hasOwnProperty(n)?s[n]:null;if(a&&o instanceof a)return o.$$unwrapTrustedValue();if(n===Ji.RESOURCE_URL){if(function(n){var i,o,a=cr(n.toString()),s=!1;for(i=0,o=t.length;i<o;i++)if(r(t[i],a)){s=!0;break}if(s)for(i=0,o=e.length;i<o;i++)if(r(e[i],a)){s=!1;break}return s}(o))return o;throw Qi("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",o.toString())}if(n===Ji.HTML)return i(o);throw Qi("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(t){return t instanceof a?t.$$unwrapTrustedValue():t}}}]}function er(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,n){if(t&&s<8)throw Qi("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=Mt(Ji);i.isEnabled=function(){return t},i.trustAs=n.trustAs,i.getTrusted=n.getTrusted,i.valueOf=n.valueOf,t||(i.trustAs=i.getTrusted=function(t,e){return e},i.valueOf=K),i.parseAs=function(t,n){var r=e(n);return r.literal&&r.constant?r:e(n,function(e){return i.getTrusted(t,e)})};var r=i.parseAs,a=i.getTrusted,l=i.trustAs;return b(Ji,function(t,e){var n=o(e);i[Yt("parse_as_"+n)]=function(e){return r(t,e)},i[Yt("get_trusted_"+n)]=function(e){return a(t,e)},i[Yt("trust_as_"+n)]=function(e){return l(t,e)}}),i}]}function nr(){this.$get=["$window","$document",function(t,e){var n,i,r={},a=!(t.chrome&&(t.chrome.app&&t.chrome.app.runtime||!t.chrome.app&&t.chrome.runtime&&t.chrome.runtime.id))&&t.history&&t.history.pushState,l=k((/android (\d+)/.exec(o((t.navigator||{}).userAgent))||[])[1]),c=/Boxee/i.test((t.navigator||{}).userAgent),u=e[0]||{},d=/^(Moz|webkit|ms)(?=[A-Z])/,h=u.body&&u.body.style,f=!1,p=!1;if(h){for(var g in h)if(i=d.exec(g)){n=(n=i[0])[0].toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in h&&"webkit"),f=!!("transition"in h||n+"Transition"in h),p=!!("animation"in h||n+"Animation"in h),!l||f&&p||(f=M(h.webkitTransition),p=M(h.webkitAnimation))}return{history:!(!a||l<4||c),hasEvent:function(t){if("input"===t&&s<=11)return!1;if(N(r[t])){var e=u.createElement("div");r[t]="on"+t in e}return r[t]},csp:it(),vendorPrefix:n,transitions:f,animations:p,android:l}}]}var ir=e("$compile");function rr(){var t;this.httpOptions=function(e){return e?(t=e,this):t},this.$get=["$templateCache","$http","$q","$sce",function(e,n,i,r){function o(a,s){o.totalPendingRequests++,M(a)&&!N(e.get(a))||(a=r.getTrustedResourceUrl(a));var l=n.defaults&&n.defaults.transformResponse;return q(l)?l=l.filter(function(t){return t!==kn}):l===kn&&(l=null),n.get(a,D({cache:e,transformResponse:l},t)).finally(function(){o.totalPendingRequests--}).then(function(t){return e.put(a,t.data),t.data},function(t){if(!s)throw ir("tpload","Failed to load template: {0} (HTTP status: {1} {2})",a,t.status,t.statusText);return i.reject(t)})}return o.totalPendingRequests=0,o}]}function or(){this.$get=["$rootScope","$browser","$location",function(t,e,n){return{findBindings:function(t,e,n){var i=[];return b(t.getElementsByClassName("ng-binding"),function(t){var r=v.element(t).data("$binding");r&&b(r,function(r){n?new RegExp("(^|\\s)"+Q(e)+"(\\s|\\||$)").test(r)&&i.push(t):-1!==r.indexOf(e)&&i.push(t)})}),i},findModels:function(t,e,n){for(var i=["ng-","data-ng-","ng\\:"],r=0;r<i.length;++r){var o="["+i[r]+"model"+(n?"=":"*=")+'"'+e+'"]',a=t.querySelectorAll(o);if(a.length)return a}},getLocation:function(){return n.url()},setLocation:function(e){e!==n.url()&&(n.url(e),t.$digest())},whenStable:function(t){e.notifyWhenNoOutstandingRequests(t)}}}]}function ar(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,i,r){var o={};function a(a,s,l){H(a)||(l=s,s=a,a=S);var c,u=at(arguments,3),d=P(l)&&!l,h=(d?i:n).defer(),f=h.promise;return c=e.defer(function(){try{h.resolve(a.apply(null,u))}catch(t){h.reject(t),r(t)}finally{delete o[f.$$timeoutId]}d||t.$apply()},s),f.$$timeoutId=c,o[c]=h,f}return a.cancel=function(t){return!!(t&&t.$$timeoutId in o)&&(o[t.$$timeoutId].reject("canceled"),delete o[t.$$timeoutId],e.defer.cancel(t.$$timeoutId))},a}]}var sr=t.document.createElement("a"),lr=cr(t.location.href);function cr(t){var e=t;return s&&(sr.setAttribute("href",e),e=sr.href),sr.setAttribute("href",e),{href:sr.href,protocol:sr.protocol?sr.protocol.replace(/:$/,""):"",host:sr.host,search:sr.search?sr.search.replace(/^\?/,""):"",hash:sr.hash?sr.hash.replace(/^#/,""):"",hostname:sr.hostname,port:sr.port,pathname:"/"===sr.pathname.charAt(0)?sr.pathname:"/"+sr.pathname}}function ur(t){var e=M(t)?cr(t):t;return e.protocol===lr.protocol&&e.host===lr.host}function dr(){this.$get=$(t)}function hr(t){var e=t[0]||{},n={},i="";function r(t){try{return decodeURIComponent(t)}catch(e){return t}}return function(){var t,o,a,s,l,c=e.cookie||"";if(c!==i)for(t=(i=c).split("; "),n={},a=0;a<t.length;a++)(s=(o=t[a]).indexOf("="))>0&&(l=r(o.substring(0,s)),N(n[l])&&(n[l]=r(o.substring(s+1))));return n}}function fr(){this.$get=hr}function pr(t){var e="Filter";function n(i,r){if(L(i)){var o={};return b(i,function(t,e){o[e]=n(e,t)}),o}return t.factory(i+e,r)}this.register=n,this.$get=["$injector",function(t){return function(n){return t.get(n+e)}}],n("currency",Cr),n("date",$r),n("filter",gr),n("json",Ar),n("limitTo",Lr),n("lowercase",Nr),n("number",Tr),n("orderBy",Mr),n("uppercase",Pr)}function gr(){return function(t,n,i,r){if(!E(t)){if(null==t)return t;throw e("filter")("notarray","Expected array but received: {0}",t)}var a,s;switch(r=r||"$",vr(n)){case"function":a=n;break;case"boolean":case"null":case"number":case"string":s=!0;case"object":a=function(t,e,n,i){var r=L(t)&&n in t;return!0===e?e=nt:H(e)||(e=function(t,e){return!(N(t)||(null===t||null===e?t!==e:L(e)||L(t)&&!A(t)||(t=o(""+t),e=o(""+e),-1===t.indexOf(e))))}),function(o){return r&&!L(o)?mr(o,t[n],e,n,!1):mr(o,t,e,n,i)}}(n,i,r,s);break;default:return t}return Array.prototype.filter.call(t,a)}}function mr(t,e,n,i,r,o){var a=vr(t),s=vr(e);if("string"===s&&"!"===e.charAt(0))return!mr(t,e.substring(1),n,i,r);if(q(t))return t.some(function(t){return mr(t,e,n,i,r)});switch(a){case"object":var l;if(r){for(l in t)if("$"!==l.charAt(0)&&mr(t[l],e,n,i,!0))return!0;return!o&&mr(t,e,n,i,!1)}if("object"===s){for(l in e){var c=e[l];if(!H(c)&&!N(c)){var u=l===i;if(!mr(u?t:t[l],c,n,i,u,u))return!1}}return!0}return n(t,e);case"function":return!1;default:return n(t,e)}}function vr(t){return null===t?"null":typeof t}hr.$inject=["$document"],pr.$inject=["$provide"];var yr=22,Er=".",br="0";function Cr(t){var e=t.NUMBER_FORMATS;return function(t,n,i){return N(n)&&(n=e.CURRENCY_SYM),N(i)&&(i=e.PATTERNS[1].maxFrac),null==t?t:wr(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,i).replace(/\u00A4/g,n)}}function Tr(t){var e=t.NUMBER_FORMATS;return function(t,n){return null==t?t:wr(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function wr(t,e,n,i,r){if(!M(t)&&!j(t)||isNaN(t))return"";var o,a=!isFinite(t),s=!1,l=Math.abs(t)+"",c="";if(a)c="∞";else{!function(t,e,n,i){var r=t.d,o=r.length-t.i,a=(e=N(e)?Math.min(Math.max(n,o),i):+e)+t.i,s=r[a];if(a>0){r.splice(Math.max(t.i,a));for(var l=a;l<r.length;l++)r[l]=0}else{o=Math.max(0,o),t.i=1,r.length=Math.max(1,a=e+1),r[0]=0;for(var c=1;c<a;c++)r[c]=0}if(s>=5)if(a-1<0){for(var u=0;u>a;u--)r.unshift(0),t.i++;r.unshift(1),t.i++}else r[a-1]++;for(;o<Math.max(0,e);o++)r.push(0);var d=r.reduceRight(function(t,e,n,i){return e+=t,i[n]=e%10,Math.floor(e/10)},0);d&&(r.unshift(d),t.i++)}(o=function(t){var e,n,i,r,o,a=0;for((n=t.indexOf(Er))>-1&&(t=t.replace(Er,"")),(i=t.search(/e/i))>0?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length),i=0;t.charAt(i)===br;i++);if(i===(o=t.length))e=[0],n=1;else{for(o--;t.charAt(o)===br;)o--;for(n-=i,e=[],r=0;i<=o;i++,r++)e[r]=+t.charAt(i)}return n>yr&&(e=e.splice(0,yr-1),a=n-1,n=1),{d:e,e:a,i:n}}(l),r,e.minFrac,e.maxFrac);var u=o.d,d=o.i,h=o.e,f=[];for(s=u.reduce(function(t,e){return t&&!e},!0);d<0;)u.unshift(0),d++;d>0?f=u.splice(d,u.length):(f=u,u=[0]);var p=[];for(u.length>=e.lgSize&&p.unshift(u.splice(-e.lgSize,u.length).join(""));u.length>e.gSize;)p.unshift(u.splice(-e.gSize,u.length).join(""));u.length&&p.unshift(u.join("")),c=p.join(n),f.length&&(c+=i+f.join("")),h&&(c+="e+"+h)}return t<0&&!s?e.negPre+c+e.negSuf:e.posPre+c+e.posSuf}function Ir(t,e,n,i){var r="";for((t<0||i&&t<=0)&&(i?t=1-t:(t=-t,r="-")),t=""+t;t.length<e;)t=br+t;return n&&(t=t.substr(t.length-e)),r+t}function Or(t,e,n,i,r){return n=n||0,function(o){var a=o["get"+t]();return(n>0||a>-n)&&(a+=n),0===a&&-12===n&&(a=12),Ir(a,e,i,r)}}function Dr(t,e,n){return function(i,r){var o=i["get"+t]();return r[a((n?"STANDALONE":"")+(e?"SHORT":"")+t)][o]}}function _r(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(e<=4?5:12)-e)}function kr(t){return function(e){var n,i=_r(e.getFullYear()),r=(n=e,+new Date(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))-+i);return Ir(1+Math.round(r/6048e5),t)}}function Rr(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}Cr.$inject=["$locale"],Tr.$inject=["$locale"];var xr={yyyy:Or("FullYear",4,0,!1,!0),yy:Or("FullYear",2,0,!0,!0),y:Or("FullYear",1,0,!1,!0),MMMM:Dr("Month"),MMM:Dr("Month",!0),MM:Or("Month",2,1),M:Or("Month",1,1),LLLL:Dr("Month",!1,!0),dd:Or("Date",2),d:Or("Date",1),HH:Or("Hours",2),H:Or("Hours",1),hh:Or("Hours",2,-12),h:Or("Hours",1,-12),mm:Or("Minutes",2),m:Or("Minutes",1),ss:Or("Seconds",2),s:Or("Seconds",1),sss:Or("Milliseconds",3),EEEE:Dr("Day"),EEE:Dr("Day",!0),a:function(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]},Z:function(t,e,n){var i=-1*n;return(i>=0?"+":"")+(Ir(Math[i>0?"floor":"ceil"](i/60),2)+Ir(Math.abs(i%60),2))},ww:kr(2),w:kr(1),G:Rr,GG:Rr,GGG:Rr,GGGG:function(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}},Sr=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,Kr=/^\-?\d+$/;function $r(t){var e=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,i,r){var o,a,s="",l=[];if(i=i||"mediumDate",i=t.DATETIME_FORMATS[i]||i,M(n)&&(n=Kr.test(n)?k(n):function(t){var n;if(n=t.match(e)){var i=new Date(0),r=0,o=0,a=n[8]?i.setUTCFullYear:i.setFullYear,s=n[8]?i.setUTCHours:i.setHours;n[9]&&(r=k(n[9]+n[10]),o=k(n[9]+n[11])),a.call(i,k(n[1]),k(n[2])-1,k(n[3]));var l=k(n[4]||0)-r,c=k(n[5]||0)-o,u=k(n[6]||0),d=Math.round(1e3*parseFloat("0."+(n[7]||0)));return s.call(i,l,c,u,d),i}return t}(n)),j(n)&&(n=new Date(n)),!B(n)||!isFinite(n.getTime()))return n;for(;i;)(a=Sr.exec(i))?i=(l=ot(l,a,1)).pop():(l.push(i),i=null);var c=n.getTimezoneOffset();return r&&(c=ht(r,c),n=ft(n,r,!0)),b(l,function(e){o=xr[e],s+=o?o(n,t.DATETIME_FORMATS,c):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),s}}function Ar(){return function(t,e){return N(e)&&(e=2),ct(t,e)}}$r.$inject=["$locale"];var Nr=$(o),Pr=$(a);function Lr(){return function(t,e,n){return e=Math.abs(Number(e))===1/0?Number(e):k(e),R(e)?t:(j(t)&&(t=t.toString()),E(t)?(n=(n=!n||isNaN(n)?0:k(n))<0?Math.max(0,t.length+n):n,e>=0?Fr(t,n,n+e):0===n?Fr(t,e,t.length):Fr(t,Math.max(0,n+e),n)):t)}}function Fr(t,e,n){return M(t)?t.slice(e,n):d.call(t,e,n)}function Mr(t){return function(r,o,a,s){if(null==r)return r;if(!E(r))throw e("orderBy")("notarray","Expected array but received: {0}",r);q(o)||(o=[o]),0===o.length&&(o=["+"]);var l=o.map(function(e){var n=1,i=K;if(H(e))i=e;else if(M(e)&&("+"!==e.charAt(0)&&"-"!==e.charAt(0)||(n="-"===e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(i=t(e)).constant)){var r=i();i=function(t){return t[r]}}return{get:i,descending:n}}),c=a?-1:1,u=H(s)?s:i,d=Array.prototype.map.call(r,function(t,e){return{value:t,tieBreaker:{value:e,type:"number",index:e},predicateValues:l.map(function(i){return function(t,e){var i=typeof t;return null===t?(i="string",t="null"):"object"===i&&(t=function(t){return H(t.valueOf)&&n(t=t.valueOf())?t:(A(t)&&n(t=t.toString()),t)}(t)),{value:t,type:i,index:e}}(i.get(t),e)})}});return d.sort(function(t,e){for(var n=0,i=l.length;n<i;n++){var r=u(t.predicateValues[n],e.predicateValues[n]);if(r)return r*l[n].descending*c}return u(t.tieBreaker,e.tieBreaker)*c}),d.map(function(t){return t.value})};function n(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function i(t,e){var n=0,i=t.type,r=e.type;if(i===r){var o=t.value,a=e.value;"string"===i?(o=o.toLowerCase(),a=a.toLowerCase()):"object"===i&&(L(o)&&(o=t.index),L(a)&&(a=e.index)),o!==a&&(n=o<a?-1:1)}else n=i<r?-1:1;return n}}function jr(t){return H(t)&&(t={link:t}),t.restrict=t.restrict||"AC",$(t)}Mr.$inject=["$parse"];var Br=$({restrict:"E",compile:function(t,e){if(!e.href&&!e.xlinkHref)return function(t,e){if("a"===e[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===p.call(e.prop("href"))?"xlink:href":"href";e.on("click",function(t){e.attr(n)||t.preventDefault()})}}}}),qr={};b(we,function(t,e){if("multiple"!==t){var n=ln("ng-"+e),i=r;"checked"===t&&(i=function(t,e,i){i.ngModel!==i[n]&&r(t,0,i)}),qr[n]=function(){return{restrict:"A",priority:100,link:i}}}function r(t,i,r){t.$watch(r[n],function(t){r.$set(e,!!t)})}}),b(Oe,function(t,e){qr[e]=function(){return{priority:100,link:function(t,i,r){if("ngPattern"===e&&"/"===r.ngPattern.charAt(0)){var o=r.ngPattern.match(n);if(o)return void r.$set("ngPattern",new RegExp(o[1],o[2]))}t.$watch(r[e],function(t){r.$set(e,t)})}}}}),b(["src","srcset","href"],function(t){var e=ln("ng-"+t);qr[e]=function(){return{priority:99,link:function(n,i,r){var o=t,a=t;"href"===t&&"[object SVGAnimatedString]"===p.call(i.prop("href"))&&(a="xlinkHref",r.$attr[a]="xlink:href",o=null),r.$observe(e,function(e){e?(r.$set(a,e),s&&o&&i.prop(o,r[a])):"href"===t&&r.$set(a,null)})}}}});var Hr={$addControl:S,$$renameControl:function(t,e){t.$name=e},$removeControl:S,$setValidity:S,$setDirty:S,$setPristine:S,$setSubmitted:S},Vr="ng-submitted";function Ur(t,e,n,i,r){var o=this,a=[];o.$error={},o.$$success={},o.$pending=void 0,o.$name=r(e.name||e.ngForm||"")(n),o.$dirty=!1,o.$pristine=!0,o.$valid=!0,o.$invalid=!1,o.$submitted=!1,o.$$parentForm=Hr,o.$rollbackViewValue=function(){b(a,function(t){t.$rollbackViewValue()})},o.$commitViewValue=function(){b(a,function(t){t.$commitViewValue()})},o.$addControl=function(t){xt(t.$name,"input"),a.push(t),t.$name&&(o[t.$name]=t),t.$$parentForm=o},o.$$renameControl=function(t,e){var n=t.$name;o[n]===t&&delete o[n],o[e]=t,t.$name=e},o.$removeControl=function(t){t.$name&&o[t.$name]===t&&delete o[t.$name],b(o.$pending,function(e,n){o.$setValidity(n,null,t)}),b(o.$error,function(e,n){o.$setValidity(n,null,t)}),b(o.$$success,function(e,n){o.$setValidity(n,null,t)}),tt(a,t),t.$$parentForm=Hr},Xo({ctrl:this,$element:t,set:function(t,e,n){var i=t[e];i?-1===i.indexOf(n)&&i.push(n):t[e]=[n]},unset:function(t,e,n){var i=t[e];i&&(tt(i,n),0===i.length&&delete t[e])},$animate:i}),o.$setDirty=function(){i.removeClass(t,jo),i.addClass(t,Bo),o.$dirty=!0,o.$pristine=!1,o.$$parentForm.$setDirty()},o.$setPristine=function(){i.setClass(t,jo,Bo+" "+Vr),o.$dirty=!1,o.$pristine=!0,o.$submitted=!1,b(a,function(t){t.$setPristine()})},o.$setUntouched=function(){b(a,function(t){t.$setUntouched()})},o.$setSubmitted=function(){i.addClass(t,Vr),o.$submitted=!0,o.$$parentForm.$setSubmitted()}}Ur.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var zr=function(t){return["$timeout","$parse",function(e,n){return{name:"form",restrict:t?"EAC":"E",require:["form","^^?form"],controller:Ur,compile:function(n,r){n.addClass(jo).addClass(Fo);var o=r.name?"name":!(!t||!r.ngForm)&&"ngForm";return{pre:function(t,n,r,a){var s=a[0];if(!("action"in r)){var l=function(e){t.$apply(function(){s.$commitViewValue(),s.$setSubmitted()}),e.preventDefault()};Vt(n[0],"submit",l),n.on("$destroy",function(){e(function(){Ut(n[0],"submit",l)},0,!1)})}(a[1]||s.$$parentForm).$addControl(s);var c=o?i(s.$name):S;o&&(c(t,s),r.$observe(o,function(e){s.$name!==e&&(c(t,void 0),s.$$parentForm.$$renameControl(s,e),(c=i(s.$name))(t,s))})),n.on("$destroy",function(){s.$$parentForm.$removeControl(s),c(t,void 0),D(s,Hr)})}}}};function i(t){return""===t?n('this[""]').assign:n(t).assign||S}}]},Wr=zr(),Xr=zr(!0),Gr=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Yr=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Qr=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Jr=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Zr=/^(\d{4,})-(\d{2})-(\d{2})$/,to=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,eo=/^(\d{4,})-W(\d\d)$/,no=/^(\d{4,})-(\d\d)$/,io=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ro="keydown wheel mousedown",oo=$t();b("date,datetime-local,month,time,week".split(","),function(t){oo[t]=!0});var ao={text:function(t,e,n,i,r,o){lo(t,e,n,i,r,o),so(i)},date:uo("date",Zr,co(Zr,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":uo("datetimelocal",to,co(to,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:uo("time",io,co(io,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:uo("week",eo,function(t,e){if(B(t))return t;if(M(t)){eo.lastIndex=0;var n=eo.exec(t);if(n){var i=+n[1],r=+n[2],o=0,a=0,s=0,l=0,c=_r(i),u=7*(r-1);return e&&(o=e.getHours(),a=e.getMinutes(),s=e.getSeconds(),l=e.getMilliseconds()),new Date(i,0,c.getDate()+u,o,a,s,l)}}return NaN},"yyyy-Www"),month:uo("month",no,co(no,["yyyy","MM"]),"yyyy-MM"),number:function(t,e,n,i,r,o){var a,s;ho(t,e,n,i),lo(t,e,n,i,r,o),fo(i),(P(n.min)||n.ngMin)&&(i.$validators.min=function(t){return i.$isEmpty(t)||N(a)||t>=a},n.$observe("min",function(t){a=po(t),i.$validate()})),(P(n.max)||n.ngMax)&&(i.$validators.max=function(t){return i.$isEmpty(t)||N(s)||t<=s},n.$observe("max",function(t){s=po(t),i.$validate()}))},url:function(t,e,n,i,r,o){lo(t,e,n,i,r,o),so(i),i.$$parserName="url",i.$validators.url=function(t,e){var n=t||e;return i.$isEmpty(n)||Yr.test(n)}},email:function(t,e,n,i,r,o){lo(t,e,n,i,r,o),so(i),i.$$parserName="email",i.$validators.email=function(t,e){var n=t||e;return i.$isEmpty(n)||Qr.test(n)}},radio:function(t,e,n,i){N(n.name)&&e.attr("name",w()),e.on("click",function(t){e[0].checked&&i.$setViewValue(n.value,t&&t.type)}),i.$render=function(){var t=n.value;e[0].checked=t===i.$viewValue},n.$observe("value",i.$render)},range:function(t,e,n,i,r,o){ho(t,e,n,i),fo(i),lo(t,e,n,i,r,o);var a=i.$$hasNativeValidators&&"range"===e[0].type,s=a?0:void 0,l=a?100:void 0,c=a?1:void 0,u=e[0].validity,d=P(n.min),h=P(n.max),f=P(n.step),p=i.$render;function g(t,i){e.attr(t,n[t]),n.$observe(t,i)}i.$render=a&&P(u.rangeUnderflow)&&P(u.rangeOverflow)?function(){p(),i.$setViewValue(e.val())}:p,d&&(i.$validators.min=a?function(){return!0}:function(t,e){return i.$isEmpty(e)||N(s)||e>=s},g("min",function(t){if(s=po(t),!R(i.$modelValue))if(a){var n=e.val();s>n&&(n=s,e.val(n)),i.$setViewValue(n)}else i.$validate()})),h&&(i.$validators.max=a?function(){return!0}:function(t,e){return i.$isEmpty(e)||N(l)||e<=l},g("max",function(t){if(l=po(t),!R(i.$modelValue))if(a){var n=e.val();l<n&&(e.val(l),n=l<s?s:l),i.$setViewValue(n)}else i.$validate()})),f&&(i.$validators.step=a?function(){return!u.stepMismatch}:function(t,e){return i.$isEmpty(e)||N(c)||function(t,e,n){var i=Number(t);if(!go(i)||!go(e)||!go(n)){var r=Math.max(mo(i),mo(e),mo(n)),o=Math.pow(10,r);i*=o,e*=o,n*=o}return(i-e)%n==0}(e,s||0,c)},g("step",function(t){c=po(t),R(i.$modelValue)||(a&&i.$viewValue!==e.val()?i.$setViewValue(e.val()):i.$validate())}))},checkbox:function(t,e,n,i,r,o,a,s){var l=vo(s,t,"ngTrueValue",n.ngTrueValue,!0),c=vo(s,t,"ngFalseValue",n.ngFalseValue,!1);e.on("click",function(t){i.$setViewValue(e[0].checked,t&&t.type)}),i.$render=function(){e[0].checked=i.$viewValue},i.$isEmpty=function(t){return!1===t},i.$formatters.push(function(t){return nt(t,l)}),i.$parsers.push(function(t){return t?l:c})},hidden:S,button:S,submit:S,reset:S,file:S};function so(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function lo(t,e,n,r,a,s){var l,c=o(e[0].type);if(!a.android){var u=!1;e.on("compositionstart",function(){u=!0}),e.on("compositionend",function(){u=!1,d()})}var d=function(t){if(l&&(s.defer.cancel(l),l=null),!u){var i=e.val(),o=t&&t.type;"password"===c||n.ngTrim&&"false"===n.ngTrim||(i=Y(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,o)}};if(a.hasEvent("input"))e.on("input",d);else{var h=function(t,e,n){l||(l=s.defer(function(){l=null,e&&e.value===n||d(t)}))};e.on("keydown",function(t){var e=t.keyCode;91===e||15<e&&e<19||37<=e&&e<=40||h(t,this,this.value)}),a.hasEvent("paste")&&e.on("paste cut",h)}e.on("change",d),oo[c]&&r.$$hasNativeValidators&&c===n.type&&e.on(ro,function(t){if(!l){var e=this[i],n=e.badInput,r=e.typeMismatch;l=s.defer(function(){l=null,e.badInput===n&&e.typeMismatch===r||d(t)})}}),r.$render=function(){var t=r.$isEmpty(r.$viewValue)?"":r.$viewValue;e.val()!==t&&e.val(t)}}function co(t,e){return function(n,i){var r,o;if(B(n))return n;if(M(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Gr.test(n))return new Date(n);if(t.lastIndex=0,r=t.exec(n))return r.shift(),o=i?{yyyy:i.getFullYear(),MM:i.getMonth()+1,dd:i.getDate(),HH:i.getHours(),mm:i.getMinutes(),ss:i.getSeconds(),sss:i.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},b(r,function(t,n){n<e.length&&(o[e[n]]=+t)}),new Date(o.yyyy,o.MM-1,o.dd,o.HH,o.mm,o.ss||0,1e3*o.sss||0)}return NaN}}function uo(t,e,n,i){return function(r,o,a,s,l,c,u){ho(r,o,a,s),lo(0,o,a,s,l,c);var d,h,f,p=s&&s.$options&&s.$options.timezone;function g(t){return t&&!(t.getTime&&t.getTime()!=t.getTime())}function m(t){return P(t)&&!B(t)?n(t)||void 0:t}s.$$parserName=t,s.$parsers.push(function(t){if(s.$isEmpty(t))return null;if(e.test(t)){var i=n(t,d);return p&&(i=ft(i,p)),i}}),s.$formatters.push(function(t){if(t&&!B(t))throw Ho("datefmt","Expected `{0}` to be a date",t);return g(t)?((d=t)&&p&&(d=ft(d,p,!0)),u("date")(t,i,p)):(d=null,"")}),(P(a.min)||a.ngMin)&&(s.$validators.min=function(t){return!g(t)||N(h)||n(t)>=h},a.$observe("min",function(t){h=m(t),s.$validate()})),(P(a.max)||a.ngMax)&&(s.$validators.max=function(t){return!g(t)||N(f)||n(t)<=f},a.$observe("max",function(t){f=m(t),s.$validate()}))}}function ho(t,e,n,r){var o=e[0];(r.$$hasNativeValidators=L(o.validity))&&r.$parsers.push(function(t){var n=e.prop(i)||{};return n.badInput||n.typeMismatch?void 0:t})}function fo(t){t.$$parserName="number",t.$parsers.push(function(e){return t.$isEmpty(e)?null:Jr.test(e)?parseFloat(e):void 0}),t.$formatters.push(function(e){if(!t.$isEmpty(e)){if(!j(e))throw Ho("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e})}function po(t){return P(t)&&!j(t)&&(t=parseFloat(t)),R(t)?void 0:t}function go(t){return(0|t)===t}function mo(t){var e=t.toString(),n=e.indexOf(".");if(-1===n){if(-1<t&&t<1){var i=/e-(\d+)$/.exec(e);if(i)return Number(i[1])}return 0}return e.length-n-1}function vo(t,e,n,i,r){var o;if(P(i)){if(!(o=t(i)).constant)throw Ho("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,i);return o(e)}return r}var yo=["$browser","$sniffer","$filter","$parse",function(t,e,n,i){return{restrict:"E",require:["?ngModel"],link:{pre:function(r,a,s,l){if(l[0]){var c=o(s.type);"range"!==c||s.hasOwnProperty("ngInputRange")||(c="text"),(ao[c]||ao.text)(r,a,s,l[0],e,t,n,i)}}}}}],Eo=/^(true|false|\d+)$/,bo=function(){return{restrict:"A",priority:100,compile:function(t,e){return Eo.test(e.ngValue)?function(t,e,n){n.$set("value",t.$eval(n.ngValue))}:function(t,e,n){t.$watch(n.ngValue,function(t){n.$set("value",t)})}}}},Co=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,n,i){t.$$addBindingInfo(n,i.ngBind),n=n[0],e.$watch(i.ngBind,function(t){n.textContent=N(t)?"":t})}}}}],To=["$interpolate","$compile",function(t,e){return{compile:function(n){return e.$$addBindingClass(n),function(n,i,r){var o=t(i.attr(r.$attr.ngBindTemplate));e.$$addBindingInfo(i,o.expressions),i=i[0],r.$observe("ngBindTemplate",function(t){i.textContent=N(t)?"":t})}}}}],wo=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function(i,r){var o=e(r.ngBindHtml),a=e(r.ngBindHtml,function(e){return t.valueOf(e)});return n.$$addBindingClass(i),function(e,i,r){n.$$addBindingInfo(i,r.ngBindHtml),e.$watch(a,function(){var n=o(e);i.html(t.getTrustedHtml(n)||"")})}}}}],Io=$({restrict:"A",require:"ngModel",link:function(t,e,n,i){i.$viewChangeListeners.push(function(){t.$eval(n.ngChange)})}});function Oo(t,e){return t="ngClass"+t,["$animate",function(n){return{restrict:"AC",link:function(o,a,s){var l;function c(t){var e=u(t,1);s.$addClass(e)}function u(t,e){var n=a.data("$classCounts")||$t(),i=[];return b(t,function(t){(e>0||n[t])&&(n[t]=(n[t]||0)+e,n[t]===+(e>0)&&i.push(t))}),a.data("$classCounts",n),i.join(" ")}function d(t){if(!0===e||(1&o.$index)===e){var s=r(t||[]);l?nt(t,l)||function(t,e){var r=i(e,t),o=i(t,e);r=u(r,1),o=u(o,-1),r&&r.length&&n.addClass(a,r),o&&o.length&&n.removeClass(a,o)}(r(l),s):c(s)}l=q(t)?t.map(function(t){return Mt(t)}):Mt(t)}o.$watch(s[t],d,!0),s.$observe("class",function(e){d(o.$eval(s[t]))}),"ngClass"!==t&&o.$watch("$index",function(n,i){var a=1&n;if(a!==(1&i)){var l=r(o.$eval(s[t]));a===e?c(l):function(t){var e=u(l,-1);s.$removeClass(e)}()}})}};function i(t,e){var n=[];t:for(var i=0;i<t.length;i++){for(var r=t[i],o=0;o<e.length;o++)if(r===e[o])continue t;n.push(r)}return n}function r(t){var e=[];return q(t)?(b(t,function(t){e=e.concat(r(t))}),e):M(t)?t.split(" "):L(t)?(b(t,function(t,n){t&&(e=e.concat(n.split(" ")))}),e):t}}]}var Do=Oo("",!0),_o=Oo("Odd",0),ko=Oo("Even",1),Ro=jr({compile:function(t,e){e.$set("ngCloak",void 0),t.removeClass("ng-cloak")}}),xo=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],So={},Ko={blur:!0,focus:!0};b("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(t){var e=ln("ng-"+t);So[e]=["$parse","$rootScope",function(n,i){return{restrict:"A",compile:function(r,o){var a=n(o[e],null,!0);return function(e,n){n.on(t,function(n){var r=function(){a(e,{$event:n})};Ko[t]&&i.$$phase?e.$evalAsync(r):e.$apply(r)})}}}}]});var $o=["$animate","$compile",function(t,e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,i,r,o,a){var s,l,c;n.$watch(r.ngIf,function(n){n?l||a(function(n,o){l=o,n[n.length++]=e.$$createComment("end ngIf",r.ngIf),s={clone:n},t.enter(n,i.parent(),i)}):(c&&(c.remove(),c=null),l&&(l.$destroy(),l=null),s&&(c=Kt(s.clone),t.leave(c).then(function(){c=null}),s=null))})}}}],Ao=["$templateRequest","$anchorScroll","$animate",function(t,e,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:v.noop,compile:function(i,r){var o=r.ngInclude||r.src,a=r.onload||"",s=r.autoscroll;return function(i,r,l,c,u){var d,h,f,p=0,g=function(){h&&(h.remove(),h=null),d&&(d.$destroy(),d=null),f&&(n.leave(f).then(function(){h=null}),h=f,f=null)};i.$watch(o,function(o){var l=function(){!P(s)||s&&!i.$eval(s)||e()},h=++p;o?(t(o,!0).then(function(t){if(!i.$$destroyed&&h===p){var e=i.$new();c.template=t;var s=u(e,function(t){g(),n.enter(t,null,r).then(l)});f=s,(d=e).$emit("$includeContentLoaded",o),i.$eval(a)}},function(){i.$$destroyed||h===p&&(g(),i.$emit("$includeContentError",o))}),i.$emit("$includeContentRequested",o)):(g(),c.template=null)})}}}}],No=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,i,r,o){if(p.call(i[0]).match(/SVG/))return i.empty(),void e(re(o.template,t.document).childNodes)(n,function(t){i.append(t)},{futureParentElement:i});i.html(o.template),e(i.contents())(n)}}}],Po=jr({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),Lo=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,n,i){var r=e.attr(n.$attr.ngList)||", ",o="false"!==n.ngTrim,a=o?Y(r):r;i.$parsers.push(function(t){if(!N(t)){var e=[];return t&&b(t.split(a),function(t){t&&e.push(o?Y(t):t)}),e}}),i.$formatters.push(function(t){if(q(t))return t.join(r)}),i.$isEmpty=function(t){return!t||!t.length}}}},Fo="ng-valid",Mo="ng-invalid",jo="ng-pristine",Bo="ng-dirty",qo="ng-pending",Ho=e("ngModel"),Vo=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(t,e,n,i,r,o,a,s,l,c){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=c(n.name||"",!1)(t),this.$$parentForm=Hr;var u,d=r(n.ngModel),h=d.assign,f=d,p=h,g=null,m=this;this.$$setOptions=function(t){if(m.$options=t,t&&t.getterSetter){var e=r(n.ngModel+"()"),o=r(n.ngModel+"($$$p)");f=function(t){var n=d(t);return H(n)&&(n=e(t)),n},p=function(t,e){H(d(t))?o(t,{$$$p:e}):h(t,e)}}else if(!d.assign)throw Ho("nonassign","Expression '{0}' is non-assignable. Element: {1}",n.ngModel,pt(i))},this.$render=S,this.$isEmpty=function(t){return N(t)||""===t||null===t||t!=t},this.$$updateEmptyClasses=function(t){m.$isEmpty(t)?(o.removeClass(i,"ng-not-empty"),o.addClass(i,"ng-empty")):(o.removeClass(i,"ng-empty"),o.addClass(i,"ng-not-empty"))};var v=0;Xo({ctrl:this,$element:i,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]},$animate:o}),this.$setPristine=function(){m.$dirty=!1,m.$pristine=!0,o.removeClass(i,Bo),o.addClass(i,jo)},this.$setDirty=function(){m.$dirty=!0,m.$pristine=!1,o.removeClass(i,jo),o.addClass(i,Bo),m.$$parentForm.$setDirty()},this.$setUntouched=function(){m.$touched=!1,m.$untouched=!0,o.setClass(i,"ng-untouched","ng-touched")},this.$setTouched=function(){m.$touched=!0,m.$untouched=!1,o.setClass(i,"ng-touched","ng-untouched")},this.$rollbackViewValue=function(){a.cancel(g),m.$viewValue=m.$$lastCommittedViewValue,m.$render()},this.$validate=function(){if(!R(m.$modelValue)){var t=m.$$lastCommittedViewValue,e=m.$$rawModelValue,n=m.$valid,i=m.$modelValue,r=m.$options&&m.$options.allowInvalid;m.$$runValidators(e,t,function(t){r||n===t||(m.$modelValue=t?e:void 0,m.$modelValue!==i&&m.$$writeModelToScope())})}},this.$$runValidators=function(t,e,n){var i,r,o=++v;function a(t,e){o===v&&m.$setValidity(t,e)}function s(t){o===v&&n(t)}!function(){var t=m.$$parserName||"parse";return N(u)?(a(t,null),!0):(u||(b(m.$validators,function(t,e){a(e,null)}),b(m.$asyncValidators,function(t,e){a(e,null)})),a(t,u),u)}()?s(!1):function(){var n=!0;return b(m.$validators,function(i,r){var o=i(t,e);n=n&&o,a(r,o)}),!!n||(b(m.$asyncValidators,function(t,e){a(e,null)}),!1)}()?(i=[],r=!0,b(m.$asyncValidators,function(n,o){var s=n(t,e);if(!X(s))throw Ho("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",s);a(o,void 0),i.push(s.then(function(){a(o,!0)},function(){r=!1,a(o,!1)}))}),i.length?l.all(i).then(function(){s(r)},S):s(!0)):s(!1)},this.$commitViewValue=function(){var t=m.$viewValue;a.cancel(g),(m.$$lastCommittedViewValue!==t||""===t&&m.$$hasNativeValidators)&&(m.$$updateEmptyClasses(t),m.$$lastCommittedViewValue=t,m.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){var e=m.$$lastCommittedViewValue;if(u=!N(e)||void 0)for(var n=0;n<m.$parsers.length;n++)if(N(e=m.$parsers[n](e))){u=!1;break}R(m.$modelValue)&&(m.$modelValue=f(t));var i=m.$modelValue,r=m.$options&&m.$options.allowInvalid;function o(){m.$modelValue!==i&&m.$$writeModelToScope()}m.$$rawModelValue=e,r&&(m.$modelValue=e,o()),m.$$runValidators(e,m.$$lastCommittedViewValue,function(t){r||(m.$modelValue=t?e:void 0,o())})},this.$$writeModelToScope=function(){p(t,m.$modelValue),b(m.$viewChangeListeners,function(t){try{t()}catch(t){e(t)}})},this.$setViewValue=function(t,e){m.$viewValue=t,m.$options&&!m.$options.updateOnDefault||m.$$debounceViewValueCommit(e)},this.$$debounceViewValueCommit=function(e){var n,i=0,r=m.$options;r&&P(r.debounce)&&(j(n=r.debounce)?i=n:j(n[e])?i=n[e]:j(n.default)&&(i=n.default)),a.cancel(g),i?g=a(function(){m.$commitViewValue()},i):s.$$phase?m.$commitViewValue():t.$apply(function(){m.$commitViewValue()})},t.$watch(function(){var e=f(t);if(e!==m.$modelValue&&(m.$modelValue==m.$modelValue||e==e)){m.$modelValue=m.$$rawModelValue=e,u=void 0;for(var n=m.$formatters,i=n.length,r=e;i--;)r=n[i](r);m.$viewValue!==r&&(m.$$updateEmptyClasses(r),m.$viewValue=m.$$lastCommittedViewValue=r,m.$render(),m.$$runValidators(m.$modelValue,m.$viewValue,S))}return e})}],Uo=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Vo,priority:1,compile:function(e){return e.addClass(jo).addClass("ng-untouched").addClass(Fo),{pre:function(t,e,n,i){var r=i[0],o=i[1]||r.$$parentForm;r.$$setOptions(i[2]&&i[2].$options),o.$addControl(r),n.$observe("name",function(t){r.$name!==t&&r.$$parentForm.$$renameControl(r,t)}),t.$on("$destroy",function(){r.$$parentForm.$removeControl(r)})},post:function(e,n,i,r){var o=r[0];o.$options&&o.$options.updateOn&&n.on(o.$options.updateOn,function(t){o.$$debounceViewValueCommit(t&&t.type)}),n.on("blur",function(){o.$touched||(t.$$phase?e.$evalAsync(o.$setTouched):e.$apply(o.$setTouched))})}}}}}],zo=/(\s+|^)default(\s+|$)/,Wo=function(){return{restrict:"A",controller:["$scope","$attrs",function(t,e){var n=this;this.$options=et(t.$eval(e.ngModelOptions)),P(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=Y(this.$options.updateOn.replace(zo,function(){return n.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}};function Xo(t){var e=t.ctrl,n=t.$element,i={},r=t.set,o=t.unset,a=t.$animate;function s(t,e){e&&!i[t]?(a.addClass(n,t),i[t]=!0):!e&&i[t]&&(a.removeClass(n,t),i[t]=!1)}function l(t,e){t=t?"-"+Dt(t,"-"):"",s(Fo+t,!0===e),s(Mo+t,!1===e)}i[Mo]=!(i[Fo]=n.hasClass(Fo)),e.$setValidity=function(t,n,i){var a;N(n)?function(t,n,i){e[t]||(e[t]={}),r(e[t],n,i)}("$pending",t,i):function(t,n,i){e[t]&&o(e[t],n,i),Go(e[t])&&(e[t]=void 0)}("$pending",t,i),W(n)?n?(o(e.$error,t,i),r(e.$$success,t,i)):(r(e.$error,t,i),o(e.$$success,t,i)):(o(e.$error,t,i),o(e.$$success,t,i)),e.$pending?(s(qo,!0),e.$valid=e.$invalid=void 0,l("",null)):(s(qo,!1),e.$valid=Go(e.$error),e.$invalid=!e.$valid,l("",e.$valid)),l(t,a=e.$pending&&e.$pending[t]?void 0:!e.$error[t]&&(!!e.$$success[t]||null)),e.$$parentForm.$setValidity(t,a,e)}}function Go(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var Yo=jr({terminal:!0,priority:1e3}),Qo=e("ngOptions"),Jo=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Zo=["$compile","$document","$parse",function(e,n,i){var r=t.document.createElement("option"),o=t.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(t,e,n,i){i[0].registerOption=S},post:function(t,a,s,c){for(var u,d=c[0],h=c[1],f=s.multiple,p=0,g=a.children(),m=g.length;p<m;p++)if(""===g[p].value){u=g.eq(p);break}var y,C=!!u,T=l(r.cloneNode(!1));T.val("?");var w=function(t,e,n){var r=t.match(Jo);if(!r)throw Qo("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,pt(e));var o=r[5]||r[7],a=r[6],s=/ as /.test(r[0])&&r[1],l=r[9],c=i(r[2]?r[1]:o),u=s&&i(s)||c,d=l&&i(l),h=l?function(t,e){return d(n,e)}:function(t){return xe(t)},f=function(t,e){return h(t,C(t,e))},p=i(r[2]||r[1]),g=i(r[3]||""),m=i(r[4]||""),y=i(r[8]),b={},C=a?function(t,e){return b[a]=e,b[o]=t,b}:function(t){return b[o]=t,b};function T(t,e,n,i,r){this.selectValue=t,this.viewValue=e,this.label=n,this.group=i,this.disabled=r}function w(t){var e;if(!a&&E(t))e=t;else for(var n in e=[],t)t.hasOwnProperty(n)&&"$"!==n.charAt(0)&&e.push(n);return e}return{trackBy:l,getTrackByValue:f,getWatchables:i(y,function(t){for(var e=[],i=w(t=t||[]),o=i.length,a=0;a<o;a++){var s=t===i?a:i[a],l=t[s],c=C(l,s),u=h(l,c);if(e.push(u),r[2]||r[1]){var d=p(n,c);e.push(d)}if(r[4]){var f=m(n,c);e.push(f)}}return e}),getOptions:function(){for(var t=[],e={},i=y(n)||[],r=w(i),o=r.length,a=0;a<o;a++){var s=i===r?a:r[a],c=i[s],d=C(c,s),E=u(n,d),b=h(E,d),I=new T(b,E,p(n,d),g(n,d),m(n,d));t.push(I),e[b]=I}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[f(t)]},getViewValueFromOption:function(t){return l?v.copy(t.viewValue):t.viewValue}}}}}(s.ngOptions,a,t),I=n[0].createDocumentFragment(),O=function(){C?u.removeAttr("selected"):u.remove()},D=function(){T.remove()};function _(t,e){var n=r.cloneNode(!1);e.appendChild(n),function(t,e){t.element=e,e.disabled=t.disabled,t.label!==e.label&&(e.label=t.label,e.textContent=t.label),t.value!==e.value&&(e.value=t.selectValue)}(t,n)}function k(){var t=y&&d.readValue();if(y)for(var e=y.items.length-1;e>=0;e--){var n=y.items[e];P(n.group)?Ce(n.element.parentNode):Ce(n.element)}y=w.getOptions();var i={};if(C&&a.prepend(u),y.items.forEach(function(t){var e;P(t.group)?((e=i[t.group])||(e=o.cloneNode(!1),I.appendChild(e),e.label=null===t.group?"null":t.group,i[t.group]=e),_(t,e)):_(t,I)}),a[0].appendChild(I),h.$render(),!h.$isEmpty(t)){var r=d.readValue();(w.trackBy||f?nt(t,r):t===r)||(h.$setViewValue(r),h.$render())}}f?(h.$isEmpty=function(t){return!t||0===t.length},d.writeValue=function(t){y.items.forEach(function(t){t.element.selected=!1}),t&&t.forEach(function(t){var e=y.getOptionFromViewValue(t);e&&(e.element.selected=!0)})},d.readValue=function(){var t=[];return b(a.val()||[],function(e){var n=y.selectValueMap[e];n&&!n.disabled&&t.push(y.getViewValueFromOption(n))}),t},w.trackBy&&t.$watchCollection(function(){if(q(h.$viewValue))return h.$viewValue.map(function(t){return w.getTrackByValue(t)})},function(){h.$render()})):(d.writeValue=function(t){var e=y.selectValueMap[a.val()],n=y.getOptionFromViewValue(t);e&&e.element.removeAttribute("selected"),n?(a[0].value!==n.selectValue&&(D(),O(),a[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):null===t||C?(D(),C||a.prepend(u),a.val(""),u.prop("selected",!0),u.attr("selected",!0)):(O(),a.prepend(T),a.val("?"),T.prop("selected",!0),T.attr("selected",!0))},d.readValue=function(){var t=y.selectValueMap[a.val()];return t&&!t.disabled?(O(),D(),y.getViewValueFromOption(t)):null},w.trackBy&&t.$watch(function(){return w.getTrackByValue(h.$viewValue)},function(){h.$render()})),C?(u.remove(),e(u)(t),u.removeClass("ng-scope")):u=l(r.cloneNode(!1)),a.empty(),k(),t.$watchCollection(w.getWatchables,k)}}}}],ta=["$locale","$interpolate","$log",function(t,e,n){var i=/{}/g,r=/^when(Minus)?(.+)$/;return{link:function(a,s,l){var c,u=l.count,d=l.$attr.when&&s.attr(l.$attr.when),h=l.offset||0,f=a.$eval(d)||{},p={},g=e.startSymbol(),m=e.endSymbol(),y=g+u+"-"+h+m,E=v.noop;function C(t){s.text(t||"")}b(l,function(t,e){var n=r.exec(e);if(n){var i=(n[1]?"-":"")+o(n[2]);f[i]=s.attr(l.$attr[e])}}),b(f,function(t,n){p[n]=e(t.replace(i,y))}),a.$watch(u,function(e){var i=parseFloat(e),r=R(i);if(r||i in f||(i=t.pluralCat(i-h)),!(i===c||r&&R(c))){E();var o=p[i];N(o)?(null!=e&&n.debug("ngPluralize: no rule defined for '"+i+"' in "+d),E=S,C()):E=a.$watch(o,C),c=i}})}}}],ea=["$parse","$animate","$compile",function(t,n,i){var o=e("ngRepeat"),a=function(t,e,n,i,r,o,a){t[n]=i,r&&(t[r]=o),t.$index=e,t.$first=0===e,t.$last=e===a-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0==(1&e))},s=function(t){return t.clone[0]},l=function(t){return t.clone[t.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(e,c){var u=c.ngRepeat,d=i.$$createComment("end ngRepeat",u),h=u.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!h)throw o("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",u);var f=h[1],p=h[2],g=h[3],m=h[4];if(!(h=f.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/)))throw o("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",f);var v,y,C,T,w=h[3]||h[1],I=h[2];if(g&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(g)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(g)))throw o("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",g);var O={$id:xe};return m?v=t(m):(C=function(t,e){return xe(e)},T=function(t){return t}),function(t,e,i,c,h){v&&(y=function(e,n,i){return I&&(O[I]=e),O[w]=n,O.$index=i,v(t,O)});var f=$t();t.$watchCollection(p,function(i){var c,p,m,v,O,D,_,k,R,x,S,K,$=e[0],A=$t();if(g&&(t[g]=i),E(i))R=i,k=y||C;else for(var N in k=y||T,R=[],i)r.call(i,N)&&"$"!==N.charAt(0)&&R.push(N);for(v=R.length,S=new Array(v),c=0;c<v;c++)if(O=i===R?c:R[c],D=i[O],_=k(O,D,c),f[_])x=f[_],delete f[_],A[_]=x,S[c]=x;else{if(A[_])throw b(S,function(t){t&&t.scope&&(f[t.id]=t)}),o("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",u,_,D);S[c]={id:_,scope:void 0,clone:void 0},A[_]=!0}for(var P in f){if(K=Kt((x=f[P]).clone),n.leave(K),K[0].parentNode)for(c=0,p=K.length;c<p;c++)K[c].$$NG_REMOVED=!0;x.scope.$destroy()}for(c=0;c<v;c++)if(O=i===R?c:R[c],D=i[O],(x=S[c]).scope){m=$;do{m=m.nextSibling}while(m&&m.$$NG_REMOVED);s(x)!==m&&n.move(Kt(x.clone),null,$),$=l(x),a(x.scope,c,w,D,I,O,v)}else h(function(t,e){x.scope=e;var i=d.cloneNode(!1);t[t.length++]=i,n.enter(t,null,$),$=i,x.clone=t,A[x.id]=x,a(x.scope,c,w,D,I,O,v)});f=A})}}}}],na=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,i){e.$watch(i.ngShow,function(e){t[e?"removeClass":"addClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],ia=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,i){e.$watch(i.ngHide,function(e){t[e?"addClass":"removeClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],ra=jr(function(t,e,n){t.$watch(n.ngStyle,function(t,n){n&&t!==n&&b(n,function(t,n){e.css(n,"")}),t&&e.css(t)},!0)}),oa=["$animate","$compile",function(t,e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,i,r,o){var a=r.ngSwitch||r.on,s=[],l=[],c=[],u=[],d=function(t,e){return function(){t.splice(e,1)}};n.$watch(a,function(n){var i,r;for(i=0,r=c.length;i<r;++i)t.cancel(c[i]);for(c.length=0,i=0,r=u.length;i<r;++i){var a=Kt(l[i].clone);u[i].$destroy(),(c[i]=t.leave(a)).then(d(c,i))}l.length=0,u.length=0,(s=o.cases["!"+n]||o.cases["?"])&&b(s,function(n){n.transclude(function(i,r){u.push(r);var o=n.element;i[i.length++]=e.$$createComment("end ngSwitchWhen");var a={clone:i};l.push(a),t.enter(i,o.parent(),o)})})})}}}],aa=jr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,i,r){i.cases["!"+n.ngSwitchWhen]=i.cases["!"+n.ngSwitchWhen]||[],i.cases["!"+n.ngSwitchWhen].push({transclude:r,element:e})}}),sa=jr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,i,r){i.cases["?"]=i.cases["?"]||[],i.cases["?"].push({transclude:r,element:e})}}),la=e("ngTransclude"),ca=["$compile",function(t){return{restrict:"EAC",terminal:!0,compile:function(e){var n=t(e.contents());return e.empty(),function(t,e,i,r,o){if(!o)throw la("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",pt(e));i.ngTransclude===i.$attr.ngTransclude&&(i.ngTransclude="");var a=i.ngTransclude||i.ngTranscludeSlot;function s(){n(t,function(t){e.append(t)})}o(function(t,n){t.length?e.append(t):(s(),n.$destroy())},null,a),a&&!o.isSlotFilled(a)&&s()}}}}],ua=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){if("text/ng-template"===n.type){var i=n.id,r=e[0].text;t.put(i,r)}}}}],da={$setViewValue:S,$render:S},ha=["$element","$scope",function(e,n){var i=this,r=new Se;i.ngModelCtrl=da,i.unknownOption=l(t.document.createElement("option")),i.renderUnknownOption=function(t){var n="? "+xe(t)+" ?";i.unknownOption.val(n),e.prepend(i.unknownOption),e.val(n)},n.$on("$destroy",function(){i.renderUnknownOption=S}),i.removeUnknownOption=function(){i.unknownOption.parent()&&i.unknownOption.remove()},i.readValue=function(){return i.removeUnknownOption(),e.val()},i.writeValue=function(t){i.hasOption(t)?(i.removeUnknownOption(),e.val(t),""===t&&i.emptyOption.prop("selected",!0)):null==t&&i.emptyOption?(i.removeUnknownOption(),e.val("")):i.renderUnknownOption(t)},i.addOption=function(t,e){if(e[0].nodeType!==Pt){xt(t,'"option value"'),""===t&&(i.emptyOption=e);var n,o=r.get(t)||0;r.put(t,o+1),i.ngModelCtrl.$render(),(n=e)[0].hasAttribute("selected")&&(n[0].selected=!0)}},i.removeOption=function(t){var e=r.get(t);e&&(1===e?(r.remove(t),""===t&&(i.emptyOption=void 0)):r.put(t,e-1))},i.hasOption=function(t){return!!r.get(t)},i.registerOption=function(t,e,n,r,o){var a;r?n.$observe("value",function(t){P(a)&&i.removeOption(a),a=t,i.addOption(t,e)}):o?t.$watch(o,function(t,r){n.$set("value",t),r!==t&&i.removeOption(r),i.addOption(t,e)}):i.addOption(n.value,e),e.on("$destroy",function(){i.removeOption(n.value),i.ngModelCtrl.$render()})}}],fa=function(){return{restrict:"E",require:["select","?ngModel"],controller:ha,priority:1,link:{pre:function(t,e,n,i){var r=i[1];if(r){var o=i[0];if(o.ngModelCtrl=r,e.on("change",function(){t.$apply(function(){r.$setViewValue(o.readValue())})}),n.multiple){o.readValue=function(){var t=[];return b(e.find("option"),function(e){e.selected&&t.push(e.value)}),t},o.writeValue=function(t){var n=new Se(t);b(e.find("option"),function(t){t.selected=P(n.get(t.value))})};var a,s=NaN;t.$watch(function(){s!==r.$viewValue||nt(a,r.$viewValue)||(a=Mt(r.$viewValue),r.$render()),s=r.$viewValue}),r.$isEmpty=function(t){return!t||0===t.length}}}},post:function(t,e,n,i){var r=i[1];if(r){var o=i[0];r.$render=function(){o.writeValue(r.$viewValue)}}}}}},pa=["$interpolate",function(t){return{restrict:"E",priority:100,compile:function(e,n){if(P(n.value))var i=t(n.value,!0);else{var r=t(e.text(),!0);r||n.$set("value",e.text())}return function(t,e,n){var o=e.parent(),a=o.data("$selectController")||o.parent().data("$selectController");a&&a.registerOption(t,e,n,i,r)}}}}],ga=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){i&&(n.required=!0,i.$validators.required=function(t,e){return!n.required||!i.$isEmpty(e)},n.$observe("required",function(){i.$validate()}))}}},ma=function(){return{restrict:"A",require:"?ngModel",link:function(t,n,i,r){if(r){var o,a=i.ngPattern||i.pattern;i.$observe("pattern",function(t){if(M(t)&&t.length>0&&(t=new RegExp("^"+t+"$")),t&&!t.test)throw e("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",a,t,pt(n));o=t||void 0,r.$validate()}),r.$validators.pattern=function(t,e){return r.$isEmpty(e)||N(o)||o.test(e)}}}}},va=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){if(i){var r=-1;n.$observe("maxlength",function(t){var e=k(t);r=R(e)?-1:e,i.$validate()}),i.$validators.maxlength=function(t,e){return r<0||i.$isEmpty(e)||e.length<=r}}}}},ya=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){if(i){var r=0;n.$observe("minlength",function(t){r=k(t)||0,i.$validate()}),i.$validators.minlength=function(t,e){return i.$isEmpty(e)||e.length>=r}}}}};t.angular.bootstrap?t.console&&console.log("WARNING: Tried to load angular more than once."):(function(){var e;if(!_t){var n=rt();(c=N(n)?t.jQuery:n?t[n]:void 0)&&c.fn.on?(l=c,D(c.fn,{scope:Te.scope,isolateScope:Te.isolateScope,controller:Te.controller,injector:Te.injector,inheritedData:Te.inheritedData}),e=c.cleanData,c.cleanData=function(t){for(var n,i,r=0;null!=(i=t[r]);r++)(n=c._data(i,"events"))&&n.$destroy&&c(i).triggerHandler("$destroy");e(t)}):l=se,v.element=l,_t=!0}}(),D(v,{bootstrap:Tt,copy:et,extend:D,merge:_,equals:nt,element:l,forEach:b,injector:Be,noop:S,bind:st,toJson:ct,fromJson:ut,identity:K,isUndefined:N,isDefined:P,isString:M,isFunction:H,isObject:L,isNumber:j,isElement:J,isArray:q,version:Bt,isDate:B,lowercase:o,uppercase:a,callbacks:{$$counter:0},getTestability:It,$$minErr:e,$$csp:it,reloadWithDebugInfo:wt}),(u=function(t){var n=e("$injector"),i=e("ng");function r(t,e,n){return t[e]||(t[e]=n())}var o=r(t,"angular",Object);return o.$$minErr=o.$$minErr||e,r(o,"module",function(){var t={};return function(e,o,a){return function(t,e){if("hasOwnProperty"===t)throw i("badname","hasOwnProperty is not a valid {0} name","module")}(e),o&&t.hasOwnProperty(e)&&(t[e]=null),r(t,e,function(){if(!o)throw n("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",e);var t=[],i=[],r=[],s=c("$injector","invoke","push",i),l={_invokeQueue:t,_configBlocks:i,_runBlocks:r,requires:o,name:e,provider:u("$provide","provider"),factory:u("$provide","factory"),service:u("$provide","service"),value:c("$provide","value"),constant:c("$provide","constant","unshift"),decorator:u("$provide","decorator"),animation:u("$animateProvider","register"),filter:u("$filterProvider","register"),controller:u("$controllerProvider","register"),directive:u("$compileProvider","directive"),component:u("$compileProvider","component"),config:s,run:function(t){return r.push(t),this}};return a&&s(a),l;function c(e,n,i,r){return r||(r=t),function(){return r[i||"push"]([e,n,arguments]),l}}function u(n,i){return function(r,o){return o&&H(o)&&(o.$$moduleName=e),t.push([n,i,arguments]),l}}})}})}(t))("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:Yi}),t.provider("$compile",on).directive({a:Br,input:yo,textarea:yo,form:Wr,script:ua,select:fa,option:pa,ngBind:Co,ngBindHtml:wo,ngBindTemplate:To,ngClass:Do,ngClassEven:ko,ngClassOdd:_o,ngCloak:Ro,ngController:xo,ngForm:Xr,ngHide:ia,ngIf:$o,ngInclude:Ao,ngInit:Po,ngNonBindable:Yo,ngPluralize:ta,ngRepeat:ea,ngShow:na,ngStyle:ra,ngSwitch:oa,ngSwitchWhen:aa,ngSwitchDefault:sa,ngOptions:Zo,ngTransclude:ca,ngModel:Uo,ngList:Lo,ngChange:Io,pattern:ma,ngPattern:ma,required:ga,ngRequired:ga,minlength:ya,ngMinlength:ya,maxlength:va,ngMaxlength:va,ngValue:bo,ngModelOptions:Wo}).directive({ngInclude:No}).directive(qr).directive(So),t.provider({$anchorScroll:qe,$animate:Ge,$animateCss:Je,$$animateJs:We,$$animateQueue:Xe,$$AnimateRunner:Qe,$$animateAsyncRun:Ye,$browser:Ze,$cacheFactory:tn,$controller:pn,$document:gn,$exceptionHandler:mn,$filter:pr,$$forceReflow:vn,$interpolate:Ln,$interval:Fn,$http:$n,$httpParamSerializer:Dn,$httpParamSerializerJQLike:_n,$httpBackend:Nn,$xhrFactory:An,$jsonpCallbacks:Mn,$location:ii,$log:ri,$parse:Vi,$rootScope:Gi,$q:Ui,$$q:zi,$sce:er,$sceDelegate:tr,$sniffer:nr,$templateCache:en,$templateRequest:rr,$$testability:or,$timeout:ar,$window:dr,$$rAF:Xi,$$jqLite:Re,$$HashMap:Ke,$$cookieReader:fr})}]),v.module("ngLocale",[],["$provide",function(t){t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(t,e){var n=0|t,i=function(t,e){var n=e;void 0===n&&(n=Math.min(function(t){var e=(t+="").indexOf(".");return-1==e?0:t.length-e-1}(t),3));var i=Math.pow(10,n);return{v:n,f:(t*i|0)%i}}(t,e);return 1==n&&0==i.v?"one":"other"}})}]),l(t.document).ready(function(){!function(e,n){var i,r,o={};if(b(bt,function(t){var n=t+"app";!i&&e.hasAttribute&&e.hasAttribute(n)&&(i=e,r=e.getAttribute(n))}),b(bt,function(t){var n,o=t+"app";!i&&(n=e.querySelector("["+o.replace(":","\\:")+"]"))&&(i=n,r=n.getAttribute(o))}),i){if(!Ct)return void t.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");o.strictDi=null!==function(t,e){var n,i,r=bt.length;for(i=0;i<r;++i)if(n=bt[i]+"strict-di",M(n=t.getAttribute(n)))return n;return null}(i),n(i,r?[r]:[],o)}}(t.document,Tt)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')},function(t,e,n){var i;
/*!
 * jQuery JavaScript Library v3.1.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2016-09-22T22:30Z
 */
/*!
 * jQuery JavaScript Library v3.1.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2016-09-22T22:30Z
 */!function(e,n){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,function(n,r){"use strict";var o=[],a=n.document,s=Object.getPrototypeOf,l=o.slice,c=o.concat,u=o.push,d=o.indexOf,h={},f=h.toString,p=h.hasOwnProperty,g=p.toString,m=g.call(Object),v={};function y(t,e){var n=(e=e||a).createElement("script");n.text=t,e.head.appendChild(n).parentNode.removeChild(n)}var E=function(t,e){return new E.fn.init(t,e)},b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,C=/^-ms-/,T=/-([a-z])/g,w=function(t,e){return e.toUpperCase()};function I(t){var e=!!t&&"length"in t&&t.length,n=E.type(t);return"function"!==n&&!E.isWindow(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}E.fn=E.prototype={jquery:"3.1.1",constructor:E,length:0,toArray:function(){return l.call(this)},get:function(t){return null==t?l.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=E.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return E.each(this,t)},map:function(t){return this.pushStack(E.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(l.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:o.sort,splice:o.splice},E.extend=E.fn.extend=function(){var t,e,n,i,r,o,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||E.isFunction(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(t=arguments[s]))for(e in t)n=a[e],a!==(i=t[e])&&(c&&i&&(E.isPlainObject(i)||(r=E.isArray(i)))?(r?(r=!1,o=n&&E.isArray(n)?n:[]):o=n&&E.isPlainObject(n)?n:{},a[e]=E.extend(c,o,i)):void 0!==i&&(a[e]=i));return a},E.extend({expando:"jQuery"+("3.1.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===E.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=E.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==f.call(t)||(e=s(t))&&("function"!=typeof(n=p.call(e,"constructor")&&e.constructor)||g.call(n)!==m))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?h[f.call(t)]||"object":typeof t},globalEval:function(t){y(t)},camelCase:function(t){return t.replace(C,"ms-").replace(T,w)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var n,i=0;if(I(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(b,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(I(Object(t))?E.merge(n,"string"==typeof t?[t]:t):u.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:d.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,o=t.length,a=!n;r<o;r++)!e(t[r],r)!==a&&i.push(t[r]);return i},map:function(t,e,n){var i,r,o=0,a=[];if(I(t))for(i=t.length;o<i;o++)null!=(r=e(t[o],o,n))&&a.push(r);else for(o in t)null!=(r=e(t[o],o,n))&&a.push(r);return c.apply([],a)},guid:1,proxy:function(t,e){var n,i,r;if("string"==typeof e&&(n=t[e],e=t,t=n),E.isFunction(t))return i=l.call(arguments,2),(r=function(){return t.apply(e||this,i.concat(l.call(arguments)))}).guid=t.guid=t.guid||E.guid++,r},now:Date.now,support:v}),"function"==typeof Symbol&&(E.fn[Symbol.iterator]=o[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){h["[object "+e+"]"]=e.toLowerCase()});var O=
/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */
function(t){var e,n,i,r,o,a,s,l,c,u,d,h,f,p,g,m,v,y,E,b="sizzle"+1*new Date,C=t.document,T=0,w=0,I=at(),O=at(),D=at(),_=function(t,e){return t===e&&(d=!0),0},k={}.hasOwnProperty,R=[],x=R.pop,S=R.push,K=R.push,$=R.slice,A=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},N="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",P="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",F="\\["+P+"*("+L+")(?:"+P+"*([*^$|!~]?=)"+P+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+P+"*\\]",M=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",j=new RegExp(P+"+","g"),B=new RegExp("^"+P+"+|((?:^|[^\\\\])(?:\\\\.)*)"+P+"+$","g"),q=new RegExp("^"+P+"*,"+P+"*"),H=new RegExp("^"+P+"*([>+~]|"+P+")"+P+"*"),V=new RegExp("="+P+"*([^\\]'\"]*?)"+P+"*\\]","g"),U=new RegExp(M),z=new RegExp("^"+L+"$"),W={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+M),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+P+"*(even|odd|(([+-]|)(\\d*)n|)"+P+"*(?:([+-]|)"+P+"*(\\d+)|))"+P+"*\\)|)","i"),bool:new RegExp("^(?:"+N+")$","i"),needsContext:new RegExp("^"+P+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+P+"*((?:-\\d)?\\d*)"+P+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,Z=new RegExp("\\\\([\\da-f]{1,6}"+P+"?|("+P+")|.)","ig"),tt=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},et=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,nt=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},it=function(){h()},rt=yt(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{K.apply(R=$.call(C.childNodes),C.childNodes),R[C.childNodes.length].nodeType}catch(t){K={apply:R.length?function(t,e){S.apply(t,$.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function ot(t,e,i,r){var o,s,c,u,d,p,v,y=e&&e.ownerDocument,T=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==T&&9!==T&&11!==T)return i;if(!r&&((e?e.ownerDocument||e:C)!==f&&h(e),e=e||f,g)){if(11!==T&&(d=Q.exec(t)))if(o=d[1]){if(9===T){if(!(c=e.getElementById(o)))return i;if(c.id===o)return i.push(c),i}else if(y&&(c=y.getElementById(o))&&E(e,c)&&c.id===o)return i.push(c),i}else{if(d[2])return K.apply(i,e.getElementsByTagName(t)),i;if((o=d[3])&&n.getElementsByClassName&&e.getElementsByClassName)return K.apply(i,e.getElementsByClassName(o)),i}if(n.qsa&&!D[t+" "]&&(!m||!m.test(t))){if(1!==T)y=e,v=t;else if("object"!==e.nodeName.toLowerCase()){for((u=e.getAttribute("id"))?u=u.replace(et,nt):e.setAttribute("id",u=b),s=(p=a(t)).length;s--;)p[s]="#"+u+" "+vt(p[s]);v=p.join(","),y=J.test(t)&&gt(e.parentNode)||e}if(v)try{return K.apply(i,y.querySelectorAll(v)),i}catch(t){}finally{u===b&&e.removeAttribute("id")}}}return l(t.replace(B,"$1"),e,i,r)}function at(){var t=[];return function e(n,r){return t.push(n+" ")>i.cacheLength&&delete e[t.shift()],e[n+" "]=r}}function st(t){return t[b]=!0,t}function lt(t){var e=f.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ct(t,e){for(var n=t.split("|"),r=n.length;r--;)i.attrHandle[n[r]]=e}function ut(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function dt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ht(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function ft(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&rt(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function pt(t){return st(function(e){return e=+e,st(function(n,i){for(var r,o=t([],n.length,e),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function gt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=ot.support={},o=ot.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},h=ot.setDocument=function(t){var e,r,a=t?t.ownerDocument||t:C;return a!==f&&9===a.nodeType&&a.documentElement?(p=(f=a).documentElement,g=!o(f),C!==f&&(r=f.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",it,!1):r.attachEvent&&r.attachEvent("onunload",it)),n.attributes=lt(function(t){return t.className="i",!t.getAttribute("className")}),n.getElementsByTagName=lt(function(t){return t.appendChild(f.createComment("")),!t.getElementsByTagName("*").length}),n.getElementsByClassName=Y.test(f.getElementsByClassName),n.getById=lt(function(t){return p.appendChild(t).id=b,!f.getElementsByName||!f.getElementsByName(b).length}),n.getById?(i.filter.ID=function(t){var e=t.replace(Z,tt);return function(t){return t.getAttribute("id")===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n=e.getElementById(t);return n?[n]:[]}}):(i.filter.ID=function(t){var e=t.replace(Z,tt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n,i,r,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(r=e.getElementsByName(t),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),i.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},i.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&g)return e.getElementsByClassName(t)},v=[],m=[],(n.qsa=Y.test(f.querySelectorAll))&&(lt(function(t){p.appendChild(t).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+P+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+P+"*(?:value|"+N+")"),t.querySelectorAll("[id~="+b+"-]").length||m.push("~="),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+b+"+*").length||m.push(".#.+[+~]")}),lt(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=f.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+P+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),p.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Y.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&lt(function(t){n.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),v.push("!=",M)}),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),e=Y.test(p.compareDocumentPosition),E=e||Y.test(p.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},_=e?function(t,e){if(t===e)return d=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===i?t===f||t.ownerDocument===C&&E(C,t)?-1:e===f||e.ownerDocument===C&&E(C,e)?1:u?A(u,t)-A(u,e):0:4&i?-1:1)}:function(t,e){if(t===e)return d=!0,0;var n,i=0,r=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!r||!o)return t===f?-1:e===f?1:r?-1:o?1:u?A(u,t)-A(u,e):0;if(r===o)return ut(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;a[i]===s[i];)i++;return i?ut(a[i],s[i]):a[i]===C?-1:s[i]===C?1:0},f):f},ot.matches=function(t,e){return ot(t,null,null,e)},ot.matchesSelector=function(t,e){if((t.ownerDocument||t)!==f&&h(t),e=e.replace(V,"='$1']"),n.matchesSelector&&g&&!D[e+" "]&&(!v||!v.test(e))&&(!m||!m.test(e)))try{var i=y.call(t,e);if(i||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return ot(e,f,null,[t]).length>0},ot.contains=function(t,e){return(t.ownerDocument||t)!==f&&h(t),E(t,e)},ot.attr=function(t,e){(t.ownerDocument||t)!==f&&h(t);var r=i.attrHandle[e.toLowerCase()],o=r&&k.call(i.attrHandle,e.toLowerCase())?r(t,e,!g):void 0;return void 0!==o?o:n.attributes||!g?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},ot.escape=function(t){return(t+"").replace(et,nt)},ot.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ot.uniqueSort=function(t){var e,i=[],r=0,o=0;if(d=!n.detectDuplicates,u=!n.sortStable&&t.slice(0),t.sort(_),d){for(;e=t[o++];)e===t[o]&&(r=i.push(o));for(;r--;)t.splice(i[r],1)}return u=null,t},r=ot.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=r(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=r(e);return n},(i=ot.selectors={cacheLength:50,createPseudo:st,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Z,tt),t[3]=(t[3]||t[4]||t[5]||"").replace(Z,tt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ot.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ot.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return W.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&U.test(n)&&(e=a(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Z,tt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=I[t+" "];return e||(e=new RegExp("(^|"+P+")"+t+"("+P+"|$)"))&&I(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(i){var r=ot.attr(i,t);return null==r?"!="===e:!e||(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r.replace(j," ")+" ").indexOf(n)>-1:"|="===e&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,r){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var c,u,d,h,f,p,g=o!==a?"nextSibling":"previousSibling",m=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!l&&!s,E=!1;if(m){if(o){for(;g;){for(h=e;h=h[g];)if(s?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[a?m.firstChild:m.lastChild],a&&y){for(E=(f=(c=(u=(d=(h=m)[b]||(h[b]={}))[h.uniqueID]||(d[h.uniqueID]={}))[t]||[])[0]===T&&c[1])&&c[2],h=f&&m.childNodes[f];h=++f&&h&&h[g]||(E=f=0)||p.pop();)if(1===h.nodeType&&++E&&h===e){u[t]=[T,f,E];break}}else if(y&&(E=f=(c=(u=(d=(h=e)[b]||(h[b]={}))[h.uniqueID]||(d[h.uniqueID]={}))[t]||[])[0]===T&&c[1]),!1===E)for(;(h=++f&&h&&h[g]||(E=f=0)||p.pop())&&((s?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++E||(y&&((u=(d=h[b]||(h[b]={}))[h.uniqueID]||(d[h.uniqueID]={}))[t]=[T,E]),h!==e)););return(E-=r)===i||E%i==0&&E/i>=0}}},PSEUDO:function(t,e){var n,r=i.pseudos[t]||i.setFilters[t.toLowerCase()]||ot.error("unsupported pseudo: "+t);return r[b]?r(e):r.length>1?(n=[t,t,"",e],i.setFilters.hasOwnProperty(t.toLowerCase())?st(function(t,n){for(var i,o=r(t,e),a=o.length;a--;)t[i=A(t,o[a])]=!(n[i]=o[a])}):function(t){return r(t,0,n)}):r}},pseudos:{not:st(function(t){var e=[],n=[],i=s(t.replace(B,"$1"));return i[b]?st(function(t,e,n,r){for(var o,a=i(t,null,r,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,r,o){return e[0]=t,i(e,null,o,n),e[0]=null,!n.pop()}}),has:st(function(t){return function(e){return ot(t,e).length>0}}),contains:st(function(t){return t=t.replace(Z,tt),function(e){return(e.textContent||e.innerText||r(e)).indexOf(t)>-1}}),lang:st(function(t){return z.test(t||"")||ot.error("unsupported lang: "+t),t=t.replace(Z,tt).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:ft(!1),disabled:ft(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!i.pseudos.empty(t)},header:function(t){return G.test(t.nodeName)},input:function(t){return X.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:pt(function(){return[0]}),last:pt(function(t,e){return[e-1]}),eq:pt(function(t,e,n){return[n<0?n+e:n]}),even:pt(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:pt(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:pt(function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t}),gt:pt(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[e]=dt(e);for(e in{submit:!0,reset:!0})i.pseudos[e]=ht(e);function mt(){}function vt(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function yt(t,e,n){var i=e.dir,r=e.next,o=r||i,a=n&&"parentNode"===o,s=w++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||a)return t(e,n,r);return!1}:function(e,n,l){var c,u,d,h=[T,s];if(l){for(;e=e[i];)if((1===e.nodeType||a)&&t(e,n,l))return!0}else for(;e=e[i];)if(1===e.nodeType||a)if(u=(d=e[b]||(e[b]={}))[e.uniqueID]||(d[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[i]||e;else{if((c=u[o])&&c[0]===T&&c[1]===s)return h[2]=c[2];if(u[o]=h,h[2]=t(e,n,l))return!0}return!1}}function Et(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function bt(t,e,n,i,r){for(var o,a=[],s=0,l=t.length,c=null!=e;s<l;s++)(o=t[s])&&(n&&!n(o,i,r)||(a.push(o),c&&e.push(s)));return a}function Ct(t,e,n,i,r,o){return i&&!i[b]&&(i=Ct(i)),r&&!r[b]&&(r=Ct(r,o)),st(function(o,a,s,l){var c,u,d,h=[],f=[],p=a.length,g=o||function(t,e,n){for(var i=0,r=e.length;i<r;i++)ot(t,e[i],n);return n}(e||"*",s.nodeType?[s]:s,[]),m=!t||!o&&e?g:bt(g,h,t,s,l),v=n?r||(o?t:p||i)?[]:a:m;if(n&&n(m,v,s,l),i)for(c=bt(v,f),i(c,[],s,l),u=c.length;u--;)(d=c[u])&&(v[f[u]]=!(m[f[u]]=d));if(o){if(r||t){if(r){for(c=[],u=v.length;u--;)(d=v[u])&&c.push(m[u]=d);r(null,v=[],c,l)}for(u=v.length;u--;)(d=v[u])&&(c=r?A(o,d):h[u])>-1&&(o[c]=!(a[c]=d))}}else v=bt(v===a?v.splice(p,v.length):v),r?r(null,a,v,l):K.apply(a,v)})}function Tt(t){for(var e,n,r,o=t.length,a=i.relative[t[0].type],s=a||i.relative[" "],l=a?1:0,u=yt(function(t){return t===e},s,!0),d=yt(function(t){return A(e,t)>-1},s,!0),h=[function(t,n,i){var r=!a&&(i||n!==c)||((e=n).nodeType?u(t,n,i):d(t,n,i));return e=null,r}];l<o;l++)if(n=i.relative[t[l].type])h=[yt(Et(h),n)];else{if((n=i.filter[t[l].type].apply(null,t[l].matches))[b]){for(r=++l;r<o&&!i.relative[t[r].type];r++);return Ct(l>1&&Et(h),l>1&&vt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(B,"$1"),n,l<r&&Tt(t.slice(l,r)),r<o&&Tt(t=t.slice(r)),r<o&&vt(t))}h.push(n)}return Et(h)}return mt.prototype=i.filters=i.pseudos,i.setFilters=new mt,a=ot.tokenize=function(t,e){var n,r,o,a,s,l,c,u=O[t+" "];if(u)return e?0:u.slice(0);for(s=t,l=[],c=i.preFilter;s;){for(a in n&&!(r=q.exec(s))||(r&&(s=s.slice(r[0].length)||s),l.push(o=[])),n=!1,(r=H.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(B," ")}),s=s.slice(n.length)),i.filter)!(r=W[a].exec(s))||c[a]&&!(r=c[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return e?s.length:s?ot.error(t):O(t,l).slice(0)},s=ot.compile=function(t,e){var n,r=[],o=[],s=D[t+" "];if(!s){for(e||(e=a(t)),n=e.length;n--;)(s=Tt(e[n]))[b]?r.push(s):o.push(s);(s=D(t,function(t,e){var n=e.length>0,r=t.length>0,o=function(o,a,s,l,u){var d,p,m,v=0,y="0",E=o&&[],b=[],C=c,w=o||r&&i.find.TAG("*",u),I=T+=null==C?1:Math.random()||.1,O=w.length;for(u&&(c=a===f||a||u);y!==O&&null!=(d=w[y]);y++){if(r&&d){for(p=0,a||d.ownerDocument===f||(h(d),s=!g);m=t[p++];)if(m(d,a||f,s)){l.push(d);break}u&&(T=I)}n&&((d=!m&&d)&&v--,o&&E.push(d))}if(v+=y,n&&y!==v){for(p=0;m=e[p++];)m(E,b,a,s);if(o){if(v>0)for(;y--;)E[y]||b[y]||(b[y]=x.call(l));b=bt(b)}K.apply(l,b),u&&!o&&b.length>0&&v+e.length>1&&ot.uniqueSort(l)}return u&&(T=I,c=C),E};return n?st(o):o}(o,r))).selector=t}return s},l=ot.select=function(t,e,n,r){var o,l,c,u,d,h="function"==typeof t&&t,f=!r&&a(t=h.selector||t);if(n=n||[],1===f.length){if((l=f[0]=f[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===e.nodeType&&g&&i.relative[l[1].type]){if(!(e=(i.find.ID(c.matches[0].replace(Z,tt),e)||[])[0]))return n;h&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(o=W.needsContext.test(t)?0:l.length;o--&&(c=l[o],!i.relative[u=c.type]);)if((d=i.find[u])&&(r=d(c.matches[0].replace(Z,tt),J.test(l[0].type)&&gt(e.parentNode)||e))){if(l.splice(o,1),!(t=r.length&&vt(l)))return K.apply(n,r),n;break}}return(h||s(t,f))(r,e,!g,n,!e||J.test(t)&&gt(e.parentNode)||e),n},n.sortStable=b.split("").sort(_).join("")===b,n.detectDuplicates=!!d,h(),n.sortDetached=lt(function(t){return 1&t.compareDocumentPosition(f.createElement("fieldset"))}),lt(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ct("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),n.attributes&&lt(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ct("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),lt(function(t){return null==t.getAttribute("disabled")})||ct(N,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),ot}(n);E.find=O,E.expr=O.selectors,E.expr[":"]=E.expr.pseudos,E.uniqueSort=E.unique=O.uniqueSort,E.text=O.getText,E.isXMLDoc=O.isXML,E.contains=O.contains,E.escapeSelector=O.escape;var D=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&E(t).is(n))break;i.push(t)}return i},_=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},k=E.expr.match.needsContext,R=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,x=/^.[^:#\[\.,]*$/;function S(t,e,n){return E.isFunction(e)?E.grep(t,function(t,i){return!!e.call(t,i,t)!==n}):e.nodeType?E.grep(t,function(t){return t===e!==n}):"string"!=typeof e?E.grep(t,function(t){return d.call(e,t)>-1!==n}):x.test(e)?E.filter(e,t,n):(e=E.filter(e,t),E.grep(t,function(t){return d.call(e,t)>-1!==n&&1===t.nodeType}))}E.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?E.find.matchesSelector(i,t)?[i]:[]:E.find.matches(t,E.grep(e,function(t){return 1===t.nodeType}))},E.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(E(t).filter(function(){for(e=0;e<i;e++)if(E.contains(r[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)E.find(t,r[e],n);return i>1?E.uniqueSort(n):n},filter:function(t){return this.pushStack(S(this,t||[],!1))},not:function(t){return this.pushStack(S(this,t||[],!0))},is:function(t){return!!S(this,"string"==typeof t&&k.test(t)?E(t):t||[],!1).length}});var K,$=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(E.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||K,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:$.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof E?e[0]:e,E.merge(this,E.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:a,!0)),R.test(i[1])&&E.isPlainObject(e))for(i in e)E.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(r=a.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):E.isFunction(t)?void 0!==n.ready?n.ready(t):t(E):E.makeArray(t,this)}).prototype=E.fn,K=E(a);var A=/^(?:parents|prev(?:Until|All))/,N={children:!0,contents:!0,next:!0,prev:!0};function P(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}E.fn.extend({has:function(t){var e=E(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(E.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,r=this.length,o=[],a="string"!=typeof t&&E(t);if(!k.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&E.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?E.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?d.call(E(t),this[0]):d.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),E.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return D(t,"parentNode")},parentsUntil:function(t,e,n){return D(t,"parentNode",n)},next:function(t){return P(t,"nextSibling")},prev:function(t){return P(t,"previousSibling")},nextAll:function(t){return D(t,"nextSibling")},prevAll:function(t){return D(t,"previousSibling")},nextUntil:function(t,e,n){return D(t,"nextSibling",n)},prevUntil:function(t,e,n){return D(t,"previousSibling",n)},siblings:function(t){return _((t.parentNode||{}).firstChild,t)},children:function(t){return _(t.firstChild)},contents:function(t){return t.contentDocument||E.merge([],t.childNodes)}},function(t,e){E.fn[t]=function(n,i){var r=E.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=E.filter(i,r)),this.length>1&&(N[t]||E.uniqueSort(r),A.test(t)&&r.reverse()),this.pushStack(r)}});var L=/[^\x20\t\r\n\f]+/g;function F(t){return t}function M(t){throw t}function j(t,e,n){var i;try{t&&E.isFunction(i=t.promise)?i.call(t).done(e).fail(n):t&&E.isFunction(i=t.then)?i.call(t,e,n):e.call(void 0,t)}catch(t){n.call(void 0,t)}}E.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return E.each(t.match(L)||[],function(t,n){e[n]=!0}),e}(t):E.extend({},t);var e,n,i,r,o=[],a=[],s=-1,l=function(){for(r=t.once,i=e=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&t.stopOnFalse&&(s=o.length,n=!1);t.memory||(n=!1),e=!1,r&&(o=n?[]:"")},c={add:function(){return o&&(n&&!e&&(s=o.length-1,a.push(n)),function e(n){E.each(n,function(n,i){E.isFunction(i)?t.unique&&c.has(i)||o.push(i):i&&i.length&&"string"!==E.type(i)&&e(i)})}(arguments),n&&!e&&l()),this},remove:function(){return E.each(arguments,function(t,e){for(var n;(n=E.inArray(e,o,n))>-1;)o.splice(n,1),n<=s&&s--}),this},has:function(t){return t?E.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return r=a=[],n||e||(o=n=""),this},locked:function(){return!!r},fireWith:function(t,n){return r||(n=[t,(n=n||[]).slice?n.slice():n],a.push(n),e||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},E.extend({Deferred:function(t){var e=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return E.Deferred(function(n){E.each(e,function(e,i){var r=E.isFunction(t[i[4]])&&t[i[4]];o[i[1]](function(){var t=r&&r.apply(this,arguments);t&&E.isFunction(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,r?[t]:arguments)})}),t=null}).promise()},then:function(t,i,r){var o=0;function a(t,e,i,r){return function(){var s=this,l=arguments,c=function(){var n,c;if(!(t<o)){if((n=i.apply(s,l))===e.promise())throw new TypeError("Thenable self-resolution");c=n&&("object"==typeof n||"function"==typeof n)&&n.then,E.isFunction(c)?r?c.call(n,a(o,e,F,r),a(o,e,M,r)):(o++,c.call(n,a(o,e,F,r),a(o,e,M,r),a(o,e,F,e.notifyWith))):(i!==F&&(s=void 0,l=[n]),(r||e.resolveWith)(s,l))}},u=r?c:function(){try{c()}catch(n){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(n,u.stackTrace),t+1>=o&&(i!==M&&(s=void 0,l=[n]),e.rejectWith(s,l))}};t?u():(E.Deferred.getStackHook&&(u.stackTrace=E.Deferred.getStackHook()),n.setTimeout(u))}}return E.Deferred(function(n){e[0][3].add(a(0,n,E.isFunction(r)?r:F,n.notifyWith)),e[1][3].add(a(0,n,E.isFunction(t)?t:F)),e[2][3].add(a(0,n,E.isFunction(i)?i:M))}).promise()},promise:function(t){return null!=t?E.extend(t,r):r}},o={};return E.each(e,function(t,n){var a=n[2],s=n[5];r[n[1]]=a.add,s&&a.add(function(){i=s},e[3-t][2].disable,e[0][2].lock),a.add(n[3].fire),o[n[0]]=function(){return o[n[0]+"With"](this===o?void 0:this,arguments),this},o[n[0]+"With"]=a.fireWith}),r.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,n=e,i=Array(n),r=l.call(arguments),o=E.Deferred(),a=function(t){return function(n){i[t]=this,r[t]=arguments.length>1?l.call(arguments):n,--e||o.resolveWith(i,r)}};if(e<=1&&(j(t,o.done(a(n)).resolve,o.reject),"pending"===o.state()||E.isFunction(r[n]&&r[n].then)))return o.then();for(;n--;)j(r[n],a(n),o.reject);return o.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(t,e){n.console&&n.console.warn&&t&&B.test(t.name)&&n.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},E.readyException=function(t){n.setTimeout(function(){throw t})};var q=E.Deferred();function H(){a.removeEventListener("DOMContentLoaded",H),n.removeEventListener("load",H),E.ready()}E.fn.ready=function(t){return q.then(t).catch(function(t){E.readyException(t)}),this},E.extend({isReady:!1,readyWait:1,holdReady:function(t){t?E.readyWait++:E.ready(!0)},ready:function(t){(!0===t?--E.readyWait:E.isReady)||(E.isReady=!0,!0!==t&&--E.readyWait>0||q.resolveWith(a,[E]))}}),E.ready.then=q.then,"complete"===a.readyState||"loading"!==a.readyState&&!a.documentElement.doScroll?n.setTimeout(E.ready):(a.addEventListener("DOMContentLoaded",H),n.addEventListener("load",H));var V=function(t,e,n,i,r,o,a){var s=0,l=t.length,c=null==n;if("object"===E.type(n))for(s in r=!0,n)V(t,e,s,n[s],!0,o,a);else if(void 0!==i&&(r=!0,E.isFunction(i)||(a=!0),c&&(a?(e.call(t,i),e=null):(c=e,e=function(t,e,n){return c.call(E(t),n)})),e))for(;s<l;s++)e(t[s],n,a?i:i.call(t[s],s,e(t[s],n)));return r?t:c?e.call(t):l?e(t[0],n):o},U=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function z(){this.expando=E.expando+z.uid++}z.uid=1,z.prototype={cache:function(t){var e=t[this.expando];return e||(e={},U(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[E.camelCase(e)]=n;else for(i in e)r[E.camelCase(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][E.camelCase(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=E.isArray(e)?e.map(E.camelCase):(e=E.camelCase(e))in i?[e]:e.match(L)||[]).length;for(;n--;)delete i[e[n]]}(void 0===e||E.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!E.isEmptyObject(e)}};var W=new z,X=new z,G=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Y=/[A-Z]/g;function Q(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(Y,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:G.test(t)?JSON.parse(t):t)}(n)}catch(t){}X.set(t,e,n)}else n=void 0;return n}E.extend({hasData:function(t){return X.hasData(t)||W.hasData(t)},data:function(t,e,n){return X.access(t,e,n)},removeData:function(t,e){X.remove(t,e)},_data:function(t,e,n){return W.access(t,e,n)},_removeData:function(t,e){W.remove(t,e)}}),E.fn.extend({data:function(t,e){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(r=X.get(o),1===o.nodeType&&!W.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(i=a[n].name).indexOf("data-")&&(i=E.camelCase(i.slice(5)),Q(o,i,r[i]));W.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){X.set(this,t)}):V(this,function(e){var n;if(o&&void 0===e)return void 0!==(n=X.get(o,t))?n:void 0!==(n=Q(o,t))?n:void 0;this.each(function(){X.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){X.remove(this,t)})}}),E.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=W.get(t,e),n&&(!i||E.isArray(n)?i=W.access(t,e,E.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=E.queue(t,e),i=n.length,r=n.shift(),o=E._queueHooks(t,e);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,function(){E.dequeue(t,e)},o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return W.get(t,n)||W.access(t,n,{empty:E.Callbacks("once memory").add(function(){W.remove(t,[e+"queue",n])})})}}),E.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?E.queue(this[0],t):void 0===e?this:this.each(function(){var n=E.queue(this,t,e);E._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&E.dequeue(this,t)})},dequeue:function(t){return this.each(function(){E.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=E.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=W.get(o[a],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(e)}});var J=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Z=new RegExp("^(?:([+-])=|)("+J+")([a-z%]*)$","i"),tt=["Top","Right","Bottom","Left"],et=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&E.contains(t.ownerDocument,t)&&"none"===E.css(t,"display")},nt=function(t,e,n,i){var r,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];for(o in r=n.apply(t,i||[]),e)t.style[o]=a[o];return r};function it(t,e,n,i){var r,o=1,a=20,s=i?function(){return i.cur()}:function(){return E.css(t,e,"")},l=s(),c=n&&n[3]||(E.cssNumber[e]?"":"px"),u=(E.cssNumber[e]||"px"!==c&&+l)&&Z.exec(E.css(t,e));if(u&&u[3]!==c){c=c||u[3],n=n||[],u=+l||1;do{u/=o=o||".5",E.style(t,e,u+c)}while(o!==(o=s()/l)&&1!==o&&--a)}return n&&(u=+u||+l||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=r)),r}var rt={};function ot(t){var e,n=t.ownerDocument,i=t.nodeName,r=rt[i];return r||(e=n.body.appendChild(n.createElement(i)),r=E.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),rt[i]=r,r)}function at(t,e){for(var n,i,r=[],o=0,a=t.length;o<a;o++)(i=t[o]).style&&(n=i.style.display,e?("none"===n&&(r[o]=W.get(i,"display")||null,r[o]||(i.style.display="")),""===i.style.display&&et(i)&&(r[o]=ot(i))):"none"!==n&&(r[o]="none",W.set(i,"display",n)));for(o=0;o<a;o++)null!=r[o]&&(t[o].style.display=r[o]);return t}E.fn.extend({show:function(){return at(this,!0)},hide:function(){return at(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){et(this)?E(this).show():E(this).hide()})}});var st=/^(?:checkbox|radio)$/i,lt=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ct=/^$|\/(?:java|ecma)script/i,ut={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function dt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&E.nodeName(t,e)?E.merge([t],n):n}function ht(t,e){for(var n=0,i=t.length;n<i;n++)W.set(t[n],"globalEval",!e||W.get(e[n],"globalEval"))}ut.optgroup=ut.option,ut.tbody=ut.tfoot=ut.colgroup=ut.caption=ut.thead,ut.th=ut.td;var ft,pt,gt=/<|&#?\w+;/;function mt(t,e,n,i,r){for(var o,a,s,l,c,u,d=e.createDocumentFragment(),h=[],f=0,p=t.length;f<p;f++)if((o=t[f])||0===o)if("object"===E.type(o))E.merge(h,o.nodeType?[o]:o);else if(gt.test(o)){for(a=a||d.appendChild(e.createElement("div")),s=(lt.exec(o)||["",""])[1].toLowerCase(),l=ut[s]||ut._default,a.innerHTML=l[1]+E.htmlPrefilter(o)+l[2],u=l[0];u--;)a=a.lastChild;E.merge(h,a.childNodes),(a=d.firstChild).textContent=""}else h.push(e.createTextNode(o));for(d.textContent="",f=0;o=h[f++];)if(i&&E.inArray(o,i)>-1)r&&r.push(o);else if(c=E.contains(o.ownerDocument,o),a=dt(d.appendChild(o),"script"),c&&ht(a),n)for(u=0;o=a[u++];)ct.test(o.type||"")&&n.push(o);return d}ft=a.createDocumentFragment().appendChild(a.createElement("div")),(pt=a.createElement("input")).setAttribute("type","radio"),pt.setAttribute("checked","checked"),pt.setAttribute("name","t"),ft.appendChild(pt),v.checkClone=ft.cloneNode(!0).cloneNode(!0).lastChild.checked,ft.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!ft.cloneNode(!0).lastChild.defaultValue;var vt=a.documentElement,yt=/^key/,Et=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,bt=/^([^.]*)(?:\.(.+)|)/;function Ct(){return!0}function Tt(){return!1}function wt(){try{return a.activeElement}catch(t){}}function It(t,e,n,i,r,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(i=i||n,n=void 0),e)It(t,s,n,i,e[s],o);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=Tt;else if(!r)return t;return 1===o&&(a=r,(r=function(t){return E().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=E.guid++)),t.each(function(){E.event.add(this,e,r,i,n)})}E.event={global:{},add:function(t,e,n,i,r){var o,a,s,l,c,u,d,h,f,p,g,m=W.get(t);if(m)for(n.handler&&(n=(o=n).handler,r=o.selector),r&&E.find.matchesSelector(vt,r),n.guid||(n.guid=E.guid++),(l=m.events)||(l=m.events={}),(a=m.handle)||(a=m.handle=function(e){return void 0!==E&&E.event.triggered!==e.type?E.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(L)||[""]).length;c--;)f=g=(s=bt.exec(e[c])||[])[1],p=(s[2]||"").split(".").sort(),f&&(d=E.event.special[f]||{},f=(r?d.delegateType:d.bindType)||f,d=E.event.special[f]||{},u=E.extend({type:f,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&E.expr.match.needsContext.test(r),namespace:p.join(".")},o),(h=l[f])||((h=l[f]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(t,i,p,a)||t.addEventListener&&t.addEventListener(f,a)),d.add&&(d.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,u):h.push(u),E.event.global[f]=!0)},remove:function(t,e,n,i,r){var o,a,s,l,c,u,d,h,f,p,g,m=W.hasData(t)&&W.get(t);if(m&&(l=m.events)){for(c=(e=(e||"").match(L)||[""]).length;c--;)if(f=g=(s=bt.exec(e[c])||[])[1],p=(s[2]||"").split(".").sort(),f){for(d=E.event.special[f]||{},h=l[f=(i?d.delegateType:d.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=h.length;o--;)u=h[o],!r&&g!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(h.splice(o,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(t,u));a&&!h.length&&(d.teardown&&!1!==d.teardown.call(t,p,m.handle)||E.removeEvent(t,f,m.handle),delete l[f])}else for(f in l)E.event.remove(t,f+e[c],n,i,!0);E.isEmptyObject(l)&&W.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,o,a,s=E.event.fix(t),l=new Array(arguments.length),c=(W.get(this,"events")||{})[s.type]||[],u=E.event.special[s.type]||{};for(l[0]=s,e=1;e<arguments.length;e++)l[e]=arguments[e];if(s.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,s)){for(a=E.event.handlers.call(this,s,c),e=0;(r=a[e++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(i=((E.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l))&&!1===(s.result=i)&&(s.preventDefault(),s.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,s),s.result}},handlers:function(t,e){var n,i,r,o,a,s=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(o=[],a={},n=0;n<l;n++)void 0===a[r=(i=e[n]).selector+" "]&&(a[r]=i.needsContext?E(r,this).index(c)>-1:E.find(r,this,null,[c]).length),a[r]&&o.push(i);o.length&&s.push({elem:c,handlers:o})}return c=this,l<e.length&&s.push({elem:c,handlers:e.slice(l)}),s},addProp:function(t,e){Object.defineProperty(E.Event.prototype,t,{enumerable:!0,configurable:!0,get:E.isFunction(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[E.expando]?t:new E.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==wt()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===wt()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&E.nodeName(this,"input"))return this.click(),!1},_default:function(t){return E.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},E.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},E.Event=function(t,e){if(!(this instanceof E.Event))return new E.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Ct:Tt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&E.extend(this,e),this.timeStamp=t&&t.timeStamp||E.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:Tt,isPropagationStopped:Tt,isImmediatePropagationStopped:Tt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Ct,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Ct,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Ct,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&yt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&Et.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},E.event.addProp),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){E.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=t.relatedTarget,r=t.handleObj;return i&&(i===this||E.contains(this,i))||(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}}),E.fn.extend({on:function(t,e,n,i){return It(this,t,e,n,i)},one:function(t,e,n,i){return It(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,E(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Tt),this.each(function(){E.event.remove(this,t,n,e)})}});var Ot=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Dt=/<script|<style|<link/i,_t=/checked\s*(?:[^=]|=\s*.checked.)/i,kt=/^true\/(.*)/,Rt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function xt(t,e){return E.nodeName(t,"table")&&E.nodeName(11!==e.nodeType?e:e.firstChild,"tr")&&t.getElementsByTagName("tbody")[0]||t}function St(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Kt(t){var e=kt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function $t(t,e){var n,i,r,o,a,s,l,c;if(1===e.nodeType){if(W.hasData(t)&&(o=W.access(t),a=W.set(e,o),c=o.events))for(r in delete a.handle,a.events={},c)for(n=0,i=c[r].length;n<i;n++)E.event.add(e,r,c[r][n]);X.hasData(t)&&(s=X.access(t),l=E.extend({},s),X.set(e,l))}}function At(t,e,n,i){e=c.apply([],e);var r,o,a,s,l,u,d=0,h=t.length,f=h-1,p=e[0],g=E.isFunction(p);if(g||h>1&&"string"==typeof p&&!v.checkClone&&_t.test(p))return t.each(function(r){var o=t.eq(r);g&&(e[0]=p.call(this,r,o.html())),At(o,e,n,i)});if(h&&(o=(r=mt(e,t[0].ownerDocument,!1,t,i)).firstChild,1===r.childNodes.length&&(r=o),o||i)){for(s=(a=E.map(dt(r,"script"),St)).length;d<h;d++)l=r,d!==f&&(l=E.clone(l,!0,!0),s&&E.merge(a,dt(l,"script"))),n.call(t[d],l,d);if(s)for(u=a[a.length-1].ownerDocument,E.map(a,Kt),d=0;d<s;d++)l=a[d],ct.test(l.type||"")&&!W.access(l,"globalEval")&&E.contains(u,l)&&(l.src?E._evalUrl&&E._evalUrl(l.src):y(l.textContent.replace(Rt,""),u))}return t}function Nt(t,e,n){for(var i,r=e?E.filter(e,t):t,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||E.cleanData(dt(i)),i.parentNode&&(n&&E.contains(i.ownerDocument,i)&&ht(dt(i,"script")),i.parentNode.removeChild(i));return t}E.extend({htmlPrefilter:function(t){return t.replace(Ot,"<$1></$2>")},clone:function(t,e,n){var i,r,o,a,s,l,c,u=t.cloneNode(!0),d=E.contains(t.ownerDocument,t);if(!(v.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||E.isXMLDoc(t)))for(a=dt(u),i=0,r=(o=dt(t)).length;i<r;i++)s=o[i],"input"===(c=(l=a[i]).nodeName.toLowerCase())&&st.test(s.type)?l.checked=s.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=s.defaultValue);if(e)if(n)for(o=o||dt(t),a=a||dt(u),i=0,r=o.length;i<r;i++)$t(o[i],a[i]);else $t(t,u);return(a=dt(u,"script")).length>0&&ht(a,!d&&dt(t,"script")),u},cleanData:function(t){for(var e,n,i,r=E.event.special,o=0;void 0!==(n=t[o]);o++)if(U(n)){if(e=n[W.expando]){if(e.events)for(i in e.events)r[i]?E.event.remove(n,i):E.removeEvent(n,i,e.handle);n[W.expando]=void 0}n[X.expando]&&(n[X.expando]=void 0)}}}),E.fn.extend({detach:function(t){return Nt(this,t,!0)},remove:function(t){return Nt(this,t)},text:function(t){return V(this,function(t){return void 0===t?E.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return At(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||xt(this,t).appendChild(t)})},prepend:function(){return At(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=xt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return At(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return At(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(E.cleanData(dt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return E.clone(this,t,e)})},html:function(t){return V(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Dt.test(t)&&!ut[(lt.exec(t)||["",""])[1].toLowerCase()]){t=E.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(E.cleanData(dt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return At(this,arguments,function(e){var n=this.parentNode;E.inArray(this,t)<0&&(E.cleanData(dt(this)),n&&n.replaceChild(e,this))},t)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){E.fn[t]=function(t){for(var n,i=[],r=E(t),o=r.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),E(r[a])[e](n),u.apply(i,n.get());return this.pushStack(i)}});var Pt=/^margin/,Lt=new RegExp("^("+J+")(?!px)[a-z%]+$","i"),Ft=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=n),e.getComputedStyle(t)};function Mt(t,e,n){var i,r,o,a,s=t.style;return(n=n||Ft(t))&&(""!==(a=n.getPropertyValue(e)||n[e])||E.contains(t.ownerDocument,t)||(a=E.style(t,e)),!v.pixelMarginRight()&&Lt.test(a)&&Pt.test(e)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),void 0!==a?a+"":a}function jt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(l){l.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",l.innerHTML="",vt.appendChild(s);var t=n.getComputedStyle(l);e="1%"!==t.top,o="2px"===t.marginLeft,i="4px"===t.width,l.style.marginRight="50%",r="4px"===t.marginRight,vt.removeChild(s),l=null}}var e,i,r,o,s=a.createElement("div"),l=a.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===l.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(l),E.extend(v,{pixelPosition:function(){return t(),e},boxSizingReliable:function(){return t(),i},pixelMarginRight:function(){return t(),r},reliableMarginLeft:function(){return t(),o}}))}();var Bt=/^(none|table(?!-c[ea]).+)/,qt={position:"absolute",visibility:"hidden",display:"block"},Ht={letterSpacing:"0",fontWeight:"400"},Vt=["Webkit","Moz","ms"],Ut=a.createElement("div").style;function zt(t){if(t in Ut)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=Vt.length;n--;)if((t=Vt[n]+e)in Ut)return t}function Wt(t,e,n){var i=Z.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function Xt(t,e,n,i,r){var o,a=0;for(o=n===(i?"border":"content")?4:"width"===e?1:0;o<4;o+=2)"margin"===n&&(a+=E.css(t,n+tt[o],!0,r)),i?("content"===n&&(a-=E.css(t,"padding"+tt[o],!0,r)),"margin"!==n&&(a-=E.css(t,"border"+tt[o]+"Width",!0,r))):(a+=E.css(t,"padding"+tt[o],!0,r),"padding"!==n&&(a+=E.css(t,"border"+tt[o]+"Width",!0,r)));return a}function Gt(t,e,n){var i,r=!0,o=Ft(t),a="border-box"===E.css(t,"boxSizing",!1,o);if(t.getClientRects().length&&(i=t.getBoundingClientRect()[e]),i<=0||null==i){if(((i=Mt(t,e,o))<0||null==i)&&(i=t.style[e]),Lt.test(i))return i;r=a&&(v.boxSizingReliable()||i===t.style[e]),i=parseFloat(i)||0}return i+Xt(t,e,n||(a?"border":"content"),r,o)+"px"}function Yt(t,e,n,i,r){return new Yt.prototype.init(t,e,n,i,r)}E.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Mt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,a,s=E.camelCase(e),l=t.style;if(e=E.cssProps[s]||(E.cssProps[s]=zt(s)||s),a=E.cssHooks[e]||E.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(t,!1,i))?r:l[e];"string"==(o=typeof n)&&(r=Z.exec(n))&&r[1]&&(n=it(t,e,r),o="number"),null!=n&&n==n&&("number"===o&&(n+=r&&r[3]||(E.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,i))||(l[e]=n))}},css:function(t,e,n,i){var r,o,a,s=E.camelCase(e);return e=E.cssProps[s]||(E.cssProps[s]=zt(s)||s),(a=E.cssHooks[e]||E.cssHooks[s])&&"get"in a&&(r=a.get(t,!0,n)),void 0===r&&(r=Mt(t,e,i)),"normal"===r&&e in Ht&&(r=Ht[e]),""===n||n?(o=parseFloat(r),!0===n||isFinite(o)?o||0:r):r}}),E.each(["height","width"],function(t,e){E.cssHooks[e]={get:function(t,n,i){if(n)return!Bt.test(E.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?Gt(t,e,i):nt(t,qt,function(){return Gt(t,e,i)})},set:function(t,n,i){var r,o=i&&Ft(t),a=i&&Xt(t,e,i,"border-box"===E.css(t,"boxSizing",!1,o),o);return a&&(r=Z.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=E.css(t,e)),Wt(0,n,a)}}}),E.cssHooks.marginLeft=jt(v.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Mt(t,"marginLeft"))||t.getBoundingClientRect().left-nt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),E.each({margin:"",padding:"",border:"Width"},function(t,e){E.cssHooks[t+e]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];i<4;i++)r[t+tt[i]+e]=o[i]||o[i-2]||o[0];return r}},Pt.test(t)||(E.cssHooks[t+e].set=Wt)}),E.fn.extend({css:function(t,e){return V(this,function(t,e,n){var i,r,o={},a=0;if(E.isArray(e)){for(i=Ft(t),r=e.length;a<r;a++)o[e[a]]=E.css(t,e[a],!1,i);return o}return void 0!==n?E.style(t,e,n):E.css(t,e)},t,e,arguments.length>1)}}),E.Tween=Yt,Yt.prototype={constructor:Yt,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||E.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(E.cssNumber[n]?"":"px")},cur:function(){var t=Yt.propHooks[this.prop];return t&&t.get?t.get(this):Yt.propHooks._default.get(this)},run:function(t){var e,n=Yt.propHooks[this.prop];return this.options.duration?this.pos=e=E.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Yt.propHooks._default.set(this),this}},Yt.prototype.init.prototype=Yt.prototype,Yt.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=E.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){E.fx.step[t.prop]?E.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[E.cssProps[t.prop]]&&!E.cssHooks[t.prop]?t.elem[t.prop]=t.now:E.style(t.elem,t.prop,t.now+t.unit)}}},Yt.propHooks.scrollTop=Yt.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},E.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},E.fx=Yt.prototype.init,E.fx.step={};var Qt,Jt,Zt=/^(?:toggle|show|hide)$/,te=/queueHooks$/;function ee(){Jt&&(n.requestAnimationFrame(ee),E.fx.tick())}function ne(){return n.setTimeout(function(){Qt=void 0}),Qt=E.now()}function ie(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=tt[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function re(t,e,n){for(var i,r=(oe.tweeners[e]||[]).concat(oe.tweeners["*"]),o=0,a=r.length;o<a;o++)if(i=r[o].call(n,e,t))return i}function oe(t,e,n){var i,r,o=0,a=oe.prefilters.length,s=E.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=Qt||ne(),n=Math.max(0,c.startTime+c.duration-e),i=1-(n/c.duration||0),o=0,a=c.tweens.length;o<a;o++)c.tweens[o].run(i);return s.notifyWith(t,[c,i,n]),i<1&&a?n:(s.resolveWith(t,[c]),!1)},c=s.promise({elem:t,props:E.extend({},e),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},n),originalProperties:e,originalOptions:n,startTime:Qt||ne(),duration:n.duration,tweens:[],createTween:function(e,n){var i=E.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var n=0,i=e?c.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)c.tweens[n].run(1);return e?(s.notifyWith(t,[c,1,0]),s.resolveWith(t,[c,e])):s.rejectWith(t,[c,e]),this}}),u=c.props;for(function(t,e){var n,i,r,o,a;for(n in t)if(r=e[i=E.camelCase(n)],o=t[n],E.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),(a=E.cssHooks[i])&&"expand"in a)for(n in o=a.expand(o),delete t[i],o)n in t||(t[n]=o[n],e[n]=r);else e[i]=r}(u,c.opts.specialEasing);o<a;o++)if(i=oe.prefilters[o].call(c,t,u,c.opts))return E.isFunction(i.stop)&&(E._queueHooks(c.elem,c.opts.queue).stop=E.proxy(i.stop,i)),i;return E.map(u,re,c),E.isFunction(c.opts.start)&&c.opts.start.call(t,c),E.fx.timer(E.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}E.Animation=E.extend(oe,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return it(n.elem,t,Z.exec(e),n),n}]},tweener:function(t,e){E.isFunction(t)?(e=t,t=["*"]):t=t.match(L);for(var n,i=0,r=t.length;i<r;i++)n=t[i],oe.tweeners[n]=oe.tweeners[n]||[],oe.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,r,o,a,s,l,c,u,d="width"in e||"height"in e,h=this,f={},p=t.style,g=t.nodeType&&et(t),m=W.get(t,"fxshow");for(i in n.queue||(null==(a=E._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,E.queue(t,"fx").length||a.empty.fire()})})),e)if(r=e[i],Zt.test(r)){if(delete e[i],o=o||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;g=!0}f[i]=m&&m[i]||E.style(t,i)}if((l=!E.isEmptyObject(e))||!E.isEmptyObject(f))for(i in d&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=m&&m.display)&&(c=W.get(t,"display")),"none"===(u=E.css(t,"display"))&&(c?u=c:(at([t],!0),c=t.style.display||c,u=E.css(t,"display"),at([t]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===E.css(t,"float")&&(l||(h.done(function(){p.display=c}),null==c&&(u=p.display,c="none"===u?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1,f)l||(m?"hidden"in m&&(g=m.hidden):m=W.access(t,"fxshow",{display:c}),o&&(m.hidden=!g),g&&at([t],!0),h.done(function(){for(i in g||at([t]),W.remove(t,"fxshow"),f)E.style(t,i,f[i])})),l=re(g?m[i]:0,i,h),i in m||(m[i]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?oe.prefilters.unshift(t):oe.prefilters.push(t)}}),E.speed=function(t,e,n){var i=t&&"object"==typeof t?E.extend({},t):{complete:n||!n&&e||E.isFunction(t)&&t,duration:t,easing:n&&e||e&&!E.isFunction(e)&&e};return E.fx.off||a.hidden?i.duration=0:"number"!=typeof i.duration&&(i.duration in E.fx.speeds?i.duration=E.fx.speeds[i.duration]:i.duration=E.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){E.isFunction(i.old)&&i.old.call(this),i.queue&&E.dequeue(this,i.queue)},i},E.fn.extend({fadeTo:function(t,e,n,i){return this.filter(et).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=E.isEmptyObject(t),o=E.speed(e,n,i),a=function(){var e=oe(this,E.extend({},t),o);(r||W.get(this,"finish"))&&e.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",o=E.timers,a=W.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&te.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(n),e=!1,o.splice(r,1));!e&&n||E.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=W.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],o=E.timers,a=i?i.length:0;for(n.finish=!0,E.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<a;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),E.each(["toggle","show","hide"],function(t,e){var n=E.fn[e];E.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ie(e,!0),t,i,r)}}),E.each({slideDown:ie("show"),slideUp:ie("hide"),slideToggle:ie("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){E.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),E.timers=[],E.fx.tick=function(){var t,e=0,n=E.timers;for(Qt=E.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||E.fx.stop(),Qt=void 0},E.fx.timer=function(t){E.timers.push(t),t()?E.fx.start():E.timers.pop()},E.fx.interval=13,E.fx.start=function(){Jt||(Jt=n.requestAnimationFrame?n.requestAnimationFrame(ee):n.setInterval(E.fx.tick,E.fx.interval))},E.fx.stop=function(){n.cancelAnimationFrame?n.cancelAnimationFrame(Jt):n.clearInterval(Jt),Jt=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(t,e){return t=E.fx&&E.fx.speeds[t]||t,e=e||"fx",this.queue(e,function(e,i){var r=n.setTimeout(e,t);i.stop=function(){n.clearTimeout(r)}})},function(){var t=a.createElement("input"),e=a.createElement("select").appendChild(a.createElement("option"));t.type="checkbox",v.checkOn=""!==t.value,v.optSelected=e.selected,(t=a.createElement("input")).value="t",t.type="radio",v.radioValue="t"===t.value}();var ae,se=E.expr.attrHandle;E.fn.extend({attr:function(t,e){return V(this,E.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){E.removeAttr(this,t)})}}),E.extend({attr:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?E.prop(t,e,n):(1===o&&E.isXMLDoc(t)||(r=E.attrHooks[e.toLowerCase()]||(E.expr.match.bool.test(e)?ae:void 0)),void 0!==n?null===n?void E.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=E.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!v.radioValue&&"radio"===e&&E.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(L);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),ae={set:function(t,e,n){return!1===e?E.removeAttr(t,n):t.setAttribute(n,n),n}},E.each(E.expr.match.bool.source.match(/\w+/g),function(t,e){var n=se[e]||E.find.attr;se[e]=function(t,e,i){var r,o,a=e.toLowerCase();return i||(o=se[a],se[a]=r,r=null!=n(t,e,i)?a:null,se[a]=o),r}});var le=/^(?:input|select|textarea|button)$/i,ce=/^(?:a|area)$/i;function ue(t){return(t.match(L)||[]).join(" ")}function de(t){return t.getAttribute&&t.getAttribute("class")||""}E.fn.extend({prop:function(t,e){return V(this,E.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[E.propFix[t]||t]})}}),E.extend({prop:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&E.isXMLDoc(t)||(e=E.propFix[e]||e,r=E.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=E.find.attr(t,"tabindex");return e?parseInt(e,10):le.test(t.nodeName)||ce.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(E.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){E.propFix[this.toLowerCase()]=this}),E.fn.extend({addClass:function(t){var e,n,i,r,o,a,s,l=0;if(E.isFunction(t))return this.each(function(e){E(this).addClass(t.call(this,e,de(this)))});if("string"==typeof t&&t)for(e=t.match(L)||[];n=this[l++];)if(r=de(n),i=1===n.nodeType&&" "+ue(r)+" "){for(a=0;o=e[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");r!==(s=ue(i))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,i,r,o,a,s,l=0;if(E.isFunction(t))return this.each(function(e){E(this).removeClass(t.call(this,e,de(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(L)||[];n=this[l++];)if(r=de(n),i=1===n.nodeType&&" "+ue(r)+" "){for(a=0;o=e[a++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");r!==(s=ue(i))&&n.setAttribute("class",s)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):E.isFunction(t)?this.each(function(n){E(this).toggleClass(t.call(this,n,de(this),e),e)}):this.each(function(){var e,i,r,o;if("string"===n)for(i=0,r=E(this),o=t.match(L)||[];e=o[i++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else void 0!==t&&"boolean"!==n||((e=de(this))&&W.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":W.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+ue(de(n))+" ").indexOf(e)>-1)return!0;return!1}});var he=/\r/g;E.fn.extend({val:function(t){var e,n,i,r=this[0];return arguments.length?(i=E.isFunction(t),this.each(function(n){var r;1===this.nodeType&&(null==(r=i?t.call(this,n,E(this).val()):t)?r="":"number"==typeof r?r+="":E.isArray(r)&&(r=E.map(r,function(t){return null==t?"":t+""})),(e=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))})):r?(e=E.valHooks[r.type]||E.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(he,""):null==n?"":n:void 0}}),E.extend({valHooks:{option:{get:function(t){var e=E.find.attr(t,"value");return null!=e?e:ue(E.text(t))}},select:{get:function(t){var e,n,i,r=t.options,o=t.selectedIndex,a="select-one"===t.type,s=a?null:[],l=a?o+1:r.length;for(i=o<0?l:a?o:0;i<l;i++)if(((n=r[i]).selected||i===o)&&!n.disabled&&(!n.parentNode.disabled||!E.nodeName(n.parentNode,"optgroup"))){if(e=E(n).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var n,i,r=t.options,o=E.makeArray(e),a=r.length;a--;)((i=r[a]).selected=E.inArray(E.valHooks.option.get(i),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),E.each(["radio","checkbox"],function(){E.valHooks[this]={set:function(t,e){if(E.isArray(e))return t.checked=E.inArray(E(t).val(),e)>-1}},v.checkOn||(E.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var fe=/^(?:focusinfocus|focusoutblur)$/;E.extend(E.event,{trigger:function(t,e,i,r){var o,s,l,c,u,d,h,f=[i||a],g=p.call(t,"type")?t.type:t,m=p.call(t,"namespace")?t.namespace.split("."):[];if(s=l=i=i||a,3!==i.nodeType&&8!==i.nodeType&&!fe.test(g+E.event.triggered)&&(g.indexOf(".")>-1&&(g=(m=g.split(".")).shift(),m.sort()),u=g.indexOf(":")<0&&"on"+g,(t=t[E.expando]?t:new E.Event(g,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=m.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:E.makeArray(e,[t]),h=E.event.special[g]||{},r||!h.trigger||!1!==h.trigger.apply(i,e))){if(!r&&!h.noBubble&&!E.isWindow(i)){for(c=h.delegateType||g,fe.test(c+g)||(s=s.parentNode);s;s=s.parentNode)f.push(s),l=s;l===(i.ownerDocument||a)&&f.push(l.defaultView||l.parentWindow||n)}for(o=0;(s=f[o++])&&!t.isPropagationStopped();)t.type=o>1?c:h.bindType||g,(d=(W.get(s,"events")||{})[t.type]&&W.get(s,"handle"))&&d.apply(s,e),(d=u&&s[u])&&d.apply&&U(s)&&(t.result=d.apply(s,e),!1===t.result&&t.preventDefault());return t.type=g,r||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(f.pop(),e)||!U(i)||u&&E.isFunction(i[g])&&!E.isWindow(i)&&((l=i[u])&&(i[u]=null),E.event.triggered=g,i[g](),E.event.triggered=void 0,l&&(i[u]=l)),t.result}},simulate:function(t,e,n){var i=E.extend(new E.Event,n,{type:t,isSimulated:!0});E.event.trigger(i,null,e)}}),E.fn.extend({trigger:function(t,e){return this.each(function(){E.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return E.event.trigger(t,e,n,!0)}}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){E.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),E.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),v.focusin="onfocusin"in n,v.focusin||E.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){E.event.simulate(e,t.target,E.event.fix(t))};E.event.special[e]={setup:function(){var i=this.ownerDocument||this,r=W.access(i,e);r||i.addEventListener(t,n,!0),W.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=W.access(i,e)-1;r?W.access(i,e,r):(i.removeEventListener(t,n,!0),W.remove(i,e))}}});var pe=n.location,ge=E.now(),me=/\?/;E.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new n.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||E.error("Invalid XML: "+t),e};var ve=/\[\]$/,ye=/\r?\n/g,Ee=/^(?:submit|button|image|reset|file)$/i,be=/^(?:input|select|textarea|keygen)/i;function Ce(t,e,n,i){var r;if(E.isArray(e))E.each(e,function(e,r){n||ve.test(t)?i(t,r):Ce(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,n,i)});else if(n||"object"!==E.type(e))i(t,e);else for(r in e)Ce(t+"["+r+"]",e[r],n,i)}E.param=function(t,e){var n,i=[],r=function(t,e){var n=E.isFunction(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(E.isArray(t)||t.jquery&&!E.isPlainObject(t))E.each(t,function(){r(this.name,this.value)});else for(n in t)Ce(n,t[n],e,r);return i.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=E.prop(this,"elements");return t?E.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!E(this).is(":disabled")&&be.test(this.nodeName)&&!Ee.test(t)&&(this.checked||!st.test(t))}).map(function(t,e){var n=E(this).val();return null==n?null:E.isArray(n)?E.map(n,function(t){return{name:e.name,value:t.replace(ye,"\r\n")}}):{name:e.name,value:n.replace(ye,"\r\n")}}).get()}});var Te=/%20/g,we=/#.*$/,Ie=/([?&])_=[^&]*/,Oe=/^(.*?):[ \t]*([^\r\n]*)$/gm,De=/^(?:GET|HEAD)$/,_e=/^\/\//,ke={},Re={},xe="*/".concat("*"),Se=a.createElement("a");function Ke(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,o=e.toLowerCase().match(L)||[];if(E.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function $e(t,e,n,i){var r={},o=t===Re;function a(s){var l;return r[s]=!0,E.each(t[s]||[],function(t,s){var c=s(e,n,i);return"string"!=typeof c||o||r[c]?o?!(l=c):void 0:(e.dataTypes.unshift(c),a(c),!1)}),l}return a(e.dataTypes[0])||!r["*"]&&a("*")}function Ae(t,e){var n,i,r=E.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&E.extend(!0,t,i),t}Se.href=pe.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:pe.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(pe.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":xe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ae(Ae(t,E.ajaxSettings),e):Ae(E.ajaxSettings,t)},ajaxPrefilter:Ke(ke),ajaxTransport:Ke(Re),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,r,o,s,l,c,u,d,h,f,p=E.ajaxSetup({},e),g=p.context||p,m=p.context&&(g.nodeType||g.jquery)?E(g):E.event,v=E.Deferred(),y=E.Callbacks("once memory"),b=p.statusCode||{},C={},T={},w="canceled",I={readyState:0,getResponseHeader:function(t){var e;if(u){if(!s)for(s={};e=Oe.exec(o);)s[e[1].toLowerCase()]=e[2];e=s[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return u?o:null},setRequestHeader:function(t,e){return null==u&&(t=T[t.toLowerCase()]=T[t.toLowerCase()]||t,C[t]=e),this},overrideMimeType:function(t){return null==u&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(u)I.always(t[I.status]);else for(e in t)b[e]=[b[e],t[e]];return this},abort:function(t){var e=t||w;return i&&i.abort(e),O(0,e),this}};if(v.promise(I),p.url=((t||p.url||pe.href)+"").replace(_e,pe.protocol+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(L)||[""],null==p.crossDomain){c=a.createElement("a");try{c.href=p.url,c.href=c.href,p.crossDomain=Se.protocol+"//"+Se.host!=c.protocol+"//"+c.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=E.param(p.data,p.traditional)),$e(ke,p,e,I),u)return I;for(h in(d=E.event&&p.global)&&0==E.active++&&E.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!De.test(p.type),r=p.url.replace(we,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Te,"+")):(f=p.url.slice(r.length),p.data&&(r+=(me.test(r)?"&":"?")+p.data,delete p.data),!1===p.cache&&(r=r.replace(Ie,"$1"),f=(me.test(r)?"&":"?")+"_="+ge+++f),p.url=r+f),p.ifModified&&(E.lastModified[r]&&I.setRequestHeader("If-Modified-Since",E.lastModified[r]),E.etag[r]&&I.setRequestHeader("If-None-Match",E.etag[r])),(p.data&&p.hasContent&&!1!==p.contentType||e.contentType)&&I.setRequestHeader("Content-Type",p.contentType),I.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+xe+"; q=0.01":""):p.accepts["*"]),p.headers)I.setRequestHeader(h,p.headers[h]);if(p.beforeSend&&(!1===p.beforeSend.call(g,I,p)||u))return I.abort();if(w="abort",y.add(p.complete),I.done(p.success),I.fail(p.error),i=$e(Re,p,e,I)){if(I.readyState=1,d&&m.trigger("ajaxSend",[I,p]),u)return I;p.async&&p.timeout>0&&(l=n.setTimeout(function(){I.abort("timeout")},p.timeout));try{u=!1,i.send(C,O)}catch(t){if(u)throw t;O(-1,t)}}else O(-1,"No Transport");function O(t,e,a,s){var c,h,f,C,T,w=e;u||(u=!0,l&&n.clearTimeout(l),i=void 0,o=s||"",I.readyState=t>0?4:0,c=t>=200&&t<300||304===t,a&&(C=function(t,e,n){for(var i,r,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}(p,I,a)),C=function(t,e,n,i){var r,o,a,s,l,c={},u=t.dataTypes.slice();if(u[1])for(a in t.converters)c[a.toLowerCase()]=t.converters[a];for(o=u.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=c[l+" "+o]||c["* "+o]))for(r in c)if((s=r.split(" "))[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[r]:!0!==c[r]&&(o=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}(p,C,I,c),c?(p.ifModified&&((T=I.getResponseHeader("Last-Modified"))&&(E.lastModified[r]=T),(T=I.getResponseHeader("etag"))&&(E.etag[r]=T)),204===t||"HEAD"===p.type?w="nocontent":304===t?w="notmodified":(w=C.state,h=C.data,c=!(f=C.error))):(f=w,!t&&w||(w="error",t<0&&(t=0))),I.status=t,I.statusText=(e||w)+"",c?v.resolveWith(g,[h,w,I]):v.rejectWith(g,[I,w,f]),I.statusCode(b),b=void 0,d&&m.trigger(c?"ajaxSuccess":"ajaxError",[I,p,c?h:f]),y.fireWith(g,[I,w]),d&&(m.trigger("ajaxComplete",[I,p]),--E.active||E.event.trigger("ajaxStop")))}return I},getJSON:function(t,e,n){return E.get(t,e,n,"json")},getScript:function(t,e){return E.get(t,void 0,e,"script")}}),E.each(["get","post"],function(t,e){E[e]=function(t,n,i,r){return E.isFunction(n)&&(r=r||i,i=n,n=void 0),E.ajax(E.extend({url:t,type:e,dataType:r,data:n,success:i},E.isPlainObject(t)&&t))}}),E._evalUrl=function(t){return E.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},E.fn.extend({wrapAll:function(t){var e;return this[0]&&(E.isFunction(t)&&(t=t.call(this[0])),e=E(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return E.isFunction(t)?this.each(function(e){E(this).wrapInner(t.call(this,e))}):this.each(function(){var e=E(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=E.isFunction(t);return this.each(function(n){E(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){E(this).replaceWith(this.childNodes)}),this}}),E.expr.pseudos.hidden=function(t){return!E.expr.pseudos.visible(t)},E.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(t){}};var Ne={0:200,1223:204},Pe=E.ajaxSettings.xhr();v.cors=!!Pe&&"withCredentials"in Pe,v.ajax=Pe=!!Pe,E.ajaxTransport(function(t){var e,i;if(v.cors||Pe&&!t.crossDomain)return{send:function(r,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)s.setRequestHeader(a,r[a]);e=function(t){return function(){e&&(e=i=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Ne[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=e(),i=s.onerror=e("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout(function(){e&&i()})},e=e("abort");try{s.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),E.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return E.globalEval(t),t}}}),E.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),E.ajaxTransport("script",function(t){var e,n;if(t.crossDomain)return{send:function(i,r){e=E("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),a.head.appendChild(e[0])},abort:function(){n&&n()}}});var Le,Fe=[],Me=/(=)\?(?=&|$)|\?\?/;function je(t){return E.isWindow(t)?t:9===t.nodeType&&t.defaultView}E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Fe.pop()||E.expando+"_"+ge++;return this[t]=!0,t}}),E.ajaxPrefilter("json jsonp",function(t,e,i){var r,o,a,s=!1!==t.jsonp&&(Me.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Me.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=E.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Me,"$1"+r):!1!==t.jsonp&&(t.url+=(me.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return a||E.error(r+" was not called"),a[0]},t.dataTypes[0]="json",o=n[r],n[r]=function(){a=arguments},i.always(function(){void 0===o?E(n).removeProp(r):n[r]=o,t[r]&&(t.jsonpCallback=e.jsonpCallback,Fe.push(r)),a&&E.isFunction(o)&&o(a[0]),a=o=void 0}),"script"}),v.createHTMLDocument=((Le=a.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Le.childNodes.length),E.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(v.createHTMLDocument?((i=(e=a.implementation.createHTMLDocument("")).createElement("base")).href=a.location.href,e.head.appendChild(i)):e=a),r=R.exec(t),o=!n&&[],r?[e.createElement(r[1])]:(r=mt([t],e,o),o&&o.length&&E(o).remove(),E.merge([],r.childNodes)));var i,r,o},E.fn.load=function(t,e,n){var i,r,o,a=this,s=t.indexOf(" ");return s>-1&&(i=ue(t.slice(s)),t=t.slice(0,s)),E.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),a.length>0&&E.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(i?E("<div>").append(E.parseHTML(t)).find(i):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){E.fn[e]=function(t){return this.on(e,t)}}),E.expr.pseudos.animated=function(t){return E.grep(E.timers,function(e){return t===e.elem}).length},E.offset={setOffset:function(t,e,n){var i,r,o,a,s,l,c=E.css(t,"position"),u=E(t),d={};"static"===c&&(t.style.position="relative"),s=u.offset(),o=E.css(t,"top"),l=E.css(t,"left"),("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1?(a=(i=u.position()).top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),E.isFunction(e)&&(e=e.call(t,n,E.extend({},s))),null!=e.top&&(d.top=e.top-s.top+a),null!=e.left&&(d.left=e.left-s.left+r),"using"in e?e.using.call(t,d):u.css(d)}},E.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){E.offset.setOffset(this,t,e)});var e,n,i,r,o=this[0];return o?o.getClientRects().length?(i=o.getBoundingClientRect()).width||i.height?(n=je(r=o.ownerDocument),e=r.documentElement,{top:i.top+n.pageYOffset-e.clientTop,left:i.left+n.pageXOffset-e.clientLeft}):i:{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===E.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),E.nodeName(t[0],"html")||(i=t.offset()),i={top:i.top+E.css(t[0],"borderTopWidth",!0),left:i.left+E.css(t[0],"borderLeftWidth",!0)}),{top:e.top-i.top-E.css(n,"marginTop",!0),left:e.left-i.left-E.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===E.css(t,"position");)t=t.offsetParent;return t||vt})}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;E.fn[t]=function(i){return V(this,function(t,i,r){var o=je(t);if(void 0===r)return o?o[e]:t[i];o?o.scrollTo(n?o.pageXOffset:r,n?r:o.pageYOffset):t[i]=r},t,i,arguments.length)}}),E.each(["top","left"],function(t,e){E.cssHooks[e]=jt(v.pixelPosition,function(t,n){if(n)return n=Mt(t,e),Lt.test(n)?E(t).position()[e]+"px":n})}),E.each({Height:"height",Width:"width"},function(t,e){E.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){E.fn[i]=function(r,o){var a=arguments.length&&(n||"boolean"!=typeof r),s=n||(!0===r||!0===o?"margin":"border");return V(this,function(e,n,r){var o;return E.isWindow(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===r?E.css(e,n,s):E.style(e,n,r,s)},e,a?r:void 0,a)}})}),E.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),E.parseJSON=JSON.parse,void 0===(i=function(){return E}.apply(e,[]))||(t.exports=i);var Be=n.jQuery,qe=n.$;return E.noConflict=function(t){return n.$===E&&(n.$=qe),t&&n.jQuery===E&&(n.jQuery=Be),E},r||(n.jQuery=n.$=E),E})},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){(function(){t.exports=function(){function t(t,e,n){if(this.options=t.options,this.stringify=t.stringify,this.parent=t,null==e)throw new Error("Missing attribute name. "+this.debugInfo(e));if(null==n)throw new Error("Missing attribute value. "+this.debugInfo(e));this.name=this.stringify.attName(e),this.value=this.stringify.attValue(n)}return t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(t){return this.options.writer.set(t).attribute(this)},t.prototype.debugInfo=function(t){var e,n;return null!=(t=t||this.name)||(null!=(e=this.parent)?e.name:void 0)?null==t?"parent: <"+this.parent.name+">":(null!=(n=this.parent)?n.name:void 0)?"attribute: {"+t+"}, parent: <"+this.parent.name+">":"attribute: {"+t+"}":""},t}()}).call(this)},function(t,e){(function(){var e=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty;t.exports=function(){function t(t){var i,r,o;for(i in this.assertLegalChar=e(this.assertLegalChar,this),t||(t={}),this.noDoubleEncoding=t.noDoubleEncoding,r=t.stringify||{})n.call(r,i)&&(o=r[i],this[i]=o)}return t.prototype.eleName=function(t){return t=""+t||"",this.assertLegalChar(t)},t.prototype.eleText=function(t){return t=""+t||"",this.assertLegalChar(this.elEscape(t))},t.prototype.cdata=function(t){return t=(t=""+t||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(t)},t.prototype.comment=function(t){if((t=""+t||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+t);return this.assertLegalChar(t)},t.prototype.raw=function(t){return""+t||""},t.prototype.attName=function(t){return""+t||""},t.prototype.attValue=function(t){return t=""+t||"",this.attEscape(t)},t.prototype.insTarget=function(t){return""+t||""},t.prototype.insValue=function(t){if((t=""+t||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+t);return t},t.prototype.xmlVersion=function(t){if(!(t=""+t||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+t);return t},t.prototype.xmlEncoding=function(t){if(!(t=""+t||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+t);return t},t.prototype.xmlStandalone=function(t){return t?"yes":"no"},t.prototype.dtdPubID=function(t){return""+t||""},t.prototype.dtdSysID=function(t){return""+t||""},t.prototype.dtdElementValue=function(t){return""+t||""},t.prototype.dtdAttType=function(t){return""+t||""},t.prototype.dtdAttDefault=function(t){return null!=t?""+t||"":t},t.prototype.dtdEntityValue=function(t){return""+t||""},t.prototype.dtdNData=function(t){return""+t||""},t.prototype.convertAttKey="@",t.prototype.convertPIKey="?",t.prototype.convertTextKey="#text",t.prototype.convertCDataKey="#cdata",t.prototype.convertCommentKey="#comment",t.prototype.convertRawKey="#raw",t.prototype.assertLegalChar=function(t){var e;if(e=t.match(/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/))throw new Error("Invalid character in string: "+t+" at index "+e.index);return t},t.prototype.elEscape=function(t){var e;return e=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,t.replace(e,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},t.prototype.attEscape=function(t){var e;return e=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,t.replace(e,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},t}()}).call(this)},function(t,e){(function(){var e={}.hasOwnProperty;t.exports=function(){function t(t){var n,i,r,o,a,s,l,c,u;for(n in t||(t={}),this.pretty=t.pretty||!1,this.allowEmpty=null!=(i=t.allowEmpty)&&i,this.pretty?(this.indent=null!=(r=t.indent)?r:"  ",this.newline=null!=(o=t.newline)?o:"\n",this.offset=null!=(a=t.offset)?a:0,this.dontprettytextnodes=null!=(s=t.dontprettytextnodes)?s:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash=null!=(l=t.spacebeforeslash)?l:"",!0===this.spacebeforeslash&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,c=t.writer||{})e.call(c,n)&&(u=c[n],this[n]=u)}return t.prototype.set=function(t){var n,i,r;for(n in t||(t={}),"pretty"in t&&(this.pretty=t.pretty),"allowEmpty"in t&&(this.allowEmpty=t.allowEmpty),this.pretty?(this.indent="indent"in t?t.indent:"  ",this.newline="newline"in t?t.newline:"\n",this.offset="offset"in t?t.offset:0,this.dontprettytextnodes="dontprettytextnodes"in t?t.dontprettytextnodes:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash="spacebeforeslash"in t?t.spacebeforeslash:"",!0===this.spacebeforeslash&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,i=t.writer||{})e.call(i,n)&&(r=i[n],this[n]=r);return this},t.prototype.space=function(t){var e;return this.pretty&&(e=(t||0)+this.offset+1)>0?new Array(e).join(this.indent):""},t}()}).call(this)},function(t,e,n){n(22),n(23),n(24),n(27),n(28),n(29),n(30),n(34),n(35),n(36),n(37),n(38),n(39),n(40),n(41),n(42),n(45),n(47),n(49),n(50),n(53),n(63),n(64),n(65),n(66),n(67),n(69),n(72),t.exports=n(73)},function(module,exports){org.ekstep.pluginframework.resourceManager.loadExternalResource("/content-plugins/org.ekstep.colorpicker-1.0/editor/libs/spectrum.js","js"),org.ekstep.pluginframework.resourceManager.loadExternalResource("/content-plugins/org.ekstep.colorpicker-1.0/editor/libs/spectrum.css","css"),org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.colorpicker",ver:"1.0",author:"Chetan Sachdev",title:"Colorpicker Plugin",description:"",publishedDate:"",editor:{main:"editor/plugin.js",dependencies:[{type:"js",src:"editor/libs/spectrum.js"},{type:"css",src:"editor/libs/spectrum.css"},{type:"css",src:"editor/colorpickerplugin.css"}],menu:[]},renderer:{}},eval('org.ekstep.contenteditor.basePlugin.extend({type:"colorpicker",picker:[],initialize:function(){ecEditor.addEventListener("colorpicker:state",this.invoke,this)},invoke:function(e,t){var c=this;"added"!=ecEditor.jQuery("#"+t.id+" input").attr("colorpicker")&&(this.picker[t.id]=ecEditor.jQuery("#"+t.id+" input").spectrum({color:"#FF0000",showInput:!0,showAlpha:!1,preferredFormat:"hex",showButtons:!1,containerClassName:"awesome",clickoutFiresChange:!1,showButtons:!0,change:function(e){t.callback(t.id,e.toHexString()),ecEditor.getService(ServiceConstants.TELEMETRY_SERVICE).interact({type:"click",subtype:"change",target:"colorpicker",pluginid:c.manifest.id,pluginver:c.manifest.ver,objectid:t.id,stage:ecEditor.getCurrentStage().id})},showPaletteOnly:!0,togglePaletteOnly:!0,togglePaletteMoreText:"more",togglePaletteLessText:"less",color:"blanchedalmond",palette:[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]],maxSelectionSize:10,hideAfterPaletteSelect:!0,move:function(e){t.callback(t.id,e.toHexString()),ecEditor.getService(ServiceConstants.TELEMETRY_SERVICE).interact({type:"click",subtype:"move",target:"colorpicker",pluginid:c.manifest.id,pluginver:c.manifest.ver,objectid:t.id,stage:ecEditor.getCurrentStage().id})}}),ecEditor.jQuery("#"+t.id+" input").attr("colorpicker","added")),t&&t.color?ecEditor.jQuery("#"+t.id+" input").spectrum("set",t.color):ecEditor.jQuery("#"+t.id+" input").spectrum("set","#000000")}});')),org.ekstep.pluginframework.resourceManager.loadExternalResource("/content-plugins/org.ekstep.colorpicker-1.0/editor/colorpickerplugin.css","css"),org.ekstep.pluginframework.resourceManager.loadExternalResource("/content-plugins/org.ekstep.config-1.0/editor/libs/jquery-ui.min.js","js"),org.ekstep.pluginframework.resourceManager.loadExternalResource("/content-plugins/org.ekstep.config-1.0/editor/config.css","css"),org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.config",ver:"1.0",author:"Santhosh Vasabhaktula",title:"Config Plugin",description:"",publishedDate:"",editor:{main:"editor/plugin.js",dependencies:[{type:"js",src:"editor/libs/jquery-ui.min.js"},{type:"css",src:"editor/config.css"},{type:"plugin",plugin:"org.ekstep.colorpicker",ver:"1.0"}],sidebarMenu:[{id:"settings",type:"icon",toolTip:"Settings",title:"Settings",iconClass:"settings icon",templateURL:"editor/partials/sidebarSettingTemplate.html",controllerURL:"editor/sidebar-settings-controller.js"}]}},eval('org.ekstep.contenteditor.basePlugin.extend({type:"config",initialize:function(){org.ekstep.contenteditor.api.addEventListener("org.ekstep.config:invoke",this.invoke,this),org.ekstep.contenteditor.api.addEventListener("org.ekstep.config:toggleStageEvent",this.toggleEventToStage,this),org.ekstep.contenteditor.api.addEventListener("config:updateValue",this.updateConfig,this),org.ekstep.contenteditor.api.addEventListener("config:on:change",this._onConfigChange,this),org.ekstep.contenteditor.api.addEventListener("config:add",this.addConfig,this);var e=org.ekstep.contenteditor.api.resolvePluginResource(this.manifest.id,this.manifest.ver,"editor/colorpicker-directive.js");org.ekstep.contenteditor.api.getService(ServiceConstants.POPUP_SERVICE).loadNgModules(void 0,e)},updateConfig:function(e,t){var n=this,o=org.ekstep.contenteditor.api._.reduce(t.oldValue,function(e,n,o){return org.ekstep.contenteditor.api._.isEqual(n,t.newValue[o])?e:e.concat(o)},[]);org.ekstep.contenteditor.api._.forEach(o,function(e){n.onConfigChange(e,t.newValue[e])})},_onConfigChange:function(e,t){this.onConfigChange(t.key,t.value)},onConfigChange:function(e,t){var n=org.ekstep.contenteditor.api.getCurrentObject()?org.ekstep.contenteditor.api.getCurrentObject():org.ekstep.contenteditor.api.getCurrentStage();!org.ekstep.contenteditor.api._.isUndefined(t)&&n&&(n._onConfigChange(e,t),n.onConfigChange(e,t),"autoplay"===e&&this.toggleEventToStage("",{flag:t,id:n.id}))},invoke:function(e,t){var n=this;if("browser"==t.type||"button"==t.type){var o=t.type;org.ekstep.contenteditor.api.dispatchEvent(t.event.id,{type:t.event.type,callback:function(e){n.onConfigChange(o,e)}})}},toggleEventToStage:function(e,t){var n=org.ekstep.contenteditor.api.getCurrentStage(),o=-1;n.event&&_.forEach(n.event,function(e,n){org.ekstep.contenteditor.api._.isArray(e.action)?e.action[0].asset===t.id&&(o=n):org.ekstep.contenteditor.api._.isObject(e.action)&&e.action.asset===t.id&&(o=n)}),!0===t.flag&&-1===o?n.addEvent({type:"enter",action:[{id:UUID(),type:"command",command:"play",asset:t.id}]}):!1===t.flag&&-1!==o&&n.event.splice(o,1)}});')),org.ekstep.pluginframework.resourceManager.loadExternalResource("/content-plugins/org.ekstep.readalongbrowser-1.0/editor/libs/karaoke.js","js"),org.ekstep.pluginframework.resourceManager.loadExternalResource("/content-plugins/org.ekstep.readalongbrowser-1.0/editor/libs/jquery.scrollTo.js","js"),org.ekstep.pluginframework.resourceManager.loadExternalResource("/content-plugins/org.ekstep.readalongbrowser-1.0/editor/libs/jquery.jplayer.min.js","js"),org.ekstep.pluginframework.resourceManager.loadExternalResource("/content-plugins/org.ekstep.readalongbrowser-1.0/editor/css/jquery-ui.css","css"),org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.readalongbrowser",ver:"1.0",shortId:"readalongbrowser",author:"Kartheek Palla",title:"Read-along Plugin",description:"",publishedDate:"",editor:{main:"editor/plugin.js",help:{src:"editor/help.md",dataType:"text"},dependencies:[{type:"js",src:"editor/libs/karaoke.js"},{type:"js",src:"editor/libs/jquery.scrollTo.js"},{type:"js",src:"editor/libs/jquery.jplayer.min.js"},{type:"css",src:"editor/css/jquery-ui.css"}],views:[{template:"./readalongbrowser.html",controller:"./readalongbrowserapp.js"}],configManifest:[{propertyName:"highlight",title:"Highlight Color",description:"Choose a color from the color picker to highlight the text",dataType:"colorpicker",required:!0,defaultValue:"#FFFF00"},{propertyName:"color",title:"Font color",description:"Choose a color from the color picker",dataType:"colorpicker",required:!0,defaultValue:"rgb(255,0,0)"},{propertyName:"font",dataType:"group",description:"Choose fontweight and fontstyle",config:[{propertyName:"fontweight",title:"Font Weight",toolTip:"Bold",description:"Select font size for the text",dataType:"icon",iconClass:"bold icon",required:!0,defaultValue:!1},{propertyName:"fontstyle",title:"Font Style",toolTip:"Italic",description:"Select font style for the text",dataType:"icon",iconClass:"italic icon",required:!0,defaultValue:!1}]},{propertyName:"fontfamily",title:"Font Family",description:"Select font family for the text",dataType:"select",range:["Arial","Courier","Georgia","Helvetica","Monospace","Sans-serif","Serif","Tahoma","Times","Trebuchet MS","Verdana","NotoSansKannada","NotoSansGujarati","NotoSansBengali","NotoSansGurmukhi","NotoSansOriya","NotoSansDevanagari","NotoSansTamil","NotoSansTelugu","NotoNastaliqUrdu","NotoSansMalayalam"],required:!0,defaultValue:"Sans-serif"},{propertyName:"fontsize",title:"Font Size",description:"Select font size for the text",dataType:"select",range:[18,20,22,24,26,28,32,36,40,44,48,54,60,66,72,80,88,96],required:!0,defaultValue:18}],playable:!0}},eval('org.ekstep.contenteditor.basePlugin.extend({type:"readalongbrowser",magicNumber:1920,editorWidth:720,currentInstance:void 0,cb:void 0,text:void 0,initialize:function(){var e=this;ecEditor.addEventListener("object:unselected",this.objectUnselected,this),ecEditor.addEventListener("delete:invoked",this.deleteObject,this),ecEditor.addEventListener(e.manifest.id+":showpopup",this.loadHtml,this),setTimeout(function(){var t=ecEditor.resolvePluginResource(e.manifest.id,e.manifest.ver,"editor/readalongbrowser.html"),r=ecEditor.resolvePluginResource(e.manifest.id,e.manifest.ver,"editor/readalongbrowserapp.js");ecEditor.getService("popup").loadNgModules(t,r)},1e3)},loadHtml:function(e,t){currentInstance=this,this.cb=t.callback,this.attributes=t.textObj.attributes,this.config=t.textObj.config,"readalong"==t.textObj.attributes.textType&&(this.editorObj=t.textObj.editorObj),ecEditor.getService("popup").open({template:"readalongbrowser",controller:"readalongbrowsercontroller",controllerAs:"$ctrl",resolve:{instance:function(){return currentInstance}},width:900,showClose:!1,className:"ngdialog-theme-plain"},function(){ecEditor._.isUndefined(currentInstance.editorObj)||currentInstance.editorObj.text||(currentInstance.editorObj.remove(),ecEditor.render())})},invokeKaraoke:function(e,t){var r=new Karaoke;if(r.audioObj.url=e,t){var i=ecEditor._.isEmpty(t.config.timings)?"":ecEditor._.split(t.config.timings,","),o=[],d=[],c=ecEditor._.split(t.attributes.__text," "),n=0;ecEditor._.each(i,function(e,t){n+=1,d.push({word:c[t],stepNo:10*parseFloat(e/1e3).toFixed(1),wordIdx:n}),o.push(parseFloat(e/1e3).toFixed(1))}),r.audioObj.url=e,r.audioObj.wordMap=d,r.audioObj.wordTimes=o,r.audioObj.highlightColor=t.config.highlight}else r.audioObj.url=e,r.audioObj.wordMap="",r.audioObj.wordTimes="",r.audioObj.highlightColor="",ecEditor.jQuery("#jplayerSync").data("jPlayer","");return ecEditor.jQuery("#syncSlider").bind("click",ecEditor.jQuery.proxy(r.changePlaybackRate,r)),ecEditor.jQuery("#changeaudio").bind("click",ecEditor.jQuery.proxy(r.res,r)),ecEditor.jQuery("#syncStart").bind("click",ecEditor.jQuery.proxy(r.startSync,r)),ecEditor.jQuery("#pick-hcolor").bind("click",ecEditor.jQuery.proxy(r.setColor,r)),ecEditor.jQuery("#stopAudio").bind("click",ecEditor.jQuery.proxy(r.stopAudio,r)),ecEditor.jQuery(".slideStep").bind("drop",ecEditor.jQuery.proxy(r.handleWordDrop,r)),ecEditor.jQuery("#syncMark").bind("click",ecEditor.jQuery.proxy(r.markWords,r)),ecEditor.jQuery("#sync-play").bind("click",ecEditor.jQuery.proxy(r.playSyncedLayer,r)),ecEditor.jQuery("#sync-pause").bind("click",ecEditor.jQuery.proxy(r.pauseAudio,r)),window.karaoke=r,r.initPlayer(),r}});'))},function(t,e){window.assessmentBrowserUtil=function(){function t(t,e){var n,i;return e=ecEditor._.isUndefined(e)?[]:ecEditor._.isArray(e)?e:[e],ecEditor._.forEach(e,function(e){if(e.id&&e.src&&(i=ecEditor._.findIndex(t.theme.manifest.media,function(t){return t.src===e.src}),-1===(n=ecEditor._.findIndex(t.theme.manifest.media,function(t){return t.id===e.id}))&&t.theme.manifest.media.push(e),-1!==n&&-1===i)){var r={id:e.id,src:e.src,type:e.type};e.assetId&&(r.assetId=e.assetId),t.theme.manifest.media[n]=r}}),t}return{getQuestionPreviwContent:function(e,n){try{if(!e)throw"Template cannot be empty";var i={theme:{manifest:{media:[]},template:[],controller:[{name:"assessment",type:"items",id:"assessment",__cdata:{}}],startStage:"assessmentStage",id:"theme",ver:.3,stage:[{id:"baseStage",preload:!0,image:[],audio:[],voice:[]},{id:"assessmentStage",x:0,y:0,w:100,h:100,g:[{embed:{template:"item","var-item":"item"},x:10,y:0,w:80,h:90}],iterate:"assessment",var:"item"}]}};i.theme.controller[0].__cdata={total_items:1,SET_TYPE:"MATERIALISED_SET",SET_OBJECT_TYPE_KEY:"AssessmentItem",item_sets:[{id:"itemSet",count:1}],items:{itemSet:[n]},identifier:"itemSet"};var r=ecEditor._.isUndefined(e.theme.template)?[]:ecEditor._.isArray(e.theme.template)?e.theme.template:[e.theme.template];return ecEditor._.forEach(r,function(t){t&&ecEditor._.findIndex(i.theme.template,function(e){return e.id==t.id})<0&&i.theme.template.push(t)}),n.media&&(i=t(i,n.media)),ecEditor._.has(e,"theme.manifest")&&e.theme.manifest.media&&(i=t(i,e.theme.manifest.media)),i}catch(t){return{error:t}}}}}(),window.X2JS=function(t){"use strict";void 0===(t=t||{}).escapeMode&&(t.escapeMode=!0),t.attributePrefix=t.attributePrefix||"_","none"===t.attributePrefix&&(t.attributePrefix=""),t.arrayAccessForm=t.arrayAccessForm||"none",t.emptyNodeForm=t.emptyNodeForm||"text",void 0===t.enableToStringFunc&&(t.enableToStringFunc=!0),t.arrayAccessFormPaths=t.arrayAccessFormPaths||[],void 0===t.skipEmptyTextNodesForObj&&(t.skipEmptyTextNodesForObj=!0),void 0===t.stripWhitespaces&&(t.stripWhitespaces=!0),t.datetimeAccessFormPaths=t.datetimeAccessFormPaths||[],void 0===t.coerce&&(t.coerce=!0),function(){function t(t){var e=String(t);return 1===e.length&&(e="0"+e),e}"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|^\n+|(\s|\n)+$/g,"")}),"function"!=typeof Date.prototype.toISOString&&(Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"})}();var e={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function n(t){var e=t.localName;return null==e&&(e=t.baseName),null!=e&&""!=e||(e=t.nodeName),e}function i(t){return"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):t}function r(e,n,i){switch(t.arrayAccessForm){case"property":e[n]instanceof Array?e[n+"_asArray"]=e[n]:e[n+"_asArray"]=[e[n]]}if(!(e[n]instanceof Array)&&t.arrayAccessFormPaths.length>0){for(var r=0;r<t.arrayAccessFormPaths.length;r++){var o=t.arrayAccessFormPaths[r];if("string"==typeof o){if(o==i)break}else if(o instanceof RegExp){if(o.test(i))break}else if("function"==typeof o&&o(e,n,i))break}r!=t.arrayAccessFormPaths.length&&(e[n]=[e[n]])}}function o(t){var e=t.split(/[-T:+Z]/g),n=new Date(e[0],e[1]-1,e[2]),i=e[5].split(".");if(n.setHours(e[3],e[4],i[0]),i.length>1&&n.setMilliseconds(i[1]),e[6]&&e[7]){var r=60*e[6]+Number(e[7]);r=0+("-"==(/\d\d-\d\d:\d\d$/.test(t)?"-":"+")?-1*r:r),n.setMinutes(n.getMinutes()-r-n.getTimezoneOffset())}else-1!==t.indexOf("Z",t.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function a(i,l){if(i.nodeType==e.DOCUMENT_NODE){for(var c=new Object,u=i.childNodes,d=0;d<u.length;d++)(h=u.item(d)).nodeType==e.ELEMENT_NODE&&(c[f=n(h)]=a(h,f));return c}if(i.nodeType==e.ELEMENT_NODE){for((c=new Object).__cnt=0,u=i.childNodes,d=0;d<u.length;d++){var h,f=n(h=u.item(d));h.nodeType!=e.COMMENT_NODE&&(c.__cnt++,null==c[f]?(c[f]=a(h,l+"."+f),r(c,f,l+"."+f)):(null!=c[f]&&(c[f]instanceof Array||(c[f]=[c[f]],r(c,f,l+"."+f))),c[f][c[f].length]=a(h,l+"."+f)))}for(var p=0;p<i.attributes.length;p++){var g=i.attributes.item(p);c.__cnt++,c[t.attributePrefix+g.name]=s(g.value)}var m=i.prefix;return null!=m&&""!=m&&(c.__cnt++,c.__prefix=m),null!=c["#text"]&&(c.__text=c["#text"],c.__text instanceof Array&&(c.__text=c.__text.join("\n")),t.escapeMode&&(c.__text=c.__text.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")),t.stripWhitespaces&&(c.__text=c.__text.trim()),delete c["#text"],"property"==t.arrayAccessForm&&delete c["#text_asArray"],c.__text=function(e,n,i){if(t.datetimeAccessFormPaths.length>0){for(var r=i.split(".#")[0],a=0;a<t.datetimeAccessFormPaths.length;a++){var s=t.datetimeAccessFormPaths[a];if("string"==typeof s){if(s==r)break}else if(s instanceof RegExp){if(s.test(r))break}else if("function"==typeof s&&s(obj,n,r))break}return a!=t.datetimeAccessFormPaths.length?o(e):e}return e}(c.__text,f,l+"."+f)),null!=c["#cdata-section"]&&(c.__cdata=c["#cdata-section"],delete c["#cdata-section"],"property"==t.arrayAccessForm&&delete c["#cdata-section_asArray"]),1==c.__cnt&&null!=c.__text?c=c.__text:0==c.__cnt&&"text"==t.emptyNodeForm?c="":c.__cnt>1&&null!=c.__text&&t.skipEmptyTextNodesForObj&&(t.stripWhitespaces&&""==c.__text||""==c.__text.trim())&&delete c.__text,delete c.__cnt,!t.enableToStringFunc||null==c.__text&&null==c.__cdata||(c.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),c}if(i.nodeType==e.TEXT_NODE||i.nodeType==e.CDATA_SECTION_NODE)return s(i.nodeValue)}function s(e){if(!t.coerce||""===e.trim())return e;var n=Number(e);if(!isNaN(n))return n;var i=e.toLowerCase();return"true"==i||"false"!=i&&e}function l(e,n,r,o){var a="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+n;if(null!=r)for(var s=0;s<r.length;s++){var l=r[s],c=e[l];t.escapeMode&&(c=i(c)),a+=" "+l.substr(t.attributePrefix.length)+"='"+c+"'"}return a+(o?"/>":">")}function c(t,e){return"</"+(null!=t.__prefix?t.__prefix+":":"")+e+">"}function u(e,n){return"property"==t.arrayAccessForm&&(r="_asArray",-1!==(i=n.toString()).indexOf(r,i.length-r.length))||0==n.toString().indexOf(t.attributePrefix)||0==n.toString().indexOf("__")||e[n]instanceof Function;var i,r}function d(t){var e=0;if(t instanceof Object)for(var n in t)u(t,n)||e++;return e}function h(e){var n=[];if(e instanceof Object)for(var i in e)-1==i.toString().indexOf("__")&&0==i.toString().indexOf(t.attributePrefix)&&n.push(i);return n}function f(e){var n="";return e instanceof Object?n+=function(e){var n="";return null!=e.__cdata&&(n+="<![CDATA["+e.__cdata+"]]>"),null!=e.__text&&(t.escapeMode?n+=i(e.__text):n+=e.__text),n}(e):null!=e&&(t.escapeMode?n+=i(e):n+=e),n}function p(t,e,n){var i="";if(0==t.length)i+=l(t,e,n,!0);else for(var r=0;r<t.length;r++)i+=l(t[r],e,h(t[r]),!1),i+=g(t[r]),i+=c(t[r],e);return i}function g(t){var e="";if(d(t)>0)for(var n in t)if(!u(t,n)){var i=t[n],r=h(i);null==i||void 0==i?e+=l(i,n,r,!0):i instanceof Object?i instanceof Array?e+=p(i,n,r):i instanceof Date?(e+=l(i,n,r,!1),e+=i.toISOString(),e+=c(i,n)):d(i)>0||null!=i.__text||null!=i.__cdata?(e+=l(i,n,r,!1),e+=g(i),e+=c(i,n)):e+=l(i,n,r,!0):(e+=l(i,n,r,!1),e+=f(i),e+=c(i,n))}return e+f(t)}this.parseXmlString=function(t){var e,n=window.ActiveXObject||"ActiveXObject"in window;if(void 0===t)return null;if(window.DOMParser){var i=new window.DOMParser,r=null;if(!n)try{r=i.parseFromString("INVALID","text/xml").childNodes[0].namespaceURI}catch(t){r=null}try{e=i.parseFromString(t,"text/xml"),null!=r&&e.getElementsByTagNameNS(r,"parsererror").length>0&&(e=null)}catch(t){e=null}}else 0==t.indexOf("<?")&&(t=t.substr(t.indexOf("?>")+2)),(e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t);return e},this.asArray=function(t){return t instanceof Array?t:[t]},this.toXmlDateTime=function(t){return t instanceof Date?t.toISOString():"number"==typeof t?new Date(t).toISOString():null},this.asDateTime=function(t){return"string"==typeof t?o(t):t},this.xml2json=function(t){return a(t)},this.xml_str2json=function(t){var e=this.parseXmlString(t);return null!=e?this.xml2json(e):null},this.json2xml_str=function(t){return g(t)},this.json2xml=function(t){var e=this.json2xml_str(t);return this.parseXmlString(e)},this.getVersion=function(){return"1.1.5"}},org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.assessmentbrowser",ver:"1.1",shortId:"assessmentbrowser",author:"Santhosh Vasabhaktula",title:"AssessmentBrowser Plugin",description:"",publishedDate:"",editor:{main:"editor/plugin.js",dependencies:[{type:"plugin",plugin:"org.ekstep.conceptselector",ver:"1.1"},{type:"js",src:"editor/assessmentbrowser_util.js"},{type:"js",src:"editor/libs/xml2json.js"}]}},org.ekstep.contenteditor.basePlugin.extend({type:"assessmentbrowser",previewURL:(ecEditor.getConfig("previewURL")||"/content/preview/preview.html")+"?webview=true",callback:function(){},initialize:function(){var t=this;ecEditor.addEventListener(this.manifest.id+":show",this.showAssessmentBrowser,this),setTimeout(function(){var e=ecEditor.resolvePluginResource(t.manifest.id,t.manifest.ver,"editor/assessmentbrowser.html"),n=ecEditor.resolvePluginResource(t.manifest.id,t.manifest.ver,"editor/assessmentbrowserapp.js");ecEditor.getService("popup").loadNgModules(e,n)},1e3)},showAssessmentBrowser:function(t,e){var n=this;this.callback=e.callback,this.data=ecEditor._.isUndefined(e.data)?"":e.data,ecEditor.getService("popup").open({template:"assessmentbrowser",controller:"assessmentbrowsercontroller",controllerAs:"$ctrl",resolve:{instance:function(){return n}},width:900,showClose:!1,className:"ngdialog-theme-plain"})}}))},function(t,e,n){var i,r,o,a;a=this,void 0===(o=function(){return a.WaveSurfer=function(){"use strict";var t,e={defaultParams:{height:120,waveColor:"#999",progressColor:"#31ADE0",cursorColor:"#333",cursorWidth:1,skipLength:2,minPxPerSec:20,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,fillParent:!0,scrollParent:!1,hideScrollbar:!1,normalize:!1,audioContext:null,container:null,dragSelection:!0,loopSelection:!0,audioRate:1,interact:!0,splitChannels:!1,mediaContainer:null,mediaControls:!1,renderer:"Canvas",backend:"WebAudio",mediaType:"audio",autoCenter:!0},init:function(t){if(this.params=e.util.extend({},this.defaultParams,t),this.container="string"==typeof t.container?document.querySelector(this.params.container):this.params.container,!this.container)throw new Error("Container element not found");if(null==this.params.mediaContainer?this.mediaContainer=this.container:"string"==typeof this.params.mediaContainer?this.mediaContainer=document.querySelector(this.params.mediaContainer):this.mediaContainer=this.params.mediaContainer,!this.mediaContainer)throw new Error("Media Container element not found");this.savedVolume=0,this.isMuted=!1,this.tmpEvents=[],this.createDrawer(),this.createBackend()},createDrawer:function(){var t=this;this.drawer=Object.create(e.Drawer[this.params.renderer]),this.drawer.init(this.container,this.params),this.drawer.on("redraw",function(){t.drawBuffer(),t.drawer.progress(t.backend.getPlayedPercents())}),this.drawer.on("click",function(e,n){setTimeout(function(){t.seekTo(n)},0)}),this.drawer.on("scroll",function(e){t.fireEvent("scroll",e)})},createBackend:function(){var t=this;this.backend&&this.backend.destroy(),"AudioElement"==this.params.backend&&(this.params.backend="MediaElement"),"WebAudio"!=this.params.backend||e.WebAudio.supportsWebAudio()||(this.params.backend="MediaElement"),this.backend=Object.create(e[this.params.backend]),this.backend.init(this.params),this.backend.on("finish",function(){t.fireEvent("finish")}),this.backend.on("play",function(){t.fireEvent("play")}),this.backend.on("pause",function(){t.fireEvent("pause")}),this.backend.on("audioprocess",function(e){t.fireEvent("audioprocess",e)})},startAnimationLoop:function(){var t=this,e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,n=function(){if(!t.backend.isPaused()){var i=t.backend.getPlayedPercents();t.drawer.progress(i),t.fireEvent("audioprocess",t.getCurrentTime()),e(n)}};n()},getDuration:function(){return this.backend.getDuration()},getCurrentTime:function(){return this.backend.getCurrentTime()},play:function(t,e){this.backend.play(t,e),this.startAnimationLoop()},pause:function(){this.backend.pause()},playPause:function(){this.backend.isPaused()?this.play():this.pause()},isPlaying:function(){return!this.backend.isPaused()},skipBackward:function(t){this.skip(-t||-this.params.skipLength)},skipForward:function(t){this.skip(t||this.params.skipLength)},skip:function(t){var e=this.getCurrentTime()||0,n=this.getDuration()||1;e=Math.max(0,Math.min(n,e+(t||0))),this.seekAndCenter(e/n)},seekAndCenter:function(t){this.seekTo(t),this.drawer.recenter(t)},seekTo:function(t){var e=this.backend.isPaused(),n=this.params.scrollParent;e&&(this.params.scrollParent=!1),this.backend.seekTo(t*this.getDuration()),this.drawer.progress(this.backend.getPlayedPercents()),e||(this.backend.pause(),this.backend.play()),this.params.scrollParent=n,this.fireEvent("seek",t)},stop:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)},setVolume:function(t){this.backend.setVolume(t)},setPlaybackRate:function(t){this.backend.setPlaybackRate(t)},toggleMute:function(){this.isMuted?(this.backend.setVolume(this.savedVolume),this.isMuted=!1):(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0)},toggleScroll:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()},toggleInteraction:function(){this.params.interact=!this.params.interact},drawBuffer:function(){var t=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),e=this.drawer.getWidth(),n=t;this.params.fillParent&&(!this.params.scrollParent||e>t)&&(n=e);var i=this.backend.getPeaks(n);this.drawer.drawPeaks(i,n),this.fireEvent("redraw",i,n)},zoom:function(t){this.params.minPxPerSec=t,this.params.scrollParent=!0,this.drawBuffer(),this.seekAndCenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",t)},loadArrayBuffer:function(t){this.decodeArrayBuffer(t,function(t){this.loadDecodedBuffer(t)}.bind(this))},loadDecodedBuffer:function(t){this.backend.load(t),this.drawBuffer(),this.fireEvent("ready")},loadBlob:function(t){var e=this,n=new FileReader;n.addEventListener("progress",function(t){e.onProgress(t)}),n.addEventListener("load",function(t){e.loadArrayBuffer(t.target.result)}),n.addEventListener("error",function(){e.fireEvent("error","Error reading file")}),n.readAsArrayBuffer(t),this.empty()},load:function(t,e){switch(this.params.backend){case"WebAudio":return this.loadBuffer(t);case"MediaElement":return this.loadMediaElement(t,e)}},loadBuffer:function(t){return this.empty(),this.getArrayBuffer(t,this.loadArrayBuffer.bind(this))},loadMediaElement:function(t,e){this.empty(),this.backend.load(t,this.mediaContainer,e),this.tmpEvents.push(this.backend.once("canplay",function(){this.drawBuffer(),this.fireEvent("ready")}.bind(this)),this.backend.once("error",function(t){this.fireEvent("error",t)}.bind(this))),!e&&this.backend.supportsWebAudio()&&this.getArrayBuffer(t,function(t){this.decodeArrayBuffer(t,function(t){this.backend.buffer=t,this.drawBuffer()}.bind(this))}.bind(this))},decodeArrayBuffer:function(t,e){this.backend.decodeArrayBuffer(t,this.fireEvent.bind(this,"decoded"),this.fireEvent.bind(this,"error","Error decoding audiobuffer")),this.tmpEvents.push(this.once("decoded",e))},getArrayBuffer:function(t,n){var i=this,r=e.util.ajax({url:t,responseType:"arraybuffer"});return this.tmpEvents.push(r.on("progress",function(t){i.onProgress(t)}),r.on("success",n),r.on("error",function(t){i.fireEvent("error","XHR error: "+t.target.statusText)})),r},onProgress:function(t){if(t.lengthComputable)var e=t.loaded/t.total;else e=t.loaded/(t.loaded+1e6);this.fireEvent("loading",Math.round(100*e),t.target)},exportPCM:function(t,e,n){t=t||1024,e=e||1e4,n=n||!1;var i=this.backend.getPeaks(t,e),r=[].map.call(i,function(t){return Math.round(t*e)/e}),o=JSON.stringify(r);return n||window.open("data:application/json;charset=utf-8,"+encodeURIComponent(o)),o},clearTmpEvents:function(){this.tmpEvents.forEach(function(t){t.un()})},empty:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)},destroy:function(){this.fireEvent("destroy"),this.clearTmpEvents(),this.unAll(),this.backend.destroy(),this.drawer.destroy()},create:function(t){var n=Object.create(e);return n.init(t),n}};return e.util={extend:function(t){return Array.prototype.slice.call(arguments,1).forEach(function(e){Object.keys(e).forEach(function(n){t[n]=e[n]})}),t},getId:function(){return"wavesurfer_"+Math.random().toString(32).substring(2)},ajax:function(t){var n=Object.create(e.Observer),i=new XMLHttpRequest,r=!1;return i.open(t.method||"GET",t.url,!0),i.responseType=t.responseType||"json",i.addEventListener("progress",function(t){n.fireEvent("progress",t),t.lengthComputable&&t.loaded==t.total&&(r=!0)}),i.addEventListener("load",function(t){r||n.fireEvent("progress",t),n.fireEvent("load",t),200==i.status||206==i.status?n.fireEvent("success",i.response,t):n.fireEvent("error",t)}),i.addEventListener("error",function(t){n.fireEvent("error",t)}),i.send(),n.xhr=i,n}},e.Observer={on:function(t,e){this.handlers||(this.handlers={});var n=this.handlers[t];return n||(n=this.handlers[t]=[]),n.push(e),{name:t,callback:e,un:this.un.bind(this,t,e)}},un:function(t,e){if(this.handlers){var n=this.handlers[t];if(n)if(e)for(var i=n.length-1;i>=0;i--)n[i]==e&&n.splice(i,1);else n.length=0}},unAll:function(){this.handlers=null},once:function(t,e){var n=this,i=function(){e.apply(this,arguments),setTimeout(function(){n.un(t,i)},0)};return this.on(t,i)},fireEvent:function(t){if(this.handlers){var e=this.handlers[t],n=Array.prototype.slice.call(arguments,1);e&&e.forEach(function(t){t.apply(null,n)})}}},e.util.extend(e,e.Observer),e.WebAudio={scriptBufferSize:256,PLAYING_STATE:0,PAUSED_STATE:1,FINISHED_STATE:2,supportsWebAudio:function(){return!(!window.AudioContext&&!window.webkitAudioContext)},getAudioContext:function(){return e.WebAudio.audioContext||(e.WebAudio.audioContext=new(window.AudioContext||window.webkitAudioContext)),e.WebAudio.audioContext},getOfflineAudioContext:function(t){return e.WebAudio.offlineAudioContext||(e.WebAudio.offlineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,t)),e.WebAudio.offlineAudioContext},init:function(t){this.params=t,this.ac=t.audioContext||this.getAudioContext(),this.lastPlay=this.ac.currentTime,this.startPosition=0,this.scheduledPause=null,this.states=[Object.create(e.WebAudio.state.playing),Object.create(e.WebAudio.state.paused),Object.create(e.WebAudio.state.finished)],this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(this.PAUSED_STATE),this.setPlaybackRate(this.params.audioRate)},disconnectFilters:function(){this.filters&&(this.filters.forEach(function(t){t&&t.disconnect()}),this.filters=null,this.analyser.connect(this.gainNode))},setState:function(t){this.state!==this.states[t]&&(this.state=this.states[t],this.state.init.call(this))},setFilter:function(){this.setFilters([].slice.call(arguments))},setFilters:function(t){this.disconnectFilters(),t&&t.length&&(this.filters=t,this.analyser.disconnect(),t.reduce(function(t,e){return t.connect(e),e},this.analyser).connect(this.gainNode))},createScriptNode:function(){this.ac.createScriptProcessor?this.scriptNode=this.ac.createScriptProcessor(this.scriptBufferSize):this.scriptNode=this.ac.createJavaScriptNode(this.scriptBufferSize),this.scriptNode.connect(this.ac.destination)},addOnAudioProcess:function(){var t=this;this.scriptNode.onaudioprocess=function(){var e=t.getCurrentTime();e>=t.getDuration()?(t.setState(t.FINISHED_STATE),t.fireEvent("pause")):e>=t.scheduledPause?(t.setState(t.PAUSED_STATE),t.fireEvent("pause")):t.state===t.states[t.PLAYING_STATE]&&t.fireEvent("audioprocess",e)}},removeOnAudioProcess:function(){this.scriptNode.onaudioprocess=null},createAnalyserNode:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)},createVolumeNode:function(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)},setVolume:function(t){this.gainNode.gain.value=t},getVolume:function(){return this.gainNode.gain.value},decodeArrayBuffer:function(t,e,n){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac?this.ac.sampleRate:44100)),this.offlineAc.decodeAudioData(t,function(t){e(t)}.bind(this),n)},getPeaks:function(t){for(var e=this.buffer.length/t,n=~~(e/10)||1,i=this.buffer.numberOfChannels,r=[],o=[],a=0;i>a;a++)for(var s=r[a]=[],l=this.buffer.getChannelData(a),c=0;t>c;c++){for(var u=~~(c*e),d=~~(u+e),h=l[0],f=l[0],p=u;d>p;p+=n){var g=l[p];g>f&&(f=g),h>g&&(h=g)}s[2*c]=f,s[2*c+1]=h,(0==a||f>o[2*c])&&(o[2*c]=f),(0==a||h<o[2*c+1])&&(o[2*c+1]=h)}return this.params.splitChannels?r:o},getPlayedPercents:function(){return this.state.getPlayedPercents.call(this)},disconnectSource:function(){this.source&&this.source.disconnect()},destroy:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode.disconnect(),this.analyser.disconnect()},load:function(t){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=t,this.createSource()},createSource:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.source.playbackRate.value=this.playbackRate,this.source.buffer=this.buffer,this.source.connect(this.analyser)},isPaused:function(){return this.state!==this.states[this.PLAYING_STATE]},getDuration:function(){return this.buffer?this.buffer.duration:0},seekTo:function(t,e){return this.scheduledPause=null,null==t&&(t=this.getCurrentTime())>=this.getDuration()&&(t=0),null==e&&(e=this.getDuration()),this.startPosition=t,this.lastPlay=this.ac.currentTime,this.state===this.states[this.FINISHED_STATE]&&this.setState(this.PAUSED_STATE),{start:t,end:e}},getPlayedTime:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate},play:function(t,e){this.createSource();var n=this.seekTo(t,e);t=n.start,e=n.end,this.scheduledPause=e,this.source.start(0,t,e-t),this.setState(this.PLAYING_STATE),this.fireEvent("play")},pause:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime(),this.source&&this.source.stop(0),this.setState(this.PAUSED_STATE),this.fireEvent("pause")},getCurrentTime:function(){return this.state.getCurrentTime.call(this)},setPlaybackRate:function(t){t=t||1,this.isPaused()?this.playbackRate=t:(this.pause(),this.playbackRate=t,this.play())}},e.WebAudio.state={},e.WebAudio.state.playing={init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var t=this.getDuration();return this.getCurrentTime()/t||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}},e.WebAudio.state.paused={init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var t=this.getDuration();return this.getCurrentTime()/t||0},getCurrentTime:function(){return this.startPosition}},e.WebAudio.state.finished={init:function(){this.removeOnAudioProcess(),this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}},e.util.extend(e.WebAudio,e.Observer),e.MediaElement=Object.create(e.WebAudio),e.util.extend(e.MediaElement,{init:function(t){this.params=t,this.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){}},this.mediaType=t.mediaType.toLowerCase(),this.elementPosition=t.elementPosition,this.setPlaybackRate(this.params.audioRate)},load:function(t,e,n){var i=this,r=document.createElement(this.mediaType);r.controls=this.params.mediaControls,r.autoplay=this.params.autoplay||!1,r.preload="auto",r.src=t,r.style.width="100%",r.addEventListener("error",function(){i.fireEvent("error","Error loading media element")}),r.addEventListener("canplay",function(){i.fireEvent("canplay")}),r.addEventListener("ended",function(){i.fireEvent("finish")}),r.addEventListener("timeupdate",function(){i.fireEvent("audioprocess",i.getCurrentTime())});var o=e.querySelector(this.mediaType);o&&e.removeChild(o),e.appendChild(r),this.media=r,this.peaks=n,this.onPlayEnd=null,this.buffer=null,this.setPlaybackRate(this.playbackRate)},isPaused:function(){return!this.media||this.media.paused},getDuration:function(){var t=this.media.duration;return t>=1/0&&(t=this.media.seekable.end()),t},getCurrentTime:function(){return this.media&&this.media.currentTime},getPlayedPercents:function(){return this.getCurrentTime()/this.getDuration()||0},setPlaybackRate:function(t){this.playbackRate=t||1,this.media.playbackRate=this.playbackRate},seekTo:function(t){null!=t&&(this.media.currentTime=t),this.clearPlayEnd()},play:function(t,e){this.seekTo(t),this.media.play(),e&&this.setPlayEnd(e),this.fireEvent("play")},pause:function(){this.media&&this.media.pause(),this.clearPlayEnd(),this.fireEvent("pause")},setPlayEnd:function(t){var e=this;this.onPlayEnd=function(n){n>=t&&(e.pause(),e.seekTo(t))},this.on("audioprocess",this.onPlayEnd)},clearPlayEnd:function(){this.onPlayEnd&&(this.un("audioprocess",this.onPlayEnd),this.onPlayEnd=null)},getPeaks:function(t){return this.buffer?e.WebAudio.getPeaks.call(this,t):this.peaks||[]},getVolume:function(){return this.media.volume},setVolume:function(t){this.media.volume=t},destroy:function(){this.pause(),this.unAll(),this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}),e.AudioElement=e.MediaElement,e.Drawer={init:function(t,e){this.container=t,this.params=e,this.width=0,this.height=e.height*this.params.pixelRatio,this.lastPos=0,this.createWrapper(),this.createElements()},createWrapper:function(){this.wrapper=this.container.appendChild(document.createElement("wave")),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()},handleEvent:function(t){t.preventDefault();var e=this.wrapper.getBoundingClientRect();return(t.clientX-e.left+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0},setupWrapperEvents:function(){var t=this;this.wrapper.addEventListener("click",function(e){var n=t.wrapper.offsetHeight-t.wrapper.clientHeight;if(0!=n){var i=t.wrapper.getBoundingClientRect();if(e.clientY>=i.bottom-n)return}t.params.interact&&t.fireEvent("click",e,t.handleEvent(e))}),this.wrapper.addEventListener("scroll",function(e){t.fireEvent("scroll",e)})},drawPeaks:function(t,e){this.resetScroll(),this.setWidth(e),this.params.barWidth?this.drawBars(t):this.drawWave(t)},style:function(t,e){return Object.keys(e).forEach(function(n){t.style[n]!==e[n]&&(t.style[n]=e[n])}),t},resetScroll:function(){null!==this.wrapper&&(this.wrapper.scrollLeft=0)},recenter:function(t){var e=this.wrapper.scrollWidth*t;this.recenterOnPosition(e,!0)},recenterOnPosition:function(t,e){var n=this.wrapper.scrollLeft,i=~~(this.wrapper.clientWidth/2),r=t-i,o=r-n,a=this.wrapper.scrollWidth-this.wrapper.clientWidth;0!=a&&(!e&&o>=-i&&i>o&&(r=n+(o=Math.max(-5,Math.min(5,o)))),(r=Math.max(0,Math.min(a,r)))!=n&&(this.wrapper.scrollLeft=r))},getWidth:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)},setWidth:function(t){t!=this.width&&(this.width=t,this.params.fillParent||this.params.scrollParent?this.style(this.wrapper,{width:""}):this.style(this.wrapper,{width:~~(this.width/this.params.pixelRatio)+"px"}),this.updateSize())},setHeight:function(t){t!=this.height&&(this.height=t,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize())},progress:function(t){var e=1/this.params.pixelRatio,n=Math.round(t*this.width)*e;if(n<this.lastPos||n-this.lastPos>=e){if(this.lastPos=n,this.params.scrollParent&&this.params.autoCenter){var i=~~(this.wrapper.scrollWidth*t);this.recenterOnPosition(i)}this.updateProgress(t)}},destroy:function(){this.unAll(),this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=null)},createElements:function(){},updateSize:function(){},drawWave:function(t,e){},clearWave:function(){},updateProgress:function(t){}},e.util.extend(e.Drawer,e.Observer),e.Drawer.Canvas=Object.create(e.Drawer),e.util.extend(e.Drawer.Canvas,{createElements:function(){var t=this.wrapper.appendChild(this.style(document.createElement("canvas"),{position:"absolute",zIndex:1,left:0,top:0,bottom:0}));if(this.waveCc=t.getContext("2d"),this.progressWave=this.wrapper.appendChild(this.style(document.createElement("wave"),{position:"absolute",zIndex:2,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})),this.params.waveColor!=this.params.progressColor){var e=this.progressWave.appendChild(document.createElement("canvas"));this.progressCc=e.getContext("2d")}},updateSize:function(){var t=Math.round(this.width/this.params.pixelRatio);this.waveCc.canvas.width=this.width,this.waveCc.canvas.height=this.height,this.style(this.waveCc.canvas,{width:t+"px"}),this.style(this.progressWave,{display:"block"}),this.progressCc&&(this.progressCc.canvas.width=this.width,this.progressCc.canvas.height=this.height,this.style(this.progressCc.canvas,{width:t+"px"})),this.clearWave()},clearWave:function(){this.waveCc.clearRect(0,0,this.width,this.height),this.progressCc&&this.progressCc.clearRect(0,0,this.width,this.height)},drawBars:function(t,e){if(t[0]instanceof Array){var n=t;if(this.params.splitChannels)return this.setHeight(n.length*this.params.height*this.params.pixelRatio),void n.forEach(this.drawBars,this);t=n[0]}[].some.call(t,function(t){return 0>t})&&(t=[].filter.call(t,function(t,e){return e%2==0}));var i=.5/this.params.pixelRatio,r=this.width,o=this.params.height*this.params.pixelRatio,a=o*e||0,s=o/2,l=t.length,c=this.params.barWidth*this.params.pixelRatio,u=Math.max(this.params.pixelRatio,~~(c/2)),d=c+u,h=1;this.params.normalize&&(h=Math.max.apply(Math,t));var f=l/r;this.waveCc.fillStyle=this.params.waveColor,this.progressCc&&(this.progressCc.fillStyle=this.params.progressColor),[this.waveCc,this.progressCc].forEach(function(e){if(e)for(var n=0;r>n;n+=d){var o=Math.round(t[Math.floor(n*f)]/h*s);e.fillRect(n+i,s-o+a,c+i,2*o)}},this)},drawWave:function(t,e){if(t[0]instanceof Array){var n=t;if(this.params.splitChannels)return this.setHeight(n.length*this.params.height*this.params.pixelRatio),void n.forEach(this.drawWave,this);t=n[0]}if(![].some.call(t,function(t){return 0>t})){for(var i=[],r=0,o=t.length;o>r;r++)i[2*r]=t[r],i[2*r+1]=-t[r];t=i}var a=.5/this.params.pixelRatio,s=this.params.height*this.params.pixelRatio,l=s*e||0,c=s/2,u=~~(t.length/2),d=1;this.params.fillParent&&this.width!=u&&(d=this.width/u);var h=1;if(this.params.normalize){var f=Math.max.apply(Math,t),p=Math.min.apply(Math,t);h=-p>f?-p:f}this.waveCc.fillStyle=this.params.waveColor,this.progressCc&&(this.progressCc.fillStyle=this.params.progressColor),[this.waveCc,this.progressCc].forEach(function(e){if(e){e.beginPath(),e.moveTo(a,c+l);for(var n=0;u>n;n++){var i=Math.round(t[2*n]/h*c);e.lineTo(n*d+a,c-i+l)}for(n=u-1;n>=0;n--){i=Math.round(t[2*n+1]/h*c);e.lineTo(n*d+a,c-i+l)}e.closePath(),e.fill(),e.fillRect(0,c+l-a,this.width,a)}},this)},updateProgress:function(t){var e=Math.round(this.width*t)/this.params.pixelRatio;this.style(this.progressWave,{width:e+"px"})}}),t=function(){var t=document.querySelectorAll("wavesurfer");Array.prototype.forEach.call(t,function(t){var n=e.util.extend({container:t,backend:"MediaElement",mediaControls:!0},t.dataset);t.style.display="block";var i=e.create(n);if(t.dataset.peaks)var r=JSON.parse(t.dataset.peaks);i.load(t.dataset.url,r)})},"complete"===document.readyState?t():window.addEventListener("load",t),e}()}.apply(e,r=[]))||(t.exports=o),function(){"use strict";var t,e,n,i;window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame,window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,angular.module("angularAudioRecorder",["angularAudioRecorder.config","angularAudioRecorder.services","angularAudioRecorder.controllers","angularAudioRecorder.directives"]),angular.module("angularAudioRecorder.config",[]).constant("recorderScriptUrl",(t=document.getElementsByTagName("script"),e=t[t.length-1].getAttribute("src"),n=e.substr(0,e.lastIndexOf("/")+1),i=document.createElement("a"),i.href=n,i.href)).constant("recorderPlaybackStatus",{STOPPED:0,PLAYING:1,PAUSED:2}),angular.module("angularAudioRecorder.controllers",["angularAudioRecorder.config","angularAudioRecorder.services"]);var r=function(t,e,n,i,r,o,a){var s=function(t){var e=i.$root.$$phase;if("$apply"!==e&&"$digest"!==e)return i.$apply(t)},l=this,c={recorder:null,url:null,player:null},u=null,d="recorded-audio-"+l.id,h={isRecording:!1,playback:a.STOPPED,isDenied:null,isSwfLoaded:null,isConverting:!1,get isPlaying(){return h.playback===a.PLAYING},get isStopped(){return h.playback===a.STOPPED},get isPaused(){return h.playback===a.PAUSED}},f=angular.isDefined(l.convertMp3)?!!l.convertMp3:e.shouldConvertToMp3(),p=f?new MP3Converter(e.getMp3Config()):null;l.timeLimit=l.timeLimit||0,l.status=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&Object.defineProperty(e,n,{get:function(e){var i=n;return function(){return t[i]}}(),enumerable:!0,configurable:!0});return e}(h),l.isAvailable=e.isAvailable(),l.elapsedTime=0,l.id||(l.id=n.generateUuid(),t.attr("id",l.id)),e.isHtml5||e.isCordova||(h.isSwfLoaded=e.swfIsLoaded(),i.$watch(function(){return e.swfIsLoaded()},function(t){h.isSwfLoaded=t})),e.setController(l.id,this);var g=function(){h.playback=a.STOPPED,l.onPlaybackComplete(),s()},m=function(){h.playback=a.PAUSED,l.onPlaybackPause()},v=function(){h.playback=a.PLAYING,l.onPlaybackStart()},y=function(){h.playback=a.PLAYING,l.onPlaybackResume()},E=function(e){if(null==document.getElementById(d)){t.append('<audio type="audio/mp3" id="'+d+'"></audio>');var n=document.getElementById(d);l.showPlayer&&n.setAttribute("controls",""),n.addEventListener("ended",g),n.addEventListener("pause",function(t){this.duration!==this.currentTime&&(m(),s())}),n.addEventListener("playing",function(t){h.isPaused?y():v(),s()})}e?function(t,e){var n=new FileReader;n.onload=function(t){!function(t){document.getElementById(d).src=t}(t.target.result)},n.readAsDataURL(t)}(e):document.getElementById(d).removeAttribute("src")};l.getAudioPlayer=function(){return e.isCordova?c.player:document.getElementById(d)},l.startRecord=function(){if(e.isAvailable()){h.isPlaying&&(l.playbackPause(),h.playback=a.STOPPED),l.audioModel=null;var t=l.id,r=e.getHandler(),d=function(){if(e.isCordova)c.url=n.cordovaAudioUrl(l.id),c.recorder=new Media(c.url,function(){console.log("Media successfully played")},function(t){console.log("Media could not be launched"+t.code,t)}),console.log("CordovaRecording"),c.recorder.startRecord();else if(e.isHtml5){if(!r)return;console.log("HTML5Recording"),r.clear(),r.record()}else{if(!e.isReady)return;console.log("FlashRecording"),r.record(t,"audio.wav")}h.isRecording=!0,l.onRecordStart(),l.elapsedTime=0,u=o(function(){++l.elapsedTime,l.timeLimit&&l.timeLimit>0&&l.elapsedTime>=l.timeLimit&&l.stopRecord()},1e3)};e.isCordova||r?d():h.isDenied||e.showPermission({onDenied:function(){h.isDenied=!0,i.$apply()},onAllowed:function(){h.isDenied=!1,r=e.getHandler(),d(),s()}})}},l.stopRecord=function(){var t=l.id;if(!e.isAvailable()||!h.isRecording)return!1;var n=e.getHandler(),i=function(t){o.cancel(u),h.isRecording=!1;var e,n,i=function(t){l.audioModel=t,E(t)};f?(e=t,n=i,p&&(h.isConverting=!0,p.convert(e,function(t){h.isConverting=!1,n&&n(t),s(l.onConversionComplete)},function(){h.isConverting=!1}),l.onConversionStart())):i(t),E(null),l.onRecordComplete()};e.isCordova?(c.recorder.stopRecord(),window.resolveLocalFileSystemURL(c.url,function(t){t.file(function(t){i(t)})},function(t){console.log("Could not retrieve file, error code:",t.code)})):e.isHtml5?(n.stop(),n.getBuffer(function(){n.exportWAV(function(t){i(t),s()})})):(n.stopRecording(t),i(n.getBlob(t)))},l.playbackRecording=function(){if(h.isPlaying||!e.isAvailable()||h.isRecording||!l.audioModel)return!1;e.isCordova?(c.player=new Media(c.url,g,function(){console.log("Playback failed")}),c.player.play(),v()):l.getAudioPlayer().play()},l.playbackPause=function(){if(!h.isPlaying||!e.isAvailable()||h.isRecording||!l.audioModel)return!1;l.getAudioPlayer().pause(),e.isCordova&&m()},l.playbackResume=function(){if(h.isPlaying||!e.isAvailable()||h.isRecording||!l.audioModel)return!1;h.isPaused?(l.getAudioPlayer().play(),e.isCordova&&y()):l.playbackRecording()},l.save=function(t){if(!e.isAvailable()||h.isRecording||!l.audioModel)return!1;t||(t="audio_recording_"+l.id+(l.audioModel.type.indexOf("mp3")>-1?"mp3":"wav"));var n=window.URL.createObjectURL(l.audioModel),i=document.createElement("a");i.href=n,i.target="_blank",i.download=t;var r=document.createEvent("Event");r.initEvent("click",!0,!0),i.dispatchEvent(r)},l.isHtml5=function(){return e.isHtml5},l.autoStart&&r(function(){l.startRecord()},1e3),t.on("$destroy",function(){o.cancel(u)})};r.$inject=["$element","recorderService","recorderUtils","$scope","$timeout","$interval","recorderPlaybackStatus"],angular.module("angularAudioRecorder.controllers").controller("recorderController",r),angular.module("angularAudioRecorder.directives",["angularAudioRecorder.config","angularAudioRecorder.services","angularAudioRecorder.controllers"]),angular.module("angularAudioRecorder.directives").directive("ngAudioRecorderAnalyzer",["recorderService","recorderUtils",function(t,e){return{restrict:"E",require:"^ngAudioRecorder",template:'<div ng-if="!hide" class="audioRecorder-analyzer"><canvas class="analyzer" width="1200" height="400" style="max-width: 100%;"></canvas></div>',link:function(n,i,r,o){if(t.isHtml5){var a,s,l,c,u,d=t.$html5AudioProps;i.on("$destroy",function(){f()}),o.onRecordStart=(u=o.onRecordStart,function(){u.apply(),h()}),e.appendActionToCallback(o,"onRecordStart",h,"analyzer"),e.appendActionToCallback(o,"onRecordComplete",f,"analyzer")}else n.hide=!0;function h(t){if(!c){var e=i.find("canvas")[0];r.width&&!isNaN(r.width)&&(e.width=r.width),r.height&&!isNaN(r.height)&&(e.height=parseInt(r.height)),a=e.width,s=e.height,c=e.getContext("2d")}var n=Math.round(a/3),o=new Uint8Array(d.analyserNode.frequencyBinCount);d.analyserNode.getByteFrequencyData(o),c.clearRect(0,0,a,s),c.lineCap="round";for(var u=d.analyserNode.frequencyBinCount/n,f=0;f<n;++f){for(var p=0,g=Math.floor(f*u),m=0;m<u;m++)p+=o[g+m];p/=u,o[f*u],r.waveColor?c.fillStyle=r.waveColor:c.fillStyle="hsl( "+Math.round(360*f/n)+", 100%, 50%)",c.fillRect(3*f,s,1,-p)}l=window.requestAnimationFrame(h)}function f(){window.cancelAnimationFrame(l),l=null}}}}]),angular.module("angularAudioRecorder.directives").directive("ngAudioRecorderWaveView",["recorderService","recorderUtils","$log",function(t,e,n){return{restrict:"E",require:"^ngAudioRecorder",link:function(t,i,r,o){if(window.WaveSurfer){var a;i.html('<div class="waveSurfer"></div>');var s=angular.extend({container:i.find("div")[0]},r),l=WaveSurfer.create(s);l.setVolume(0),e.appendActionToCallback(o,"onPlaybackStart|onPlaybackResume",function(){l.play()},"waveView"),e.appendActionToCallback(o,"onPlaybackComplete|onPlaybackPause",function(){l.pause()},"waveView"),e.appendActionToCallback(o,"onRecordComplete",function(){a||(a=o.getAudioPlayer()).addEventListener("seeking",function(t){var e=a.currentTime/a.duration;l.seekTo(e)})},"waveView"),t.$watch(function(){return o.audioModel},function(t){t instanceof Blob&&l.loadBlob(t)})}else n.warn("WaveSurfer was found.")}}}]),angular.module("angularAudioRecorder.directives").directive("ngAudioRecorder",["recorderService","$timeout",function(t,e){return{restrict:"EA",scope:{audioModel:"=",id:"@",onRecordStart:"&",onRecordComplete:"&",onPlaybackComplete:"&",onPlaybackStart:"&",onPlaybackPause:"&",onPlaybackResume:"&",onConversionStart:"&",onConversionComplete:"&",showPlayer:"=?",autoStart:"=?",convertMp3:"=?",timeLimit:"=?"},controllerAs:"recorder",bindToController:!0,template:function(t,e){return'<div class="audioRecorder"><div style="width: 250px; margin: 0 auto;"><div id="audioRecorder-fwrecorder"></div></div>'+t.html()+"</div>"},controller:"recorderController",link:function(n,i,r){e(function(){!t.isAvailable||t.isHtml5||t.isCordova||swfobject.embedSWF(t.getSwfUrl(),"audioRecorder-fwrecorder","0","0","11.0.0","",{save_text:""},{allowscriptaccess:"always"},{id:"recorder-app",name:"recorder-app"})},100)}}}]),angular.module("angularAudioRecorder.services",["angularAudioRecorder.config"]),angular.module("angularAudioRecorder.services").provider("recorderService",["recorderScriptUrl",function(t){var e=null,n={isHtml5:!1,isReady:!1},i={onDenied:null,onClosed:null,onAllow:null},r=!1,o=t+"../lib/recorder.swf",a=!1,s={bitRate:92,lameJsUrl:t+"../lib/lame.min.js"},l={isAvailable:!1,loaded:!1,configureMic:function(){FWRecorder.isReady&&(FWRecorder.configure(44,100,0,2e3),FWRecorder.setUseEchoSuppression(!1),FWRecorder.setLoopBack(!1))},allowed:!1,externalEvents:function(t){switch(arguments[1],arguments[0]){case"ready":parseInt(arguments[1]),parseInt(arguments[2]),FWRecorder.connect("recorder-app",0),FWRecorder.recorderOriginalWidth=1,FWRecorder.recorderOriginalHeight=1,l.loaded=!0;break;case"microphone_user_request":FWRecorder.showPermissionWindow({permanent:!0});break;case"microphone_connected":console.log("Permission to use MIC granted"),l.allowed=!0;break;case"microphone_not_connected":console.log("Permission to use MIC denied"),l.allowed=!1;break;case"permission_panel_closed":l.allowed?l.setAllowed():l.setDeclined(),FWRecorder.defaultSize(),angular.isFunction(i.onClosed)&&i.onClosed();break;case"recording":case"recording_stopped":FWRecorder.hide();break;case"playing":break;case"playback_started":arguments[2];break;case"save_pressed":FWRecorder.updateForm();break;case"saving":break;case"saved":$.parseJSON(arguments[2]).saved;break;case"save_failed":arguments[2];break;case"save_progress":arguments[2],arguments[3]}},isInstalled:function(){return swfobject.getFlashPlayerVersion().major>0},init:function(){n.isHtml5=!1,l.isInstalled()?(l.isAvailable=!0,window.fwr_event_handler=l.externalEvents,window.configureMicrophone=l.configureMic):console.log("Flash is not installed, application cannot be initialized")},setAllowed:function(){n.isReady=!0,e=FWRecorder,angular.isFunction(i.onAllowed)&&i.onAllowed()},setDeclined:function(){n.isReady=!1,e=null,angular.isFunction(i.onDenied)&&i.onDenied()},getPermission:function(){l.isAvailable&&(FWRecorder.isMicrophoneAccessible()?(l.allowed=!0,setTimeout(function(){l.setAllowed()},100)):FWRecorder.showPermissionWindow({permanent:!0}))}},c={audioContext:null,inputPoint:null,audioInput:null,audioRecorder:null,analyserNode:null},u={gotStream:function(t){var r=c.audioContext;c.audioInput=r.createMediaStreamSource(t),c.audioInput.connect(c.inputPoint=r.createGain()),c.analyserNode=r.createAnalyser(),c.analyserNode.fftSize=2048,c.inputPoint.connect(c.analyserNode),c.audioRecorder=new Recorder(c.audioInput);var o=r.createGain();o.gain.value=0,c.inputPoint.connect(o),o.connect(r.destination),n.isReady=!0,e=c.audioRecorder,angular.isFunction(i.onAllowed)&&("https:"==window.location.protocol&&localStorage.setItem("permission","given"),i.onAllowed())},failStream:function(t){angular.isDefined(i.onDenied)&&i.onDenied()},getPermission:function(){navigator.getUserMedia({audio:!0},u.gotStream,u.failStream)},init:function(){n.isHtml5=!0;var t=window.AudioContext||window.webkitAudioContext;t&&!c.audioContext&&(c.audioContext=new t),null!==localStorage.getItem("permission")&&u.getPermission()}};navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,n.isCordova=!1;var d={};n.controller=function(t){return d[t]},n.getSwfUrl=function(){return o},n.setController=function(t,e){d[t]=e},n.isAvailable=function(){if(n.isCordova){if(!("Media"in window))throw new Error('The Media plugin for cordova is required for this library, add plugin using "cordova plugin add cordova-plugin-media"');return!0}return n.isHtml5||l.isInstalled()},n.getHandler=function(){return e},n.showPermission=function(t){n.isAvailable()?(t&&angular.extend(i,t),n.isHtml5?u.getPermission():l.getPermission()):console.warn("Neither HTML5 nor SWF is supported.")},n.swfIsLoaded=function(){return l.loaded},n.shouldConvertToMp3=function(){return a},n.getMp3Config=function(){return s},n.$html5AudioProps=c;var h={$get:["recorderUtils",function(t){return"cordova"in window?n.isCordova=!0:!r&&navigator.getUserMedia?u.init():l.init(),n}],forceSwf:function(t){return r=t,h},setSwfUrl:function(t){return o=t,h},withMp3Conversion:function(t,e){return a=!!t,s=angular.extend(s,e||{}),h}};return h}]),angular.module("angularAudioRecorder.services").factory("recorderUtils",[function(){return{generateUuid:function(){function t(t){var e=(Math.random().toString(16)+"000000000").substr(2,8);return t?"-"+e.substr(0,4)+"-"+e.substr(4,4):e}return t()+t(!0)+t(!0)+t()},cordovaAudioUrl:function(t){if(!window.cordova)return"record-audio"+t+".wav";var e=cordova.file.tempDirectory||cordova.file.externalApplicationStorageDirectory||cordova.file.sharedDirectory;switch(e+=Date.now()+"_recordedAudio_"+t.replace("/[^A-Za-z0-9_-]+/gi","-"),window.cordova.platformId){case"ios":e+=".wav";break;case"android":e+=".amr";break;case"wp":e+=".wma";break;default:e+=".mp3"}return e},appendActionToCallback:function(t,e,n,i){e.split(/\|/).forEach(function(e){if(!(angular.isObject(t)&&angular.isFunction(n)&&e in t&&angular.isFunction(t[e])))throw new Error("One or more parameter supplied is not valid");"$$appendTrackers"in t||(t.$$appendTrackers=[]);var r,o=e+"|"+i;t.$$appendTrackers.indexOf(o)>-1?console.log("Already appended: ",o):(t[e]=(r=t[e],function(){r.apply(t,arguments),n.apply(t,arguments)}),t.$$appendTrackers.push(o))})}}}])}(),function(t){"use strict";var e;e={recorder:null,recorderOriginalWidth:0,recorderOriginalHeight:0,uploadFormId:null,uploadFieldName:null,isReady:!1,connect:function(t,n){if(-1!=navigator.appName.indexOf("Microsoft")?e.recorder=window[t]:e.recorder=document[t],!(n>=40))if(e.recorder&&e.recorder.init){if(e.recorderOriginalWidth=e.recorder.width,e.recorderOriginalHeight=e.recorder.height,e.uploadFormId&&$){var i=$(e.uploadFormId);e.recorder.init(i.attr("action").toString(),e.uploadFieldName,i.serializeArray())}}else setTimeout(function(){e.connect(t,n+1)},100)},playBack:function(t){e.recorder.playBack(t)},pausePlayBack:function(t){e.recorder.pausePlayBack(t)},playBackFrom:function(t,n){e.recorder.playBackFrom(t,n)},record:function(t,n){e.recorder.record(t,n)},stopRecording:function(){e.recorder.stopRecording()},stopPlayBack:function(){e.recorder.stopPlayBack()},observeLevel:function(){e.recorder.observeLevel()},stopObservingLevel:function(){e.recorder.stopObservingLevel()},observeSamples:function(){e.recorder.observeSamples()},stopObservingSamples:function(){e.recorder.stopObservingSamples()},resize:function(t,n){e.recorder.width=t+"px",e.recorder.height=n+"px"},defaultSize:function(){e.resize(e.recorderOriginalWidth,e.recorderOriginalHeight)},show:function(){e.recorder.show()},hide:function(){e.recorder.hide()},duration:function(t){return e.recorder.duration(t||e.uploadFieldName)},getBase64:function(t){return"data:audio/wav;base64,"+e.recorder.getBase64(t)},getBlob:function(t){return function(t,e,n){e=e||"",n=n||512;for(var i=atob(t),r=[],o=0;o<i.length;o+=n){for(var a=i.slice(o,o+n),s=new Array(a.length),l=0;l<a.length;l++)s[l]=a.charCodeAt(l);var c=new Uint8Array(s);r.push(c)}return new Blob(r,{type:e})}(e.getBase64(t).split(",")[1],"audio/wav")},getCurrentTime:function(t){return e.recorder.getCurrentTime(t)},isMicrophoneAccessible:function(){return e.recorder.isMicrophoneAccessible()},updateForm:function(){var t=$(e.uploadFormId);e.recorder.update(t.serializeArray())},showPermissionWindow:function(t){e.resize(240,160),setTimeout(function(){t&&t.permanent?e.recorder.permitPermanently():e.recorder.permit()},1)},configure:function(t,n,i,r){switch(t=parseInt(t||22),n=parseInt(n||100),i=parseInt(i||0),r=parseInt(r||4e3),t){case 44:case 22:case 11:case 8:case 5:break;default:throw"invalid rate "+t}if(n<0||n>100)throw"invalid gain "+n;if(i<0||i>100)throw"invalid silenceLevel "+i;if(r<-1)throw"invalid silenceTimeout "+r;e.recorder.configure(t,n,i,r)},setUseEchoSuppression:function(t){if("boolean"!=typeof t)throw"invalid value for setting echo suppression, val: "+t;e.recorder.setUseEchoSuppression(t)},setLoopBack:function(t){if("boolean"!=typeof t)throw"invalid value for setting loop back, val: "+t;e.recorder.setLoopBack(t)}},t.FWRecorder=e}(window),function(){"use strict";Function.prototype.toWorker=function(t){var e=function(t,e){if("function"!=typeof t)throw"The specified parameter must be a valid function";var n=t.toString();if(n.match(/\[native\s*code\]/i))throw"You cannot bind a native function to a worker";return"object"!=typeof(e=e||{})&&console.warn("Params must be an object that is serializable with JSON.stringify, specified is: "+typeof e),window.URL.createObjectURL(new Blob(["(",n,")(this,",JSON.stringify(e),")"],{type:"application/javascript"}))}(this,t);return new Worker(e)}}(),function(t){"use strict";t.Recorder=function(t,e){var n=e||{},i=n.bufferLen||4096;this.context=t.context,this.node=(this.context.createScriptProcessor||this.context.createJavaScriptNode).call(this.context,i,2,2);var r=function(t){var e,n=0,i=[],r=[];function o(t,e){for(var n=new Float32Array(e),i=0,r=0;r<t.length;r++)n.set(t[r],i),i+=t[r].length;return n}function a(t,e,n){for(var i=0;i<n.length;i++)t.setUint8(e+i,n.charCodeAt(i))}t.onmessage=function(s){switch(s.data.command){case"init":g=s.data.config,e=g.sampleRate;break;case"record":p=s.data.buffer,i.push(p[0]),n+=p[0].length;break;case"exportWAV":c=s.data.type,d=o(i,n),h=new ArrayBuffer(44+2*d.length),a(f=new DataView(h),0,"RIFF"),f.setUint32(4,32+2*d.length,!0),a(f,8,"WAVE"),a(f,12,"fmt "),f.setUint32(16,16,!0),f.setUint16(20,1,!0),f.setUint16(22,1,!0),f.setUint32(24,e,!0),f.setUint32(28,2*e,!0),f.setUint16(32,2,!0),f.setUint16(34,16,!0),a(f,36,"data"),f.setUint32(40,2*d.length,!0),function(t,e,n){for(var i=0;i<n.length;i++,e+=2){var r=Math.max(-1,Math.min(1,n[i]));t.setInt16(e,r<0?32768*r:32767*r,!0)}}(f,44,d),u=new Blob([f],{type:c}),t.postMessage(u);break;case"getBuffer":(l=[]).push(o(i,n)),l.push(o(r,n)),t.postMessage(l);break;case"clear":n=0,i=[],r=[]}var l,c,u,d,h,f,p,g}}.toWorker();r.postMessage({command:"init",config:{sampleRate:this.context.sampleRate}});var o,a=!1;this.node.onaudioprocess=function(t){a&&r.postMessage({command:"record",buffer:[t.inputBuffer.getChannelData(0)]})},this.configure=function(t){for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e])},this.record=function(){a=!0},this.stop=function(){a=!1},this.clear=function(){r.postMessage({command:"clear"})},this.getBuffer=function(t){o=t||n.callback,r.postMessage({command:"getBuffer"})},this.exportWAV=function(t,e){if(o=t||n.callback,e=e||n.type||"audio/wav",!o)throw new Error("Callback not set");r.postMessage({command:"exportWAV",type:e})},r.onmessage=function(t){var e=t.data;o(e)},t.connect(this.node),this.node.connect(this.context.destination)}}(window),function(t){"use strict";var e=function(){var t=document.getElementsByTagName("script"),e=t[t.length-1].getAttribute("src"),n=e.substr(0,e.lastIndexOf("/")+1);if(n&&!n.match(/:\/\//)){var i=document.createElement("a");return i.href=n,i.href}return n}();t.MP3Converter=function(t){(t=t||{}).lameJsUrl=t.lameJsUrl||e+"/lame.min.js";var n=!1,i=function(t,e){console.log("MP3 conversion worker started."),"undefined"==typeof lamejs&&importScripts(e.lameJsUrl);var n,i,r,o,a,s,l=function(){s=[]},c=function(t){s.push(new Int8Array(t))};t.onmessage=function(t){switch(t.data.cmd){case"init":u=t.data.config,a=u||{},o=new lamejs,l();break;case"encode":!function(t){i=o.WavHeader.readHeader(new DataView(t)),console.log("wave:",i),r=new Int16Array(t,i.dataOffset,i.dataLen/2),n=new o.Mp3Encoder(i.channels,i.sampleRate,a.bitRate||128);for(var e=r.length,s=0;e>=1152;s+=1152){var l=r.subarray(s,s+1152),u=n.encodeBuffer(l);c(u),e-=1152}}(t.data.rawInput);break;case"finish":e=n.flush(),c(e),self.postMessage({cmd:"end",buf:s}),console.log("done encoding"),l()}var e,u}}.toWorker(t);this.isBusy=function(){return n},this.convert=function(t){var e="conversion_"+Date.now()+":";console.log(e,"Starting conversion");var r,o,a={};switch(typeof arguments[1]){case"object":a=arguments[1];break;case"function":r=arguments[1];break;default:throw"parameter 2 is expected to be an object (config) or function (success callback)"}if("function"==typeof arguments[2]&&(r?o=arguments[2]:r=arguments[2]),"function"!=typeof arguments[3]||o||(o=arguments[3]),n)throw"Another conversion is in progress";var s=t.size,l=new FileReader,c=Date.now();l.onload=function(t){console.log(e,"Passed to BG process"),i.postMessage({cmd:"init",config:a}),i.postMessage({cmd:"encode",rawInput:t.target.result}),i.postMessage({cmd:"finish"}),i.onmessage=function(t){if("end"==t.data.cmd){console.log(e,"Done converting to Mp3");var i=new Blob(t.data.buf,{type:"audio/mp3"});window.mp3Blob=i,console.log(e,"Conversion completed in: "+(Date.now()-c)/1e3+"s");var o=i.size;console.log(e+"Initial size: = "+s+", Final size = "+o+", Reduction: "+Number(100*(s-o)/s).toPrecision(4)+"%"),n=!1,r&&"function"==typeof r&&r(i)}}},n=!0,l.readAsArrayBuffer(t)}}}(window),function(t){"use strict";
/*!SWFObject v2.1 <http://code.google.com/p/swfobject/>
   Copyright (c) 2007-2008 Geoff Stearns, Michael Williams, and Bobby van der Sluis
   This software is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
   */t.swfobject=function(){var t,e="undefined",n="object",i="application/x-shockwave-flash",r="SWFObjectExprInst",o=window,a=document,s=navigator,l=[],c=[],u=[],d=[],h=null,f=null,p=null,g=!1,m=!1,v=function(){var t=typeof a.getElementById!=e&&typeof a.getElementsByTagName!=e&&typeof a.createElement!=e,r=[0,0,0],l=null;if(typeof s.plugins!=e&&typeof s.plugins["Shockwave Flash"]==n)!(l=s.plugins["Shockwave Flash"].description)||typeof s.mimeTypes!=e&&s.mimeTypes[i]&&!s.mimeTypes[i].enabledPlugin||(l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),r[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),r[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),r[2]=/r/.test(l)?parseInt(l.replace(/^.*r(.*)$/,"$1"),10):0);else if(typeof o.ActiveXObject!=e){var c=null,u=!1;try{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(t){try{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),r=[6,0,21],c.AllowScriptAccess="always"}catch(t){6==r[0]&&(u=!0)}if(!u)try{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(t){}}if(!u&&c)try{(l=c.GetVariable("$version"))&&(l=l.split(" ")[1].split(","),r=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)])}catch(t){}}var d=s.userAgent.toLowerCase(),h=s.platform.toLowerCase();
/*@cc_on
       ie = true;
       @if (@_win32)
       windows = true;
       @elif (@_mac)
       mac = true;
       @end
       @*/return{w3cdom:t,pv:r,webkit:!!/webkit/.test(d)&&parseFloat(d.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),ie:!1,win:/win/.test(h||d),mac:/mac/.test(h||d)}}();function y(){"complete"==t.readyState&&(t.parentNode.removeChild(t),E())}function E(){if(!g){if(v.ie&&v.win){var t=K("span");try{var e=a.getElementsByTagName("body")[0].appendChild(t);e.parentNode.removeChild(e)}catch(t){return}}g=!0,h&&(clearInterval(h),h=null);for(var n=l.length,i=0;i<n;i++)l[i]()}}function b(t){g?t():l[l.length]=t}function C(t){if(typeof o.addEventListener!=e)o.addEventListener("load",t,!1);else if(typeof a.addEventListener!=e)a.addEventListener("load",t,!1);else if(typeof o.attachEvent!=e)$(o,"onload",t);else if("function"==typeof o.onload){var n=o.onload;o.onload=function(){n(),t()}}else o.onload=t}function T(){for(var t=c.length,e=0;e<t;e++){var n=c[e].id;if(v.pv[0]>0){var i=S(n);i&&(c[e].width=i.getAttribute("width")?i.getAttribute("width"):"0",c[e].height=i.getAttribute("height")?i.getAttribute("height"):"0",A(c[e].swfVersion)?(v.webkit&&v.webkit<312&&w(i),P(n,!0)):c[e].expressInstall&&!m&&A("6.0.65")&&(v.win||v.mac)?I(c[e]):O(i))}else P(n,!0)}}function w(t){var e=t.getElementsByTagName(n)[0];if(e){var i=K("embed"),r=e.attributes;if(r)for(var o=r.length,a=0;a<o;a++)"DATA"==r[a].nodeName?i.setAttribute("src",r[a].nodeValue):i.setAttribute(r[a].nodeName,r[a].nodeValue);var s=e.childNodes;if(s)for(var l=s.length,c=0;c<l;c++)1==s[c].nodeType&&"PARAM"==s[c].nodeName&&i.setAttribute(s[c].getAttribute("name"),s[c].getAttribute("value"));t.parentNode.replaceChild(i,t)}}function I(t){m=!0;var e=S(t.id);if(e){if(t.altContentId){var n=S(t.altContentId);n&&(f=n,p=t.altContentId)}else f=D(e);!/%$/.test(t.width)&&parseInt(t.width,10)<310&&(t.width="310"),!/%$/.test(t.height)&&parseInt(t.height,10)<137&&(t.height="137"),a.title=a.title.slice(0,47)+" - Flash Player Installation";var i=v.ie&&v.win?"ActiveX":"PlugIn",s=a.title,l="MMredirectURL="+o.location+"&MMplayerType="+i+"&MMdoctitle="+s,c=t.id;if(v.ie&&v.win&&4!=e.readyState){var u=K("div");c+="SWFObjectNew",u.setAttribute("id",c),e.parentNode.insertBefore(u,e),e.style.display="none",$(o,"onload",function(){e.parentNode.removeChild(e)})}_({data:t.expressInstall,id:r,width:t.width,height:t.height},{flashvars:l},c)}}function O(t){if(v.ie&&v.win&&4!=t.readyState){var e=K("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(D(t),e),t.style.display="none",$(o,"onload",function(){t.parentNode.removeChild(t)})}else t.parentNode.replaceChild(D(t),t)}function D(t){var e=K("div");if(v.win&&v.ie)e.innerHTML=t.innerHTML;else{var i=t.getElementsByTagName(n)[0];if(i){var r=i.childNodes;if(r)for(var o=r.length,a=0;a<o;a++)1==r[a].nodeType&&"PARAM"==r[a].nodeName||8==r[a].nodeType||e.appendChild(r[a].cloneNode(!0))}}return e}function _(t,r,o){var a,s=S(o);if(s)if(typeof t.id==e&&(t.id=o),v.ie&&v.win){var l="";for(var c in t)t[c]!=Object.prototype[c]&&("data"==c.toLowerCase()?r.movie=t[c]:"styleclass"==c.toLowerCase()?l+=' class="'+t[c]+'"':"classid"!=c.toLowerCase()&&(l+=" "+c+'="'+t[c]+'"'));var d="";for(var h in r)r[h]!=Object.prototype[h]&&(d+='<param name="'+h+'" value="'+r[h]+'" />');s.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+l+">"+d+"</object>",u[u.length]=t.id,a=S(t.id)}else if(v.webkit&&v.webkit<312){var f=K("embed");for(var p in f.setAttribute("type",i),t)t[p]!=Object.prototype[p]&&("data"==p.toLowerCase()?f.setAttribute("src",t[p]):"styleclass"==p.toLowerCase()?f.setAttribute("class",t[p]):"classid"!=p.toLowerCase()&&f.setAttribute(p,t[p]));for(var g in r)r[g]!=Object.prototype[g]&&"movie"!=g.toLowerCase()&&f.setAttribute(g,r[g]);s.parentNode.replaceChild(f,s),a=f}else{var m=K(n);for(var y in m.setAttribute("type",i),t)t[y]!=Object.prototype[y]&&("styleclass"==y.toLowerCase()?m.setAttribute("class",t[y]):"classid"!=y.toLowerCase()&&m.setAttribute(y,t[y]));for(var E in r)r[E]!=Object.prototype[E]&&"movie"!=E.toLowerCase()&&k(m,E,r[E]);s.parentNode.replaceChild(m,s),a=m}return a}function k(t,e,n){var i=K("param");i.setAttribute("name",e),i.setAttribute("value",n),t.appendChild(i)}function R(t){var e=S(t);!e||"OBJECT"!=e.nodeName&&"EMBED"!=e.nodeName||(v.ie&&v.win?4==e.readyState?x(t):o.attachEvent("onload",function(){x(t)}):e.parentNode.removeChild(e))}function x(t){var e=S(t);if(e){for(var n in e)"function"==typeof e[n]&&(e[n]=null);e.parentNode.removeChild(e)}}function S(t){var e=null;try{e=a.getElementById(t)}catch(t){}return e}function K(t){return a.createElement(t)}function $(t,e,n){t.attachEvent(e,n),d[d.length]=[t,e,n]}function A(t){var e=v.pv,n=t.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,e[0]>n[0]||e[0]==n[0]&&e[1]>n[1]||e[0]==n[0]&&e[1]==n[1]&&e[2]>=n[2]}function N(t,i){if(!v.ie||!v.mac){var r=a.getElementsByTagName("head")[0],o=K("style");if(o.setAttribute("type","text/css"),o.setAttribute("media","screen"),v.ie&&v.win||typeof a.createTextNode==e||o.appendChild(a.createTextNode(t+" {"+i+"}")),r.appendChild(o),v.ie&&v.win&&typeof a.styleSheets!=e&&a.styleSheets.length>0){var s=a.styleSheets[a.styleSheets.length-1];typeof s.addRule==n&&s.addRule(t,i)}}}function P(t,e){var n=e?"visible":"hidden";g&&S(t)?S(t).style.visibility=n:N("#"+t,"visibility:"+n)}function L(t){return null!=/[\\\"<>\.;]/.exec(t)?encodeURIComponent(t):t}return function(){if(v.w3cdom){if(b(T),v.ie&&v.win)try{a.write("<script id=__ie_ondomload defer=true src=//:><\/script>"),(t=S("__ie_ondomload"))&&$(t,"onreadystatechange",y)}catch(t){}v.webkit&&typeof a.readyState!=e&&(h=setInterval(function(){/loaded|complete/.test(a.readyState)&&E()},10)),typeof a.addEventListener!=e&&a.addEventListener("DOMContentLoaded",E,null),C(E)}}(),v.ie&&v.win&&window.attachEvent("onunload",function(){for(var t=d.length,e=0;e<t;e++)d[e][0].detachEvent(d[e][1],d[e][2]);for(var n=u.length,i=0;i<n;i++)R(u[i]);for(var r in v)v[r]=null;for(var o in v=null,swfobject)swfobject[o]=null;swfobject=null}),{registerObject:function(t,e,n){if(v.w3cdom&&t&&e){var i={};i.id=t,i.swfVersion=e,i.expressInstall=n||!1,c[c.length]=i,P(t,!1)}},getObjectById:function(t){var i=null;if(v.w3cdom){var r=S(t);if(r){var o=r.getElementsByTagName(n)[0];!o||o&&typeof r.SetVariable!=e?i=r:typeof o.SetVariable!=e&&(i=o)}}return i},embedSWF:function(t,i,r,o,a,s,l,c,u){if(v.w3cdom&&t&&i&&r&&o&&a)if(r+="",o+="",A(a)){P(i,!1);var d={};if(u&&typeof u===n)for(var h in u)u[h]!=Object.prototype[h]&&(d[h]=u[h]);d.data=t,d.width=r,d.height=o;var f={};if(c&&typeof c===n)for(var p in c)c[p]!=Object.prototype[p]&&(f[p]=c[p]);if(l&&typeof l===n)for(var g in l)l[g]!=Object.prototype[g]&&(typeof f.flashvars!=e?f.flashvars+="&"+g+"="+l[g]:f.flashvars=g+"="+l[g]);b(function(){_(d,f,i),d.id==i&&P(i,!0)})}else s&&!m&&A("6.0.65")&&(v.win||v.mac)&&(m=!0,P(i,!1),b(function(){var t={};t.id=t.altContentId=i,t.width=r,t.height=o,t.expressInstall=s,I(t)}))},getFlashPlayerVersion:function(){return{major:v.pv[0],minor:v.pv[1],release:v.pv[2]}},hasFlashPlayerVersion:A,createSWF:function(t,e,n){return v.w3cdom?_(t,e,n):void 0},removeSWF:function(t){v.w3cdom&&R(t)},createCSS:function(t,e){v.w3cdom&&N(t,e)},addDomLoadEvent:b,addLoadEvent:C,getQueryParamValue:function(t){var e=a.location.search||a.location.hash;if(null==t)return L(e);if(e)for(var n=e.substring(1).split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))==t)return L(n[i].substring(n[i].indexOf("=")+1));return""},expressInstallCallback:function(){if(m&&f){var t=S(r);t&&(t.parentNode.replaceChild(f,t),p&&(P(p,!0),v.ie&&v.win&&(f.style.display="block")),f=null,p=null,m=!1)}}}}()}(window),function(){"use strict";function a(t){return angular.isArray(t)?2==t.length?t.concat(t):3==t.length?t.concat([t[1]]):t:[t,t,t,t]}function s(t,e){if(!e)return t;var n=l(e[0])?parseFloat(e[0])*t.height/100:e[0],i=l(e[1])?parseFloat(e[1])*t.width/100:e[1],r=l(e[2])?parseFloat(e[2])*t.height/100:e[2],o=l(e[3])?parseFloat(e[3])*t.width/100:e[3];return{top:t.top-n,left:t.left-o,bottom:t.bottom+r,right:t.right+i,height:t.height+n+r,width:t.width+o+i}}function l(t){return angular.isString(t)&&t.indexOf("%")>0}function c(t){this.didSubscribeFunc=t}function u(t,e){return new c(function(n){var i=function(t){n(t)},r=angular.element(t);e.split(" ").map(t=>r[0].addEventListener(t,i,!0)),n.$dispose=function(){e.split(" ").map(t=>r[0].removeEventListener(t,i,!0))}})}angular.module("angular-inview",[]).directive("inView",["$parse",function(t){return{restrict:"A",require:"?^^inViewContainer",link:function(e,n,i,r){var o={};i.inViewOptions&&(o=e.$eval(i.inViewOptions)),o.offset&&(o.offset=a(o.offset)),o.viewportOffset&&(o.viewportOffset=a(o.viewportOffset));var l,d=(l={type:"initial"},new c(function(t){setTimeout(function(){t(l)})})).merge(u(window,"checkInView click ready wheel mousewheel DomMouseScroll MozMousePixelScroll resize scroll touchmove mouseup keydown"));r&&(d=d.merge(r.eventsSignal)),o.throttle&&(d=d.throttle(o.throttle));var h=d.map(function(t){var e;e=s(e=r?r.getViewportRect():function(){var t={top:0,left:0,width:window.innerWidth,right:window.innerWidth,height:window.innerHeight,bottom:window.innerHeight};return t.height?t:("CSS1Compat"===document.compatMode?(t.width=t.right=document.documentElement.clientWidth,t.height=t.bottom=document.documentElement.clientHeight):(t.width=t.right=document.body.clientWidth,t.height=t.bottom=document.body.clientHeight),t)}(),o.viewportOffset);var i,a,l=s(n[0].getBoundingClientRect(),o.offset),c={inView:!!(n[0].offsetWidth||n[0].offsetHeight||n[0].getClientRects().length)&&(i=l,a=e,!(a.left>i.right||a.right<i.left||a.top>i.bottom||a.bottom<i.top)),event:t,element:n,elementRect:l,viewportRect:e};return o.generateParts&&c.inView&&(c.parts={},c.parts.top=l.top>=e.top,c.parts.left=l.left>=e.left,c.parts.bottom=l.bottom<=e.bottom,c.parts.right=l.right<=e.right),c}).scan({},function(t,e){return o.generateDirection&&e.inView&&t.elementRect&&(e.direction={horizontal:e.elementRect.left-t.elementRect.left,vertical:e.elementRect.top-t.elementRect.top}),e.changed=e.inView!==t.inView||!angular.equals(e.parts,t.parts)||!angular.equals(e.direction,t.direction),e}).filter(function(t){return!(!t.changed||"initial"===t.event.type&&!t.inView)}),f=t(i.inView),p=h.subscribe(function(t){e.$applyAsync(function(){f(e,{$inview:t.inView,$inviewInfo:t})})});e.$on("$destroy",p)}}}]).directive("inViewContainer",function(){return{restrict:"A",controller:["$element",function(t){this.element=t,this.eventsSignal=u(t,"scroll"),this.getViewportRect=function(){return t[0].getBoundingClientRect()}}]}}),c.prototype.subscribe=function(t){return this.didSubscribeFunc(t),function(){t.$dispose&&(t.$dispose(),t.$dispose=null)}},c.prototype.map=function(t){var e=this;return new c(function(n){n.$dispose=e.subscribe(function(e){n(t(e))})})},c.prototype.filter=function(t){var e=this;return new c(function(n){n.$dispose=e.subscribe(function(e){t(e)&&n(e)})})},c.prototype.scan=function(t,e){var n=this;return new c(function(i){var r=t;i.$dispose=n.subscribe(function(t){r=e(r,t),i(r)})})},c.prototype.merge=function(t){return function(){var t=arguments;return new c(function(e){for(var n=[],i=t.length-1;i>=0;i--)n.push(t[i].subscribe(function(){e.apply(null,arguments)}));e.$dispose=function(){for(var t=n.length-1;t>=0;t--)n[t]&&n[t]()}})}(this,t)},c.prototype.throttle=function(t){var e,n,i=this;return new c(function(r){var o=i.subscribe(function(){var i=+new Date,o=arguments;e&&i<e+t?(clearTimeout(n),n=setTimeout(function(){e=i,r.apply(null,o)},t)):(e=i,r.apply(null,o))});r.$dispose=function(){clearTimeout(n),o&&o()}})},r=[n(15)],void 0===(o="function"==typeof(i="angular-inview")?i.apply(e,r):i)||(t.exports=o)}(),org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.assetbrowser",ver:"1.2",shortId:"assetbrowser",author:"Sunil A S",title:"Asset Browser",description:"",publishedDate:"",editor:{main:"editor/plugin.js",dependencies:[{type:"js",src:"editor/recorder/wave/wavesurfer.min.js"},{type:"js",src:"editor/recorder/angular-audio-recorder.js"},{type:"js",src:"editor/libs/angular-inview.js"}],views:[{template:"./assetBrowser.html",controller:"./assetbrowserapp.js"}]}},org.ekstep.contenteditor.basePlugin.extend({type:"assetbrowser",initData:void 0,cb:void 0,initialize:function(){var t=this;org.ekstep.contenteditor.api.addEventListener(this.manifest.id+":show",this.initPreview,this),org.ekstep.contenteditor.api.resolvePluginResource(t.manifest.id,t.manifest.ver,"editor/assetBrowser.html"),org.ekstep.contenteditor.api.resolvePluginResource(t.manifest.id,t.manifest.ver,"editor/assetbrowserapp.js"),org.ekstep.contenteditor.api.getService("popup").loadNgModules(n(25),n(26),!0)},initPreview:function(t,e){var n=this;this.cb=e.callback,this.mediaType=e.type,this.search_filter=e.search_filter,org.ekstep.contenteditor.api.getService("popup").open({template:"partials/assetbrowser.html",controller:"browsercontroller",controllerAs:"$ctrl",resolve:{instance:function(){return n}},showClose:!1,className:"ngdialog-theme-plain"})},getAsset:function(t,e,n,i,r){var o,a;o={request:{filters:{mediaType:e,contentType:"Asset",compatibilityLevel:{min:1,max:2},status:new Array("Live","Review","Draft")},limit:50,offset:i}},!org.ekstep.contenteditor.api._.isUndefined(t)&&(o.request.query=t),org.ekstep.contenteditor.api._.isUndefined(n)?(o.request.filters.license="Creative Commons Attribution (CC BY)",a=org.ekstep.contenteditor.api._.omit(this.search_filter,["mediaType","license","limit"])):(o.request.filters.createdBy=n,a=org.ekstep.contenteditor.api._.omit(this.search_filter,["mediaType","limit","createdBy"])),org.ekstep.contenteditor.api._.merge(o.request.filters,a),org.ekstep.contenteditor.api.getService(ServiceConstants.SEARCH_SERVICE),ecEditor.getService("search").search(o,function(t,e){t||"OK"!=e.data.responseCode?r(t,null):r(null,e)})},showAssetBrowser:function(t,e){},fileValidation:function(t,e,n){if(window.File&&window.FileList&&window.Blob){var i=org.ekstep.contenteditor.api.jQuery("#"+t)[0].files[0].size,r=org.ekstep.contenteditor.api.jQuery("#"+t)[0].files[0].type;return e<i?(alert("File size is higher than the allowed size!"),!1):!r||-1!=org.ekstep.contenteditor.api.jQuery.inArray(r,n)||(alert("File type is not allowed!"),!1)}return!0}}))},function(t,e){t.exports='<script type="text/ng-template" ng-app="assetbrowserapp" ng-controller="browsercontroller as $ctrl" id="partials/assetbrowser.html">\n   <style>\n   audio::-internal-media-controls-download-button {\n      display:none !important;\n   }\n\n   audio::-webkit-media-controls-enclosure {\n      overflow:hidden !important;\n   }\n\n   audio::-webkit-media-controls-panel {\n      width: calc(100% + 30px) !important; /* Adjust as needed */\n   }\n\n   .assetbrowser {\n      position: inherit !important;\n      top: 0 !important;\n   }\n\n   .ngdialog-content {\n      top: 5% !important;\n      width: 100% !important;\n      position: absolute !important;\n      background: none !important;\n   }\n\n   .assetbrowser .faloading {\n       position: fixed;\n       top: 250px;\n       left: 360px;\n   }\n\n   .assetbrowser .audioOverlay {\n       background-color: hsl(200, 100%, 43%);\n       opacity: 0.7;\n       position: absolute;\n       top: 0;\n       left: 0;\n       right: 0;\n       bottom: 0;\n       text-align: center;\n   }\n\n   .assetbrowser_searchBox {\n       width: 100%;\n   }\n\n   .assetbrowser .asset_item_container {\n       overflow-y: auto;\n       overflow-x: hidden;\n       min-height: 300px !important;\n       max-height: 300px !important;\n       padding:5px;\n   }\n\n   .assetbrowser .ui.modal.ui.form {\n   \tmin-height: 550px !important;\n   }\n\n   .assetbrowser .ui.modal>.content {\n   \tmin-height: 430px !important;*/\n   \tmax-height: 430px !important;*/\n   }\n\n   .assetbrowser .asset_thumbnail {\n       position: absolute;\n       top: 0;\n       bottom: 0;\n       left: 0;\n       right: 0;\n       margin: auto !important;\n   }\n\n   .assetbrowser .ui.image{\n   \tposition: relative;\n       overflow: hidden;\n       padding-bottom: 100%\n   }\n\n   .assetbrowser .templatecard{\n      border: 1px dotted #ccc;\n       cursor: pointer;\n       position: relative;\n       margin-top: 15px;\n    }\n\n   .assetbrowser .ui.floating.label {\n       top: 0;\n   \tpadding: 6px;\n       right: 0;\n       left: unset;\n   }\n\n    .assetbrowser .ui.images .image, .ui.images img, .ui.images svg {\n       margin: auto !important;\n       width:121px !important;\n   }\n\n   .assetbrowser .uiAction {\n   \tbackground: #F9FAFB;\n   \tpadding: 1rem;\n   \tborder-top: 1px solid rgba(34,36,38,.15);\n   }\n\n   .assetbrowser .audioitem {\n       border: 1px dotted #ccc;\n       position: relative !important;\n       cursor: pointer;\n   }\n\n   .assetbrowser .audioitem audio{\n   \twidth: 100%;\n   }\n\n   .assetbrowser .audio-tag {\n   \toverflow: hidden;\n       padding-left: 5px;\n   }\n\n   i.play.icon:before, i.pause.icon:before{\n   \tbackground: white !important;\n   }\n\n   .assetbrowser .cursor-pointer{\n   \tcursor: pointer;\n   }\n\n   .assetbrowser .licenseMessage {\n   \tfont-size: 11px;\n   }\n\n   .assetbrowser .checkContainer {\n       /*margin-top: 12px;*/\n       position: relative;\n   }\n\n   .assetbrowser .checkIcon{\n       position: absolute;\n       left: 0;\n       right: 0;\n       text-align: center;\n       margin-left: auto;\n       margin-right: auto;\n       color: white;\n       top: 10px;\n   }\n\n   .assetbrowser .center-aligned{\n   \ttext-align: center;\n   }\n\n   .assetbrowser .playContainer{\n   \tposition: absolute;top: 52px;left: 0;right: 0;z-index: 1000;margin-left: auto;margin-right: auto;\n   }\n\n   .assetbrowser .recordContainer{\n   \tmin-height: 210px;\n   }\n\n   .assetbrowser .waveContainer{\n   \tmax-width: 500px; position: relative;\n   }\n\n   #assetfile{\n   \tborder-color: darkgrey!important;\n   \tborder: dashed!important;\n   \tpadding: 23px;\n   }\n\n   .assetbrowser .is-dragover{\n   \tbackground: darkgray!important;\n   }\n   .load-more-assets-spinner {\n    margin: 100px auto 0;\n    width: 70px;\n    text-align: center;\n  }\n\n  .load-more-assets-spinner > div {\n    width: 18px;\n    height: 18px;\n    background-color: #333;\n\n    border-radius: 100%;\n    display: inline-block;\n    -webkit-animation: sk-bouncedelay 1.4s infinite ease-in-out both;\n    animation: sk-bouncedelay 1.4s infinite ease-in-out both;\n  }\n\n  .load-more-assets-spinner .bounce1 {\n    -webkit-animation-delay: -0.32s;\n    animation-delay: -0.32s;\n  }\n\n  .load-more-assets-spinner .bounce2 {\n    -webkit-animation-delay: -0.16s;\n    animation-delay: -0.16s;\n  }\n\n  @-webkit-keyframes sk-bouncedelay {\n    0%, 80%, 100% { -webkit-transform: scale(0) }\n    40% { -webkit-transform: scale(1.0) }\n  }\n\n  @keyframes sk-bouncedelay {\n    0%, 80%, 100% {\n      -webkit-transform: scale(0);\n      transform: scale(0);\n    } 40% {\n      -webkit-transform: scale(1.0);\n      transform: scale(1.0);\n    }\n  }\n  .load-more-assets-warning-msg img{\n    padding:0px!important;\n  }\n  .load-more-assets-warning-msg p{\n    text-align:center;\n  }\n   </style>\n\n   <div class="assetbrowser ui modal active ui form">\n   \t<div class="header" ng-switch="$ctrl.plugin">\n   \t\t<div class="ui two column grid">\n   \t\t\t<div class="row">\n   \t\t\t  \t<div class="column">\n   \t\t\t\t\t<span ng-hide="$ctrl.uploadView">\n   \t\t\t\t\t\t<span ng-switch-when="image"><i class="image icon"></i> Select Image</span>\n   \t\t\t\t\t\t<span ng-switch-when="audio"><i class="file audio outline icon"></i> Select Audio</span>\n   \t\t\t\t\t</span>\n   \t\t\t\t\t<span ng-if="$ctrl.uploadView && $ctrl.plugin == \'image\'"><i class="upload icon"></i> Upload and use</span>\n   \t\t\t\t\t<span ng-if="$ctrl.uploadView && $ctrl.plugin == \'audio\'"><i class="upload icon"></i> Upload/ Record</span>\n   \t\t\t\t</div>\n   \t\t\t\t<div class="column right aligned">\n   \t\t\t\t\t<i class="close link icon" ng-click="closePopup()"></i>\n   \t\t\t\t</div>\n   \t\t\t</div>\n   \t\t</div>\n   \t</div>\n   \t<div class="content" ng-hide="$ctrl.uploadView">\n   \t\t<div class="ui pointing secondary menu">\n   \t\t    <a ng-if="$ctrl.plugin == \'image\'" id="myAssetsTab" class="active item" data-tab="first" ng-click="$ctrl.myAssetTab(); $ctrl.generateTelemetry({type: \'click\', subtype: \'select\', target: \'myImageTab\'})">My images</a>\n   \t\t    <a id="allImagesTab" ng-if="$ctrl.plugin == \'image\'" class="item" data-tab="second" ng-click="$ctrl.allAssetTab(); $ctrl.generateTelemetry({type: \'click\', subtype: \'select\', target: \'allImageTab\'})">All image</a>\n   \t\t    <a ng-if="$ctrl.plugin == \'audio\'" class="active item" data-tab="first" ng-click="$ctrl.myAssetTab(); $ctrl.generateTelemetry({type: \'click\', subtype: \'select\', target: \'myAudioTab\'})">My audio</a>\n   \t\t\t<a id="allAudioTab" ng-if="$ctrl.plugin == \'audio\'" class="item" data-tab="second" ng-click="$ctrl.allAssetTab(); $ctrl.generateTelemetry({type: \'click\', subtype: \'select\', target: \'allAudioTab\'})">All audio</a>\n   \t\t</div>\n   \t\t<div class="uploadingAsset ui tab active" data-tab="first" >\n   \t\t\t<div class="content" ng-if="$ctrl.plugin == \'image\'">\n   \t\t\t\t<div class="ui big loader {{$ctrl.loading}}"></div>\n   \t\t\t\t<div class="column">\n   \t\t\t\t\t<div class="column">\n   \t\t\t\t\t\t<div class="ui icon input assetbrowser_searchBox">\n   \t\t\t\t\t\t\t<input id="searchMyImageAssets" ng-model="$ctrl.query" placeholder="Search Image..." ng-keypress="$event.keyCode === 13 ? $ctrl.search() : null" type="text" />\n   \t\t\t\t\t\t\t<i class="circular search link icon inverted" ng-click="$ctrl.search(); $ctrl.generateTelemetry({type: \'click\', subtype: \'search\', target: \'searchAsset\'})"></i>\n   \t\t\t\t\t\t</div>\n   \t\t\t\t\t</div>\n   \t\t\t\t</div>\n   \t\t\t\t<div class="clearfix">&nbsp;</div>\n   \t\t\t\t<div class="asset_item_container" id="my-image-tab">\n   \t\t\t\t\t<div class="ui grid">\n   \t\t\t\t\t\t<div ng-show="$ctrl.imageList.length > 0" ng-repeat="image in $ctrl.imageList track by $index" in-view="lineInView($index, $inview, image, \'AssetsBrowser\', $index)" in-view-options="{ throttle: 1000 }">\n   \t\t\t\t\t\t\t<div class="column templatebrowser_thumbnail">\n   \t\t\t\t\t\t\t\t<div class="ui small images templatecard infopopover" id="assetbrowser-{{$index}}" ng-click="$ctrl.ImageSource($event, $index); $ctrl.selected_images[$index]={selected: !$ctrl.selected_images[$index].selected}; $ctrl.generateTelemetry({type: \'click\', subtype: \'select\', target: \'selectImage\'})" data-html="<b>{{image.name}}</b> <br/> License: {{image.license}}">\n    \t\t\t\t\t\t\t\t\t<a class="item" ng-show="$ctrl.selected_images[$index].selected">\n   \t\t\t\t\t\t\t\t\t\t<div class="floating ui blue label">\n   \t\t\t\t\t\t\t\t\t\t\t<i class="ui icon check" aria-hidden="true"></i>\n   \t\t\t\t\t\t\t\t\t\t</div>\n   \t\t\t\t\t\t\t\t\t</a>\n   \t\t\t\t\t\t\t\t\t<div class="ui image">\n   \t\t\t\t\t\t\t\t\t\t<img class="asset_thumbnail" data_id="{{image.identifier}}" ng-src="{{image.downloadUrl}}" />\n   \t\t\t\t\t\t\t\t\t</div>\n   \t\t\t\t\t\t\t\t</div>\n   \t\t\t\t\t\t\t</div>\n   \t\t\t\t\t\t</div>\n   \t\t\t\t\t\t<div class="twelve wide column" ng-show="$ctrl.imageList.length == 0">\n   \t\t\t\t\t\t\t<span>No result found. <a href="#" onclick="$(\'#allImagesTab\').trigger(\'click\'); $ctrl.generateTelemetry({type: \'click\', subtype: \'select\', target: \'noResultFoundSwitchToAllAssetTab\'})">Click here</a> to search in All images</span>\n   \t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="twelve wide column">\n\t\t\t\t\t\t\t<div class="load-more-assets-spinner" ng-show="$ctrl.loadMoreAssetSpinner">\n\t\t\t\t\t\t\t  <div class="bounce1"></div>\n\t\t\t\t\t\t\t  <div class="bounce2"></div>\n\t\t\t\t\t\t\t  <div class="bounce3"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="load-more-assets-warning-msg" ng-show="$ctrl.showLoadMoreWarningMsg">\n\t\t\t\t\t\t\t  <img class="ui centered tiny image" ng-src="{{$ctrl.contentNotFoundImage}}">\n\t\t\t\t\t\t\t  <p>Didn’t find what you were looking for? Try <a href="#" ng-click="$ctrl.searchTextClicked();">search</a> for something more specific\n\t\t\t\t\t\t\t  </p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n   \t\t\t\t\t</div>\n   \t\t\t\t</div>\n   \t\t\t</div>\n   \t\t\t<div class="content" ng-if="$ctrl.plugin ==\'audio\'">\n   \t\t\t\t<div class="ui big loader {{$ctrl.loading}}"></div>\n   \t\t\t\t<div class="ui grid">\n            <div class="ten wide column">\n              <div class="ui icon input assetbrowser_searchBox">\n                <input id="searchMyAudioAssets" ng-model="$ctrl.query" placeholder="Search Audio..." ng-keypress="$event.keyCode === 13 ? $ctrl.search() : null" type="text" />\n                <i class="circular search link icon inverted" ng-click="$ctrl.search(); $ctrl.generateTelemetry({type: \'click\', subtype: \'search\', target: \'searchAudioAsset\'})"></i>\n              </div>\n            </div>\n   \t\t\t\t\t<div class="two wide right aligned column">\n   \t\t\t\t\t\t<div id="audioDropDown" class="ui floating labeled icon dropdown button audio">\n   \t\t\t\t\t\t  <i class="filter icon"></i>\n   \t\t\t\t\t\t  <span class="text">All</span>\n   \t\t\t\t\t\t  <div class="menu">\n   \t\t\t\t\t\t\t<div class="item" data-value=\'all\'>\n   \t\t\t\t\t\t\t  <span class="text">All</span>\n   \t\t\t\t\t\t\t</div>\n   \t\t\t\t\t\t\t<div class="divider"></div>\n   \t\t\t\t\t\t\t<div class="item"data-value="audio">\n   \t\t\t\t\t\t\t  <span class="text">Audio</span>\n   \t\t\t\t\t\t\t</div>\n   \t\t\t\t\t\t\t<div class="item" data-value="voice">\n   \t\t\t\t\t\t\t  <span class="text">Voice</span>\n   \t\t\t\t\t\t\t</div>\n   \t\t\t\t\t\t  </div>\n   \t\t\t\t\t\t</div>\n   \t\t\t\t\t</div>\n   \t\t\t\t</div>\n   \t\t\t\t<div class="clearfix">&nbsp;</div>\n   \t\t\t\t<div class="asset_item_container" id="my-audio-tab">\n   \t\t\t\t\t<div class="ui grid">\n   \t\t\t\t\t\t<div class="three wide column" ng-show="$ctrl.audioList.length > 0" ng-repeat="audio in $ctrl.audioList track by $index" in-view="lineInView($index, $inview, audio, \'AssetsBrowser\', $index)" in-view-options="{ throttle: 1000 }">\n   \t\t\t\t\t\t\t<div class="audioitem infopopover" ng-click="$ctrl.AudioSource(audio, $index); $ctrl.selected_audios[$index]={selected: !$ctrl.selected_audios[$index].selected}; $ctrl.generateTelemetry({type: \'click\', subtype: \'select\', target: \'selectAudioAsset\'});" id="{{audio.identifier}}" src="{{audio.downloadUrl}}" data-html="<b>{{audio.name}}</b> <br/> License: {{audio.license}}">\n   \t\t\t\t\t\t\t\t<audio controls id="audio-{{$index}}" preload="none" ng-src="{{audio.downloadUrl}}" width="120" height="120"></audio>\n   \t\t\t\t\t\t\t\t<div class="audio-tag">{{audio.name}}</div>\n   \t\t\t\t\t\t\t\t<div class="audioOverlay" ng-show="$ctrl.selected_audios[$index].selected">\n   \t\t\t\t\t\t\t\t\t<div class="checkContainer">\n   \t\t\t\t\t\t\t\t\t\t<i class="ui icon check circle big checkIcon" aria-hidden="true"></i>\n   \t\t\t\t\t\t\t\t\t</div>\n   \t\t\t\t\t\t\t\t</div>\n   \t\t\t\t\t\t\t</div>\n   \t\t\t\t\t\t</div>\n   \t\t\t\t\t\t<div class="twelve wide column" ng-show="$ctrl.audioList.length == 0">\n   \t\t\t\t\t\t\t<span>No result found. <a href="#" onclick="$(\'#allAudioTab\').trigger(\'click\'); $ctrl.generateTelemetry({type: \'click\', subtype: \'select\', target: \'noResultFoundSwitchToAllAudioTab\'});">Click here</a> to search in All audios</span>\n   \t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="twelve wide column">\n\t\t\t\t\t\t\t<div class="load-more-assets-spinner" ng-show="$ctrl.loadMoreAssetSpinner">\n\t\t\t\t\t\t\t  <div class="bounce1"></div>\n\t\t\t\t\t\t\t  <div class="bounce2"></div>\n\t\t\t\t\t\t\t  <div class="bounce3"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="load-more-assets-warning-msg" ng-show="$ctrl.showLoadMoreWarningMsg">\n\t\t\t\t\t\t\t  <img class="ui centered tiny image" ng-src="{{$ctrl.contentNotFoundImage}}">\n\t\t\t\t\t\t\t  <p>Didn’t find what you were looking for? Try <a href="#" ng-click="$ctrl.searchTextClicked();">search</a> for something more specific\n\t\t\t\t\t\t\t  </p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n   \t\t\t\t\t</div>\n   \t\t\t\t</div>\n   \t\t\t</div>\n   \t\t</div>\n   \t\t<div class="ui tab" data-tab="second" >\n   \t\t\t<div class="content" ng-if="$ctrl.plugin == \'image\'">\n   \t\t\t\t<div class="ui big loader {{$ctrl.loading}}"></div>\n   \t\t\t\t<div class="column">\n   \t\t\t\t\t<div class="column">\n   \t\t\t\t\t\t<div class="ui icon input assetbrowser_searchBox">\n   \t\t\t\t\t\t\t<input id="searchAllImageAssets" ng-model="$ctrl.query" placeholder="Search Image..." ng-keypress="$event.keyCode === 13 ? $ctrl.search() : null" type="text" />\n   \t\t\t\t\t\t\t<i class="circular search link icon inverted" ng-click="$ctrl.search(); $ctrl.generateTelemetry({type: \'click\', subtype: \'search\', target: \'searchImageAsset\'});"></i>\n   \t\t\t\t\t\t</div>\n   \t\t\t\t\t</div>\n   \t\t\t\t</div>\n   \t\t\t\t<div class="clearfix">&nbsp;</div>\n   \t\t\t\t<div class="ui grid asset_item_container" id="all-image-tab">\n   \t\t\t\t\t<div ng-show="$ctrl.imageList.length > 0" ng-repeat="image in $ctrl.imageList track by $index" in-view="lineInView($index, $inview, image, \'AssetsBrowser\', $index)" in-view-options="{ throttle: 1000 }">\n   \t\t\t\t\t\t<div class="column templatebrowser_thumbnail">\n   \t\t\t\t\t\t\t<div class="ui small images templatecard infopopover" id="assetbrowser-{{$index}}" ng-click="$ctrl.ImageSource($event, $index); $ctrl.selected_images[$index]={selected: !$ctrl.selected_images[$index].selected}; $ctrl.generateTelemetry({type: \'click\', subtype: \'select\', target: \'selectImageAsset\'});" data-html="<b>{{image.name}}</b> <br/> License:{{image.license}} ">\n   \t\t\t\t\t\t\t\t<a class="item" ng-show="$ctrl.selected_images[$index].selected">\n   \t\t\t\t\t\t\t\t\t<div class="floating ui blue label">\n   \t\t\t\t\t\t\t\t\t\t<span><i class="ui icon check" aria-hidden="true"></i></span>\n   \t\t\t\t\t\t\t\t\t</div>\n   \t\t\t\t\t\t\t\t</a>\n   \t\t\t\t\t\t\t\t<div class="ui image">\n   \t\t\t\t\t\t\t\t\t<img class="asset_thumbnail" data_id="{{image.identifier}}" ng-src="{{image.downloadUrl}}">\n   \t\t\t\t\t\t\t\t</div>\n   \t\t\t\t\t\t\t</div>\n   \t\t\t\t\t\t</div>\n   \t\t\t\t\t</div>\n\n   \t\t\t\t\t<div class="twelve wide column" ng-show="$ctrl.imageList.length ==0">\n   \t\t\t\t\t\t<span>No result found. </span>\n   \t\t\t\t\t</div>\n\t\t\t\t\t<div class="twelve wide column">\n\t\t\t\t\t  <div class="load-more-assets-spinner" ng-show="$ctrl.loadMoreAssetSpinner">\n\t\t\t\t\t\t<div class="bounce1"></div>\n\t\t\t\t\t\t<div class="bounce2"></div>\n\t\t\t\t\t\t<div class="bounce3"></div>\n\t\t\t\t\t  </div>\n\t\t\t\t\t  <div class="load-more-assets-warning-msg" ng-show="$ctrl.showLoadMoreWarningMsg">\n\t\t\t\t\t\t<img class="ui centered tiny image" ng-src="{{$ctrl.contentNotFoundImage}}">\n\t\t\t\t\t\t<p>Didn’t find what you were looking for? Try <a href="#" ng-click="$ctrl.searchTextClicked();">search</a> for something more specific\n\t\t\t\t\t\t</p>\n\t\t\t\t\t  </div>\n\t\t\t\t\t</div>\n   \t\t\t\t</div>\n   \t\t\t</div>\n   \t\t\t<div class="content" ng-if="$ctrl.plugin ==\'audio\'">\n   \t\t\t\t<div class="ui big loader {{$ctrl.loading}}"></div>\n   \t\t\t\t<div class="ui grid">\n   \t\t\t\t\t<div class="column">\n   \t\t\t\t\t\t<div class="ui icon input assetbrowser_searchBox">\n   \t\t\t\t\t\t\t<input id="searchAllAudioAssets" ng-model="$ctrl.query" placeholder="Search Audio..." ng-keypress="$event.keyCode === 13 ? $ctrl.search() : null" type="text" />\n   \t\t\t\t\t\t\t<i class="circular search link icon inverted" ng-click="$ctrl.search(); $ctrl.generateTelemetry({type: \'click\', subtype: \'search\', target: \'searchAudioAsset\'});"></i>\n   \t\t\t\t\t\t</div>\n   \t\t\t\t\t</div>\n   \t\t\t\t</div>\n   \t\t\t\t<div class="clearfix">&nbsp;</div>\n   \t\t\t\t<div class="asset_item_container" id="all-audio-tab">\n   \t\t\t\t\t<div class="ui grid">\n   \t\t\t\t\t\t<div class="three wide column" ng-show="$ctrl.audioList.length > 0" ng-repeat="audio in $ctrl.audioList track by $index" in-view="lineInView($index, $inview, audio, \'AssetsBrowser\', $index)" in-view-options="{ throttle: 1000 }">\n   \t\t\t\t\t\t\t<div class="audioitem infopopover" ng-click="$ctrl.AudioSource(audio, $index); $ctrl.selected_audios[$index]={selected: !$ctrl.selected_audios[$index].selected}; $ctrl.generateTelemetry({type: \'click\', subtype: \'select\', target: \'selectAudioAsset\'});" id="{{audio.identifier}}" src="{{audio.downloadUrl}}" data-html="<b>{{audio.name}}</b> <br/> License: {{audio.license}}">\n   \t\t\t\t\t\t\t\t<audio controls id="audio-{{$index}}" preload="none" ng-src="{{audio.downloadUrl}}" width="100" height="120"></audio>\n   \t\t\t\t\t\t\t\t<div class="audio-tag">{{audio.name}}</div>\n   \t\t\t\t\t\t\t\t<span class="audioOverlay" ng-show="$ctrl.selected_audios[$index].selected">\n   \t\t\t\t\t\t\t\t\t<div class="checkContainer">\n   \t\t\t\t\t\t\t\t\t\t<i class="ui icon check circle big checkIcon" aria-hidden="true"></i>\n   \t\t\t\t\t\t\t\t\t</div>\n   \t\t\t\t\t\t\t\t</span>\n   \t\t\t\t\t\t\t</div>\n   \t\t\t\t\t\t</div>\n   \t\t\t\t\t\t<div class="twelve wide column" ng-show="$ctrl.audioList.length == 0">\n   \t\t\t\t\t\t\t<span>No result found. </span>\n   \t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="twelve wide column">\n\t\t\t\t\t\t\t<div class="load-more-assets-spinner" ng-show="$ctrl.loadMoreAssetSpinner">\n\t\t\t\t\t\t\t  <div class="bounce1"></div>\n\t\t\t\t\t\t\t  <div class="bounce2"></div>\n\t\t\t\t\t\t\t  <div class="bounce3"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="load-more-assets-warning-msg" ng-show="$ctrl.showLoadMoreWarningMsg">\n\t\t\t\t\t\t\t  <img class="ui centered tiny image" ng-src="{{$ctrl.contentNotFoundImage}}">\n\t\t\t\t\t\t\t  <p>Didn’t find what you were looking for? Try <a href="#" ng-click="$ctrl.searchTextClicked();">search</a> for something more specific\n\t\t\t\t\t\t\t  </p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n   \t\t\t\t\t</div>\n   \t\t\t\t</div>\n   \t\t\t</div>\n   \t\t</div>\n      </div>\n      <div class="actions" ng-hide="$ctrl.uploadView" ng-switch="$ctrl.buttonToShow">\n   \t\t<div class="ui grid">\n   \t\t\t<div class="three wide column left aligned">\n   \t\t\t\t<button class="ui blue button" ng-click="$ctrl.switchToUpload(); $ctrl.generateTelemetry({type: \'click\', subtype: \'open\', target: \'openUpladForm\'})" type="button">\n   \t\t\t\t{{$ctrl.plugin==\'image\' ? \'Upload and use\': \'Upload/ Record\'}}</button>\n   \t\t\t</div>\n   \t\t\t<div class="nine wide column right aligned">\n   \t\t\t\t<div class="ui buttons" style="margin:0;">\n   \t\t\t\t\t<button id="closePopUp" class="ui orange button" ng-click="$ctrl.cancel(); $ctrl.generateTelemetry({type: \'click\', subtype: \'close\', target: \'closeAssetBrowser\'})" type="button">Cancel</button>\n   \t\t\t\t\t<div class="or"></div>\n   \t\t\t\t\t<button ng-switch-when="select" class="ui blue button" ng-disabled="$ctrl.selectBtnDisable" ng-click="$ctrl.select(); $ctrl.generateTelemetry({type: \'click\', subtype: \'select\', target: \'selectAndUseAsset\'})" type="button">Select</button>\n   \t\t\t\t</div>\n   \t\t\t</div>\n   \t\t</div>\n   \t</div>\n   \t<div class="content" ng-show="$ctrl.uploadView">\n   \t\t<div class="ui two column divided grid">\n   \t\t\t<div class="row ui form">\n   \t\t\t\t<div class="column">\n   \t\t\t\t\t<div class="ui two column divided grid" ng-if="$ctrl.plugin ==\'audio\'" ng-hide="$ctrl.upload || $ctrl.record">\n   \t\t\t\t\t  \t <div class="row center aligned">\n   \t\t\t\t\t\t  \t<div class="column" ng-click="$ctrl.upload = true; $ctrl.record=false; $ctrl.uploadButton(); $ctrl.generateTelemetry({type: \'click\', subtype: \'upload\', target: \'uploadAsset\'});">\n   \t\t\t\t\t\t  \t\t<p><i class="huge upload icon"></i></p>\n   \t\t\t\t\t\t  \t\tUPLOAD\n   \t\t\t\t\t\t  \t</div>\n   \t\t\t\t\t\t  \t<div class="ui vertical divider"></div>\n   \t\t\t\t\t\t\t<div class="column" ng-click="$ctrl.upload = false; $ctrl.record=true; $ctrl.uploadButton(); $ctrl.generateTelemetry({type: \'click\', subtype: \'select\', target: \'recordAudio\'});">\n   \t\t\t\t\t\t\t\t<p><i class="huge unmute icon"></i></p>\n   \t\t\t\t\t\t\t\tRECORD\n   \t\t\t\t\t\t  \t</div>\n   \t\t\t\t\t  \t</div>\n   \t\t\t\t\t</div>\n   \t\t\t\t\t<div ng-show="$ctrl.record">\n   \t\t\t\t\t\t<ng-audio-recorder id="mainAudio" audio-model="recorded" show-player="false" time-limit="timeLimit"  on-record-start="$ctrl.onRecordStart()" on-conversion-complete="$ctrl.onConversionComplete();">\n   \t\t\t\t\t\t    <div ng-if="recorder.isAvailable">\n   \t\t\t\t\t\t        <div ng-if="recorder.status.isDenied === true" class="ui negative message">\n   \t\t\t\t\t\t            You need to grant permission for this application to use your microphone.\n   \t\t\t\t\t\t        </div>\n   \t\t\t\t\t\t\t\t<div class="center aligned recordContainer">\n   \t\t\t\t\t\t\t        <div class="waveContainer">\n   \t\t\t\t\t\t\t            <div ng-show="recorder.status.isConverting">\n   \t\t\t\t\t\t\t                Please wait while your recording is processed.\n   \t\t\t\t\t\t\t            </div>\n   \t\t\t\t\t\t\t            <div ng-show="recorder.isHtml5 && recorder.status.isRecording">\n   \t\t\t\t\t\t\t                <ng-audio-recorder-analyzer></ng-audio-recorder-analyzer>\n   \t\t\t\t\t\t\t            </div>\n   \t\t\t\t\t\t\t            <br/>\n   \t\t\t\t\t\t\t            <div ng-show="!recorder.status.isRecording && recorder.audioModel">\n   \t\t\t\t\t\t\t                <ng-audio-recorder-wave-view wave-color="#b1e8ff" bar-color="#31ADE0"></ng-audio-recorder-wave-view>\n   \t\t\t\t\t\t\t            </div>\n   \t\t\t\t\t\t\t        </div>\n\n   \t\t\t\t\t\t\t\t\t<div class="row playContainer">\n   \t\t\t\t\t\t\t\t\t\t<div class="twelve wide column center-aligned" ng-hide="recorder.status.isRecording || !recorder.audioModel">\n   \t\t\t\t\t\t\t\t\t\t\t<i class="ui icon circle {{recorder.status.isStopped || recorder.status.isPaused ? \'play\' : \'pause\'}} huge blue cursor-pointer"\n   \t\t\t\t\t\t\t\t\t\t\tng-click="recorder.status.isPlaying ? recorder.playbackPause() : recorder.playbackResume(); $ctrl.generateTelemetry({type: \'click\', subtype: \'play\', target: \'playPauseRecoredAudio\'});"></i>\n   \t\t\t\t\t\t\t\t\t\t</div>\n   \t\t\t\t\t\t\t\t\t</div>\n\n   \t\t\t\t\t\t\t\t\t<div class="cursor-pointer center aligned center-aligned" ng-hide="recorder.status.isRecording === false" ng-click="recorder.stopRecord(); $ctrl.generateTelemetry({type: \'click\', subtype: \'select\', target: \'stopRecording\'});"><i class="ui icon stop circle outline red big"></i>STOP</b>\n   \t\t\t\t\t\t\t\t\t</div>\n   \t\t\t\t\t\t\t\t\t<div class="ui grid">\n   \t\t\t\t\t\t\t\t\t\t<div class="row">\n   \t\t\t\t\t\t\t\t\t\t\t<div class="twelve center aligned  wide column" ng-hide="recorder.status.isRecording">\n   \t\t\t\t\t\t\t\t\t\t\t\t<div id="replaceRecord" class="cursor-pointer" ng-click="recorder.startRecord(); $ctrl.generateTelemetry({type: \'click\', subtype: \'select\', target: \'startRecording\'});">\n   \t\t\t\t\t\t\t\t\t\t\t\t\t<i class="ui icon selected radio huge blue"></i>\n   \t\t\t\t\t\t\t\t\t\t\t\t\t<p><b>START RECORDING</b></p>\n   \t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n   \t\t\t\t\t\t\t\t\t\t\t\t<div id="replaceRecordDiv" class="cursor-pointer hide" ng-click="recorder.startRecord(); $ctrl.generateTelemetry({type: \'click\', subtype: \'select\', target: \'replaceRecording\'});">\n   \t\t\t\t\t\t\t\t\t\t\t\t\t<i class="ui icon retweet"></i><b>REPLACE</b>\n   \t\t\t\t\t\t\t\t\t\t\t\t</div>\n   \t\t\t\t\t\t\t\t\t\t\t</div>\n   \t\t\t\t\t\t\t\t\t\t</div>\n   \t\t\t\t\t\t\t\t\t</div>\n   \t\t\t\t\t\t   \t\t</div>\n   \t\t\t\t\t\t    </div>\n\n   \t\t\t\t\t\t    <div ng-if="!recorder.isAvailable">\n   \t\t\t\t\t\t        Your browser does not support this feature natively, please use latest version of <a\n   \t\t\t\t\t\t            href="https://www.google.com/chrome/browser" target="_blank">Google Chrome</a> or <a\n   \t\t\t\t\t\t            href="https://www.mozilla.org/en-US/firefox/new/" target="_blank">Mozilla Firefox</a>. If you\'re on Safari or Internet Explorer, you can install <a href="https://get.adobe.com/flashplayer/">Adobe Flash</a> to\n   \t\t\t\t\t\t        use this feature.\n   \t\t\t\t\t\t    </div>\n   \t\t\t\t\t\t</ng-audio-recorder>\n\n   \t\t\t\t\t\t<div class="ui-grid" ng-show="$ctrl.file.infoShow">\n   \t\t\t\t\t\t\t<span>{{$ctrl.file.name}}</span> | <b id="fileSize"></b>\n   \t\t\t\t\t\t</div>\n\n   \t\t\t\t\t\t<div class="ui info message mini message">\n   \t\t\t\t\t\t\t<p>Maximum allowed file size: {{$ctrl.fileSize}}</p>\n   \t\t\t\t\t\t</div>\n   \t\t\t\t\t</div>\n   \t\t\t\t\t<div class="required field {{$ctrl.assetFileError}}" ng-if="$ctrl.upload" ng-hide="$ctrl.editMetaFlag">\n   \t\t\t\t\t\t<label for="assetfile" title="Enter asset caption">Choose or drag and drop your {{$ctrl.plugin}} here</label>\n   \t\t\t\t\t\t<input class="droppable cropit-image-input" id="assetfile" type="file" name="assetfile" accept="{{$ctrl.allowedMimeTypes.join(\', \')}}" data-validate="assetfile" />\n   \t\t\t\t\t\t<div ng-if="$ctrl.assetFileError == \'error\'" class="ui basic red pointing prompt label transition visible">Please select file</div>\n   \t\t\t\t\t</div>\n   \t\t\t\t\t<div class="ui info message mini message" ng-if="$ctrl.upload" ng-hide="$ctrl.editMetaFlag">\n   \t\t\t\t\t\t<p>Allowed file types are: {{$ctrl.fileTypes}}</p>\n   \t\t\t\t\t\t<p>Maximum allowed file size: {{$ctrl.fileSize}}</p>\n   \t\t\t\t\t</div>\n   \t\t\t\t\t<div ng-show="$ctrl.editMetaFlag" class="field">\n   \t\t\t\t\t\t<img ng-src="{{$ctrl.selectedImgSrc}}" height="140px"/>\n   \t\t\t\t\t</div>\n\n   \t\t\t\t\t<div class="clearfix">&nbsp;</div>\n   \t\t\t\t\t<div class="grouped required fields">\n   \t\t\t\t\t\t<label for="ccByContribution" >Copyright & License:</label>\n   \t\t\t\t\t\t<p class="licenseMessage">I understand and confirm that all resources and assets created through the content editor or uploaded on the platform shall be available for free and public use without limitations on the platform (web portal, applications and any other end user interface that the platform would enable) and will be licensed under terms & conditions and policy guidelines of the platform.</p>\n   \t\t\t\t\t\t<div class="field">\n   \t\t\t\t\t\t\t<div class="ui radio checkbox">\n   \t\t\t\t\t\t\t\t<input id="ccByContribution1" name="ccByContribution" type="radio" ng-click="$ctrl.setPublic()" value="Creative Commons Attribution (CC BY)">\n   \t\t\t\t\t\t\t\t<label for="ccByContribution1" ng-click="$ctrl.setPublic(); $ctrl.generateTelemetry({type: \'click\', subtype: \'select\', target: \'selectCCBYproperty\'});">Yes, make it available to everyone</label>\n   \t\t\t\t\t\t\t</div>\n   \t\t\t\t\t\t</div>\n   \t\t\t\t\t\t<div class="field">\n   \t\t\t\t\t\t\t<div class="ui radio checkbox">\n   \t\t\t\t\t\t\t\t<input id="ccByContribution2" name="ccByContribution" type="radio" ng-click="$ctrl.setPrivate()" value="">\n   \t\t\t\t\t\t\t\t<label for="ccByContribution2"  ng-click="$ctrl.setPrivate(); $ctrl.generateTelemetry({type: \'click\', subtype: \'select\', target: \'unselectCCBYproperty\'});">No, don\'t share with anyone</label>\n   \t\t\t\t\t\t\t</div>\n   \t\t\t\t\t\t</div>\n   \t\t\t\t\t</div>\n   \t\t\t\t</div>\n   \t\t\t\t<div class="column" id="hideShowFields">\n   \t\t\t\t\t<div class="ui info mini icon message" ng-hide="$ctrl.showDragDropMsg">\n   \t\t\t\t\t  <i class="info circle icon"></i>\n   \t\t\t\t\t  <div class="content">\n   \t\t\t\t\t\t<div class="header">\n   \t\t\t\t\t\t\tDrop or choose file to upload before entering the details\n   \t\t\t\t\t\t</div>\n   \t\t\t\t\t  </div>\n   \t\t\t\t\t</div>\n   \t\t\t\t\t<div class="required field {{$ctrl.assetNameError}}">\n   \t\t\t\t\t\t<label for="assetName" title="Enter asset caption">Asset Caption</label>\n   \t\t\t\t\t\t<input id="assetName" type="text" name="assetName" ng-model="$ctrl.assetMeta.name" placeholder="Enter asset caption" data-validate="assetName" />\n   \t\t\t\t\t\t<div ng-if="$ctrl.assetNameError == \'error\'" class="ui basic red pointing prompt label transition visible">Please enter asset caption</div>\n   \t\t\t\t\t</div>\n\n   \t\t\t\t\t<div class="field">\n   \t\t\t\t\t\t<label for="keywords" title="Tags">Tags</label>\n   \t\t\t\t\t\t<input id="keywords" type="text"  name="keywords" ng-model="$ctrl.keywordsText" data-validate="keywords">\n   \t\t\t\t\t </div>\n\n   \t\t\t\t\t<div class="field" ng-hide="$ctrl.hideField">\n   \t\t\t\t\t\t<label for="language" title="Choose Language">Language</label>\n   \t\t\t\t\t\t<select id="language" class="" ng-model="$ctrl.languageText" {{$ctrl.asset.requiredField}} name="language" ng-options="lang for lang in $ctrl.asset.language" data-validate="language" >\n   \t\t\t\t\t\t\t<option value="">All</option>\n   \t\t\t\t\t\t</select>\n   \t\t\t\t\t</div>\n\n   \t\t\t\t\t<div ng-if="$ctrl.plugin == \'audio\'">\n   \t\t\t\t\t\t<div class="field" ng-hide="$ctrl.hideField">\n   \t\t\t\t\t\t\t<label for="audioType" title="Choose Audio Type">Audio Type</label>\n   \t\t\t\t\t\t\t<select id="audioType" class="" ng-model="$ctrl.audioType" ng-options="i.value as i.label for i in $ctrl.voiceOption">\n   \t\t\t\t\t\t\t</select>\n   \t\t\t\t\t\t</div>\n   \t\t\t\t\t\t<div class="clearfix"></div>\n   \t\t\t\t\t</div>\n\n   \t\t\t\t\t<div class="{{$ctrl.asset.requiredField}} field removeError" ng-hide="$ctrl.hideField">\n   \t\t\t\t\t\t<label for="creator" title="Creator">Creator</label>\n   \t\t\t\t\t\t<input id="creator" type="text" ng-model="$ctrl.assetMeta.creator" {{$ctrl.asset.requiredField}} name="creator" placeholder="Enter Name" data-validate="creator" >\n   \t\t\t\t\t</div>\n   \t\t\t\t</div>\n   \t\t\t</div>\n   \t\t</div>\n   \t</div>\n   \t<div class="actions" ng-show="$ctrl.uploadView">\n   \t\t<div class="ui grid">\n   \t\t\t<div class="three wide column left aligned">\n   \t\t\t\t<button class="ui grey button" ng-click="$ctrl.uploadView=false; $ctrl.plugin==\'image\' ? \'\' : $ctrl.upload = false; $ctrl.record=false; $ctrl.generateTelemetry({type: \'click\', subtype: \'select\', target: \'backUploadBtn\'})">Back</button>\n   \t\t\t</div>\n   \t\t\t<div class="nine wide column right aligned">\n   \t\t\t\t<i ng-show="$ctrl.uploadingAsset" class="big spinner loading icon"></i>\n   \t\t\t\t<div class="ui buttons">\n   \t\t\t\t\t<button id="closePopUp" class="ui orange button" ng-click="$ctrl.cancel(); $ctrl.generateTelemetry({type: \'click\', subtype: \'close\', target: \'closeAssetBrowser\'})" type="button">Cancel</button>\n   \t\t\t\t\t<div class="or"></div>\n   \t\t\t\t\t<button class="ui blue button submit button" ng-disabled="$ctrl.uploadBtnDisabled" ng-click="$ctrl.doUpload($event); $ctrl.generateTelemetry({type: \'click\', subtype: \'select\', target: \'uploadAndUseAssetBrowserButton\'})" type="button">Upload and Use</button>\n   \t\t\t\t</div>\n   \t\t\t</div>\n   \t\t</div>\n   \t</div>\n   </div>\n<\/script>\n'},function(t,e,n){"use strict";angular.module("assetbrowserapp",["angularAudioRecorder","angular-inview"]).config(["recorderServiceProvider",function(t){t.forceSwf(!1);var e=org.ekstep.pluginframework.pluginManager.getPluginManifest("org.ekstep.assetbrowser"),n={lameJsUrl:ecEditor.getConfig("absURL")+ecEditor.resolvePluginResource(e.id,e.ver,"editor/recorder/lib2/lame.min.js"),bitRate:92};t.withMp3Conversion(!0,n)}]),angular.module("assetbrowserapp").controller("browsercontroller",["$scope","$injector","instance",function(t,e,n){var i,r,o,a={},s={},l=this;l.inViewLogs=[];var c=e.get("$sce");function u(e,n){n&&n.data.result.content?(l.imageList=[],ecEditor._.forEach(n.data.result.content,function(t,e){ecEditor._.isUndefined(t.downloadUrl)||l.imageList.push(t)}),l.initPopup(n.data.result.content)):l.imageList=[],p(),t.$safeApply()}function d(e,n){n&&n.data.result.content?(l.audioList=[],ecEditor._.forEach(n.data.result.content,function(t,e){ecEditor._.isUndefined(t.downloadUrl)||l.audioList.push({downloadUrl:h(t.downloadUrl),identifier:t.identifier,name:t.name,mimeType:t.mimeType,license:t.license,contentType:t.contentType})}),l.initPopup(n.data.result.content)):l.audioList=[],p(),t.$safeApply()}function h(t){return c.trustAsResourceUrl(t)}function f(){l.loading="active"}function p(){l.loading=""}l.file={infoShow:!1,name:"",size:0},l.audioType="audio",l.voiceOption=[{label:"Audio",value:"audio"},{label:"Voice",value:"voice"}],l.context=org.ekstep.contenteditor.globalContext,l.selected_images={},l.selected_audios={},l.contentNotFoundImage=ecEditor.resolvePluginResource(n.manifest.id,n.manifest.ver,"assets/contentNotFound.jpg"),l.selectBtnDisable=!0,l.buttonToShow="select",l.uploadView=!1,l.languagecode="en",l.assetFileError="",l.createdBy=ecEditor._.isUndefined(l.context)?"":l.context.user.id,l.offset=0,l.maxLimit=200,l.myTabScrollElement="",l.allTabScrollElement="",l.asset={requiredField:""},l.hideField=!1,l.keywordsText,l.languageText="English",l.optional=!0,l.uploadingAsset=!1,l.assetId=void 0,l.tabSelected="my",l.assetMeta={name:"",keywords:[],creator:"",createdBy:ecEditor._.isUndefined(l.context)?"":l.context.user.id,code:"org.ekstep"+Math.random(),mimeType:"",mediaType:"",contentType:"Asset",osId:"org.ekstep.quiz.app",sources:"",publisher:""},l.loading="active",l.loadMoreAssetSpinner=!1,l.showLoadMoreWarningMsg=!1,l.plugin=n.mediaType,l.upload="image"==n.mediaType,l.fileTypes="image"==n.mediaType?"jpeg, jpg, png":"mp3, mp4, mpeg, ogg, wav, webm",l.fileSize="image"==n.mediaType?"1 MB":"6 MB","image"==n.mediaType?(l.allowedFileSize=1048576,l.allowedMimeTypes=["image/jpeg","image/jpg","image/png"]):"audio"==n.mediaType&&(l.allowedFileSize=6291456,l.allowedMimeTypes=["audio/mp3","audio/mp4","audio/mpeg","audio/ogg","audio/webm","audio/x-wav","audio/wav"]),"image"==n.mediaType?n.getAsset(void 0,new Array(n.mediaType),l.createdBy,l.offset,u):n.getAsset(void 0,new Array("audio","voice"),l.createdBy,l.offset,d),l.myAssetTab=function(){ecEditor.jQuery("#"+l.myTabScrollElement).unbind("scroll").scroll(l.bindScroll),l.showLoadMoreWarningMsg=!1;var t,e=l.query;f(),l.selectBtnDisable=!1,l.buttonToShow="select",l.tabSelected="my",l.selectBtnDisable=!!ecEditor._.isUndefined(o),l.buttonToShow="select",""===e&&(e=void 0),t="image"===n.mediaType?u:t,(t="audio"===n.mediaType?d:t)&&l.toggleImageCheck()&&l.toggleAudioCheck(),l.selectBtnDisable=!0;var i=l.getMediaType();t&&n.getAsset(e,i,l.createdBy,l.offset=0,t)},l.getMediaType=function(){return"image"===n.mediaType?new Array(n.mediaType):""==ecEditor.jQuery("#audioDropDown").dropdown("get value")||"all"==ecEditor.jQuery("#audioDropDown").dropdown("get value")?new Array("audio","voice"):"voice"==ecEditor.jQuery("#audioDropDown").dropdown("get value")?new Array("voice"):new Array(n.mediaType)},l.allAssetTab=function(){ecEditor.jQuery("#"+l.allTabScrollElement).unbind("scroll").scroll(l.bindScroll),l.showLoadMoreWarningMsg=!1;var t,e=l.query;f(),l.tabSelected="all",l.selectBtnDisable=!!ecEditor._.isUndefined(o),l.buttonToShow="select",""===e&&(e=void 0),t="image"===n.mediaType?u:t,(t="audio"===n.mediaType?d:t)&&l.toggleImageCheck()&&l.toggleAudioCheck(),l.selectBtnDisable=!0;var i="image"!=n.mediaType?new Array("audio","voice"):new Array(n.mediaType);t&&n.getAsset(e,i,void 0,l.offset=0,t)},l.uploadButton=function(){"image"==n.mediaType?l.uploadBtnDisabled=!1:1==l.record?(l.audioType="voice",l.uploadBtnDisabled=!0):0==l.upload?l.uploadBtnDisabled=!0:(l.audioType="audio",l.uploadBtnDisabled=!1),t.$safeApply()},l.uploadClick=function(){t.$on("ngDialog:opened",function(){ecEditor.jQuery("#uploadtab").trigger("click")})},l.audioTab=function(){l.selectBtnDisable=!!ecEditor._.isUndefined(r),l.buttonToShow="select"},l.assetUpload=function(){l.buttonToShow="upload"},l.search=function(){var t,e;if(""===(e=l.query)&&(e=void 0),t="image"===n.mediaType?u:t,(t="audio"===n.mediaType?d:t)&&l.toggleImageCheck()&&l.toggleAudioCheck(),l.selectBtnDisable=!0,l.showLoadMoreWarningMsg=!1,"my"==l.tabSelected){var i=l.getMediaType();t&&n.getAsset(e,i,l.createdBy,l.offset=0,t),ecEditor.jQuery("#"+l.myTabScrollElement).unbind("scroll").scroll(l.bindScroll)}else i="image"!=n.mediaType?new Array("audio","voice"):new Array(n.mediaType),t&&n.getAsset(e,i,void 0,l.offset=0,t),ecEditor.jQuery("#"+l.allTabScrollElement).unbind("scroll").scroll(l.bindScroll)},l.cancel=function(){l.generateImpression({type:"view",subtype:"popup-exit",pageid:"AssetsBrowser"}),l.inViewLogs=[],t.closeThisDialog()},l.ImageSource=function(t,e){s.asset=t.target.attributes.data_id.value,s.assetMedia={id:s.asset,src:t.target.attributes.src.value,type:"image"},l.selectBtnDisable=!1,l.toggleImageCheck(e)},l.toggleImageCheck=function(t){return ecEditor._.isUndefined(o)||(l.selected_images[o].selected=!1),o=t,!0},l.AudioSource=function(t,e){document.getElementById("audio-"+e).play(),a.asset=t.identifier,a.assetMedia={name:t.name,id:a.asset,src:t.downloadUrl.toString(),type:"audio"},l.selectBtnDisable=!1,l.toggleAudioCheck(e)},l.toggleAudioCheck=function(t){var e;return ecEditor._.isUndefined(r)||(l.selected_audios[r].selected=!1,(e=document.getElementById("audio-"+r)).pause(),e.currentTime=0),r=t,!0},l.initPopup=function(e){ecEditor.jQuery(".assetbrowser .ui.popup").each(function(){ecEditor.jQuery(this).remove()}),t.$on("ngDialog:opened",function(){ecEditor.jQuery(".assetbrowser .infopopover").popup({inline:!0,position:"bottom center"})})},l.convertToBytes=function(t){if(ecEditor._.isUndefined(t))return" N/A";t=parseInt(t);var e=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,Math.floor(e))).toFixed(1)+" "+["bytes","kB","MB","GB","TB","PB"][e]},l.select=function(){s&&s.asset&&"image"==n.mediaType&&(n.cb(s),l.cancel()),a&&a.asset&&"audio"==n.mediaType&&(console.log("audiodata"),console.log(a),n.cb(a),l.cancel())},ecEditor.getService("language").getLanguages(function(e,n){if(!e&&n.data&&n.data.result&&ecEditor._.isArray(n.data.result.languages)){var i={};ecEditor._.forEach(n.data.result.languages,function(t){i[t.code]=t.name}),l.asset.language=ecEditor._.values(i),t.$safeApply()}}),l.setPublic=function(){l.assetMeta.license="Creative Commons Attribution (CC BY)",l.asset.requiredField="required",l.optional=!1},l.viewMore=function(){ecEditor.jQuery(".removeError").each(function(){ecEditor.jQuery(this).removeClass("error")}),l.hideField=!1},l.setPrivate=function(){delete l.assetMeta.license,l.asset.requiredField="",l.optional=!0},l.showFileInfo=function(){var t;l.file.infoShow=!0,l.file.name="audio_"+Date.now()+".mp3",t=l.blobToFile(window.mp3Blob,l.file.name),ecEditor.jQuery("#fileSize").text(l.formatBytes(t.size)),l.preFillForm(l.file)},l.formatBytes=function(t,e){if(0==t)return"0 Byte";var n=e+1||3,i=Math.floor(Math.log(t)/Math.log(1e3));return parseFloat((t/Math.pow(1e3,i)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][i]},l.onRecordStart=function(){l.replaceRecord=!1,l.file.infoShow=!1,l.showfileInfoBlock=!1,l.uploadBtnDisabled=!0,ecEditor.jQuery("#replaceRecord").hide(),ecEditor.jQuery("#replaceRecordDiv").hide()},l.onConversionComplete=function(){l.uploadBtnDisabled=!1,l.showFileInfo(),ecEditor.jQuery("#replaceRecordDiv").show()},l.uploadAsset=function(e,i){var r=l.assetMeta,o=new FormData;if(t.$safeApply(),1==l.record){var a;if((a=l.blobToFile(window.mp3Blob,l.file.name)).size>l.allowedFileSize)return alert("File size is higher than the allowed size!"),!1;l.assetMeta.mimeType="audio/mp3",l.assetMeta.mediaType=l.audioType,o.append("file",a)}else ecEditor.jQuery.each(ecEditor.jQuery("#assetfile")[0].files,function(t,e){o.append("file",e),l.assetMeta.mimeType=e.type,l.assetMeta.mediaType="audio"!=n.mediaType?n.mediaType:l.audioType});ecEditor._.isUndefined(l.languageText)||null==l.languageText?delete r.language:r.language=[l.languageText],ecEditor._.isUndefined(l.keywordsText)||null==l.keywordsText?delete r.keywords:r.keywords=l.keywordsText.split(","),angular.forEach(r,function(t,e){!ecEditor._.isUndefined(t)&&null!=t&&""!=t||"body"==e||delete r[e]},null),console.log(r),ecEditor.getService("asset").saveAsset(l.assetId,r,function(t,e){e&&(l.uploadingAsset=!0,l.uploadFile(e,o,i.name))})},l.blobToFile=function(t,e){return new File([t],e,{type:t.type,lastModified:Date.now()})},l.uploadFile=function(t,e,i){i=i,ecEditor.getService("content").uploadContent(t.data.result.node_id,e,{enctype:"multipart/form-data",processData:!1,contentType:!1,cache:!1},function(t,e){t||"OK"!=e.data.responseCode?ecEditor.dispatchEvent("org.ekstep.toaster:error",{message:"Error in Uploading "+n.mediaType.charAt(0).toUpperCase()+n.mediaType.slice(1)+", please try again!",position:"topCenter",icon:"fa fa-warning"}):(console.log("response"),console.log(e),s.asset=e.data.result.node_id,_.isUndefined(s.assetMedia)?s.assetMedia={name:i,id:e.data.result.node_id,src:e.data.result.content_url,type:n.mediaType}:(s.assetMedia.name=i,s.assetMedia.id=e.data.result.node_id,s.assetMedia.src=e.data.result.content_url,s.assetMedia.type=n.mediaType),console.log("Passing data"),console.log(s.assetMedia),n.cb(s),l.uploadingAsset=!1,l.uploadBtnDisabled=!1,ecEditor.dispatchEvent("org.ekstep.toaster:success",{message:n.mediaType.charAt(0).toUpperCase()+n.mediaType.slice(1)+" successfully uploaded",position:"topCenter",icon:"fa fa-check-circle"}),l.cancel())})},l.doUpload=function(t,e){if(""!=l.assetMeta.name||(l.assetNameError="error"),""!=ecEditor.jQuery("#assetfile").val()||(l.assetFileError="error"),""==l.assetMeta.name||""==ecEditor.jQuery("#assetfile").val())return console.log("fields validation failed"),l.uploadBtnDisabled=!1,!1;if(l.uploadBtnDisabled=!0,1==l.record)l.uploadAsset(t,l.assetMeta);else{if(!n.fileValidation("assetfile",l.allowedFileSize,l.allowedMimeTypes))return l.uploadBtnDisabled=!1,!1;l.uploadAsset(t,l.assetMeta)}},l.switchToUpload=function(){l.uploadView=!0,l.uploadButton()},l.generateTelemetry=function(t){t&&ecEditor.getService("telemetry").interact({type:t.type,subtype:t.subtype,target:t.target,pluginid:n.manifest.id,pluginver:n.manifest.ver,objectid:"",stage:ecEditor.getCurrentStage().id})},l.preFillForm=function(t){l.assetMeta.name=t.name.replace(/\.[^/.]+$/,"").replace(/[_.^/_]/g," "),l.assetMeta.creator=l.context.user.name,ecEditor.jQuery(".field","#hideShowFields").removeClass("disabled"),l.showDragDropMsg=!0,ecEditor.ngSafeApply(ecEditor.getAngularScope())},t.lineInView=function(t,e,n,i,r){var o=_.filter(l.inViewLogs,function(t){return t.identifier===n.identifier});e&&0===o.length&&l.inViewLogs.push({objid:n.identifier,objtype:n.contentType||"Asset",section:i,index:t})},l.generateImpression=function(t){t&&ecEditor.getService("telemetry").impression({type:t.type,subtype:t.subtype||"",pageid:t.pageid||"",uri:window.location.href,visits:l.inViewLogs})},t.closePopup=function(){l.generateImpression({type:"view",subtype:"popup-exit",pageid:"AssetsBrowser"}),l.inViewLogs=[],l.generateTelemetry({type:"click",subtype:"close",target:"closeAssetBrowser"}),t.closeThisDialog()},l.loadMoreAsset=function(e){if(l.offset+50>=l.maxLimit)return ecEditor.jQuery("#"+e.target.id).unbind("scroll"),l.showLoadMoreWarningMsg=!0,ecEditor.ngSafeApply(ecEditor.getAngularScope()),!1;l.offset=l.offset+50,l.showLoadMoreWarningMsg=!1;var i=l.query;l.loadMoreAssetSpinner=!0,l.selectBtnDisable=!1;var r="all"==l.tabSelected?void 0:l.createdBy;""===i&&(i=void 0);var o=l.getMediaType();n.getAsset(i,o,r,l.offset,function(t,n){n&&n.data.result.content?(ecEditor._.forEach(n.data.result.content,function(t,e){"image"==o?l.imageList.push(t):l.audioList.push({downloadUrl:h(t.downloadUrl),identifier:t.identifier,name:t.name,mimeType:t.mimeType,license:t.license,contentType:t.contentType})}),l.initPopup(n.data.result.content),ecEditor.jQuery("#"+e.target.id).bind("scroll",l.bindScroll)):ecEditor.jQuery("#"+e.target.id).unbind("scroll"),l.loadMoreAssetSpinner=!1,ecEditor.ngSafeApply(ecEditor.getAngularScope())}),t.$safeApply()},l.searchTextClicked=function(){"my-image-tab"===l.myTabScrollElement?ecEditor.jQuery("#searchMyImageAssets").focus():ecEditor.jQuery("#searchMyAudioAssets").focus(),"all-image-tab"===l.allTabScrollElement?ecEditor.jQuery("#searchAllImageAssets").focus():ecEditor.jQuery("#searchAllAudioAssets").focus(),ecEditor.jQuery("#"+l.myTabScrollElement).scrollTo(0,0),ecEditor.jQuery("#"+l.allTabScrollElement).scrollTo(0,0)},setTimeout(function(){l.myTabScrollElement="image"===n.mediaType?"my-image-tab":"my-audio-tab",l.allTabScrollElement="image"===n.mediaType?"all-image-tab":"all-audio-tab",ecEditor.jQuery(".assetbrowser .menu .item").tab(),ecEditor.jQuery(".assetbrowser .ui.dropdown").dropdown(),ecEditor.jQuery(".assetbrowser .ui.radio.checkbox").checkbox(),ecEditor.jQuery(".field","#hideShowFields").addClass("disabled"),ecEditor.jQuery("#ccByContribution2").click(),ecEditor.jQuery(document).on("change","#assetName, #assetfile",function(){l.uploadBtnDisabled=!1,l.assetNameError=!0,l.assetFileError=!0,ecEditor.ngSafeApply(ecEditor.getAngularScope())}),ecEditor.jQuery("body").on("dragover dragenter",function(t){t=t||event,$(t.target).hasClass("droppable")?ecEditor.jQuery("#assetfile").addClass("is-dragover"):t.preventDefault()}).on("dragleave dragend drop",function(t){t=t||event,$(t.target).hasClass("droppable")?ecEditor.jQuery("#assetfile").removeClass("is-dragover"):t.preventDefault()}).on("drop",function(t){t=t||event,$(t.target).hasClass("droppable")?ecEditor.jQuery(".field","#hideShowFields").removeClass("disabled"):t.preventDefault()}),ecEditor.jQuery(document).on("change","#assetfile",function(){l.preFillForm(this.files[0])}),l.bindScroll=function(t){var e=ecEditor.jQuery("#"+t.target.id),n=ecEditor.jQuery("#"+t.target.id)[0];e.scrollTop()+e.height()+40>=n.scrollHeight&&(ecEditor.jQuery("#"+t.target.id).unbind("scroll"),l.loadMoreAsset(t))},ecEditor.jQuery("#"+l.myTabScrollElement).unbind("scroll").scroll(l.bindScroll),ecEditor.jQuery("#"+l.allTabScrollElement).unbind("scroll").scroll(l.bindScroll),ecEditor.jQuery("#audioDropDown").dropdown({onChange:function(t){i=""===l.query?void 0:l.query;var e="all"!=t?new Array(t):new Array("audio","voice");n.getAsset(i,e,l.createdBy,l.offset,d)}})},100)}])},function(t,e,n){var i,r,o;!function(a){"use strict";r=[n(16)],void 0===(o="function"==typeof(i=function(t,e){var n={beforeShow:u,move:u,change:u,show:u,hide:u,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},i=[],r=!!/msie/i.exec(window.navigator.userAgent),o=function(){function t(t,e){return!!~(""+t).indexOf(e)}var e=document.createElement("div").style;return e.cssText="background-color:rgba(0,0,0,.5)",t(e.backgroundColor,"rgba")||t(e.backgroundColor,"hsla")}(),a=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'><i class='dropdown icon'></i></div>","</div>"].join(""),s=function(){var t="";if(r)for(var e=1;e<=6;e++)t+="<div class='sp-"+e+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",t,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function l(e,n,i,r){for(var a=[],s=0;s<e.length;s++){var l=e[s];if(l){var c=tinycolor(l),u=c.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";u+=tinycolor.equals(n,l)?" sp-thumb-active":"";var d=c.toString(r.preferredFormat||"rgb"),h=o?"background-color:"+c.toRgbString():"filter:"+c.toFilter();a.push('<span title="'+d+'" data-color="'+c.toRgbString()+'" class="'+u+'"><span class="sp-thumb-inner" style="'+h+';" /></span>')}else a.push(t("<div />").append(t('<span data-color="" style="background-color:transparent;" class="sp-clear-display"></span>').attr("title",r.noColorSelectedText)).html())}return"<div class='sp-cf "+i+"'>"+a.join("")+"</div>"}function c(c,u){var g,m,v=function(e,i){var r=t.extend({},n,e);return r.callbacks={move:h(r.move,i),change:h(r.change,i),show:h(r.show,i),hide:h(r.hide,i),beforeShow:h(r.beforeShow,i)},r}(u,c),y=v.flat,E=v.showSelectionPalette,b=v.localStorageKey,C=v.theme,T=v.callbacks,w=(g=Bt,10,function(){var t=this,e=arguments;m||(m=setTimeout(function(){m=null,g.apply(t,e)},10))}),I=!1,O=!1,D=0,_=0,k=0,R=0,x=0,S=0,K=0,$=0,A=0,N=0,P=1,L=[],F=[],M={},j=v.selectionPalette.slice(0),B=v.maxSelectionSize,q="sp-dragging",H=null,V=c.ownerDocument,U=(V.body,t(c)),z=!1,W=t(s,V).addClass(C),X=W.find(".sp-picker-container"),G=W.find(".sp-color"),Y=W.find(".sp-dragger"),Q=W.find(".sp-hue"),J=W.find(".sp-slider"),Z=W.find(".sp-alpha-inner"),tt=W.find(".sp-alpha"),et=W.find(".sp-alpha-handle"),nt=W.find(".sp-input"),it=W.find(".sp-palette"),rt=W.find(".sp-initial"),ot=W.find(".sp-cancel"),at=W.find(".sp-clear"),st=W.find(".sp-choose"),lt=W.find(".sp-palette-toggle"),ct=U.is("input"),ut=ct&&"color"===U.attr("type")&&p(),dt=ct&&!y,ht=dt?t(a).addClass(C).addClass(v.className).addClass(v.replacerClassName):t([]),ft=dt?ht:U,pt=ht.find(".sp-preview-inner"),gt=v.color||ct&&U.val(),mt=!1,vt=v.preferredFormat,yt=!v.showButtons||v.clickoutFiresChange,Et=!gt,bt=v.allowEmpty&&!ut;function Ct(){if(v.showPaletteOnly&&(v.showPalette=!0),lt.text(v.showPaletteOnly?v.togglePaletteMoreText:v.togglePaletteLessText),v.palette){L=v.palette.slice(0),F=t.isArray(L[0])?L:[L],M={};for(var e=0;e<F.length;e++)for(var n=0;n<F[e].length;n++){var i=tinycolor(F[e][n]).toRgbString();M[i]=!0}}W.toggleClass("sp-flat",y),W.toggleClass("sp-input-disabled",!v.showInput),W.toggleClass("sp-alpha-enabled",v.showAlpha),W.toggleClass("sp-clear-enabled",bt),W.toggleClass("sp-buttons-disabled",!v.showButtons),W.toggleClass("sp-palette-buttons-disabled",!v.togglePaletteOnly),W.toggleClass("sp-palette-disabled",!v.showPalette),W.toggleClass("sp-palette-only",v.showPaletteOnly),W.toggleClass("sp-initial-disabled",!v.showInitial),W.addClass(v.className).addClass(v.containerClassName),Bt()}function Tt(){if(b&&window.localStorage){try{var e=window.localStorage[b].split(",#");e.length>1&&(delete window.localStorage[b],t.each(e,function(t,e){wt(e)}))}catch(t){}try{j=window.localStorage[b].split(";")}catch(t){}}}function wt(e){if(E){var n=tinycolor(e).toRgbString();if(!M[n]&&-1===t.inArray(n,j))for(j.push(n);j.length>B;)j.shift();if(b&&window.localStorage)try{window.localStorage[b]=j.join(";")}catch(t){}}}function It(){var e=Pt(),n=t.map(F,function(t,n){return l(t,e,"sp-palette-row sp-palette-row-"+n,v)});Tt(),j&&n.push(l(function(){var t=[];if(v.showPalette)for(var e=0;e<j.length;e++){var n=tinycolor(j[e]).toRgbString();M[n]||t.push(j[e])}return t.reverse().slice(0,v.maxSelectionSize)}(),e,"sp-palette-row sp-palette-row-selection",v)),it.html(n.join(""))}function Ot(){if(v.showInitial){var t=mt,e=Pt();rt.html(l([t,e],e,"sp-palette-row-initial",v))}}function Dt(){(_<=0||D<=0||R<=0)&&Bt(),O=!0,W.addClass(q),H=null,U.trigger("dragstart.spectrum",[Pt()])}function _t(){O=!1,W.removeClass(q),U.trigger("dragstop.spectrum",[Pt()])}function kt(){var t=nt.val();if(null!==t&&""!==t||!bt){var e=tinycolor(t);e.isValid()?(Nt(e),Lt(),jt()):nt.addClass("sp-validation-error")}else Nt(null),Lt(),jt()}function Rt(){I?$t():xt()}function xt(){var e=t.Event("beforeShow.spectrum");I?Bt():(U.trigger(e,[Pt()]),!1===T.beforeShow(Pt())||e.isDefaultPrevented()||(function(){for(var t=0;t<i.length;t++)i[t]&&i[t].hide()}(),I=!0,t(V).on("keydown.spectrum",St),t(V).on("click.spectrum",Kt),t(window).on("resize.spectrum",w),ht.addClass("sp-active"),W.removeClass("sp-hidden"),Bt(),Ft(),mt=Pt(),Ot(),T.show(mt),U.trigger("show.spectrum",[mt])))}function St(t){27===t.keyCode&&$t()}function Kt(t){2!=t.button&&(O||(yt?jt(!0):At(),$t()))}function $t(){I&&!y&&(I=!1,t(V).off("keydown.spectrum",St),t(V).off("click.spectrum",Kt),t(window).off("resize.spectrum",w),ht.removeClass("sp-active"),W.addClass("sp-hidden"),T.hide(Pt()),U.trigger("hide.spectrum",[Pt()]))}function At(){Nt(mt,!0),jt(!0)}function Nt(t,e){var n,i;tinycolor.equals(t,Pt())?Ft():(!t&&bt?Et=!0:(Et=!1,i=(n=tinycolor(t)).toHsv(),$=i.h%360/360,A=i.s,N=i.v,P=i.a),Ft(),n&&n.isValid()&&!e&&(vt=v.preferredFormat||n.getFormat()))}function Pt(t){return t=t||{},bt&&Et?null:tinycolor.fromRatio({h:$,s:A,v:N,a:Math.round(1e3*P)/1e3},{format:t.format||vt})}function Lt(){Ft(),T.move(Pt()),U.trigger("move.spectrum",[Pt()])}function Ft(){nt.removeClass("sp-validation-error"),Mt();var t=tinycolor.fromRatio({h:$,s:1,v:1});G.css("background-color",t.toHexString());var e=vt;P<1&&(0!==P||"name"!==e)&&("hex"!==e&&"hex3"!==e&&"hex6"!==e&&"name"!==e||(e="rgb"));var n=Pt({format:e}),i="";if(pt.removeClass("sp-clear-display"),pt.css("background-color","transparent"),!n&&bt)pt.addClass("sp-clear-display");else{var a=n.toHexString(),s=n.toRgbString();if(o||1===n.alpha?pt.css("background-color",s):(pt.css("background-color","transparent"),pt.css("filter",n.toFilter())),v.showAlpha){var l=n.toRgb();l.a=0;var c=tinycolor(l).toRgbString(),u="linear-gradient(left, "+c+", "+a+")";r?Z.css("filter",tinycolor(c).toFilter({gradientType:1},a)):(Z.css("background","-webkit-"+u),Z.css("background","-moz-"+u),Z.css("background","-ms-"+u),Z.css("background","linear-gradient(to right, "+c+", "+a+")"))}i=n.toString(e)}v.showInput&&nt.val(i),v.showPalette&&It(),Ot()}function Mt(){var t=A,e=N;if(bt&&Et)et.hide(),J.hide(),Y.hide();else{et.show(),J.show(),Y.show();var n=t*D,i=_-e*_;n=Math.max(-k,Math.min(D-k,n-k)),i=Math.max(-k,Math.min(_-k,i-k)),Y.css({top:i+"px",left:n+"px"});var r=P*x;et.css({left:r-S/2+"px"});var o=$*R;J.css({top:o-K+"px"})}}function jt(t){var e=Pt(),n="",i=!tinycolor.equals(e,mt);e&&(n=e.toString(vt),wt(e)),ct&&U.val(n),t&&i&&(T.change(e),U.trigger("change",[e]))}function Bt(){var e,n,i,r,o,a,s,l,c,u,d,h;I&&(D=G.width(),_=G.height(),k=Y.height(),Q.width(),R=Q.height(),K=J.height(),x=tt.width(),S=et.width(),y||(W.css("position","absolute"),v.offset?W.offset(v.offset):W.offset((n=ft,i=(e=W).outerWidth(),r=e.outerHeight(),o=n.outerHeight(),l=(s=(a=e[0].ownerDocument).documentElement).clientWidth+t(a).scrollLeft(),c=s.clientHeight+t(a).scrollTop(),d=(u=n.offset()).left,h=u.top,h+=o,d-=Math.min(d,d+i>l&&l>i?Math.abs(d+i-l):0),{top:h-=Math.min(h,h+r>c&&c>r?Math.abs(r+o-0):0),bottom:u.bottom,left:d,right:u.right,width:u.width,height:u.height}))),Mt(),v.showPalette&&It(),U.trigger("reflow.spectrum"))}function qt(){$t(),z=!0,U.attr("disabled",!0),ft.addClass("sp-disabled")}!function(){if(r&&W.find("*:not(input)").attr("unselectable","on"),Ct(),dt&&U.after(ht).hide(),bt||at.hide(),y)U.after(W).hide();else{var e="parent"===v.appendTo?U.parent():t(v.appendTo);1!==e.length&&(e=t("body")),e.append(W)}function n(e){return e.data&&e.data.ignore?(Nt(t(e.target).closest(".sp-thumb-el").data("color")),Lt()):(Nt(t(e.target).closest(".sp-thumb-el").data("color")),Lt(),v.hideAfterPaletteSelect?(jt(!0),$t()):jt()),!1}Tt(),ft.on("click.spectrum touchstart.spectrum",function(e){z||Rt(),e.stopPropagation(),t(e.target).is("input")||e.preventDefault()}),(U.is(":disabled")||!0===v.disabled)&&qt(),W.click(d),nt.change(kt),nt.on("paste",function(){setTimeout(kt,1)}),nt.keydown(function(t){13==t.keyCode&&kt()}),ot.text(v.cancelText),ot.on("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),At(),$t()}),at.attr("title",v.clearText),at.on("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),Et=!0,Lt(),y&&jt(!0)}),st.text(v.chooseText),st.on("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),r&&nt.is(":focus")&&nt.trigger("change"),nt.hasClass("sp-validation-error")||(jt(!0),$t())}),lt.text(v.showPaletteOnly?v.togglePaletteMoreText:v.togglePaletteLessText),lt.on("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),v.showPaletteOnly=!v.showPaletteOnly,v.showPaletteOnly||y||W.css("left","-="+(X.outerWidth(!0)+5)),Ct()}),f(tt,function(t,e,n){P=t/x,Et=!1,n.shiftKey&&(P=Math.round(10*P)/10),Lt()},Dt,_t),f(Q,function(t,e){$=parseFloat(e/R),Et=!1,v.showAlpha||(P=1),Lt()},Dt,_t),f(G,function(t,e,n){if(n.shiftKey){if(!H){var i=A*D,r=_-N*_,o=Math.abs(t-i)>Math.abs(e-r);H=o?"x":"y"}}else H=null;var a=!H||"y"===H;(!H||"x"===H)&&(A=parseFloat(t/D)),a&&(N=parseFloat((_-e)/_)),Et=!1,v.showAlpha||(P=1),Lt()},Dt,_t),gt?(Nt(gt),Ft(),vt=v.preferredFormat||tinycolor(gt).format,wt(gt)):Ft(),y&&xt();var i=r?"mousedown.spectrum":"click.spectrum touchstart.spectrum";it.on(i,".sp-thumb-el",n),rt.on(i,".sp-thumb-el:nth-child(1)",{ignore:!0},n)}();var Ht={show:xt,hide:$t,toggle:Rt,reflow:Bt,option:function(n,i){return n===e?t.extend({},v):i===e?v[n]:(v[n]=i,"preferredFormat"===n&&(vt=v.preferredFormat),void Ct())},enable:function(){z=!1,U.attr("disabled",!1),ft.removeClass("sp-disabled")},disable:qt,offset:function(t){v.offset=t,Bt()},set:function(t){Nt(t),jt()},get:Pt,destroy:function(){U.show(),ft.off("click.spectrum touchstart.spectrum"),W.remove(),ht.remove(),i[Ht.id]=null},container:W};return Ht.id=i.push(Ht)-1,Ht}function u(){}function d(t){t.stopPropagation()}function h(t,e){var n=Array.prototype.slice,i=n.call(arguments,2);return function(){return t.apply(e,i.concat(n.call(arguments)))}}function f(e,n,i,o){n=n||function(){},i=i||function(){},o=o||function(){};var a=document,s=!1,l={},c=0,u=0,d="ontouchstart"in window,h={};function f(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1}function p(t){if(s){if(r&&a.documentMode<9&&!t.button)return g();var i=t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0],o=i&&i.pageX||t.pageX,h=i&&i.pageY||t.pageY,p=Math.max(0,Math.min(o-l.left,u)),m=Math.max(0,Math.min(h-l.top,c));d&&f(t),n.apply(e,[p,m,t])}}function g(){s&&(t(a).off(h),t(a.body).removeClass("sp-dragging"),setTimeout(function(){o.apply(e,arguments)},0)),s=!1}h.selectstart=f,h.dragstart=f,h["touchmove mousemove"]=p,h["touchend mouseup"]=g,t(e).on("touchstart mousedown",function(n){(n.which?3==n.which:2==n.button)||s||!1!==i.apply(e,arguments)&&(s=!0,c=t(e).height(),u=t(e).width(),l=t(e).offset(),t(a).on(h),t(a.body).addClass("sp-dragging"),p(n),f(n))})}function p(){return t.fn.spectrum.inputTypeColorSupport()}t.fn.spectrum=function(e,n){if("string"==typeof e){var r=this,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=i[t(this).data("spectrum.id")];if(n){var a=n[e];if(!a)throw new Error("Spectrum: no such method: '"+e+"'");"get"==e?r=n.get():"container"==e?r=n.container:"option"==e?r=n.option.apply(n,o):"destroy"==e?(n.destroy(),t(this).removeData("spectrum.id")):a.apply(n,o)}}),r}return this.spectrum("destroy").each(function(){var n=c(this,t.extend({},t(this).data(),e));t(this).data("spectrum.id",n.id)})},t.fn.spectrum.load=!0,t.fn.spectrum.loadOpts={},t.fn.spectrum.draggable=f,t.fn.spectrum.defaults=n,t.fn.spectrum.inputTypeColorSupport=function e(){if(void 0===e._cachedResult){var n=t("<input type='color'/>")[0];e._cachedResult="color"===n.type&&""!==n.value}return e._cachedResult},t.spectrum={},t.spectrum.localization={},t.spectrum.palettes={},t.fn.spectrum.processNativeColorInputs=function(){var e=t("input[type=color]");e.length&&!p()&&e.spectrum({preferredFormat:"hex6"})},function(){var t=/^[\s,#]+/,e=/\s+$/,n=0,i=Math,r=i.round,o=i.min,a=i.max,s=i.random,l=function(s,c){if(s=s||"",c=c||{},s instanceof l)return s;if(!(this instanceof l))return new l(s,c);var u=function(n){var r,s,l,c={r:0,g:0,b:0},u=1,d=!1,h=!1;return"string"==typeof n&&(n=function(n){n=n.replace(t,"").replace(e,"").toLowerCase();var i,r,o=!1;if(D[n])n=D[n],o=!0;else if("transparent"==n)return{r:0,g:0,b:0,a:0,format:"name"};return(i=L.rgb.exec(n))?{r:i[1],g:i[2],b:i[3]}:(i=L.rgba.exec(n))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=L.hsl.exec(n))?{h:i[1],s:i[2],l:i[3]}:(i=L.hsla.exec(n))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=L.hsv.exec(n))?{h:i[1],s:i[2],v:i[3]}:(i=L.hsva.exec(n))?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=L.hex8.exec(n))?{a:(r=i[1],S(r)/255),r:S(i[2]),g:S(i[3]),b:S(i[4]),format:o?"name":"hex8"}:(i=L.hex6.exec(n))?{r:S(i[1]),g:S(i[2]),b:S(i[3]),format:o?"name":"hex"}:!!(i=L.hex3.exec(n))&&{r:S(i[1]+""+i[1]),g:S(i[2]+""+i[2]),b:S(i[3]+""+i[3]),format:o?"name":"hex"}}(n)),"object"==typeof n&&(n.hasOwnProperty("r")&&n.hasOwnProperty("g")&&n.hasOwnProperty("b")?(r=n.r,s=n.g,l=n.b,c={r:255*R(r,255),g:255*R(s,255),b:255*R(l,255)},d=!0,h="%"===String(n.r).substr(-1)?"prgb":"rgb"):n.hasOwnProperty("h")&&n.hasOwnProperty("s")&&n.hasOwnProperty("v")?(n.s=$(n.s),n.v=$(n.v),c=function(t,e,n){t=6*R(t,360),e=R(e,100),n=R(n,100);var r=i.floor(t),o=t-r,a=n*(1-e),s=n*(1-o*e),l=n*(1-(1-o)*e),c=r%6;return{r:255*[n,s,a,a,l,n][c],g:255*[l,n,n,s,a,a][c],b:255*[a,a,l,n,n,s][c]}}(n.h,n.s,n.v),d=!0,h="hsv"):n.hasOwnProperty("h")&&n.hasOwnProperty("s")&&n.hasOwnProperty("l")&&(n.s=$(n.s),n.l=$(n.l),c=function(t,e,n){var i,r,o;function a(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=R(t,360),e=R(e,100),n=R(n,100),0===e)i=r=o=n;else{var s=n<.5?n*(1+e):n+e-n*e,l=2*n-s;i=a(l,s,t+1/3),r=a(l,s,t),o=a(l,s,t-1/3)}return{r:255*i,g:255*r,b:255*o}}(n.h,n.s,n.l),d=!0,h="hsl"),n.hasOwnProperty("a")&&(u=n.a)),u=k(u),{ok:d,format:n.format||h,r:o(255,a(c.r,0)),g:o(255,a(c.g,0)),b:o(255,a(c.b,0)),a:u}}(s);this._originalInput=s,this._r=u.r,this._g=u.g,this._b=u.b,this._a=u.a,this._roundA=r(1e3*this._a)/1e3,this._format=c.format||u.format,this._gradientType=c.gradientType,this._r<1&&(this._r=r(this._r)),this._g<1&&(this._g=r(this._g)),this._b<1&&(this._b=r(this._b)),this._ok=u.ok,this._tc_id=n++};function c(t,e,n){t=R(t,255),e=R(e,255),n=R(n,255);var i,r,s=a(t,e,n),l=o(t,e,n),c=(s+l)/2;if(s==l)i=r=0;else{var u=s-l;switch(r=c>.5?u/(2-s-l):u/(s+l),s){case t:i=(e-n)/u+(e<n?6:0);break;case e:i=(n-t)/u+2;break;case n:i=(t-e)/u+4}i/=6}return{h:i,s:r,l:c}}function u(t,e,n){t=R(t,255),e=R(e,255),n=R(n,255);var i,r,s=a(t,e,n),l=o(t,e,n),c=s,u=s-l;if(r=0===s?0:u/s,s==l)i=0;else{switch(s){case t:i=(e-n)/u+(e<n?6:0);break;case e:i=(n-t)/u+2;break;case n:i=(t-e)/u+4}i/=6}return{h:i,s:r,v:c}}function d(t,e,n,i){var o=[K(r(t).toString(16)),K(r(e).toString(16)),K(r(n).toString(16))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function h(t,e,n,i){var o;return[K((o=i,Math.round(255*parseFloat(o)).toString(16))),K(r(t).toString(16)),K(r(e).toString(16)),K(r(n).toString(16))].join("")}function f(t,e){e=0===e?0:e||10;var n=l(t).toHsl();return n.s-=e/100,n.s=x(n.s),l(n)}function p(t,e){e=0===e?0:e||10;var n=l(t).toHsl();return n.s+=e/100,n.s=x(n.s),l(n)}function g(t){return l(t).desaturate(100)}function m(t,e){e=0===e?0:e||10;var n=l(t).toHsl();return n.l+=e/100,n.l=x(n.l),l(n)}function v(t,e){e=0===e?0:e||10;var n=l(t).toRgb();return n.r=a(0,o(255,n.r-r(-e/100*255))),n.g=a(0,o(255,n.g-r(-e/100*255))),n.b=a(0,o(255,n.b-r(-e/100*255))),l(n)}function y(t,e){e=0===e?0:e||10;var n=l(t).toHsl();return n.l-=e/100,n.l=x(n.l),l(n)}function E(t,e){var n=l(t).toHsl(),i=(r(n.h)+e)%360;return n.h=i<0?360+i:i,l(n)}function b(t){var e=l(t).toHsl();return e.h=(e.h+180)%360,l(e)}function C(t){var e=l(t).toHsl(),n=e.h;return[l(t),l({h:(n+120)%360,s:e.s,l:e.l}),l({h:(n+240)%360,s:e.s,l:e.l})]}function T(t){var e=l(t).toHsl(),n=e.h;return[l(t),l({h:(n+90)%360,s:e.s,l:e.l}),l({h:(n+180)%360,s:e.s,l:e.l}),l({h:(n+270)%360,s:e.s,l:e.l})]}function w(t){var e=l(t).toHsl(),n=e.h;return[l(t),l({h:(n+72)%360,s:e.s,l:e.l}),l({h:(n+216)%360,s:e.s,l:e.l})]}function I(t,e,n){e=e||6,n=n||30;var i=l(t).toHsl(),r=360/n,o=[l(t)];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,o.push(l(i));return o}function O(t,e){e=e||6;for(var n=l(t).toHsv(),i=n.h,r=n.s,o=n.v,a=[],s=1/e;e--;)a.push(l({h:i,s:r,v:o})),o=(o+s)%1;return a}l.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},setAlpha:function(t){return this._a=k(t),this._roundA=r(1e3*this._a)/1e3,this},toHsv:function(){var t=u(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=u(this._r,this._g,this._b),e=r(360*t.h),n=r(100*t.s),i=r(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+i+"%)":"hsva("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=c(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=c(this._r,this._g,this._b),e=r(360*t.h),n=r(100*t.s),i=r(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+i+"%)":"hsla("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return d(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return h(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:r(this._r),g:r(this._g),b:r(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+r(this._r)+", "+r(this._g)+", "+r(this._b)+")":"rgba("+r(this._r)+", "+r(this._g)+", "+r(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:r(100*R(this._r,255))+"%",g:r(100*R(this._g,255))+"%",b:r(100*R(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+r(100*R(this._r,255))+"%, "+r(100*R(this._g,255))+"%, "+r(100*R(this._b,255))+"%)":"rgba("+r(100*R(this._r,255))+"%, "+r(100*R(this._g,255))+"%, "+r(100*R(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(_[d(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+h(this._r,this._g,this._b,this._a),n=e,i=this._gradientType?"GradientType = 1, ":"";t&&(n=l(t).toHex8String());return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,i=this._a<1&&this._a>=0;return!e&&i&&("hex"===t||"hex6"===t||"hex3"===t||"name"===t)?"name"===t&&0===this._a?this.toName():this.toRgbString():("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(v,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(f,arguments)},saturate:function(){return this._applyModification(p,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(E,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(I,arguments)},complement:function(){return this._applyCombination(b,arguments)},monochromatic:function(){return this._applyCombination(O,arguments)},splitcomplement:function(){return this._applyCombination(w,arguments)},triad:function(){return this._applyCombination(C,arguments)},tetrad:function(){return this._applyCombination(T,arguments)}},l.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]="a"===i?t[i]:$(t[i]));t=n}return l(t,e)},l.equals=function(t,e){return!(!t||!e)&&l(t).toRgbString()==l(e).toRgbString()},l.random=function(){return l.fromRatio({r:s(),g:s(),b:s()})},l.mix=function(t,e,n){n=0===n?0:n||50;var i,r=l(t).toRgb(),o=l(e).toRgb(),a=n/100,s=2*a-1,c=o.a-r.a,u=1-(i=((i=s*c==-1?s:(s+c)/(1+s*c))+1)/2),d={r:o.r*i+r.r*u,g:o.g*i+r.g*u,b:o.b*i+r.b*u,a:o.a*a+r.a*(1-a)};return l(d)},l.readability=function(t,e){var n=l(t),i=l(e),r=n.toRgb(),o=i.toRgb(),a=n.getBrightness(),s=i.getBrightness(),c=Math.max(r.r,o.r)-Math.min(r.r,o.r)+Math.max(r.g,o.g)-Math.min(r.g,o.g)+Math.max(r.b,o.b)-Math.min(r.b,o.b);return{brightness:Math.abs(a-s),color:c}},l.isReadable=function(t,e){var n=l.readability(t,e);return n.brightness>125&&n.color>500},l.mostReadable=function(t,e){for(var n=null,i=0,r=!1,o=0;o<e.length;o++){var a=l.readability(t,e[o]),s=a.brightness>125&&a.color>500,c=a.brightness/125*3+a.color/500;(s&&!r||s&&r&&c>i||!s&&!r&&c>i)&&(r=s,i=c,n=l(e[o]))}return n};var D=l.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},_=l.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(D);function k(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function R(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=o(e,a(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),i.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function x(t){return o(1,a(0,t))}function S(t){return parseInt(t,16)}function K(t){return 1==t.length?"0"+t:""+t}function $(t){return t<=1&&(t=100*t+"%"),t}var A,N,P,L=(N="[\\s|\\(]+("+(A="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+A+")[,|\\s]+("+A+")\\s*\\)?",P="[\\s|\\(]+("+A+")[,|\\s]+("+A+")[,|\\s]+("+A+")[,|\\s]+("+A+")\\s*\\)?",{rgb:new RegExp("rgb"+N),rgba:new RegExp("rgba"+P),hsl:new RegExp("hsl"+N),hsla:new RegExp("hsla"+P),hsv:new RegExp("hsv"+N),hsva:new RegExp("hsva"+P),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});window.tinycolor=l}(),t(function(){t.fn.spectrum.load&&t.fn.spectrum.processNativeColorInputs()})})?i.apply(e,r):i)||(t.exports=o)}(),org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.colorpicker",ver:"1.0",author:"Chetan Sachdev",title:"Colorpicker Plugin",description:"",publishedDate:"",editor:{main:"editor/plugin.js",dependencies:[{type:"js",src:"editor/libs/spectrum.js"},{type:"css",src:"editor/libs/spectrum.css"},{type:"css",src:"editor/colorpickerplugin.css"}],menu:[]},renderer:{}},org.ekstep.contenteditor.basePlugin.extend({type:"colorpicker",picker:[],initialize:function(){ecEditor.addEventListener("colorpicker:state",this.invoke,this)},invoke:function(t,e){var n=this;"added"!=ecEditor.jQuery("#"+e.id+" input").attr("colorpicker")&&(this.picker[e.id]=ecEditor.jQuery("#"+e.id+" input").spectrum({color:"#FF0000",showInput:!0,showAlpha:!1,preferredFormat:"hex",showButtons:!1,containerClassName:"awesome",clickoutFiresChange:!1,showButtons:!0,change:function(t){e.callback(e.id,t.toHexString()),ecEditor.getService(ServiceConstants.TELEMETRY_SERVICE).interact({type:"click",subtype:"change",target:"colorpicker",pluginid:n.manifest.id,pluginver:n.manifest.ver,objectid:e.id,stage:ecEditor.getCurrentStage().id})},showPaletteOnly:!0,togglePaletteOnly:!0,togglePaletteMoreText:"more",togglePaletteLessText:"less",color:"blanchedalmond",palette:[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]],maxSelectionSize:10,hideAfterPaletteSelect:!0,move:function(t){e.callback(e.id,t.toHexString()),ecEditor.getService(ServiceConstants.TELEMETRY_SERVICE).interact({type:"click",subtype:"move",target:"colorpicker",pluginid:n.manifest.id,pluginver:n.manifest.ver,objectid:e.id,stage:ecEditor.getCurrentStage().id})}}),ecEditor.jQuery("#"+e.id+" input").attr("colorpicker","added")),e&&e.color?ecEditor.jQuery("#"+e.id+" input").spectrum("set",e.color):ecEditor.jQuery("#"+e.id+" input").spectrum("set","#000000")}}))},function(t,e){(function(){$.fn.treePicker=function(t){var e,n,i,r,o,a,s,l,c,u,d,h,f,p,g,m,v,y,E,b,C,T,w,I;return I=$(this),f=[],d=[],b={},0!=$("#"+t.nodeName).length&&$("#"+t.nodeName).remove(),l=$("<div id="+t.nodeName+' class="ui tree-picker small modal">\n  <div class="header">\n    '+t.name+'\n\n    <div class="ui menu">\n      <a class="active tree item">\n        <i class="list icon"></i> Concepts\n      </a>\n      <a class="picked item">\n        <i class="checkmark icon"></i> Selected Concepts <span class="count"></span>\n      </a>\n    </div>\n  </div>\n  <div class="ui search form">\n    <div class="field">\n      <div class="ui icon input">\n        <input type="text" placeholder="Search">\n        <i class="search icon"></i>\n      </div>\n    </div>\n  </div>\n  <div class="content">\n    <div class="ui active inverted dimmer"><div class="ui text loader">Loading data</div></div>\n    <div class="tree-tab">\n      <div style="height: 300px"></div>\n    </div>\n\n    <div class="search-tab">\n    </div>\n\n    <div class="picked-tab">\n    </div>\n  </div>\n  <div class="actions">\n    <a class="pick-search"><i class="checkmark icon"></i> Choose All</a>\n    <a class="unpick-search"><i class="remove icon"></i> Remove All</a>\n    <a class="unpick-picked"><i class="remove icon"></i> Remove All</a>\n    \n    <a class="ui button close cancel">Cancel</a>\n<a class="ui blue button accept">Done</a>\n  </div>\n</div>').modal({duration:200,closable:!1,allowMultiple:!0,onDeny:function(){return n.onCancel&&n.onCancel(),!0}}),i=$(".count",l),b={tree:$(".tree-tab",l),search:$(".search-tab",l),picked:$(".picked-tab",l)},e={pickSearch:$(".actions .pick-search",l),unpickSearch:$(".actions .unpick-search",l),unpickPicked:$(".actions .unpick-picked",l)},n={childrenKey:"nodes",singlePick:!1,minSearchQueryLength:3,hidden:function(t){return!1},disabled:function(t){return!1},displayFormat:function(e){return t.name+" (Выбрано "+e.length+")"},onCancel:function(){return!1}},$.extend(n,t),r=function(){return console.log("Concept selector initializing...."),n.data&&(d=n.data),n.picked?n.picked=n.picked:I.attr("data-picked-ids")&&I.attr("data-picked-ids").split(","),n.picked?d.length?(w(),I.html(n.displayFormat(f))):I.html(n.displayFormat(n.picked)):I.html(n.displayFormat([])),I.unbind("click"),I.on("click",function(t){return console.log("click event received",d),l.modal("show"),E(),d.length?($(".ui.active.dimmer",l).removeClass("active"),a(d)):n.url?s(n.url,{},function(t){return $(".ui.active.dimmer",l).removeClass("active"),a(t)}):void 0}),$(".actions .accept",l).on("click",function(t){return l.modal("hide"),n.onSubmit&&n.onSubmit(f),I.html(n.displayFormat(f))}),e.pickSearch.on("click",function(t){return $(".search-tab .node:not(.picked) .name",l).trigger("click")}),e.unpickSearch.on("click",function(t){return $(".search-tab .node.picked .name",l).trigger("click")}),e.unpickPicked.on("click",function(t){var e;$(".node.picked",l).removeClass("picked"),f=n.picked=[],T(),e=m([],{height:"300px",overflowY:"auto"}),b.picked.show().html(e)}),$(".menu .tree",l).on("click",function(t){return E()}),$(".menu .picked",l).on("click",function(t){return v()}),console.log("Concept selector initialized"),$(".search input",l).on("keyup",function(t){return y($(this).val())})},s=function(t,e,n){return null==e&&(e={}),$.get(t,e,function(t){return d=t.constructor===String?$.parseJSON(t):t,n(d)})},a=function(t){var e;return w(),e=m(t,{height:"300px",overflowY:"auto"}),b.tree.html(e),o(e)},w=function(){var t,e,i,r,o,a;if(n.picked){for(f=[],o=[],t=0,i=(r=n.picked).length;t<i;t++)e=r[t],(a=p(d,function(t){return""+t.id==""+e})).length?o.push(f.push(a[0])):o.push(void 0);return o}},E=function(){return $(".menu .item",l).removeClass("active"),$(".menu .tree",l).addClass("active"),b.tree.show(),b.search.hide(),b.picked.hide(),l.attr("data-mode","tree")},y=function(t){var e,i,r=[];return null!==t&&t.length>=n.minSearchQueryLength?(e=p(d,function(e){return e.name&&e.name.toLowerCase().indexOf(t.toLowerCase())>-1}),ecEditor._.forEach(e,function(t){"selectable"===t.selectable&&r.push(t)}),i=g(e=r,{height:"300px",overflowY:"auto"}),$(".menu .item",l).removeClass("active"),b.search.show().html(i),b.tree.hide(),b.picked.hide(),l.attr("data-mode","search"),o(i),$(".name",i).each(function(){var e,n;return e=$(this).text(),n=RegExp("("+t+")","gi"),e=e.replace(n,"<strong class='search-query'>$1</strong>"),$(this).html(e)})):E()},v=function(){var t;return t=g(f,{height:"300px",overflowY:"auto"}),$(".menu .item",l).removeClass("active"),$(".menu .picked",l).addClass("active"),b.picked.show().html(t),b.tree.hide(),b.search.hide(),l.attr("data-mode","picked"),initializeNodeListForSelected(t)},m=function(t,e){var i,r,o,a,s;for(null==e&&(e={}),s=$('<div class="ui tree-picker tree"></div>').css(e),i=0,r=t.length;i<r;i++)o=t[i],n.hidden(o)||(a=$('<div class="node" data-id="'+o.id+'" data-name="'+o.name+'">\n  <div class="head '+o.selectable+'">\n    <i class="add circle icon"></i>\n    <i class="minus circle icon"></i>\n    <i class="radio icon"></i>\n    <a class="name">'+o.name+'</a>\n    <i class="checkmark icon"></i>\n  </div>\n  <div class="content"></div>\n</div>').appendTo(s),n.disabled(o)&&a.addClass("disabled"),o[n.childrenKey]&&o[n.childrenKey].length?$(".content",a).append(m(o[n.childrenKey])):a.addClass("childless"));return s},g=function(t,e){var i,r,o,a,s;for(null==e&&(e={}),o=$('<div class="ui tree-picker list"></div>').css(e),i=0,r=t.length;i<r;i++)a=t[i],n.hidden(a)||(s=$('<div class="node" data-id="'+a.id+'" data-name="'+a.name+'">\n  <div class="head '+a.selectable+'">\n    <a class="name">'+a.name+'</a>\n    <i class="checkmark icon"></i>\n  </div>\n  <div class="content"></div>\n</div>').appendTo(o),n.disabled(a)&&s.addClass("disabled"));return o},o=function(t){return $(".node",t).each(function(){var t,e,n;return n=$(this),clickHead=$(">.head.selectable",n),e=$(">.head",n),t=$(">.content",n),$(">.name",clickHead).on("click",function(t){return c(n)}),u(n)&&n.addClass("picked"),n.hasClass("childless")||(e.hasClass("selectable")?$(">.icon",e).on("click",function(e){return n.toggleClass("opened"),t.slideToggle()}):$(e).on("click",function(e){return n.toggleClass("opened"),t.slideToggle()})),T()})},initializeNodeListForSelected=function(t){return $(".node",t).each(function(){var t,e,n;return n=$(this),clickHead=$(">.head",n),e=$(">.head",n),t=$(">.content",n),$(">.name",clickHead).on("click",function(t){return c(n)}),u(n)&&n.addClass("picked"),n.hasClass("childless")||$(">.icon",e).on("click",function(e){return n.toggleClass("opened"),t.slideToggle()}),T()})},c=function(t){if(!t.hasClass("disabled"))return n.singlePick&&($(".node.picked",l).removeClass("picked"),f=[]),t.toggleClass("picked"),t.hasClass("picked")?h(t):C(t)},h=function(t){var e;return n.picked=null,e=t.attr("data-id"),f.push({id:e,name:t.attr("data-name")}),T(),$(".node[data-id="+e+"]",l).addClass("picked")},C=function(t){var e;return n.picked=null,e=t.attr("data-id"),f=f.filter(function(t){return""+t.id!=""+e}),T(),$(".node[data-id="+e+"]",l).removeClass("picked")},u=function(t){return f.filter(function(e){return""+e.id===t.attr("data-id")}).length},T=function(){return I.attr("data-picked-ids",f.map(function(t){return t.id})),f.length?(i.closest(".item").addClass("highlighted"),i.html("("+f.length+")")):(i.closest(".item").removeClass("highlighted"),i.html(""))},p=function(t,e){var i,r,o,a;for(a=[],i=0,r=t.length;i<r;i++)e(o=t[i])&&a.push({id:o.id,name:o.name,selectable:o.selectable}),o[n.childrenKey]&&o[n.childrenKey].length&&(a=a.concat(p(o[n.childrenKey],e)));return a},r()}}).call(this),org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.conceptselector",ver:"1.1",author:"Santhosh Vasabhaktula",title:"Concept Selector Plugin",description:"",publishedDate:"",editor:{main:"editor/plugin.js",dependencies:[{type:"js",src:"editor/semantic-ui-tree-picker.js"},{type:"css",src:"editor/semantic-ui-tree-picker.css"}]}},org.ekstep.contenteditor.basePlugin.extend({conceptData:void 0,callback:void 0,limit:500,selectors:[],concepts:[],initialize:function(){ecEditor.addEventListener(this.manifest.id+":init",this.initConceptBrowser,this)},initData:function(t,e){t=t||this;var n=[];function i(t,e){var n=[];return ecEditor._.forEach(e,function(r){if(null!=r.parent&&r.parent[0]==t){var o={};o.id=r.identifier,o.name=r.name,o.selectable="selectable",o.nodes=i(r.identifier,e),n.push(o)}}),ecEditor._.uniqBy(n,"id")}ecEditor.getService("search").search({request:{filters:{objectType:["Dimension","Domain"]}}},function(r,o){!r&&o.data&&o.data.result&&ecEditor._.isArray(o.data.result.domains)&&ecEditor._.forEach(o.data.result.domains,function(e){var r={};r.id=e.identifier,r.name=e.name;var a=[];ecEditor._.forEach(i(e.identifier,o.data.result.dimensions),function(e){var n={};n.id=e.id,n.name=e.name,n.nodes=i(e.id,t.concepts),a.push(n)}),r.nodes=a,n.push(r)}),e&&e()}),this.conceptData=n},getConcept:function(t,e,n,i){n=n||this;var r={request:{filters:{objectType:["Concept"]},offset:t=t||0,limit:e}};ecEditor.getService("search").search(r,function(r,o){!r&&o.data&&o.data.result&&ecEditor._.isArray(o.data.result.concepts)&&(ecEditor._.forEach(o.data.result.concepts,function(t){n.concepts.push(t)}),o.data.result.count>o.data.result.concepts.length+t&&(t+=o.data.result.concepts.length)!==o.data.result.count?n.getConcept(t,e,n,i):i(n))})},initConceptBrowser:function(t,e){var n=this;n.concepts.length?-1==n.selectors.indexOf(e.element)&&setTimeout(function(){ecEditor.jQuery("#"+e.element).treePicker({data:n.conceptData,name:"Concepts",picked:e.selectedConcepts,onSubmit:function(t){e.callback(t),e.selectedConcepts=_.map(t,"id"),n.generateTelemetry({type:"click",subtype:"submit",target:"ConceptSelectorSubmit"})},onCancel:function(){n.initConceptBrowser(t,e)},nodeName:"conceptSelector_"+e.element,minSearchQueryLength:1})},1e3):n.getConcept(0,n.limit,n,function(){n.initData(n,function(){-1==n.selectors.indexOf(e.element)&&setTimeout(function(){ecEditor.jQuery("#"+e.element).treePicker({data:n.conceptData,name:"Concepts",picked:e.selectedConcepts,onSubmit:function(t){e.callback(t),e.selectedConcepts=_.map(t,"id"),n.generateTelemetry({type:"click",subtype:"submit",target:"ConceptSelectorSubmit"})},onCancel:function(){n.initConceptBrowser(t,e)},nodeName:"conceptSelector_"+e.element,minSearchQueryLength:1})},1e3)})})},generateTelemetry:function(t){t&&ecEditor.getService("telemetry").interact({type:t.type,subtype:t.subtype,id:t.target,pageid:org.ekstep.contenteditor.api.getCurrentStage().id||"",target:{id:t.targetid||"",type:"plugin",ver:""},plugin:{id:this.manifest.id,ver:this.manifest.ver,category:"core"},ver:"3.0"})}}))},function(t,e){!function(t,e,n){"use strict";var i,r,o,a,s,l={};function c(t,e,n){var i,r=t.runtimeStyle&&t.runtimeStyle[e],o=t.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(n)&&/^-?\d/.test(n)&&(i=o.left,r&&(t.runtimeStyle.left=t.currentStyle.left),o.left="fontSize"===e?"1em":n||0,n=o.pixelLeft+"px",o.left=i,r&&(t.runtimeStyle.left=r)),/^(thin|medium|thick)$/i.test(n)?n:Math.round(parseFloat(n))+"px"}function u(t){return parseInt(t,10)}function d(t,e,n,i,r,o){var a,s,c,u,d=l.Util.getCSS(e,t,r);if(1===d.length&&(u=d[0],(d=[])[0]=u,d[1]=u),-1!==d[0].toString().indexOf("%"))c=parseFloat(d[0])/100,s=n.width*c,"backgroundSize"!==t&&(s-=(o||i).width*c);else if("backgroundSize"===t)if("auto"===d[0])s=i.width;else if(/contain|cover/.test(d[0])){var h=l.Util.resizeBounds(i.width,i.height,n.width,n.height,d[0]);s=h.width,a=h.height}else s=parseInt(d[0],10);else s=parseInt(d[0],10);return"auto"===d[1]?a=s/i.width*i.height:-1!==d[1].toString().indexOf("%")?(c=parseFloat(d[1])/100,a=n.height*c,"backgroundSize"!==t&&(a-=(o||i).height*c)):a=parseInt(d[1],10),[s,a]}l.Util={},l.Util.log=function(e){l.logging&&t.console&&t.console.log&&t.console.log(e)},l.Util.trimText=(r=String.prototype.trim,function(t){return r?r.apply(t):((t||"")+"").replace(/^\s+|\s+$/g,"")}),l.Util.asFloat=function(t){return parseFloat(t)},o=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,a=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,l.Util.parseTextShadows=function(t){if(!t||"none"===t)return[];for(var e=t.match(o),n=[],i=0;e&&i<e.length;i++){var r=e[i].match(a);n.push({color:r[0],offsetX:r[1]?r[1].replace("px",""):0,offsetY:r[2]?r[2].replace("px",""):0,blur:r[3]?r[3].replace("px",""):0})}return n},l.Util.parseBackgroundImage=function(t){var e,n,i,r,o,a,s,l,c=[],u=0,d=0,h=function(){e&&('"'===n.substr(0,1)&&(n=n.substr(1,n.length-2)),n&&l.push(n),"-"===e.substr(0,1)&&(r=e.indexOf("-",1)+1)>0&&(i=e.substr(0,r),e=e.substr(r)),c.push({prefix:i,method:e.toLowerCase(),value:o,args:l})),l=[],e=i=n=o=""};h();for(var f=0,p=t.length;f<p;f++)if(a=t[f],!(0===u&&" \r\n\t".indexOf(a)>-1)){switch(a){case'"':s?s===a&&(s=null):s=a;break;case"(":if(s)break;if(0===u){u=1,o+=a;continue}d++;break;case")":if(s)break;if(1===u){if(0===d){u=0,o+=a,h();continue}d--}break;case",":if(s)break;if(0===u){h();continue}if(1===u&&0===d&&!e.match(/^url$/i)){l.push(n),n="",o+=a;continue}}o+=a,0===u?e+=a:n+=a}return h(),c},l.Util.Bounds=function(t){var e,n={};return t.getBoundingClientRect&&(e=t.getBoundingClientRect(),n.top=e.top,n.bottom=e.bottom||e.top+e.height,n.left=e.left,n.width=t.offsetWidth,n.height=t.offsetHeight),n},l.Util.OffsetBounds=function(t){var e=t.offsetParent?l.Util.OffsetBounds(t.offsetParent):{top:0,left:0};return{top:t.offsetTop+e.top,bottom:t.offsetTop+t.offsetHeight+e.top,left:t.offsetLeft+e.left,width:t.offsetWidth,height:t.offsetHeight}},l.Util.getCSS=function(t,r,o){void 0!==t&&(i=e.defaultView.getComputedStyle(t,null));var a=i[r];if(/^background(Size|Position)$/.test(r))return function(t,e,i,r){if(t=(t=(t||"").split(","))[r||0]||t[0]||"auto",t=l.Util.trimText(t).split(" "),"backgroundSize"!==i||t[0]&&!t[0].match(/cover|contain|auto/)){if(t[0]=-1===t[0].indexOf("%")?c(e,i+"X",t[0]):t[0],t[1]===n){if("backgroundSize"===i)return t[1]="auto",t;t[1]=t[0]}t[1]=-1===t[1].indexOf("%")?c(e,i+"Y",t[1]):t[1]}return t}(a,t,r,o);if(/border(Top|Bottom)(Left|Right)Radius/.test(r)){var s=a.split(" ");return s.length<=1&&(s[1]=s[0]),s.map(u)}return a},l.Util.resizeBounds=function(t,e,n,i,r){var o,a,s=t/e;return r&&"auto"!==r?n/i<s^"contain"===r?(a=i,o=i*s):(o=n,a=n/s):(o=n,a=i),{width:o,height:a}},l.Util.BackgroundPosition=function(t,e,n,i,r){var o=d("backgroundPosition",t,e,n,i,r);return{left:o[0],top:o[1]}},l.Util.BackgroundSize=function(t,e,n,i){var r=d("backgroundSize",t,e,n,i);return{width:r[0],height:r[1]}},l.Util.Extend=function(t,e){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},l.Util.Children=function(t){var e,i,r;try{e=t.nodeName&&"IFRAME"===t.nodeName.toUpperCase()?t.contentDocument||t.contentWindow.document:(i=t.childNodes,r=[],null!==i&&function(t,e){var i=t.length,r=0;if("number"==typeof e.length)for(var o=e.length;r<o;r++)t[i++]=e[r];else for(;e[r]!==n;)t[i++]=e[r++];t.length=i}(r,i),r)}catch(t){l.Util.log("html2canvas.Util.Children failed with exception: "+t.message),e=[]}return e},l.Util.isTransparent=function(t){return"transparent"===t||"rgba(0, 0, 0, 0)"===t},l.Util.Font=(s={},function(t,e,i){if(s[t+"-"+e]!==n)return s[t+"-"+e];var r,o,a=i.createElement("div"),l=i.createElement("img"),c=i.createElement("span");return a.style.visibility="hidden",a.style.fontFamily=t,a.style.fontSize=e,a.style.margin=0,a.style.padding=0,i.body.appendChild(a),l.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",l.width=1,l.height=1,l.style.margin=0,l.style.padding=0,l.style.verticalAlign="baseline",c.style.fontFamily=t,c.style.fontSize=e,c.style.margin=0,c.style.padding=0,c.appendChild(i.createTextNode("Hidden Text")),a.appendChild(c),a.appendChild(l),r=l.offsetTop-c.offsetTop+1,a.removeChild(c),a.appendChild(i.createTextNode("Hidden Text")),a.style.lineHeight="normal",l.style.verticalAlign="super",o={baseline:r,lineWidth:1,middle:l.offsetTop-a.offsetTop+1},s[t+"-"+e]=o,i.body.removeChild(a),o}),function(){var t=l.Util,n={};l.Generate=n;var i=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];function r(e){return function(n){try{e.addColorStop(n.stop,n.color)}catch(e){t.log(["failed to add color stop: ",e,"; tried to add: ",n])}}}n.parseGradient=function(t,e){var n,r,o,a,s,l,c,u,d,h,f,p,g=i.length;for(r=0;r<g&&!(o=t.match(i[r]));r+=1);if(o)switch(o[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(n={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},s=o[2].match(/\w+/g))for(l=s.length,r=0;r<l;r+=1)switch(s[r]){case"top":n.y0=0,n.y1=e.height;break;case"right":n.x0=e.width,n.x1=0;break;case"bottom":n.y0=e.height,n.y1=0;break;case"left":n.x0=0,n.x1=e.width}if(null===n.x0&&null===n.x1&&(n.x0=n.x1=e.width/2),null===n.y0&&null===n.y1&&(n.y0=n.y1=e.height/2),s=o[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(l=s.length,c=1/Math.max(l-1,1),r=0;r<l;r+=1)(u=s[r].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/))[2]?(a=parseFloat(u[2]),"%"===u[3]?a/=100:a/=e.width):a=r*c,n.colorStops.push({color:u[1],stop:a});break;case"-webkit-gradient":if(n={type:"radial"===o[2]?"circle":o[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},(s=o[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/))&&(n.x0=s[1]*e.width/100,n.y0=s[2]*e.height/100,n.x1=s[3]*e.width/100,n.y1=s[4]*e.height/100),s=o[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(l=s.length,r=0;r<l;r+=1)u=s[r].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),a=parseFloat(u[2]),"from"===u[1]&&(a=0),"to"===u[1]&&(a=1),n.colorStops.push({color:u[3],stop:a});break;case"-moz-linear-gradient":if(n={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},(s=o[2].match(/(\d{1,3})%?\s(\d{1,3})%?/))&&(n.x0=s[1]*e.width/100,n.y0=s[2]*e.height/100,n.x1=e.width-n.x0,n.y1=e.height-n.y0),s=o[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(l=s.length,c=1/Math.max(l-1,1),r=0;r<l;r+=1)(u=s[r].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/))[2]?(a=parseFloat(u[2]),u[3]&&(a/=100)):a=r*c,n.colorStops.push({color:u[1],stop:a});break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(n={type:"circle",x0:0,y0:0,x1:e.width,y1:e.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},(s=o[2].match(/(\d{1,3})%?\s(\d{1,3})%?/))&&(n.cx=s[1]*e.width/100,n.cy=s[2]*e.height/100),s=o[3].match(/\w+/),u=o[4].match(/[a-z\-]*/),s&&u)switch(u[0]){case"farthest-corner":case"cover":case"":d=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2)),h=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2)),f=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2)),p=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2)),n.rx=n.ry=Math.max(d,h,f,p);break;case"closest-corner":d=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2)),h=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2)),f=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2)),p=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2)),n.rx=n.ry=Math.min(d,h,f,p);break;case"farthest-side":"circle"===s[0]?n.rx=n.ry=Math.max(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy):(n.type=s[0],n.rx=Math.max(n.cx,n.x1-n.cx),n.ry=Math.max(n.cy,n.y1-n.cy));break;case"closest-side":case"contain":"circle"===s[0]?n.rx=n.ry=Math.min(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy):(n.type=s[0],n.rx=Math.min(n.cx,n.x1-n.cx),n.ry=Math.min(n.cy,n.y1-n.cy))}if(s=o[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(l=s.length,c=1/Math.max(l-1,1),r=0;r<l;r+=1)(u=s[r].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/))[2]?(a=parseFloat(u[2]),"%"===u[3]?a/=100:a/=e.width):a=r*c,n.colorStops.push({color:u[1],stop:a})}return n},n.Gradient=function(t,n){if(0!==n.width&&0!==n.height){var i,o,a=e.createElement("canvas"),s=a.getContext("2d");if(a.width=n.width,a.height=n.height,i=l.Generate.parseGradient(t,n))switch(i.type){case"linear":o=s.createLinearGradient(i.x0,i.y0,i.x1,i.y1),i.colorStops.forEach(r(o)),s.fillStyle=o,s.fillRect(0,0,n.width,n.height);break;case"circle":o=s.createRadialGradient(i.cx,i.cy,0,i.cx,i.cy,i.rx),i.colorStops.forEach(r(o)),s.fillStyle=o,s.fillRect(0,0,n.width,n.height);break;case"ellipse":var c=e.createElement("canvas"),u=c.getContext("2d"),d=Math.max(i.rx,i.ry),h=2*d;c.width=c.height=h,o=u.createRadialGradient(i.rx,i.ry,0,i.rx,i.ry,d),i.colorStops.forEach(r(o)),u.fillStyle=o,u.fillRect(0,0,h,h),s.fillStyle=i.colorStops[i.colorStops.length-1].color,s.fillRect(0,0,a.width,a.height),s.drawImage(c,i.cx-i.rx,i.cy-i.ry,2*i.rx,2*i.ry)}return a}},n.ListAlpha=function(t){var e,n="";do{e=t%26,n=String.fromCharCode(e+64)+n,t/=26}while(26*t>26);return n},n.ListRoman=function(t){var e,n=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],i=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],r="",o=n.length;if(t<=0||t>=4e3)return t;for(e=0;e<o;e+=1)for(;t>=i[e];)t-=i[e],r+=n[e];return r}}(),l.Parse=function(i,r){t.scroll(0,0);var o=r.elements===n?e.body:r.elements[0],a=o.ownerDocument,s=l.Util,c=s.Support(r,a),u=new RegExp("("+r.ignoreElements+")"),d=a.body,h=s.getCSS,f="___html2canvas___pseudoelement",p=a.createElement("style");function g(t,e){var n=parseInt(h(t,e),10);return isNaN(n)?0:n}function m(t,e,n,i,r,o){"transparent"!==o&&(t.setVariable("fillStyle",o),t.fillRect(e,n,i,r))}function v(t,e,n){if(t.length>0)return e+n.toUpperCase()}function y(t,e,n,i){null!==t&&s.trimText(t).length>0&&i.fillText(t,e,n)}function E(t,e,n,i){var r=h(e,"fontWeight"),o=h(e,"fontFamily"),l=h(e,"fontSize"),c=s.parseTextShadows(h(e,"textShadow"));switch(parseInt(r,10)){case 401:r="bold";break;case 400:r="normal"}if(t.setVariable("fillStyle",i),t.setVariable("font",[h(e,"fontStyle"),h(e,"fontVariant"),r,l,o].join(" ")),t.setVariable("textAlign","left"),c.length&&(t.setVariable("shadowColor",c[0].color),t.setVariable("shadowOffsetX",c[0].offsetX),t.setVariable("shadowOffsetY",c[0].offsetY),t.setVariable("shadowBlur",c[0].blur)),"none"!==n)return s.Font(o,l,a)}function b(t,e,n,i,r){var o;if(c.rangeBounds&&!r)"none"===n&&0===s.trimText(e).length||(o=function(t,e,n){var i=a.createRange();return i.setStart(e,n),i.setEnd(e,n+t.length),i.getBoundingClientRect()}(e,t.node,t.textOffset)),t.textOffset+=e.length;else if(t.node&&"string"==typeof t.node.nodeValue){var l=i?t.node.splitText(e.length):null;o=function(t,e){var n=t.parentNode,i=a.createElement("wrapper"),r=t.cloneNode(!0);i.appendChild(t.cloneNode(!0)),n.replaceChild(i,t);var o=e?s.OffsetBounds(i):s.Bounds(i);return n.replaceChild(r,i),o}(t.node,r),t.node=l}return o}function C(t,e,n){var i,o,a,l=n.ctx,c=h(t,"color"),u=h(t,"textDecoration"),d=h(t,"textAlign"),f={node:e,textOffset:0};s.trimText(e.nodeValue).length>0&&(e.nodeValue=function(t,e){switch(e){case"lowercase":return t.toLowerCase();case"capitalize":return t.replace(/(^|\s|:|-|\(|\))([a-z])/g,v);case"uppercase":return t.toUpperCase();default:return t}}(e.nodeValue,h(t,"textTransform")),d=d.replace(["-webkit-auto"],["auto"]),o=!r.letterRendering&&/^(left|right|justify|auto)$/.test(d)&&(a=h(t,"letterSpacing"),/^(normal|none|0px)$/.test(a))?e.nodeValue.split(/(\b| )/):e.nodeValue.split(""),i=E(l,t,u,c),r.chinese&&o.forEach(function(t,e){/.*[\u4E00-\u9FA5].*$/.test(t)&&((t=t.split("")).unshift(e,1),o.splice.apply(o,t))}),o.forEach(function(t,e){var r=b(f,t,u,e<o.length-1,n.transform.matrix);r&&(y(t,r.left,r.bottom,l),function(t,e,n,i,r){switch(u){case"underline":m(t,n.left,Math.round(n.top+i.baseline+i.lineWidth),n.width,1,r);break;case"overline":m(t,n.left,Math.round(n.top),n.width,1,r);break;case"line-through":m(t,n.left,Math.ceil(n.top+i.middle+i.lineWidth),n.width,1,r)}}(l,0,r,i,c))}))}function T(t,e,n){var i,r,o=e.ctx,c=h(t,"listStyleType");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(c)){if(r=function(t,e){var n,i,r=a.createElement("boundelement");return r.style.display="inline",n=t.style.listStyleType,t.style.listStyleType="none",r.appendChild(a.createTextNode(e)),t.insertBefore(r,t.firstChild),i=s.Bounds(r),t.removeChild(r),t.style.listStyleType=n,i}(t,i=function(t,e){var n,i=function(t){var e=-1,n=1,i=t.parentNode.childNodes;if(t.parentNode){for(;i[++e]!==t;)1===i[e].nodeType&&n++;return n}return-1}(t);switch(e){case"decimal":n=i;break;case"decimal-leading-zero":n=1===i.toString().length?i="0"+i.toString():i.toString();break;case"upper-roman":n=l.Generate.ListRoman(i);break;case"lower-roman":n=l.Generate.ListRoman(i).toLowerCase();break;case"lower-alpha":n=l.Generate.ListAlpha(i).toLowerCase();break;case"upper-alpha":n=l.Generate.ListAlpha(i)}return n+". "}(t,c)),E(o,t,"none",h(t,"color")),"inside"!==h(t,"listStylePosition"))return;o.setVariable("textAlign","left"),y(i,n.left,r.bottom,o)}}function w(t){var e=i[t];return!(!e||!0!==e.succeeded)&&e.img}function I(t,e){var n=Math.max(t.left,e.left),i=Math.max(t.top,e.top);return{left:n,top:i,width:Math.min(t.left+t.width,e.left+e.width)-n,height:Math.min(t.top+t.height,e.top+e.height)-i}}function O(t,e,n,i,r){var o=g(e,"paddingLeft"),a=g(e,"paddingTop"),s=g(e,"paddingRight"),l=g(e,"paddingBottom");$(t,n,0,0,n.width,n.height,i.left+o+r[3].width,i.top+a+r[0].width,i.width-(r[1].width+r[3].width+o+s),i.height-(r[0].width+r[2].width+a+l))}p.innerHTML="."+f+'-before:before { content: "" !important; display: none !important; }.'+f+'-after:after { content: "" !important; display: none !important; }',d.appendChild(p),i=i||{};var D,_=(D=(Math.sqrt(2)-1)/3*4,function(t,e,n,i){var r=n*D,o=i*D,a=t+n,s=e+i;return{topLeft:k({x:t,y:s},{x:t,y:s-o},{x:a-r,y:e},{x:a,y:e}),topRight:k({x:t,y:e},{x:t+r,y:e},{x:a,y:s-o},{x:a,y:s}),bottomRight:k({x:a,y:e},{x:a,y:e+o},{x:t+r,y:s},{x:t,y:s}),bottomLeft:k({x:a,y:s},{x:a-r,y:s},{x:t,y:e+o},{x:t,y:e})}});function k(t,e,n,i){var r=function(t,e,n){return{x:t.x+(e.x-t.x)*n,y:t.y+(e.y-t.y)*n}};return{start:t,startControl:e,endControl:n,end:i,subdivide:function(o){var a=r(t,e,o),s=r(e,n,o),l=r(n,i,o),c=r(a,s,o),u=r(s,l,o),d=r(c,u,o);return[k(t,a,c,d),k(d,u,l,i)]},curveTo:function(t){t.push(["bezierCurve",e.x,e.y,n.x,n.y,i.x,i.y])},curveToReversed:function(i){i.push(["bezierCurve",n.x,n.y,e.x,e.y,t.x,t.y])}}}function R(t,e,n,i,r,o,a){e[0]>0||e[1]>0?(t.push(["line",i[0].start.x,i[0].start.y]),i[0].curveTo(t),i[1].curveTo(t)):t.push(["line",o,a]),(n[0]>0||n[1]>0)&&t.push(["line",r[0].start.x,r[0].start.y])}function x(t,e,n,i,r,o,a){var s=[];return e[0]>0||e[1]>0?(s.push(["line",i[1].start.x,i[1].start.y]),i[1].curveTo(s)):s.push(["line",t.c1[0],t.c1[1]]),n[0]>0||n[1]>0?(s.push(["line",o[0].start.x,o[0].start.y]),o[0].curveTo(s),s.push(["line",a[0].end.x,a[0].end.y]),a[0].curveToReversed(s)):(s.push(["line",t.c2[0],t.c2[1]]),s.push(["line",t.c3[0],t.c3[1]])),e[0]>0||e[1]>0?(s.push(["line",r[1].end.x,r[1].end.y]),r[1].curveToReversed(s)):s.push(["line",t.c4[0],t.c4[1]]),s}function S(t,e){var n=t.drawShape();return e.forEach(function(t,e){n[0===e?"moveTo":t[0]+"To"].apply(null,t.slice(1))}),n}function K(t,e,n){var i,r,o=a.createElement("valuewrap");["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"].forEach(function(e){try{o.style[e]=h(t,e)}catch(t){s.log("html2canvas: Parse: Exception caught in renderFormValue: "+t.message)}}),o.style.borderColor="black",o.style.borderStyle="solid",o.style.display="block",o.style.position="absolute",(/^(submit|reset|button|text|password)$/.test(t.type)||"SELECT"===t.nodeName)&&(o.style.lineHeight=h(t,"height")),o.style.top=e.top+"px",o.style.left=e.left+"px",(i="SELECT"===t.nodeName?(t.options[t.selectedIndex]||0).text:t.value)||(i=t.placeholder),r=a.createTextNode(i),o.appendChild(r),d.appendChild(o),C(t,r,n),d.removeChild(o)}function $(t){t.drawImage.apply(t,Array.prototype.slice.call(arguments,1))}function A(n,i){var r=t.getComputedStyle(n,i);if(r&&r.content&&"none"!==r.content&&"-moz-alt-content"!==r.content&&"none"!==r.display){var o=r.content+"",a=o.substr(0,1);a===o.substr(o.length-1)&&a.match(/'|"/)&&(o=o.substr(1,o.length-2));var l="url"===o.substr(0,3),c=e.createElement(l?"img":"span");return c.className=f+"-before "+f+"-after",Object.keys(r).filter(N).forEach(function(t){try{c.style[t]=r[t]}catch(e){s.log(["Tried to assign readonly property ",t,"Error:",e])}}),l?c.src=s.parseBackgroundImage(o)[0].args[0]:c.innerHTML=o,c}}function N(e){return isNaN(t.parseInt(e,10))}function P(t,e,n,i){var r=Math.round(i.left+n.left),o=Math.round(i.top+n.top);t.createPattern(e),t.translate(r,o),t.fill(),t.translate(-r,-o)}function L(t,e,n,i,r,o,a,s){var l=[];l.push(["line",Math.round(r),Math.round(o)]),l.push(["line",Math.round(r+a),Math.round(o)]),l.push(["line",Math.round(r+a),Math.round(s+o)]),l.push(["line",Math.round(r),Math.round(s+o)]),S(t,l),t.save(),t.clip(),P(t,e,n,i),t.restore()}function F(t,e,n,i,r){var o=s.BackgroundSize(t,e,i,r),l=s.BackgroundPosition(t,e,i,r,o),c=h(t,"backgroundRepeat").split(",").map(s.trimText);switch(i=function(t,e){if(t.width===e.width&&t.height===e.height)return t;var n=a.createElement("canvas");return n.width=e.width,n.height=e.height,$(n.getContext("2d"),t,0,0,t.width,t.height,0,0,e.width,e.height),n}(i,o),c=c[r]||c[0]){case"repeat-x":L(n,i,l,e,e.left,e.top+l.top,99999,i.height);break;case"repeat-y":L(n,i,l,e,e.left+l.left,e.top,i.width,99999);break;case"no-repeat":L(n,i,l,e,e.left+l.left,e.top+l.top,i.width,i.height);break;default:P(n,i,l,{top:e.top,left:e.left,width:i.width,height:i.height})}}function M(t){return t.replace("px","")}var j,B,q,H=/(matrix)\((.+)\)/;function V(t,e,n,i){var o,l,c,u=(o=e?n.width:Math.max(Math.max(a.body.scrollWidth,a.documentElement.scrollWidth),Math.max(a.body.offsetWidth,a.documentElement.offsetWidth),Math.max(a.body.clientWidth,a.documentElement.clientWidth)),l=e?n.height:Math.max(Math.max(a.body.scrollHeight,a.documentElement.scrollHeight),Math.max(a.body.offsetHeight,a.documentElement.offsetHeight),Math.max(a.body.clientHeight,a.documentElement.clientHeight)),{storage:c=[],width:o,height:l,clip:function(){c.push({type:"function",name:"clip",arguments:arguments})},translate:function(){c.push({type:"function",name:"translate",arguments:arguments})},fill:function(){c.push({type:"function",name:"fill",arguments:arguments})},save:function(){c.push({type:"function",name:"save",arguments:arguments})},restore:function(){c.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){c.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){c.push({type:"function",name:"createPattern",arguments:arguments})},drawShape:function(){var t=[];return c.push({type:"function",name:"drawShape",arguments:t}),{moveTo:function(){t.push({name:"moveTo",arguments:arguments})},lineTo:function(){t.push({name:"lineTo",arguments:arguments})},arcTo:function(){t.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){t.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){t.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){c.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){c.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(t,e){return c.push({type:"variable",name:t,arguments:e}),e}}),d={ctx:u,opacity:function(t,e,n){return u.setVariable("globalAlpha",h(e,"opacity")*(n?n.opacity:1))}(0,t,e),cssPosition:h(t,"position"),borders:function(t){return["Top","Right","Bottom","Left"].map(function(e){return{width:g(t,"border"+e+"Width"),color:h(t,"border"+e+"Color")}})}(t),transform:i,clip:e&&e.clip?s.Extend({},e.clip):null};return function(t,e,n){var i,r="static"!==e.cssPosition,o=r?h(t,"zIndex"):"auto",a=h(t,"opacity"),s="none"!==h(t,"cssFloat");e.zIndex=i={zindex:o,children:[]},i.isPositioned=r,i.isFloated=s,i.opacity=a,i.ownStacking="auto"!==o||a<1,n&&n.zIndex.children.push(e)}(t,d,e),!0===r.useOverflow&&!0===/(hidden|scroll|auto)/.test(h(t,"overflow"))&&!1===/(BODY)/i.test(t.nodeName)&&(d.clip=d.clip?I(d.clip,n):n),d}function U(t,e,n,i){var r,o=function(t,e){var n,i=h(t,"transform")||h(t,"-webkit-transform")||h(t,"-moz-transform")||h(t,"-ms-transform")||h(t,"-o-transform"),r=h(t,"transform-origin")||h(t,"-webkit-transform-origin")||h(t,"-moz-transform-origin")||h(t,"-ms-transform-origin")||h(t,"-o-transform-origin")||"0px 0px";if(r=r.split(" ").map(M).map(s.asFloat),i&&"none"!==i){var o=i.match(H);if(o)switch(o[1]){case"matrix":n=o[2].split(",").map(s.trimText).map(s.asFloat)}}return{origin:r,matrix:n}}(t),a=function(t,e){var n=e.matrix?s.OffsetBounds(t):s.Bounds(t);return e.origin[0]+=n.left,e.origin[1]+=n.top,n}(t,o),l=V(t,e,a,o),c=l.borders,d=l.ctx,p=function(t,e,n){var i={left:e.left+t[3].width,top:e.top+t[0].width,width:e.width-(t[1].width+t[3].width),height:e.height-(t[0].width+t[2].width)};return n&&(i=I(i,n)),i}(c,a,l.clip),g=function(t,e,n){var i,r,o,a,s,l,c=e.left,u=e.top,d=e.width,f=e.height,p=function(t){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(e){return h(t,"border"+e+"Radius")})}(t),g=function(t,e,n){var i=t.left,r=t.top,o=t.width,a=t.height,s=e[0][0],l=e[0][1],c=e[1][0],u=e[1][1],d=e[2][0],h=e[2][1],f=e[3][0],p=e[3][1],g=o-c,m=a-h,v=o-d,y=a-p;return{topLeftOuter:_(i,r,s,l).topLeft.subdivide(.5),topLeftInner:_(i+n[3].width,r+n[0].width,Math.max(0,s-n[3].width),Math.max(0,l-n[0].width)).topLeft.subdivide(.5),topRightOuter:_(i+g,r,c,u).topRight.subdivide(.5),topRightInner:_(i+Math.min(g,o+n[3].width),r+n[0].width,g>o+n[3].width?0:c-n[3].width,u-n[0].width).topRight.subdivide(.5),bottomRightOuter:_(i+v,r+m,d,h).bottomRight.subdivide(.5),bottomRightInner:_(i+Math.min(v,o+n[3].width),r+Math.min(m,a+n[0].width),Math.max(0,d-n[1].width),Math.max(0,h-n[2].width)).bottomRight.subdivide(.5),bottomLeftOuter:_(i,r+y,f,p).bottomLeft.subdivide(.5),bottomLeftInner:_(i+n[3].width,r+y,Math.max(0,f-n[3].width),Math.max(0,p-n[2].width)).bottomLeft.subdivide(.5)}}(e,p,n),m={clip:function(t,e,n,i,r){var o=[];switch(h(t,"backgroundClip")){case"content-box":case"padding-box":R(o,i[0],i[1],e.topLeftInner,e.topRightInner,r.left+n[3].width,r.top+n[0].width),R(o,i[1],i[2],e.topRightInner,e.bottomRightInner,r.left+r.width-n[1].width,r.top+n[0].width),R(o,i[2],i[3],e.bottomRightInner,e.bottomLeftInner,r.left+r.width-n[1].width,r.top+r.height-n[2].width),R(o,i[3],i[0],e.bottomLeftInner,e.topLeftInner,r.left+n[3].width,r.top+r.height-n[2].width);break;default:R(o,i[0],i[1],e.topLeftOuter,e.topRightOuter,r.left,r.top),R(o,i[1],i[2],e.topRightOuter,e.bottomRightOuter,r.left+r.width,r.top),R(o,i[2],i[3],e.bottomRightOuter,e.bottomLeftOuter,r.left+r.width,r.top+r.height),R(o,i[3],i[0],e.bottomLeftOuter,e.topLeftOuter,r.left,r.top+r.height)}return o}(t,g,n,p,e),borders:[]};for(i=0;i<4;i++)if(n[i].width>0){switch(r=c,o=u,a=d,s=f-n[2].width,i){case 0:s=n[0].width,l=x({c1:[r,o],c2:[r+a,o],c3:[r+a-n[1].width,o+s],c4:[r+n[3].width,o+s]},p[0],p[1],g.topLeftOuter,g.topLeftInner,g.topRightOuter,g.topRightInner);break;case 1:l=x({c1:[(r=c+d-n[1].width)+(a=n[1].width),o],c2:[r+a,o+s+n[2].width],c3:[r,o+s],c4:[r,o+n[0].width]},p[1],p[2],g.topRightOuter,g.topRightInner,g.bottomRightOuter,g.bottomRightInner);break;case 2:l=x({c1:[r+a,(o=o+f-n[2].width)+(s=n[2].width)],c2:[r,o+s],c3:[r+n[3].width,o],c4:[r+a-n[3].width,o]},p[2],p[3],g.bottomRightOuter,g.bottomRightInner,g.bottomLeftOuter,g.bottomLeftInner);break;case 3:a=n[3].width,l=x({c1:[r,o+s+n[2].width],c2:[r,o],c3:[r+a,o+n[0].width],c4:[r+a,o+s]},p[3],p[0],g.bottomLeftOuter,g.bottomLeftInner,g.topLeftOuter,g.topLeftInner)}m.borders.push({args:l,color:n[i].color})}return m}(t,a,c),v=u.test(t.nodeName)?"#efefef":h(t,"backgroundColor");switch(S(d,g.clip),d.save(),d.clip(),p.height>0&&p.width>0&&!i?(function(t,e,n){m(d,e.left,e.top,e.width,e.height,n)}(0,a,v),function(t,e,n){for(var i,r=h(t,"backgroundImage"),o=s.parseBackgroundImage(r),a=o.length;a--;)(r=o[a]).args&&0!==r.args.length&&((i=w("url"===r.method?r.args[0]:r.value))?F(t,e,n,i,a):s.log("html2canvas: Error loading background:",r))}(t,p,d)):i&&(l.backgroundColor=v),d.restore(),g.borders.forEach(function(t){!function(t,e,n){"transparent"!==n&&(t.setVariable("fillStyle",n),S(t,e),t.fill())}(d,t.args,t.color)}),n||function(t,e){var n=A(t,":before"),i=A(t,":after");(n||i)&&(n&&(t.className+=" "+f+"-before",t.parentNode.insertBefore(n,t),z(n,e,!0),t.parentNode.removeChild(n),t.className=t.className.replace(f+"-before","").trim()),i&&(t.className+=" "+f+"-after",t.appendChild(i),z(i,e,!0),t.removeChild(i),t.className=t.className.replace(f+"-after","").trim()))}(t,l),t.nodeName){case"IMG":(r=w(t.getAttribute("src")))?O(d,t,r,a,c):s.log("html2canvas: Error loading <img>:"+t.getAttribute("src"));break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(t.type)&&(t.value||t.placeholder||"").length>0&&K(t,a,l);break;case"TEXTAREA":(t.value||t.placeholder||"").length>0&&K(t,a,l);break;case"SELECT":(t.options||t.placeholder||"").length>0&&K(t,a,l);break;case"LI":T(t,l,p);break;case"CANVAS":O(d,t,t,a,c)}return l}function z(t,e,n){(function(t){return"none"!==h(t,"display")&&"hidden"!==h(t,"visibility")&&!t.hasAttribute("data-html2canvas-ignore")})(t)&&(e=U(t,e,n,!1)||e,u.test(t.nodeName)||W(t,e,n))}function W(t,e,n){s.Children(t).forEach(function(i){i.nodeType===i.ELEMENT_NODE?z(i,e,n):i.nodeType===i.TEXT_NODE&&C(t,i,e)})}return j=h(e.documentElement,"backgroundColor"),W(o,q=U(o,null,!1,B=s.isTransparent(j)&&o===e.body)),B&&(j=q.backgroundColor),d.removeChild(p),{backgroundColor:j,stack:q}},l.Preload=function(i){var r,o,a,s,c={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},u=l.Util,d=0,h=i.elements[0]||e.body,f=h.ownerDocument,p=h.getElementsByTagName("img"),g=p.length,m=f.createElement("a"),v=(new Image).crossOrigin!==n;function y(){u.log("html2canvas: start: images: "+c.numLoaded+" / "+c.numTotal+" (failed: "+c.numFailed+")"),!c.firstRun&&c.numLoaded>=c.numTotal&&(u.log("Finished loading images: # "+c.numTotal+" (failed: "+c.numFailed+")"),"function"==typeof i.complete&&i.complete(c))}function E(e,r,o){var a,s,l=i.proxy;m.href=e,e=m.href,a="html2canvas_"+d++,o.callbackname=a,l.indexOf("?")>-1?l+="&":l+="?",l+="url="+encodeURIComponent(e)+"&callback="+a,s=f.createElement("script"),t[a]=function(e){"error:"===e.substring(0,6)?(o.succeeded=!1,c.numLoaded++,c.numFailed++,y()):(w(r,o),r.src=e),t[a]=n;try{delete t[a]}catch(t){}s.parentNode.removeChild(s),s=null,delete o.script,delete o.callbackname},s.setAttribute("type","text/javascript"),s.setAttribute("src",l),o.script=s,t.document.body.appendChild(s)}function b(e,n){var i=t.getComputedStyle(e,n),r=i.content;"url"===r.substr(0,3)&&o.loadImage(l.Util.parseBackgroundImage(r)[0].args[0]),T(i.backgroundImage,e)}function C(t){return t&&t.method&&t.args&&t.args.length>0}function T(t,e){var i;l.Util.parseBackgroundImage(t).filter(C).forEach(function(t){"url"===t.method?o.loadImage(t.args[0]):t.method.match(/\-?gradient$/)&&(i===n&&(i=l.Util.Bounds(e)),function(t,e){var i=l.Generate.Gradient(t,e);i!==n&&(c[t]={img:i,succeeded:!0},c.numTotal++,c.numLoaded++,y())}(t.value,i))})}function w(e,r){e.onload=function(){r.timer!==n&&t.clearTimeout(r.timer),c.numLoaded++,r.succeeded=!0,e.onerror=e.onload=null,y()},e.onerror=function(){if("anonymous"===e.crossOrigin&&(t.clearTimeout(r.timer),i.proxy)){var n=e.src;return e=new Image,r.img=e,e.src=n,void E(e.src,e,r)}c.numLoaded++,c.numFailed++,r.succeeded=!1,e.onerror=e.onload=null,y()}}for(m.href=t.location.href,r=m.protocol+m.host,o={loadImage:function(t){var e,o,a;t&&c[t]===n&&(e=new Image,t.match(/data:image\/.*;base64,/i)?(e.src=t.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),o=c[t]={img:e},c.numTotal++,w(e,o)):(a=t,m.href=a,m.href=m.href,m.protocol+m.host===r||!0===i.allowTaint?(o=c[t]={img:e},c.numTotal++,w(e,o),e.src=t):v&&!i.allowTaint&&i.useCORS?(e.crossOrigin="anonymous",o=c[t]={img:e},c.numTotal++,w(e,o),e.src=t):i.proxy&&(o=c[t]={img:e},c.numTotal++,E(t,e,o))))},cleanupDOM:function(r){var o,a;if(!c.cleanupDone){for(a in r&&"string"==typeof r?u.log("html2canvas: Cleanup because: "+r):u.log("html2canvas: Cleanup after timeout: "+i.timeout+" ms."),c)if(c.hasOwnProperty(a)&&"object"==typeof(o=c[a])&&o.callbackname&&o.succeeded===n){t[o.callbackname]=n;try{delete t[o.callbackname]}catch(t){}o.script&&o.script.parentNode&&(o.script.setAttribute("src","about:blank"),o.script.parentNode.removeChild(o.script)),c.numLoaded++,c.numFailed++,u.log("html2canvas: Cleaned up failed img: '"+a+"' Steps: "+c.numLoaded+" / "+c.numTotal)}t.stop!==n?t.stop():e.execCommand!==n&&e.execCommand("Stop",!1),e.close!==n&&e.close(),c.cleanupDone=!0,r&&"string"==typeof r||y()}},renderingDone:function(){s&&t.clearTimeout(s)}},i.timeout>0&&(s=t.setTimeout(o.cleanupDOM,i.timeout)),u.log("html2canvas: Preload starts: finding background-images"),c.firstRun=!0,function t(e){var i,r=!1;try{u.Children(e).forEach(t)}catch(t){}try{r=e.nodeType}catch(t){r=!1,u.log("html2canvas: failed to access some element's nodeType - Exception: "+t.message)}if(1===r||r===n){b(i=e,":before"),b(i,":after");try{T(u.getCSS(e,"backgroundImage"),e)}catch(t){u.log("html2canvas: failed to get background-image - Exception: "+t.message)}T(e)}}(h),u.log("html2canvas: Preload: Finding images"),a=0;a<g;a+=1)o.loadImage(p[a].getAttribute("src"));return c.firstRun=!1,u.log("html2canvas: Preload: Done."),c.numTotal===c.numLoaded&&y(),o},l.Renderer=function(t,i){return function(t){var e;if("string"==typeof i.renderer&&l.Renderer[t]!==n)e=l.Renderer[t](i);else{if("function"!=typeof t)throw new Error("Unknown renderer");e=t(i)}if("function"!=typeof e)throw new Error("Invalid renderer defined");return e}(i.renderer)(t,i,e,function(t){var e=[];return function t(n){Object.keys(n).sort().forEach(function(i){var r=[],o=[],a=[],s=[];n[i].forEach(function(t){t.node.zIndex.isPositioned||t.node.zIndex.opacity<1?a.push(t):t.node.zIndex.isFloated?o.push(t):r.push(t)}),function t(e){e.forEach(function(e){s.push(e),e.children&&t(e.children)})}(r.concat(o,a)),s.forEach(function(n){n.context?t(n.context):e.push(n.node)})})}(function(t){var e={};return function t(e,i,r){var o="auto"===i.zIndex.zindex?0:Number(i.zIndex.zindex),a=e,s=i.zIndex.isPositioned,l=i.zIndex.isFloated,c={node:i},u=r;i.zIndex.ownStacking?(a=c.context={"!":[{node:i,children:[]}]},u=n):(s||l)&&(u=c.children=[]),0===o&&r?r.push(c):(e[o]||(e[o]=[]),e[o].push(c)),i.zIndex.children.forEach(function(e){t(a,e,u)})}(e,t),e}(t)),e}(t.stack),l)},l.Util.Support=function(t,e){return{rangeBounds:(o=!1,e.createRange&&(i=e.createRange()).getBoundingClientRect&&((r=e.createElement("boundtest")).style.height="123px",r.style.display="block",e.body.appendChild(r),i.selectNode(r),123===i.getBoundingClientRect().height&&(o=!0),e.body.removeChild(r)),o),svgRendering:t.svgRendering&&function(){var t=new Image,i=e.createElement("canvas"),r=i.getContext!==n&&i.getContext("2d");if(!1===r)return!1;i.width=i.height=10,t.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{r.drawImage(t,0,0),i.toDataURL()}catch(t){return!1}return l.Util.log("html2canvas: Parse: SVG powered rendering available"),!0}()};var i,r,o},t.html2canvas=function(e,n){var i,r,o={logging:!1,elements:e=e.length?e:[e],background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,chinese:!1,width:null,height:null,taintTest:!0,renderer:"Canvas"};return o=l.Util.Extend(n,o),l.logging=o.logging,o.complete=function(t){"function"==typeof o.onpreloaded&&!1===o.onpreloaded(t)||(i=l.Parse(t,o),"function"==typeof o.onparsed&&!1===o.onparsed(i)||(r=l.Renderer(i,o),"function"==typeof o.onrendered&&o.onrendered(r)))},t.setTimeout(function(){l.Preload(o)},0),{render:function(t,e){return l.Renderer(t,l.Util.Extend(e,o))},parse:function(t,e){return l.Parse(t,l.Util.Extend(e,o))},preload:function(t){return l.Preload(l.Util.Extend(t,o))},log:l.Util.log}},t.html2canvas.log=l.Util.log,t.html2canvas.Renderer={Canvas:n},l.Renderer.Canvas=function(t){t=t||{};var i=e,r=[],o=e.createElement("canvas"),a=o.getContext("2d"),s=l.Util,c=t.canvas||i.createElement("canvas");function u(e,n){switch(n.type){case"variable":e[n.name]=n.arguments;break;case"function":switch(n.name){case"createPattern":if(n.arguments[0].width>0&&n.arguments[0].height>0)try{e.fillStyle=e.createPattern(n.arguments[0],"repeat")}catch(t){s.log("html2canvas: Renderer: Error creating pattern",t.message)}break;case"drawShape":!function(t,e){t.beginPath(),e.forEach(function(e){t[e.name].apply(t,e.arguments)}),t.closePath()}(e,n.arguments);break;case"drawImage":n.arguments[8]>0&&n.arguments[7]>0&&(!t.taintTest||t.taintTest&&function(t){if(-1===r.indexOf(t.arguments[0].src)){a.drawImage(t.arguments[0],0,0);try{a.getImageData(0,0,1,1)}catch(t){return o=i.createElement("canvas"),a=o.getContext("2d"),!1}r.push(t.arguments[0].src)}return!0}(n))&&e.drawImage.apply(e,n.arguments);break;default:e[n.name].apply(e,n.arguments)}}}return function(t,e,i,r,o){var a,l,d,h=c.getContext("2d"),f=t.stack;return c.width=c.style.width=e.width||f.ctx.width,c.height=c.style.height=e.height||f.ctx.height,d=h.fillStyle,h.fillStyle=s.isTransparent(f.backgroundColor)&&e.background!==n?e.background:t.backgroundColor,h.fillRect(0,0,c.width,c.height),h.fillStyle=d,r.forEach(function(t){h.textBaseline="bottom",h.save(),t.transform.matrix&&(h.translate(t.transform.origin[0],t.transform.origin[1]),h.transform.apply(h,t.transform.matrix),h.translate(-t.transform.origin[0],-t.transform.origin[1])),t.clip&&(h.beginPath(),h.rect(t.clip.left,t.clip.top,t.clip.width,t.clip.height),h.clip()),t.ctx.storage&&t.ctx.storage.forEach(function(t){u(h,t)}),h.restore()}),s.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),1===e.elements.length&&"object"==typeof e.elements[0]&&"BODY"!==e.elements[0].nodeName?(l=o.Util.Bounds(e.elements[0]),(a=i.createElement("canvas")).width=Math.ceil(l.width),a.height=Math.ceil(l.height),(h=a.getContext("2d")).drawImage(c,l.left,l.top,l.width,l.height,0,0,l.width,l.height),c=null,a):c}}}(window,document),org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.stage",ver:"1.0",author:"Santhosh Vasabhaktula",title:"Stage Plugin",description:"",publishedDate:"",editor:{main:"editor/plugin.js",dependencies:[{type:"js",src:"editor/libs/html2canvas.js"}],help:{src:"editor/help.md",dataType:"text"},menu:[{id:"stage",category:"main",type:"icon",toolTip:"Add Slide",title:"Stage",iconClass:"icon-newstage icon",onclick:{id:"stage:create",data:{position:"afterCurrent"}},submenu:[{id:"beginning",type:"icon",title:"Beginning",iconClass:"fast backward icon",onclick:{id:"stage:create",data:{position:"beginning"}}},{id:"end",type:"icon",title:"End",iconClass:"fast forward icon",onclick:{id:"stage:create",data:{position:"end"}}},{id:"front",type:"icon",title:"After current",iconClass:"forward icon",onclick:{id:"stage:create",data:{position:"afterCurrent"}}},{id:"back",type:"icon",title:"Before current",iconClass:"backward icon",onclick:{id:"stage:create",data:{position:"beforeCurrent"}}}]}],configManifest:[{propertyName:"genieControls",title:"Show Player Control",description:"Toggle genie controls",dataType:"boolean",required:!0,defaultValue:!0},{propertyName:"instructions",title:"Teacher Instructions",description:"Teacher Instructions",dataType:"textarea",required:!0,defaultValue:""},{propertyName:"color",title:"Background color",description:"Slide Background color",dataType:"colorpicker",required:!0,defaultValue:"#FFFFFF"}]},dependencies:[{type:"plugin",plugin:"org.ekstep.navigation",ver:"1.0",scope:"renderer"}]},org.ekstep.contenteditor.basePlugin.extend({type:"stage",thumbnail:void 0,onclick:void 0,currentObject:void 0,canvas:void 0,initialize:function(){ecEditor.addEventListener("stage:create",this.createStage,this),ecEditor.addEventListener("object:modified",this.modified,this),ecEditor.addEventListener("stage:modified",this.modified,this),ecEditor.addEventListener("object:selected",this.objectSelected,this),ecEditor.addEventListener("object:removed",this.objectRemoved,this)},createStage:function(t,e){ecEditor.instantiatePlugin(this.manifest.id,e)},newInstance:function(){if(this.onclick={id:"stage:select",data:{stageId:this.id}},this.ondelete={id:"stage:delete",data:{stageId:this.id}},this.duplicate={id:"stage:duplicate",data:{stageId:this.id}},this.editorData.stageECML){var t=JSON.parse(this.editorData.stageECML.config.__cdata);this.addConfig("color",t.color||"#FFFFFF"),this.setSlideBackground(t.color||"#FFFFFF")}else this.addConfig("color",this.config.color||"#FFFFFF");ecEditor.addStage(this),this.attributes={x:0,y:0,w:720,h:405,id:this.id},this.addConfig("instructions",this.getParam("instructions")||"")},getOnClick:function(){return{id:"stage:select",data:{stageId:this.id,prevStageId:ecEditor.getCurrentStage().id}}},setCanvas:function(t){this.canvas=t},addChild:function(t){this.children.push(t),t.editorObj&&(this.canvas.add(t.editorObj),t.editorObj.selectable&&this.canvas.setActiveObject(t.editorObj),this.setThumbnail(),ecEditor.dispatchEvent("stage:modified",{id:t.id}))},setThumbnail:function(){if(org.ekstep.contenteditor.stageManager.contentLoading)this.thumbnail=this.canvas.toDataURL({format:"jpeg",quality:.1});else{var t=ecEditor.getCurrentStage();t.canvas,html2canvas($("#canvas-wrapper"),{onrendered:function(e){t.thumbnail=e.toDataURL({format:"jpeg",quality:.1}),org.ekstep.contenteditor.stageManager.thumbnails[t.id]=t.thumbnail;var n=ecEditor.getAngularScope();ecEditor.ngSafeApply(n)}})}},updateZIndex:function(){var t=this;ecEditor._.forEach(this.children,function(e){e.editorObj?e.attributes["z-index"]=t.canvas.getObjects().indexOf(e.editorObj):e.attributes["z-index"]=_.isUndefined(e.attributes["z-index"])?t.canvas.getObjects().length:e.attributes["z-index"]})},render:function(t){var e=this;org.ekstep.contenteditor.stageManager.clearCanvas(t),this.children=ecEditor._.sortBy(this.children,[function(t){return t.getAttribute("z-index")}]),ecEditor._.forEach(this.children,function(e){e.render(t)}),this.config.color&&t.setBackgroundColor(this.config.color,t.renderAll.bind(t)),t.renderAll(),ecEditor.dispatchEvent("stage:render:complete",{stageId:this.id}),org.ekstep.contenteditor.stageManager.contentLoading?this.thumbnail=t.toDataURL({format:"jpeg",quality:.1}):(e=this,html2canvas($("#canvas-wrapper"),{onrendered:function(t){e.thumbnail=t.toDataURL({format:"jpeg",quality:.1});var n=ecEditor.getAngularScope();ecEditor.ngSafeApply(n)},timeout:0})),ecEditor.refreshStages(),ecEditor.dispatchEvent("stage:render:complete",{stageId:this.id})},modified:function(t,e){ecEditor.getCurrentStage().updateZIndex(),ecEditor.getCurrentStage().setThumbnail(),ecEditor.refreshStages()},objectSelected:function(t,e){if(!ecEditor._.isUndefined(this.currentObject)&&this.currentObject!==e.id){var n=ecEditor.getPluginInstance(this.currentObject);ecEditor.getCanvas().trigger("selection:cleared",{target:n.editorObj})}this.currentObject=e.id},objectRemoved:function(t,e){this.currentObject=void 0},destroyOnLoad:function(t,e,n){var i=this;t==i.children.length?(e.clear(),i.render(e),$("#"+i.id).remove(),n()):setTimeout(function(){i.destroyOnLoad(t,e,n)},1e3)},getConfigManifest:function(){return this.manifest.editor.configManifest},getConfig:function(){var t=this._super();return t.genieControls=ecEditor.getAngularScope().showGenieControls,t},onConfigChange:function(t,e){switch(t){case"instructions":this.addParam("instructions",e);break;case"genieControls":if(e!==ecEditor.getAngularScope().showGenieControls){var n=ecEditor.getAngularScope();ecEditor.ngSafeApply(n,function(){n.toggleGenieControl()})}break;case"color":this.setSlideBackground(e),ecEditor.dispatchEvent("stage:modified"),ecEditor.render(),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()})}},setSlideBackground:function(t){var e;ecEditor._.forEach(ecEditor.getCurrentStage().children,function(t){"slidebackground"==t.attributes.subtype&&(e=t)}),e?e.attributes.fill=t:"#FFFFFF"!==t&&ecEditor.instantiatePlugin("org.ekstep.shape",{type:"rect",subtype:"slidebackground",x:0,y:0,fill:t,w:100,h:100,stroke:"rgba(255, 255, 255, 0)",strokeWidth:1,opacity:1,"z-index":-999},ecEditor.getCurrentStage()),ecEditor.getCurrentStage().canvas.backgroundColor=t,this.config.color=t},updateThumbnail:function(){$("<canvas>").attr({id:this.id}).css({width:"720px",height:"405px"}).appendTo("#thumbnailCanvasContainer"),canvas=new fabric.Canvas(this.id,{backgroundColor:"#FFFFFF",preserveObjectStacking:!0,width:720,height:405}),this.render(canvas),ecEditor.jQuery("#"+this.id).remove()}}))},function(t,e,n){fabric.ITextbox=fabric.util.createClass(fabric.Textbox,fabric.Observable,{type:"i-textbox",initialize:function(t,e){this.ctx=fabric.util.createCanvasElement().getContext("2d"),this.callSuper("initialize",t,e)},_measureText:function(t,e,n,i){return t.measureText(e).width},_measureLine:function(t,e){var n,i=this._textLines[e],r=t.measureText(i).width,o=0;return 0!==this.charSpacing&&(o=(i.split("").length-1)*this._getWidthOfCharSpacing()),(n=r+o)>0?n:0},_setTextStyles:function(t){t.textAlign="left",t.font=this._getFontDeclaration()}}),fabric.ITextbox.fromObject=function(t){return new fabric.ITextbox(t.text,fabric.util.object.clone(t))},fabric.ITextbox.instances=[];var i=function(){var t=ecEditor.jQuery("#authoringTextEditor"),e=ecEditor.jQuery("#authoringTextEditorBtn"),n=ecEditor.jQuery("#authoringTextEditorCancel"),i=ecEditor.jQuery("<div>",{style:"margin-top: 6px; margin-right: 6px;"});function r(){ecEditor.getPluginInstance(pluginId).editorObj.remove(),ecEditor.render(),ecEditor.dispatchEvent("object:modified",{id:pluginId})}function o(){$buttonGrp.hide(),n.hide(),t.hide(),e.hide(),ecEditor.jQuery("#toolbarOptions").show()}function a(t){t&&ecEditor.getService(ServiceConstants.TELEMETRY_SERVICE).interact({type:t.type,subtype:t.subtype,target:t.target,pluginid:"org.ekstep.text",pluginver:"1.0",objectid:"",stage:ecEditor.getCurrentStage().id})}return $buttonGrp=ecEditor.jQuery("<div>",{class:"ui buttons",id:"texteditorBtnGrp",style:"float: right;"}),$orBtn=ecEditor.jQuery("<div>",{class:"or"}),pluginId=void 0,editorText=void 0,{showEditor:function(s){if(pluginId=s,editorText=ecEditor.getPluginInstance(pluginId).editorObj.text,t.length)t.show().val(editorText);else{var l=ecEditor.jQuery("<div>",{class:"ui form",id:"textEditorContainer",style:"margin-left: 10px; margin-top: 10px;"});l.css({top:ecEditor.jQuery("#canvas").offset().top,left:ecEditor.jQuery("#canvas").offset().left,position:"absolute"});var c=ecEditor.jQuery("<div>",{class:"field"});l.appendTo("body"),c.appendTo(l),ecEditor.jQuery(document.createElement("textarea")).text(editorText).attr({id:"authoringTextEditor",placeholder:"Add text here",rows:12}).css({width:"30.5em"}).appendTo(c),t=ecEditor.jQuery("#authoringTextEditor"),i.insertAfter(t),i.append($buttonGrp)}e.length?e.show():e=ecEditor.jQuery("<button>",{text:"Done",id:"authoringTextEditorBtn",class:"ui primary button"}).click(function(){a({type:"click",subtype:"done",target:"addString"}),o(),t.val().trim().length?(ecEditor.getPluginInstance(pluginId).editorObj.text=t.val(),ecEditor.getPluginInstance(pluginId).config.text=t.val(),ecEditor.render(),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getPluginInstance(pluginId).editorObj}),ecEditor.jQuery("#toolbarOptions").show()):r(),t.val("")}),n.length?n.show():n=ecEditor.jQuery("<button>",{text:"Cancel",id:"authoringTextEditorCancel",class:"ui secondary button"}).click(function(){a({type:"click",subtype:"cancel",target:"cancelTextEditor"}),o(),editorText.trim().length||r()}),$buttonGrp.append(n),$buttonGrp.append($orBtn),$buttonGrp.append(e),$buttonGrp.show();var u=ecEditor.getAngularScope();ecEditor.ngSafeApply(u,function(){u.configStyle=""})},hide:function(){t.val("").hide(),$buttonGrp.hide(),e.hide(),n.hide();var i=ecEditor.getAngularScope();ecEditor.ngSafeApply(i,function(){i.configStyle=""})},generateTelemetry:a}}();org.ekstep.text={},org.ekstep.text.MultilineTransliterator=Class.extend({error:"error",init:function(t,e){this.$q=t,this.transliterateService=e},transliterate:function(t,e,n){var i=this,r=this.$q,o=_.map(t.split("\n"),encodeURI);(function(t){return r.all(function(t,e){if(angular.isArray(t))return t.map(e);var n={};return Object.keys(t).forEach(function(i,r){n[i]=e(t[i])}),n}(t,function(t){return t.then?t.then(function(t){return{state:"fulfilled",value:t}},function(t){return{state:"rejected",reason:t}}):{state:"fulfilled",value:t}}))})(_.map(o,function(t){var n={};return n.text=t,n.languages=[e],""==t&&(n.text=" "),function(t,e){var n=r.defer();return t(e,function(t,e){t?n.reject(t):n.resolve(e)}),n.promise}(i.transliterateService.getTransliteration.bind(i.transliterateService),n)})).then(function(t){i.error="";var r=_.map(t,function(t,n){if("fulfilled"==t.state&&void 0!=t.value.data.result.transliterations[e]){var r=t.value.data.result.transliterations[e].output;return r?decodeURIComponent(r):(i.error="Transliteration unavailable at the moment",decodeURIComponent(o[n]))}return i.error="Transliteration unavailable at the moment",decodeURIComponent(o[n])}).join("\n");n(i.error,r)})}}),org.ekstep.text.MultilineTransliterator.create=function(t,e){return new org.ekstep.text.MultilineTransliterator(t,e)},org.ekstep.text.WordExtractor=Class.extend({extractText:function(){var t=org.ekstep.contenteditor.api.getCurrentObject();if(t&&"org.ekstep.text"==t.manifest.id)return t.editorObj.text}}),window.TextWYSIWYG=function(){function t(t,e){switch(t){case _constants.lineHeight:_textInstance.attributes.lineHeight=e,_textInstance.editorObj.lineHeight=e;break;case _constants.align:_textInstance.attributes.align=e,_textInstance.editorObj.setTextAlign(e);break;case _constants.offsetY:_textInstance.attributes.offsetY=e}}return fontMap={NotoSans:{offsetY:.04,lineHeight:1},NotoSansKannada:{offsetY:.24,lineHeight:1},NotoNastaliqUrdu:{offsetY:-.65,align:"right",lineHeight:2},default:{offsetY:.2,lineHeight:1}},_constants={textType:"text",lineHeight:"lineHeight",align:"align",offsetY:"offsetY",default:"default"},_textInstance=void 0,{setInstance:function(e){if(e.attributes.textType===_constants.textType){_textInstance=e;var n=fontMap[_textInstance.attributes.fontFamily]||fontMap[_constants.default];t(_constants.lineHeight,n.lineHeight),t(_constants.offsetY,n.offsetY),ecEditor.render()}},resetProperties:function(t){delete t.attributes.offsetY,delete t.attributes.lineHeight,delete t.editorObj.lineHeight}}}(),org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.text",ver:"1.2",shortId:"org.ekstep.text",displayName:"Text",author:"Santhosh Vasabhaktula",title:"Text Plugin",description:"",publishedDate:"",editor:{main:"editor/plugin.js",dependencies:[{type:"js",src:"editor/texteditor.js"},{type:"js",src:"editor/multilineTransliterator.js"},{type:"js",src:"editor/textWYSIWYG.js"},{type:"css",src:"editor/style/plugin.css"}],views:[{template:"./delete_confirmation_dialog.html",controller:""},{template:"./transliterationconfig.html",controller:"./transliterationapp.js"}],menu:[{id:"org.ekstep.text",category:"main",type:"icon",toolTip:"Add Text",title:"Text",iconClass:"fa fa-font",onclick:{id:"org.ekstep.text:create",data:{__text:"",x:10,y:20,fontFamily:"NotoSans",fontSize:18,minWidth:20,w:35,maxWidth:500,fill:"#000000",fontStyle:"normal",fontWeight:"normal",stroke:"rgba(255, 255, 255, 0)",strokeWidth:1,opacity:1,editable:!1,lineHeight:1,version:"V2",offsetY:.2}},submenu:[{id:"beginning",type:"icon",title:"Add Richtext",iconClass:"",onclick:{id:"org.ekstep.richtext:showpopup"}}]}],behaviour:{rotatable:!0},configManifest:[{type:"custom_template",controllerURL:"editor/config-controller.js",templateURL:"editor/configTemplate.html"}],help:{src:"editor/help.md",dataType:"text"},"init-data":{__text:"",x:10,y:20,fontFamily:"NotoSans",fontSize:18,minWidth:20,w:35,maxWidth:500,fill:"#000000",fontStyle:"normal",fontWeight:"normal"}},renderer:{main:"renderer/supertextplugin.js"}},org.ekstep.contenteditor.basePlugin.extend({type:"org.ekstep.text",magicNumber:1920,editorWidth:720,supportedFonts:["NotoSans","NotoSansBengali","NotoSansDevanagari","NotoSansGujarati","NotoSansGurmukhi","NotoSansKannada","NotoSansMalayalam","NotoSansOriya","NotoSansTamil","NotoSansTelugu","NotoNastaliqUrdu"],constants:{v2supportedText:"text",createJsLineHeight:1.3},initialize:function(){var t=this;ecEditor.addEventListener(this.type+":showpopup",this.loadHtml,this),ecEditor.addEventListener("object:unselected",this.objectUnselected,this),ecEditor.addEventListener("stage:unselect",this.stageUnselect,this),ecEditor.addEventListener(this.type+":readalong:show",this.showReadalong,this),ecEditor.addEventListener(this.type+":wordinfo:show",this.showWordInfo,this),ecEditor.addEventListener(this.type+":delete:enhancement",this.deleteEnhancement,this),ecEditor.addEventListener(this.type+":modified",this.modifyText,this),ecEditor.resolvePluginResource(t.manifest.id,t.manifest.ver,"editor/delete_confirmation_dialog.html"),ecEditor.getService("popup").loadNgModules(n(31),void 0,!0),ecEditor.resolvePluginResource(t.manifest.id,t.manifest.ver,"editor/transliterationconfig.html"),ecEditor.resolvePluginResource(t.manifest.id,t.manifest.ver,"editor/transliterationapp.js"),org.ekstep.contenteditor.api.getService(ServiceConstants.POPUP_SERVICE).loadNgModules(n(32),n(33),!0)},modifyText:function(t){this.checkMigrate(),this.dblClickHandler(t)},checkMigrate:function(){this.isV2Plugin(ecEditor.getCurrentObject())||ecEditor.dispatchEvent(this.type+":migrate",ecEditor.getCurrentObject())},loadHtml:function(){var t=this;org.ekstep.contenteditor.api.getService(ServiceConstants.POPUP_SERVICE).open({template:"transliteration",controller:"transliterationController",controllerAs:"$ctrl",resolve:{instance:function(){return t}},width:900,showClose:!1})},createTransliteratedText:function(t){var e=org.ekstep.contenteditor.api.getCurrentObject(),n={__text:t,x:30,y:30,w:300,h:500,fontFamily:"NotoSans",fontSize:18,minWidth:20,maxWidth:500,fill:"#000"};e&&(n.x=e.attributes.x,n.y=e.attributes.y,n.w=e.attributes.w,n.h=e.attributes.h,n.fontFamily=e.attributes.fontFamily,n.fontSize=e.attributes.fontSize,n.minWidth=e.attributes.minWidth,n.maxWidth=e.attributes.maxWidth,n.color=e.attributes.color,this.pixelToPercent(n),n=this.getOffsetPosition(n)),org.ekstep.contenteditor.api.instantiatePlugin(e.type,n,org.ekstep.contenteditor.api.getCurrentStage())},getOffsetPosition:function(t){return t.x+t.w<50?t.x=50:50<=t.x?t.x=12:t.y+t.h<50?t.y=50:50<=t.y?t.y=12:(t.x+=20,t.y+=20),t},newInstance:function(){var t=this.convertToFabric(this.attributes);if(delete t.__text,ecEditor._.isUndefined(this.config.text)&&(this.config.text=ecEditor._.isUndefined(this.attributes.__text)?"":this.attributes.__text),ecEditor._.isUndefined(this.attributes.__text)||delete this.attributes.__text,t.editable=!1,this.editorObj=new fabric.ITextbox(this.config.text,t),""==this.config.text&&i.showEditor(this.id),ecEditor._.isUndefined(this.attributes.timings)&&"readalong"!==this.attributes.textType)ecEditor._.isUndefined(this.attributes.words)&&"wordinfo"!==this.attributes.textType?this.attributes.textType="text":(this.addMedia({id:"org.ekstep.text.popuptint",src:ecEditor.resolvePluginResource(this.manifest.id,this.manifest.ver,"assets/popuptint.png"),type:"image",assetId:"org.ekstep.text.popuptint"}),this.addWordinfoconfigManifest(this));else{if(ecEditor._.isUndefined(this.attributes.textType)){this.attributes.textType="readalong",this.config.audio=this.attributes.audio,this.config.timings=this.attributes.timings,this.config.highlight=this.attributes.highlight,this.config.autoplay=this.attributes.autoplay;var e=ecEditor.getMedia(this.attributes.audio);e.src=org.ekstep.contenteditor.mediaManager.getMediaOriginURL(e.src),ecEditor._.isUndefined(e.preload)&&(e.preload=!0),this.config.audioObj=e}this.addMedia(this.config.audioObj),this.addReadalongconfigManifest(this)}this.isV2Plugin()&&TextWYSIWYG.setInstance(this)},selected:function(t){fabric.util.addListener(fabric.document,"dblclick",this.dblClickHandler)},deselected:function(t,e,n){fabric.util.removeListener(fabric.document,"dblclick",this.dblClickHandler)},objectUnselected:function(t,e){fabric.util.removeListener(fabric.document,"dblclick",this.dblClickHandler)},dblClickHandler:function(t){var e=ecEditor.getCurrentObject().editorObj.getBoundingRect(),n=ecEditor.jQuery("#canvas").offset().left+ecEditor.getCurrentObject().editorObj.left,r=n+ecEditor.getCurrentObject().editorObj.width,o=ecEditor.jQuery("#canvas").offset().top+ecEditor.getCurrentObject().editorObj.top,a=o+ecEditor.getCurrentObject().editorObj.height;_.isObject(e)&&(n=ecEditor.jQuery("#canvas").offset().left+e.left,eftEnd=n+e.width,a=(o=ecEditor.jQuery("#canvas").offset().top+e.top)+e.height),t.clientX>n&&t.clientX<r&&t.clientY>o&&t.clientY<a&&i.showEditor(ecEditor.getEditorObject().id),i.generateTelemetry({type:"click",subtype:"doubleClick",target:"textEditor"})},stageUnselect:function(t){i.hide()},getAttributes:function(){var t=ecEditor._.omit(ecEditor._.clone(this.attributes),["top","left","width","height","fontFamily","fontfamily","fontSize","fontstyle","fontweight","scaleX","scaleY"]);t.font=this.editorObj.get("fontFamily"),t.fontsize=this.updateFontSize(this.editorObj.get("fontSize"),!1);var e=ecEditor._.isUndefined(this.editorObj.get("fontWeight"))?"":"bold"===this.editorObj.get("fontWeight")?"bold":"",n=ecEditor._.isUndefined(this.editorObj.get("fontStyle"))?"":"italic"===this.editorObj.get("fontStyle")?"italic":"";return t.weight=(e+" "+n).trim(),t},onConfigChange:function(t,e){switch(t){case"fontweight":this.editorObj.setFontWeight(e?"bold":"normal"),this.attributes.fontweight=e;break;case"fontstyle":this.editorObj.setFontStyle(e?"italic":"normal"),this.attributes.fontstyle=e;break;case"fontfamily":this.editorObj.setFontFamily(e),this.attributes.fontFamily=e,this.attributes.fontfamily=e;break;case"fontsize":this.editorObj.setFontSize(e),this.attributes.fontSize=e;break;case"textcolor":this.editorObj.setFill(e),this.attributes.color=e;break;case"align":this.editorObj.setTextAlign(e),this.attributes.align=e;break;case"highlightcolorpicker":this.config.highlight=e;break;case"autoplay":this.config.autoplay=e;break;case"wordfontcolorpicker":this.config.wordfontcolor=e;break;case"wordhighlightcolorpicker":this.config.wordhighlightcolor=e;break;case"wordunderlinecolorpicker":this.config.wordunderlinecolor=e}this.isV2Plugin()&&TextWYSIWYG.setInstance(this),ecEditor.render(),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()})},getConfig:function(){var t=this._super();return t.color=this.attributes.color||this.attributes.fill,t.fontfamily=this.attributes.fontFamily,t.fontsize=this.attributes.fontSize,t.fontweight=this.attributes.fontweight||!1,t.fontstyle=this.attributes.fontstyle||!1,t.align=this.attributes.align||"left",t},getProperties:function(){var t=ecEditor._.omitBy(ecEditor._.clone(this.attributes),ecEditor._.isObject);return delete(t=ecEditor._.omitBy(t,ecEditor._.isNaN)).__text,t.text=this.editorObj.text,this.pixelToPercent(t),t},updateFontSize:function(t,e){var n=void 0;if(e){var i=this.attributes.w*(this.magicNumber/100),r=this.editorWidth*this.attributes.w/100;n=parseInt(Math.round(t*(r/i)).toString())}else{i=this.editorObj.width/this.magicNumber*100,r=this.editorObj.width/this.editorWidth*100;var o=t*(this.editorObj.scaleX||1);n=parseFloat((o*(r/i)).toFixed(2))}return n},convertToFabric:function(t){var e=ecEditor._.clone(t);if(t.x&&(e.left=t.x),t.y&&(e.top=t.y),t.w&&(e.width=t.w),t.h&&(e.height=t.h),t.color&&(e.fill=t.color),t.weight&&ecEditor._.includes(t.weight,"bold")?(e.fontWeight="bold",t.fontweight=!0):t.fontweight=!1,t.weight&&ecEditor._.includes(t.weight,"italic")?(e.fontStyle="italic",t.fontstyle=!0):t.fontstyle=!1,t.font&&(e.fontFamily=t.font,t.fontFamily=t.font),t.fontsize){var n=this.updateFontSize(t.fontsize,!0);e.fontSize=n,t.fontSize=n}return t.align&&(e.textAlign=t.align,e.align=t.align),t.rotate&&(e.angle=t.rotate),this.isV2Plugin()||delete e.lineHeight,e},getConfigManifest:function(){var t=this._super();return ecEditor._.remove(t,function(t){return"stroke"===t.propertyName}),t},showReadalong:function(){var t=ecEditor.getCurrentObject();ecEditor.dispatchEvent("org.ekstep.readalongbrowser:showpopup",{textObj:t,callback:this.convertTexttoReadalong})},convertTexttoReadalong:function(t){var e=ecEditor.getCurrentObject(),n=ecEditor.getPluginInstance(e.id);TextWYSIWYG.resetProperties(e),e.config.text=e.editorObj.text=t.text,e.config.audio=t.audio,e.config.timings=t.timings,e.config.highlight=t.highlight,e.config.audioObj=t.audioObj,e.config.autoplay=t.autoplay,e.attributes.autoplay=t.autoplay,e.attributes.textType="readalong",i.hide();var r=t.audioObj;ecEditor._.isUndefined(r)||(r.src=org.ekstep.contenteditor.mediaManager.getMediaOriginURL(r.src)),e.addMedia(r),n.addReadalongconfigManifest(e),ecEditor.dispatchEvent("config:show"),ecEditor.render()},showWordInfo:function(){var t=ecEditor.getCurrentObject();ecEditor.dispatchEvent("org.ekstep.wordinfobrowser:showpopup",{textObj:t,callback:this.convertTexttoWordinfo})},convertTexttoWordinfo:function(t,e){var n=ecEditor.getCurrentObject(),i=ecEditor.getPluginInstance(n.id);TextWYSIWYG.resetProperties(n),n.data=e,n.config.text=n.editorObj.text=t.text,n.config.words=t.words,n.config.wordfontcolor=t.wordfontcolor,n.config.wordhighlightcolor=t.wordhighlightcolor,n.config.wordunderlinecolor=t.wordunderlinecolor,n.attributes.textType="wordinfo",n.addMedia({id:"org.ekstep.text.popuptint",src:ecEditor.resolvePluginResource(i.manifest.id,i.manifest.ver,"assets/popuptint.png"),type:"image",assetId:"org.ekstep.text.popuptint"}),i.addWordinfoconfigManifest(n),ecEditor.dispatchEvent("config:show"),ecEditor.render()},deleteEnhancement:function(){ecEditor.getService("popup").open({template:"deleteConfirmationDialog",controller:["$scope",function(t){t.warningMessage="readalong"==ecEditor.getCurrentObject().attributes.textType?"Read-Along":"Word Info Popup",t.delete=function(){t.closeThisDialog();var e=ecEditor.getCurrentObject();"readalong"==e.attributes.textType?(delete e.config.audio,delete e.config.timings,delete e.config.highlight,delete e.config.audioObj,delete e.config.autoplay,delete e.attributes.autoplay):(delete e.data,delete e.config.words,delete e.config.wordfontcolor,delete e.config.wordhighlightcolor,delete e.config.wordunderlinecolor),e.attributes.textType="text",ecEditor.dispatchEvent("config:show"),this.isV2Plugin()&&TextWYSIWYG.setInstance(this),ecEditor.render()}}],width:520,showClose:!1})},addReadalongconfigManifest:function(t){ecEditor.dispatchEvent("org.ekstep.text:addReadAlong",t)},addWordinfoconfigManifest:function(t){ecEditor.dispatchEvent("org.ekstep.text:addWordInfo",t)},getMedia:function(){return"text"===this.attributes.textType?{}:this._super()},toECML:function(){var t=this._super();return t.textType!==this.constants.v2supportedText&&(t.lineHeight=this.constants.createJsLineHeight),t},fromECML:function(){this._super(this.editorData),this.attributes.textType!==this.constants.v2supportedText&&delete this.attributes.lineHeight},isV2Plugin:function(t){var e=t||this;return!(!e.attributes.version||"V2"!==e.attributes.version)}}))},function(t,e){t.exports='<script type="text/ng-template" id="deleteConfirmationDialog">\n    <div class="ui container" style="margin: 0px;">\n        <div style="margin: 30px 10px 25px 0px;">\n            <div style=" display: inline;"><i class="huge warning sign yellow icon"></i></div>\n            <div style="text-align: center;margin: 10px;font-size: 17px;color: #5f5c5c; display: inline;" class="meta">\n                Are you sure you want to remove {{warningMessage}}?\n            </div>\n        </div>\n        <div style="margin-left: 139px;">\n            <button class="ui  primary button" ng-click="delete()">Okay</button>\n            <button class="ui  secondary orange button" ng-click="closeThisDialog()">Cancel</button>\n        </div>\n    </div>\n<\/script>'},function(t,e){t.exports='<script type="text/ng-template" ng-app="transliterationapp" ng-controller="transliterationController as $ctrl" id="transliteration">\n    <style type="text/css">\n    .filters-container {\n        padding: 8px 10px 4px 18px;\n        background: #f1f1f1;\n    }\n\n    .textWrapper {\n        font-size: 26px;\n        overflow-x: auto;\n        white-space: nowrap;\n        background-color: #efefef;\n        height: 75px;\n        display: flex;\n        align-items: center;\n    }\n\n    .helptext {\n        color: #ccc;\n    }\n\n    .words-div: {\n        width: 100%;\n    }\n\n    .words-list {\n        width: 22%;\n        float: left;\n        margin: 4px;\n    }\n\n    .panel {\n        margin-bottom: 20px;\n        background-color: #fff;\n        border: 1px solid transparent;\n        border-radius: 4px;\n        box-shadow: 0 1px 1px rgba(0, 0, 0, .05);\n    }\n\n    .panel-heading {\n        border: 0px;\n        color: #000;\n        background: #BAD9D4;\n        padding: 20px 15px;\n    }\n\n    .panel-body {\n        padding: 15px;\n    }\n\n    #div1 {\n        float: left;\n        margin: 10px;\n        padding: 10px;\n        border: solid 2px;\n        border-color: #C0C0C0;\n    }\n\n    .dragDiv {\n        margin: 20px;\n    }\n\n    .cursor-pointer {\n        cursor: pointer;\n    }\n\n    .error-msg {\n        color: red;\n    }\n\n    .ui.modal {\n        top: 10%;\n    }\n\n    .bottom-margin {\n        margin-bottom: 4%;\n    }\n\n    .top-margin {\n        margin-top: 6.4%;\n    }\n    .bottom-margin-leftText{\n        margin-bottom: 1.6%;\n    }\n    .ui.form textarea.no-resize {\n        resize: none;\n    }\n\n    .lang-dropdown {\n        width: 15vw;\n        margin-left:21%;\n    }\n\n    .textloader {\n        width: 100%;\n        height: 100%;\n        position: absolute;\n        top: 50;\n        left: 0;\n    }\n\n    .centerSpinner {\n        margin-top: 25%;\n    }\n\n    .warningText {\n        float: left;\n        padding-top: 1.5%;\n        padding-left:0.5%;\n        color: red;\n    }\n\n    .warningIcon {\n        padding-top: 1.5%;\n    }\n    .dropdownPos{\n        margin-left:21%;\n    }\n    .snapLeft{\n        padding-left:0% !important;\n    }\n    .snapRight{\n        padding-right:0% !important;\n    }\n\n    .ui.steps .step .title {\n        font-size: 1.5em;\n    }\n    .ui.steps .step .description{\n        font-size: 1.1em;\n    }\n    </style>\n    <div class="ui modal large active">\n        <h4 class="ui header">\n          <i class="browser icon"></i>\n          <div class="content">\n            Transliterator\n            <div class="sub header">Select an Indian language</div>\n          </div>\n        </h4>\n        <div class="content">\n            <div>\n                <div class="ui two column horizontally padded grid">\n                    <div class="six wide column snapLeft">\n                        <div class="row top-margin bottom-margin-leftText">\n                            <div call="field label">Original text:</div>\n                        </div>\n                        <div class="row bottom-margin">\n                            <div class="column">\n                                <div class="field ui fluid labeled input form">\n                                    <textarea class="no-resize" ng-model="$ctrl.originalText" cols="5" rows="16"></textarea>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="snapRight six wide column">\n                        <div class="row bottom-margin">\n                            <select class="ui dropdown lang-dropdown" ng-model="$ctrl.selectedLanguage" ng-options="lang as lang.name for lang in $ctrl.languages">\n                                <option value="">Select language</option>\n                            </select>\n                            <div class="ui buttons pull-right">\n                                <button class="ui blue button" ng-click="$ctrl.transliterate()" ng-disabled="$ctrl.originalText == \'\' || $ctrl.selectedLanguage == null" type="button"> Transliterate </button>\n                            </div>\n                        </div>\n                        <div class="row bottom-margin">\n                            <div class="column">\n                                <div class="field ui fluid labeled input form">\n                                    <div class="textloader centerSpinner" ng-show="$ctrl.isLoading">\n                                        <div class="ui active centered inline loader"></div>\n                                    </div>\n                                    <div class="textloader">\n                                        <textarea class="no-resize" ng-model="$ctrl.transliteratedText" cols="5" rows="16"></textarea>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="actions">\n            <div class="warningText" ng-show="$ctrl.showError" ng-model="$ctrl.errorMsg">\n                <i class="warning sign icon warningIcon label"></i> {{$ctrl.errorMsg}}\n            </div>\n            <div class="ui buttons">\n                <button class="ui orange button" ng-click="$ctrl.cancel()" type="button">Cancel</button>\n                <div class="or"></div>\n                <button class="ui blue button" type="button" ng-disabled="$ctrl.transliteratedText == undefined || $ctrl.transliteratedText == \'\'" ng-click="$ctrl.addToStage()">Add to Stage</button>\n            </div>\n        </div>\n    </div>\n'},function(t,e,n){"use strict";angular.module("transliterationapp",[]).controller("transliterationController",["$scope","instance","$q",function(t,e,n){var i=this;i.originalText="",i.transliteratedText=void 0,i.languages=[],i.selectedLanguage=null,i.isLoading=!1,i.showError=!1,i.errorMsg="";var r=org.ekstep.contenteditor.api.getService(ServiceConstants.LANGUAGE_SERVICE),o=org.ekstep.text.MultilineTransliterator.create(n,r),a=new org.ekstep.text.WordExtractor;i.originalText=a.extractText(),i.transliterate=function(){var t=this;t.isLoading=!0,i.showError=!1,i.transliteratedText="",o.transliterate(i.originalText,i.selectedLanguage.code,function(e,n){i.transliteratedText=n,t.isLoading=!1,e&&(i.showError=!0,i.errorMsg=e)})},i.addToStage=function(){e.createTransliteratedText(i.transliteratedText),t.closeThisDialog()},r.getLanguages(function(t,e){t||(i.languages=_.map(e.data.result.languages,function(t){return{name:t.name,code:t.code}}))}),i.cancel=function(){t.closeThisDialog()}}])},function(t,e){org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.shape",ver:"1.0",shortId:"shape",displayName:"Shape",author:"Santhosh Vasabhaktula",title:"Shape Plugin",description:"",publishedDate:"",editor:{main:"editor/plugin.js",dependencies:[],menu:[{id:"shape",category:"main",type:"icon",toolTip:"Add Shapes",title:"Shapes",iconClass:"icon-shape icon",submenu:[{id:"triangle",type:"icon",toolTip:"Add Triangle",title:"Triangle",iconClass:"icon-triangle icon",onclick:{id:"org.ekstep.shape:create",data:{type:"triangle",x:20,y:20,fill:"#00FF00",w:14,h:25,stroke:"rgba(255, 255, 255, 0)",strokeWidth:1,opacity:1}}},{id:"rectangle",type:"icon",toolTip:"Add Rectangle",title:"Rectangle",iconClass:"icon-rectangle icon",onclick:{id:"org.ekstep.shape:create",data:{type:"rect",x:10,y:20,fill:"#FFFF00",w:14,h:25,stroke:"rgba(255, 255, 255, 0)",strokeWidth:1,opacity:1}}},{id:"circle",type:"icon",toolTip:"Add Circle",title:"Circle",iconClass:"icon-circle icon",onclick:{id:"org.ekstep.shape:create",data:{type:"ellipse",x:15,y:15,fill:"#00FF00",w:18,h:32,stroke:"rgba(255, 255, 255, 0)",strokeWidth:1,opacity:1}}},{id:"rounded-rectangle",type:"icon",toolTip:"Add Rounded Rectangle",title:"Rounded Rectangle",iconClass:"icon-roundedrect icon",onclick:{id:"org.ekstep.shape:create",data:{type:"roundrect",x:20,y:20,fill:"#FF0000",w:14,h:25,radius:10,stroke:"rgba(255, 255, 255, 0)",strokeWidth:1,opacity:1}}},{id:"star",type:"icon",toolTip:"Add Star",title:"Star",iconClass:"star icon",onclick:{id:"org.ekstep.shape:create",data:{type:"star",x:20,y:20,fill:"#FF0000",w:14,h:25,corners:5,stroke:"rgba(255, 255, 255, 0)",strokeWidth:1,opacity:1}}},{id:"polygon",type:"icon",toolTip:"Add Polygon",title:"Polygon",iconClass:"first order icon",onclick:{id:"org.ekstep.shape:create",data:{type:"polygon",x:20,y:20,fill:"#FF0000",w:14,h:25,sides:5,stroke:"rgba(255, 255, 255, 0)",strokeWidth:1,opacity:1}}},{id:"trapezium",type:"icon",toolTip:"Add Trapezium",title:"Trapezium",iconClass:"road icon",onclick:{id:"org.ekstep.shape:create",data:{type:"trapezium",x:20,y:20,fill:"#FF0000",w:14,h:25,stroke:"rgba(255, 255, 255, 0)",strokeWidth:1,opacity:1}}},{id:"rarrow",type:"icon",toolTip:"Add Arrow",title:"Arrow",iconClass:"long right arrow icon",onclick:{id:"org.ekstep.shape:create",data:{type:"rarrow",x:20,y:20,fill:"#000000",w:30,h:25,stroke:"rgba(255, 255, 255, 0)",strokeWidth:1,opacity:1}}},{id:"harrow",type:"icon",toolTip:"Add double arrow",title:"Double Arrow",iconClass:"resize horizontal icon",onclick:{id:"org.ekstep.shape:create",data:{type:"harrow",x:20,y:20,fill:"#000000",w:30,h:25,stroke:"rgba(255, 255, 255, 0)",strokeWidth:1,opacity:1}}}]}],behaviour:{rotatable:!0},configManifest:[{propertyName:"color",title:"Fill Color",description:"Choose a color from the color picker",dataType:"colorpicker",required:!0,defaultValue:"#000000"},{propertyName:"opacity",title:"Transparency",description:"Set the transparency for element",dataType:"rangeslider",labelSuffix:"%",required:!0,defaultValue:100,minimumValue:0,maximumValue:100}],help:{src:"editor/help.md",dataType:"text"},"init-data":{type:"rect",x:10,y:20,fill:"#FFFF00",w:14,h:25}}},org.ekstep.contenteditor.basePlugin.extend({type:"shape",_points:void 0,shapeType:void 0,initialize:function(){},newInstance:function(){var t=this.convertToFabric(this.attributes);switch(this.attributes.type){case"ellipse":t.rx=t.w/2,t.ry=t.h/2,this.shapeType="ellipse",this.editorObj=new fabric.Ellipse(t);break;case"roundrect":this.manifest.editor.configManifest.push({propertyName:"radius",title:"Radius",placeholder:"Radius",description:"Input radius for the rounded rectangle",dataType:"input",valueType:"number",required:!1,defaultValue:10,minimumValue:0}),this.shapeType="roundrect",this.editorObj=new fabric.Rect(t);break;case"rect":this.shapeType="rect","slidebackground"!==t.subtype&&(this.editorObj=new fabric.Rect(t));break;case"triangle":t.sides=3,this.shapeType="3polygon",this.drawShape(this.shapeType,t);break;case"star":this.manifest.editor.configManifest.push({propertyName:"corners",title:"Corners",placeholder:"Corners",description:"No of corners for the star",dataType:"rangeslider",valueType:"number",required:!1,defaultValue:5,minimumValue:4,maximumValue:10});var e=t.corners;this.shapeType=e+"star",this.drawShape(this.shapeType,t);break;case"polygon":this.manifest.editor.configManifest.push({propertyName:"sides",title:"Sides",placeholder:"Sides",description:"No of sides for the shape",dataType:"rangeslider",valueType:"number",required:!1,defaultValue:5,minimumValue:4,maximumValue:10});var n=t.sides;this.shapeType=n+"polygon",this.drawShape(this.shapeType,t);break;case"trapezium":this.shapeType="trapezium",this.drawShape(this.shapeType,t);break;case"rarrow":this.shapeType="rarrow",this.drawShape(this.shapeType,t);break;case"harrow":this.shapeType="harrow",this.drawShape(this.shapeType,t)}this.editorObj&&this.editorObj.setFill(t.fill)},onConfigChange:function(t,e){switch(t){case"color":this.editorObj.setFill(e),this.attributes.fill=e;break;case"radius":"ellipse"==this.attributes.type&&(this.editorObj.set({w:2*e}),this.editorObj.set({h:2*e}),this.attributes.w=2*e,this.attributes.h=2*e),this.editorObj.set({rx:e}),this.editorObj.set({ry:e}),this.attributes.radius=e;break;case"sides":var n=e;this.shapeType=n+"polygon";var i=this.shapes[this.shapeType];this.attributes.sides=n,this.editorObj.set({points:i});break;case"corners":var r=e;this.shapeType=r+"star",i=this.shapes[this.shapeType],this.attributes.corners=r,this.editorObj.set({points:i})}ecEditor.render(),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()})},getConfig:function(){var t=this._super();return t.color=this.attributes.fill,"roundrect"==this.attributes.type&&(t.radius=this.editorObj.rx),"ellipse"==this.attributes.type&&(t.radius=this.editorObj.rx),this.attributes.corners&&(t.corners=this.attributes.corners),this.attributes.sides&&(t.sides=this.attributes.sides),t.points=this.shapes[this.shapeType],t},drawShape:function(t,e){this._points=_.cloneDeep(this.shapes[t]),this.toPixel(this._points),e.strokeLineJoin="bevil",this.editorObj=new fabric.Polygon(this._points,e)},toPixel:function(t){var e=this;return t&&t.forEach(function(t){t.x=e.attributes.w*t.x/100,t.y=e.attributes.h*t.y/100}),t},changed:function(t,e,n){"roundrect"==t.attributes.type&&(t.editorObj.setWidth(t.editorObj.getWidth()-t.editorObj.getStrokeWidth()),t.editorObj.setHeight(t.editorObj.getHeight()-t.editorObj.getStrokeWidth()),t.editorObj.setScaleX(1),t.editorObj.setScaleY(1))},shapes:{"4star":[{x:100,y:50},{x:62.7,y:62.7},{x:50,y:100},{x:37.3,y:62.7},{x:0,y:50},{x:37.3,y:37.3},{x:50,y:0},{x:62.7,y:37.3}],"5star":[{x:50,y:0},{x:60.9,y:35},{x:100,y:35},{x:67.6,y:60},{x:79.4,y:100},{x:50,y:72},{x:20.6,y:100},{x:32.4,y:60},{x:0,y:35},{x:39.1,y:35}],"6star":[{x:50,y:100},{x:35,y:76},{x:0,y:75},{x:20,y:50},{x:0,y:25},{x:35,y:24},{x:50,y:0},{x:65,y:24},{x:100,y:25},{x:80,y:50},{x:100,y:75},{x:65,y:76}],"7star":[{x:100,y:59.8},{x:74,y:68},{x:72.9,y:100},{x:50.8,y:80},{x:29.6,y:100},{x:27.1,y:69.4},{x:0,y:62.5},{x:20.6,y:44.1},{x:10,y:19.9},{x:36.2,y:23.3},{x:48.6,y:0},{x:62.3,y:22.6},{x:88.2,y:17.7},{x:79,y:42.5}],"8star":[{x:100,y:50},{x:82.3,y:63.4},{x:85.4,y:85.4},{x:63.4,y:82.3},{x:50,y:100},{x:36.6,y:82.3},{x:14.6,y:85.4},{x:17.7,y:63.4},{x:0,y:50},{x:17.7,y:36.6},{x:14.6,y:14.6},{x:36.6,y:17.7},{x:50,y:0},{x:63.4,y:17.7},{x:85.4,y:14.6},{x:82.3,y:36.6}],"9star":[{x:100,y:40.2},{x:84.6,y:55.3},{x:93.8,y:74},{x:73.1,y:76.3},{x:68.1,y:100},{x:50.8,y:85},{x:33.9,y:100},{x:28.1,y:77.3},{x:7.3,y:75.9},{x:15.7,y:56.8},{x:0,y:42.4},{x:19.3,y:33.2},{x:17,y:12.4},{x:37.3,y:17.4},{x:48.9,y:0},{x:61.3,y:16.9},{x:81.3,y:11},{x:79.9,y:31.8}],"10star":[{x:100,y:65.5},{x:78.3,y:70.6},{x:79.4,y:90.5},{x:60.8,y:83.3},{x:50,y:100},{x:39.2,y:83.3},{x:20.6,y:90.5},{x:21.7,y:70.6},{x:0,y:65.5},{x:15,y:50},{x:0,y:34.5},{x:21.7,y:29.4},{x:20.6,y:9.5},{x:39.2,y:16.7},{x:50,y:0},{x:60.8,y:16.7},{x:79.4,y:9.5},{x:78.3,y:29.4},{x:100,y:34.5},{x:85,y:50}],"3polygon":[{x:50,y:0},{x:100,y:100},{x:0,y:100}],"4polygon":[{x:50,y:0},{x:100,y:50},{x:50,y:100},{x:0,y:50}],"5polygon":[{x:50,y:0},{x:100,y:34.5},{x:79.4,y:100},{x:20.6,y:100},{x:0,y:34.5}],"6polygon":[{x:100,y:50},{x:75,y:100},{x:25,y:100},{x:0,y:50},{x:25,y:0},{x:75,y:0}],"7polygon":[{x:50,y:0},{x:89.1,y:18.8},{x:100,y:61.1},{x:71.7,y:100},{x:28.3,y:100},{x:0,y:61.1},{x:10.9,y:18.8}],"8polygon":[{x:100,y:69.1},{x:69.1,y:100},{x:30.9,y:100},{x:0,y:69.1},{x:0,y:30.9},{x:30.9,y:0},{x:69.1,y:0},{x:100,y:30.9}],"9polygon":[{x:50,y:0},{x:82.1,y:11.7},{x:100,y:41.3},{x:93.3,y:75},{x:67.1,y:100},{x:32.9,y:100},{x:6.7,y:75},{x:0,y:41.3},{x:17.9,y:11.7}],"10polygon":[{x:100,y:50},{x:90.5,y:79.4},{x:65.5,y:100},{x:34.5,y:100},{x:9.5,y:79.4},{x:0,y:50},{x:9.5,y:20.6},{x:34.5,y:0},{x:65.5,y:0},{x:90.5,y:20.6}],trapezium:[{x:25,y:0},{x:75,y:0},{x:100,y:100},{x:0,y:100}],rarrow:[{x:0,y:25},{x:75,y:25},{x:75,y:0},{x:100,y:50},{x:75,y:100},{x:75,y:75},{x:0,y:75}],harrow:[{x:0,y:50},{x:25,y:0},{x:25,y:25},{x:75,y:25},{x:75,y:0},{x:100,y:50},{x:75,y:100},{x:75,y:75},{x:25,y:75},{x:25,y:100}]}}))},function(t,e){org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.image",ver:"1.1",shortId:"image",displayName:"Image",author:"Santhosh Vasabhaktula",title:"Image Plugin",description:"",publishedDate:"",editor:{main:"editor/plugin.js",help:{src:"editor/help.md",dataType:"text"},dependencies:[{type:"plugin",plugin:"org.ekstep.assetbrowser",ver:"1.2"}],menu:[{id:"image",category:"main",type:"icon",toolTip:"Add Image",title:"Image",iconClass:"fa fa-picture-o",onclick:{id:"org.ekstep.image:assetbrowser:open"}}],behaviour:{rotatable:!0},configManifest:[{propertyName:"imagebrowser",title:"Image Browser",description:"Choose a  from the browser",dataType:"browser",required:!0,onclick:{id:"org.ekstep.assetbrowser:show",type:"image"}}]}},org.ekstep.contenteditor.basePlugin.extend({name:"Image",initialize:function(){ecEditor.addEventListener(this.manifest.id+":assetbrowser:open",this.openBrowser,this)},newInstance:function(){var t=this,e=this.parent;this.parent=void 0;var n=this.convertToFabric(this.attributes);"plugin"==this.attributes.from&&(delete n.width,delete n.height);var i=this.media?this.media[this.attributes.asset]:void 0;if(!i||!i.src)throw new Error("media source is missing!");if(i&&i.src){this.name=this.attributes.asset,i.src=ecEditor.getMediaReverseProxyURL(i.src);var r=ecEditor.getConfig("useProxyForURL")?"image/get/"+encodeURIComponent(i.src):i.src;fabric.Image.fromURL(r,function(i){i.strokeWidth=1,t.editorObj=i,t.parent=e,"plugin"==t.attributes.from&&(t.editorObj.scaleToWidth(n.w),delete t.attributes.from),t.postInit()},n)}},openBrowser:function(){var t=this;ecEditor.dispatchEvent("org.ekstep.assetbrowser:show",{type:"image",search_filter:{},callback:function(e){e.x=20,e.y=20,e.w=50,e.h=50,e.from="plugin",ecEditor.dispatchEvent(t.manifest.id+":create",e)}})},getCopy:function(){var t=this._super();return t.assetMedia=this.media[this.attributes.asset],t},onConfigChange:function(t,e){switch(t){case"browser":ecEditor.dispatchEvent("delete:invoke"),ecEditor.dispatchEvent(this.manifest.id+":create",e)}},getDisplayName:function(){return this.name}}))},function(t,e,n){var i,r,o;/*! jPlayer 2.9.2 for jQuery ~ (c) 2009-2014 Happyworm Ltd ~ MIT License */r=[n(16)],void 0===(o="function"==typeof(i=function(t,e){t.fn.jPlayer=function(n){var i="jPlayer",r="string"==typeof n,o=Array.prototype.slice.call(arguments,1),a=this;return n=!r&&o.length?t.extend.apply(null,[!0,n].concat(o)):n,r&&"_"===n.charAt(0)?a:(this.each(r?function(){var r=t(this).data(i),s=r&&t.isFunction(r[n])?r[n].apply(r,o):r;return s!==r&&s!==e?(a=s,!1):void 0}:function(){var e=t(this).data(i);e?e.option(n||{}):t(this).data(i,new t.jPlayer(n,this))}),a)},t.jPlayer=function(e,n){if(arguments.length){this.element=t(n),this.options=t.extend(!0,{},this.options,e);var i=this;this.element.bind("remove.jPlayer",function(){i.destroy()}),this._init()}},"function"!=typeof t.fn.stop&&(t.fn.stop=function(){}),t.jPlayer.emulateMethods="load play pause",t.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate",t.jPlayer.emulateOptions="muted volume",t.jPlayer.reservedEvent="ready flashreset resize repeat error warning",t.jPlayer.event={},t.each(["ready","setmedia","flashreset","resize","repeat","click","error","warning","loadstart","progress","suspend","abort","emptied","stalled","play","pause","loadedmetadata","loadeddata","waiting","playing","canplay","canplaythrough","seeking","seeked","timeupdate","ended","ratechange","durationchange","volumechange"],function(){t.jPlayer.event[this]="jPlayer_"+this}),t.jPlayer.htmlEvent=["loadstart","abort","emptied","stalled","loadedmetadata","canplay","canplaythrough"],t.jPlayer.pause=function(){t.jPlayer.prototype.destroyRemoved(),t.each(t.jPlayer.prototype.instances,function(t,e){e.data("jPlayer").status.srcSet&&e.jPlayer("pause")})},t.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""};var n=function(){this.init()};n.prototype={init:function(){this.options={timeFormat:t.jPlayer.timeFormat}},time:function(t){t=t&&"number"==typeof t?t:0;var e=new Date(1e3*t),n=e.getUTCHours(),i=this.options.timeFormat.showHour?e.getUTCMinutes():e.getUTCMinutes()+60*n,r=this.options.timeFormat.showMin?e.getUTCSeconds():e.getUTCSeconds()+60*i,o=this.options.timeFormat.padHour&&10>n?"0"+n:n,a=this.options.timeFormat.padMin&&10>i?"0"+i:i,s=this.options.timeFormat.padSec&&10>r?"0"+r:r,l="";return l+=this.options.timeFormat.showHour?o+this.options.timeFormat.sepHour:"",(l+=this.options.timeFormat.showMin?a+this.options.timeFormat.sepMin:"")+(this.options.timeFormat.showSec?s+this.options.timeFormat.sepSec:"")}};var i=new n;t.jPlayer.convertTime=function(t){return i.time(t)},t.jPlayer.uaBrowser=function(t){var e=t.toLowerCase(),n=/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(e)||[];return{browser:n[1]||"",version:n[2]||"0"}},t.jPlayer.uaPlatform=function(t){var e=t.toLowerCase(),n=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/.exec(e)||[],i=/(ipad|playbook)/.exec(e)||!/(mobile)/.exec(e)&&/(android)/.exec(e)||[];return n[1]&&(n[1]=n[1].replace(/\s/g,"_")),{platform:n[1]||"",tablet:i[1]||""}},t.jPlayer.browser={},t.jPlayer.platform={};var r=t.jPlayer.uaBrowser(navigator.userAgent);r.browser&&(t.jPlayer.browser[r.browser]=!0,t.jPlayer.browser.version=r.version);var o=t.jPlayer.uaPlatform(navigator.userAgent);o.platform&&(t.jPlayer.platform[o.platform]=!0,t.jPlayer.platform.mobile=!o.tablet,t.jPlayer.platform.tablet=!!o.tablet),t.jPlayer.getDocMode=function(){var e;return t.jPlayer.browser.msie&&(document.documentMode?e=document.documentMode:(e=5,document.compatMode&&"CSS1Compat"===document.compatMode&&(e=7))),e},t.jPlayer.browser.documentMode=t.jPlayer.getDocMode(),t.jPlayer.nativeFeatures={init:function(){var t,e,n,i=document,r=i.createElement("video"),o={w3c:["fullscreenEnabled","fullscreenElement","requestFullscreen","exitFullscreen","fullscreenchange","fullscreenerror"],moz:["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],webkit:["","webkitCurrentFullScreenElement","webkitRequestFullScreen","webkitCancelFullScreen","webkitfullscreenchange",""],webkitVideo:["webkitSupportsFullscreen","webkitDisplayingFullscreen","webkitEnterFullscreen","webkitExitFullscreen","",""],ms:["","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"]},a=["w3c","moz","webkit","webkitVideo","ms"];for(this.fullscreen=t={support:{w3c:!!i[o.w3c[0]],moz:!!i[o.moz[0]],webkit:"function"==typeof i[o.webkit[3]],webkitVideo:"function"==typeof r[o.webkitVideo[2]],ms:"function"==typeof r[o.ms[2]]},used:{}},e=0,n=a.length;n>e;e++){var s=a[e];if(t.support[s]){t.spec=s,t.used[s]=!0;break}}if(t.spec){var l=o[t.spec];t.api={fullscreenEnabled:!0,fullscreenElement:function(t){return(t=t||i)[l[1]]},requestFullscreen:function(t){return t[l[2]]()},exitFullscreen:function(t){return(t=t||i)[l[3]]()}},t.event={fullscreenchange:l[4],fullscreenerror:l[5]}}else t.api={fullscreenEnabled:!1,fullscreenElement:function(){return null},requestFullscreen:function(){},exitFullscreen:function(){}},t.event={}}},t.jPlayer.nativeFeatures.init(),t.jPlayer.focus=null,t.jPlayer.keyIgnoreElementNames="A INPUT TEXTAREA SELECT BUTTON";var a=function(e){var n,i=t.jPlayer.focus;i&&(t.each(t.jPlayer.keyIgnoreElementNames.split(/\s+/g),function(t,i){return e.target.nodeName.toUpperCase()===i.toUpperCase()?(n=!0,!1):void 0}),n||t.each(i.options.keyBindings,function(n,r){return r&&t.isFunction(r.fn)&&("number"==typeof r.key&&e.which===r.key||"string"==typeof r.key&&e.key===r.key)?(e.preventDefault(),r.fn(i),!1):void 0}))};t.jPlayer.keys=function(e){var n="keydown.jPlayer";t(document.documentElement).unbind(n),e&&t(document.documentElement).bind(n,a)},t.jPlayer.keys(!0),t.jPlayer.prototype={count:0,version:{script:"2.9.2",needFlash:"2.9.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",auroraFormats:"wav",preload:"metadata",volume:.8,muted:!1,remainingDuration:!1,toggleDuration:!1,captureDuration:!0,playbackRate:1,defaultPlaybackRate:1,minPlaybackRate:.5,maxPlaybackRate:4,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",playbackRateBar:".jp-playback-rate-bar",playbackRateBarValue:".jp-playback-rate-bar-value",currentTime:".jp-current-time",duration:".jp-duration",title:".jp-title",fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen",repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution"},stateClass:{playing:"jp-state-playing",seeking:"jp-state-seeking",muted:"jp-state-muted",looped:"jp-state-looped",fullScreen:"jp-state-full-screen",noVolume:"jp-state-no-volume"},useStateClassSkin:!1,autoBlur:!0,smoothPlayBar:!1,fullScreen:!1,fullWindow:!1,autohide:{restored:!1,full:!0,fadeIn:200,fadeOut:600,hold:1e3},loop:!1,repeat:function(e){e.jPlayer.options.loop?t(this).unbind(".jPlayerRepeat").bind(t.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){t(this).jPlayer("play")}):t(this).unbind(".jPlayerRepeat")},nativeVideoControls:{},noFullWindow:{msie:/msie [0-6]\./,ipad:/ipad.*?os [0-4]\./,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/(?=.*android)(?!.*chrome)(?=.*mobile)/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/},noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/,playbook:/playbook/},timeFormat:{},keyEnabled:!1,audioFullScreen:!1,keyBindings:{play:{key:80,fn:function(t){t.status.paused?t.play():t.pause()}},fullScreen:{key:70,fn:function(t){(t.status.video||t.options.audioFullScreen)&&t._setOption("fullScreen",!t.options.fullScreen)}},muted:{key:77,fn:function(t){t._muted(!t.options.muted)}},volumeUp:{key:190,fn:function(t){t.volume(t.options.volume+.1)}},volumeDown:{key:188,fn:function(t){t.volume(t.options.volume-.1)}},loop:{key:76,fn:function(t){t._loop(!t.options.loop)}}},verticalVolume:!1,verticalPlaybackRate:!1,globalVolume:!1,idPrefix:"jp",noConflict:"jQuery",emulateHtml:!1,consoleAlerts:!0,errorAlerts:!1,warningAlerts:!1},optionsAudio:{size:{width:"0px",height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"480px",height:"270px",cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,remaining:0,videoWidth:0,videoHeight:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:!1},solution:{html:!0,aurora:!0,flash:!0},format:{mp3:{codec:"audio/mpeg",flashCanPlay:!0,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},m3u8a:{codec:'application/vnd.apple.mpegurl; codecs="mp4a.40.2"',flashCanPlay:!1,media:"audio"},m3ua:{codec:"audio/mpegurl",flashCanPlay:!1,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis, opus"',flashCanPlay:!1,media:"audio"},flac:{codec:"audio/x-flac",flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},fla:{codec:"audio/x-flv",flashCanPlay:!0,media:"audio"},rtmpa:{codec:'audio/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},m3u8v:{codec:'application/vnd.apple.mpegurl; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!1,media:"video"},m3uv:{codec:"audio/mpegurl",flashCanPlay:!1,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:!1,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:!0,media:"video"},rtmpv:{codec:'video/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"video"}},_init:function(){var n=this;if(this.element.empty(),this.status=t.extend({},this.status),this.internal=t.extend({},this.internal),this.options.timeFormat=t.extend({},t.jPlayer.timeFormat,this.options.timeFormat),this.internal.cmdsIgnored=t.jPlayer.platform.ipad||t.jPlayer.platform.iphone||t.jPlayer.platform.ipod,this.internal.domNode=this.element.get(0),this.options.keyEnabled&&!t.jPlayer.focus&&(t.jPlayer.focus=this),this.androidFix={setMedia:!1,play:!1,pause:!1,time:NaN},t.jPlayer.platform.android&&(this.options.preload="auto"!==this.options.preload?"metadata":"auto"),this.formats=[],this.solutions=[],this.require={},this.htmlElement={},this.html={},this.html.audio={},this.html.video={},this.aurora={},this.aurora.formats=[],this.aurora.properties=[],this.flash={},this.css={},this.css.cs={},this.css.jq={},this.ancestorJq=[],this.options.volume=this._limitValue(this.options.volume,0,1),t.each(this.options.supplied.toLowerCase().split(","),function(e,i){var r=i.replace(/^\s+|\s+$/g,"");if(n.format[r]){var o=!1;t.each(n.formats,function(t,e){return r===e?(o=!0,!1):void 0}),o||n.formats.push(r)}}),t.each(this.options.solution.toLowerCase().split(","),function(e,i){var r=i.replace(/^\s+|\s+$/g,"");if(n.solution[r]){var o=!1;t.each(n.solutions,function(t,e){return r===e?(o=!0,!1):void 0}),o||n.solutions.push(r)}}),t.each(this.options.auroraFormats.toLowerCase().split(","),function(e,i){var r=i.replace(/^\s+|\s+$/g,"");if(n.format[r]){var o=!1;t.each(n.aurora.formats,function(t,e){return r===e?(o=!0,!1):void 0}),o||n.aurora.formats.push(r)}}),this.internal.instance="jp_"+this.count,this.instances[this.internal.instance]=this.element,this.element.attr("id")||this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count),this.internal.self=t.extend({},{id:this.element.attr("id"),jq:this.element}),this.internal.audio=t.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:e}),this.internal.video=t.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:e}),this.internal.flash=t.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:e,swf:this.options.swfPath+(".swf"!==this.options.swfPath.toLowerCase().slice(-4)?(this.options.swfPath&&"/"!==this.options.swfPath.slice(-1)?"/":"")+"jquery.jplayer.swf":"")}),this.internal.poster=t.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:e}),t.each(t.jPlayer.event,function(t,i){n.options[t]!==e&&(n.element.bind(i+".jPlayer",n.options[t]),n.options[t]=e)}),this.require.audio=!1,this.require.video=!1,t.each(this.formats,function(t,e){n.require[n.format[e].media]=!0}),this.options=this.require.video?t.extend(!0,{},this.optionsVideo,this.options):t.extend(!0,{},this.optionsAudio,this.options),this._setSize(),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this.status.noVolume=this._uaBlocklist(this.options.noVolume),t.jPlayer.nativeFeatures.fullscreen.api.fullscreenEnabled&&this._fullscreenAddEventListeners(),this._restrictNativeVideoControls(),this.htmlElement.poster=document.createElement("img"),this.htmlElement.poster.id=this.internal.poster.id,this.htmlElement.poster.onload=function(){(!n.status.video||n.status.waitForPlay)&&n.internal.poster.jq.show()},this.element.append(this.htmlElement.poster),this.internal.poster.jq=t("#"+this.internal.poster.id),this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),this.internal.poster.jq.hide(),this.internal.poster.jq.bind("click.jPlayer",function(){n._trigger(t.jPlayer.event.click)}),this.html.audio.available=!1,this.require.audio&&(this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio)),this.html.video.available=!1,this.require.video&&(this.htmlElement.video=document.createElement("video"),this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video)),this.flash.available=this._checkForFlash(10.1),this.html.canPlay={},this.aurora.canPlay={},this.flash.canPlay={},t.each(this.formats,function(e,i){n.html.canPlay[i]=n.html[n.format[i].media].available&&""!==n.htmlElement[n.format[i].media].canPlayType(n.format[i].codec),n.aurora.canPlay[i]=t.inArray(i,n.aurora.formats)>-1,n.flash.canPlay[i]=n.format[i].flashCanPlay&&n.flash.available}),this.html.desired=!1,this.aurora.desired=!1,this.flash.desired=!1,t.each(this.solutions,function(e,i){if(0===e)n[i].desired=!0;else{var r=!1,o=!1;t.each(n.formats,function(t,e){n[n.solutions[0]].canPlay[e]&&("video"===n.format[e].media?o=!0:r=!0)}),n[i].desired=n.require.audio&&!r||n.require.video&&!o}}),this.html.support={},this.aurora.support={},this.flash.support={},t.each(this.formats,function(t,e){n.html.support[e]=n.html.canPlay[e]&&n.html.desired,n.aurora.support[e]=n.aurora.canPlay[e]&&n.aurora.desired,n.flash.support[e]=n.flash.canPlay[e]&&n.flash.desired}),this.html.used=!1,this.aurora.used=!1,this.flash.used=!1,t.each(this.solutions,function(e,i){t.each(n.formats,function(t,e){return n[i].support[e]?(n[i].used=!0,!1):void 0})}),this._resetActive(),this._resetGate(),this._cssSelectorAncestor(this.options.cssSelectorAncestor),this.html.used||this.aurora.used||this.flash.used?this.css.jq.noSolution.length&&this.css.jq.noSolution.hide():(this._error({type:t.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:t.jPlayer.errorMsg.NO_SOLUTION,hint:t.jPlayer.errorHint.NO_SOLUTION}),this.css.jq.noSolution.length&&this.css.jq.noSolution.show()),this.flash.used){var i,r="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;if(t.jPlayer.browser.msie&&(Number(t.jPlayer.browser.version)<9||t.jPlayer.browser.documentMode<9)){var o='<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0" tabindex="-1"></object>',a=['<param name="movie" value="'+this.internal.flash.swf+'" />','<param name="FlashVars" value="'+r+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'];i=document.createElement(o);for(var s=0;s<a.length;s++)i.appendChild(document.createElement(a[s]))}else{var l=function(t,e,n){var i=document.createElement("param");i.setAttribute("name",e),i.setAttribute("value",n),t.appendChild(i)};(i=document.createElement("object")).setAttribute("id",this.internal.flash.id),i.setAttribute("name",this.internal.flash.id),i.setAttribute("data",this.internal.flash.swf),i.setAttribute("type","application/x-shockwave-flash"),i.setAttribute("width","1"),i.setAttribute("height","1"),i.setAttribute("tabindex","-1"),l(i,"flashvars",r),l(i,"allowscriptaccess","always"),l(i,"bgcolor",this.options.backgroundColor),l(i,"wmode",this.options.wmode)}this.element.append(i),this.internal.flash.jq=t(i)}this.status.playbackRateEnabled=!(!this.html.used||this.flash.used)&&this._testPlaybackRate("audio"),this._updatePlaybackRate(),this.html.used&&(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=t("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),this.element.append(this.htmlElement.video),this.internal.video.jq=t("#"+this.internal.video.id),this.internal.video.jq.css(this.status.nativeVideoControls?{width:this.status.width,height:this.status.height}:{width:"0px",height:"0px"}),this.internal.video.jq.bind("click.jPlayer",function(){n._trigger(t.jPlayer.event.click)}))),this.aurora.used,this.options.emulateHtml&&this._emulateHtmlBridge(),!this.html.used&&!this.aurora.used||this.flash.used||setTimeout(function(){n.internal.ready=!0,n.version.flash="n/a",n._trigger(t.jPlayer.event.repeat),n._trigger(t.jPlayer.event.ready)},100),this._updateNativeVideoControls(),this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),t.jPlayer.prototype.count++},destroy:function(){this.clearMedia(),this._removeUiClass(),this.css.jq.currentTime.length&&this.css.jq.currentTime.text(""),this.css.jq.duration.length&&this.css.jq.duration.text(""),t.each(this.css.jq,function(t,e){e.length&&e.unbind(".jPlayer")}),this.internal.poster.jq.unbind(".jPlayer"),this.internal.video.jq&&this.internal.video.jq.unbind(".jPlayer"),this._fullscreenRemoveEventListeners(),this===t.jPlayer.focus&&(t.jPlayer.focus=null),this.options.emulateHtml&&this._destroyHtmlBridge(),this.element.removeData("jPlayer"),this.element.unbind(".jPlayer"),this.element.empty(),delete this.instances[this.internal.instance]},destroyRemoved:function(){var e=this;t.each(this.instances,function(t,n){e.element!==n&&(n.data("jPlayer")||(n.jPlayer("destroy"),delete e.instances[t]))})},enable:function(){},disable:function(){},_testCanPlayType:function(t){try{return t.canPlayType(this.format.mp3.codec),!0}catch(t){return!1}},_testPlaybackRate:function(t){var e;t="string"==typeof t?t:"audio",e=document.createElement(t);try{return"playbackRate"in e&&(e.playbackRate=.5,.5===e.playbackRate)}catch(t){return!1}},_uaBlocklist:function(e){var n=navigator.userAgent.toLowerCase(),i=!1;return t.each(e,function(t,e){return e&&e.test(n)?(i=!0,!1):void 0}),i},_restrictNativeVideoControls:function(){this.require.audio&&this.status.nativeVideoControls&&(this.status.nativeVideoControls=!1,this.status.noFullWindow=!0)},_updateNativeVideoControls:function(){this.html.video.available&&this.html.used&&(this.htmlElement.video.controls=this.status.nativeVideoControls,this._updateAutohide(),this.status.nativeVideoControls&&this.require.video?(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})):this.status.waitForPlay&&this.status.video&&(this.internal.poster.jq.show(),this.internal.video.jq.css({width:"0px",height:"0px"})))},_addHtmlEventListeners:function(e,n){var i=this;e.preload=this.options.preload,e.muted=this.options.muted,e.volume=this.options.volume,this.status.playbackRateEnabled&&(e.defaultPlaybackRate=this.options.defaultPlaybackRate,e.playbackRate=this.options.playbackRate),e.addEventListener("progress",function(){n.gate&&(i.internal.cmdsIgnored&&this.readyState>0&&(i.internal.cmdsIgnored=!1),i._getHtmlStatus(e),i._updateInterface(),i._trigger(t.jPlayer.event.progress))},!1),e.addEventListener("loadeddata",function(){n.gate&&(i.androidFix.setMedia=!1,i.androidFix.play&&(i.androidFix.play=!1,i.play(i.androidFix.time)),i.androidFix.pause&&(i.androidFix.pause=!1,i.pause(i.androidFix.time)),i._trigger(t.jPlayer.event.loadeddata))},!1),e.addEventListener("timeupdate",function(){n.gate&&(i._getHtmlStatus(e),i._updateInterface(),i._trigger(t.jPlayer.event.timeupdate))},!1),e.addEventListener("durationchange",function(){n.gate&&(i._getHtmlStatus(e),i._updateInterface(),i._trigger(t.jPlayer.event.durationchange))},!1),e.addEventListener("play",function(){n.gate&&(i._updateButtons(!0),i._html_checkWaitForPlay(),i._trigger(t.jPlayer.event.play))},!1),e.addEventListener("playing",function(){n.gate&&(i._updateButtons(!0),i._seeked(),i._trigger(t.jPlayer.event.playing))},!1),e.addEventListener("pause",function(){n.gate&&(i._updateButtons(!1),i._trigger(t.jPlayer.event.pause))},!1),e.addEventListener("waiting",function(){n.gate&&(i._seeking(),i._trigger(t.jPlayer.event.waiting))},!1),e.addEventListener("seeking",function(){n.gate&&(i._seeking(),i._trigger(t.jPlayer.event.seeking))},!1),e.addEventListener("seeked",function(){n.gate&&(i._seeked(),i._trigger(t.jPlayer.event.seeked))},!1),e.addEventListener("volumechange",function(){n.gate&&(i.options.volume=e.volume,i.options.muted=e.muted,i._updateMute(),i._updateVolume(),i._trigger(t.jPlayer.event.volumechange))},!1),e.addEventListener("ratechange",function(){n.gate&&(i.options.defaultPlaybackRate=e.defaultPlaybackRate,i.options.playbackRate=e.playbackRate,i._updatePlaybackRate(),i._trigger(t.jPlayer.event.ratechange))},!1),e.addEventListener("suspend",function(){n.gate&&(i._seeked(),i._trigger(t.jPlayer.event.suspend))},!1),e.addEventListener("ended",function(){n.gate&&(t.jPlayer.browser.webkit||(i.htmlElement.media.currentTime=0),i.htmlElement.media.pause(),i._updateButtons(!1),i._getHtmlStatus(e,!0),i._updateInterface(),i._trigger(t.jPlayer.event.ended))},!1),e.addEventListener("error",function(){n.gate&&(i._updateButtons(!1),i._seeked(),i.status.srcSet&&(clearTimeout(i.internal.htmlDlyCmdId),i.status.waitForLoad=!0,i.status.waitForPlay=!0,i.status.video&&!i.status.nativeVideoControls&&i.internal.video.jq.css({width:"0px",height:"0px"}),i._validString(i.status.media.poster)&&!i.status.nativeVideoControls&&i.internal.poster.jq.show(),i.css.jq.videoPlay.length&&i.css.jq.videoPlay.show(),i._error({type:t.jPlayer.error.URL,context:i.status.src,message:t.jPlayer.errorMsg.URL,hint:t.jPlayer.errorHint.URL})))},!1),t.each(t.jPlayer.htmlEvent,function(r,o){e.addEventListener(this,function(){n.gate&&i._trigger(t.jPlayer.event[o])},!1)})},_addAuroraEventListeners:function(e,n){var i=this;e.volume=100*this.options.volume,e.on("progress",function(){n.gate&&(i.internal.cmdsIgnored&&this.readyState>0&&(i.internal.cmdsIgnored=!1),i._getAuroraStatus(e),i._updateInterface(),i._trigger(t.jPlayer.event.progress),e.duration>0&&i._trigger(t.jPlayer.event.timeupdate))},!1),e.on("ready",function(){n.gate&&i._trigger(t.jPlayer.event.loadeddata)},!1),e.on("duration",function(){n.gate&&(i._getAuroraStatus(e),i._updateInterface(),i._trigger(t.jPlayer.event.durationchange))},!1),e.on("end",function(){n.gate&&(i._updateButtons(!1),i._getAuroraStatus(e,!0),i._updateInterface(),i._trigger(t.jPlayer.event.ended))},!1),e.on("error",function(){n.gate&&(i._updateButtons(!1),i._seeked(),i.status.srcSet&&(i.status.waitForLoad=!0,i.status.waitForPlay=!0,i.status.video&&!i.status.nativeVideoControls&&i.internal.video.jq.css({width:"0px",height:"0px"}),i._validString(i.status.media.poster)&&!i.status.nativeVideoControls&&i.internal.poster.jq.show(),i.css.jq.videoPlay.length&&i.css.jq.videoPlay.show(),i._error({type:t.jPlayer.error.URL,context:i.status.src,message:t.jPlayer.errorMsg.URL,hint:t.jPlayer.errorHint.URL})))},!1)},_getHtmlStatus:function(t,e){var n=0,i=0,r=0,o=0;isFinite(t.duration)&&(this.status.duration=t.duration),n=t.currentTime,i=this.status.duration>0?100*n/this.status.duration:0,"object"==typeof t.seekable&&t.seekable.length>0?(r=this.status.duration>0?100*t.seekable.end(t.seekable.length-1)/this.status.duration:100,o=this.status.duration>0?100*t.currentTime/t.seekable.end(t.seekable.length-1):0):(r=100,o=i),e&&(n=0,o=0,i=0),this.status.seekPercent=r,this.status.currentPercentRelative=o,this.status.currentPercentAbsolute=i,this.status.currentTime=n,this.status.remaining=this.status.duration-this.status.currentTime,this.status.videoWidth=t.videoWidth,this.status.videoHeight=t.videoHeight,this.status.readyState=t.readyState,this.status.networkState=t.networkState,this.status.playbackRate=t.playbackRate,this.status.ended=t.ended},_getAuroraStatus:function(t,e){var n=0,i=0,r=0,o=0;this.status.duration=t.duration/1e3,n=t.currentTime/1e3,i=this.status.duration>0?100*n/this.status.duration:0,t.buffered>0?(r=this.status.duration>0?t.buffered*this.status.duration/this.status.duration:100,o=this.status.duration>0?n/(t.buffered*this.status.duration):0):(r=100,o=i),e&&(n=0,o=0,i=0),this.status.seekPercent=r,this.status.currentPercentRelative=o,this.status.currentPercentAbsolute=i,this.status.currentTime=n,this.status.remaining=this.status.duration-this.status.currentTime,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1},_resetStatus:function(){this.status=t.extend({},this.status,t.jPlayer.prototype.status)},_trigger:function(e,n,i){var r=t.Event(e);r.jPlayer={},r.jPlayer.version=t.extend({},this.version),r.jPlayer.options=t.extend(!0,{},this.options),r.jPlayer.status=t.extend(!0,{},this.status),r.jPlayer.html=t.extend(!0,{},this.html),r.jPlayer.aurora=t.extend(!0,{},this.aurora),r.jPlayer.flash=t.extend(!0,{},this.flash),n&&(r.jPlayer.error=t.extend({},n)),i&&(r.jPlayer.warning=t.extend({},i)),this.element.trigger(r)},jPlayerFlashEvent:function(e,n){if(e===t.jPlayer.event.ready)if(this.internal.ready){if(this.flash.gate){if(this.status.srcSet){var i=this.status.currentTime,r=this.status.paused;this.setMedia(this.status.media),this.volumeWorker(this.options.volume),i>0&&(r?this.pause(i):this.play(i))}this._trigger(t.jPlayer.event.flashreset)}}else this.internal.ready=!0,this.internal.flash.jq.css({width:"0px",height:"0px"}),this.version.flash=n.version,this.version.needFlash!==this.version.flash&&this._error({type:t.jPlayer.error.VERSION,context:this.version.flash,message:t.jPlayer.errorMsg.VERSION+this.version.flash,hint:t.jPlayer.errorHint.VERSION}),this._trigger(t.jPlayer.event.repeat),this._trigger(e);if(this.flash.gate)switch(e){case t.jPlayer.event.progress:case t.jPlayer.event.timeupdate:this._getFlashStatus(n),this._updateInterface(),this._trigger(e);break;case t.jPlayer.event.play:this._seeked(),this._updateButtons(!0),this._trigger(e);break;case t.jPlayer.event.pause:case t.jPlayer.event.ended:this._updateButtons(!1),this._trigger(e);break;case t.jPlayer.event.click:this._trigger(e);break;case t.jPlayer.event.error:this.status.waitForLoad=!0,this.status.waitForPlay=!0,this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"}),this._validString(this.status.media.poster)&&this.internal.poster.jq.show(),this.css.jq.videoPlay.length&&this.status.video&&this.css.jq.videoPlay.show(),this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media),this._updateButtons(!1),this._error({type:t.jPlayer.error.URL,context:n.src,message:t.jPlayer.errorMsg.URL,hint:t.jPlayer.errorHint.URL});break;case t.jPlayer.event.seeking:this._seeking(),this._trigger(e);break;case t.jPlayer.event.seeked:this._seeked(),this._trigger(e);break;case t.jPlayer.event.ready:break;default:this._trigger(e)}return!1},_getFlashStatus:function(t){this.status.seekPercent=t.seekPercent,this.status.currentPercentRelative=t.currentPercentRelative,this.status.currentPercentAbsolute=t.currentPercentAbsolute,this.status.currentTime=t.currentTime,this.status.duration=t.duration,this.status.remaining=t.duration-t.currentTime,this.status.videoWidth=t.videoWidth,this.status.videoHeight=t.videoHeight,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1},_updateButtons:function(t){t===e?t=!this.status.paused:this.status.paused=!t,t?this.addStateClass("playing"):this.removeStateClass("playing"),!this.status.noFullWindow&&this.options.fullWindow?this.addStateClass("fullScreen"):this.removeStateClass("fullScreen"),this.options.loop?this.addStateClass("looped"):this.removeStateClass("looped"),this.css.jq.play.length&&this.css.jq.pause.length&&(t?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide())),this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length&&(this.status.noFullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.hide()):this.options.fullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.show()):(this.css.jq.fullScreen.show(),this.css.jq.restoreScreen.hide())),this.css.jq.repeat.length&&this.css.jq.repeatOff.length&&(this.options.loop?(this.css.jq.repeat.hide(),this.css.jq.repeatOff.show()):(this.css.jq.repeat.show(),this.css.jq.repeatOff.hide()))},_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%"),this.css.jq.playBar.length&&(this.options.smoothPlayBar?this.css.jq.playBar.stop().animate({width:this.status.currentPercentAbsolute+"%"},250,"linear"):this.css.jq.playBar.width(this.status.currentPercentRelative+"%")),this.css.jq.currentTime.length&&this._convertTime(this.status.currentTime)!==this.css.jq.currentTime.text()&&this.css.jq.currentTime.text(this._convertTime(this.status.currentTime));var t="",e=this.status.duration,n=this.status.remaining;this.css.jq.duration.length&&("string"==typeof this.status.media.duration?t=this.status.media.duration:("number"==typeof this.status.media.duration&&(n=(e=this.status.media.duration)-this.status.currentTime),t=this.options.remainingDuration?(n>0?"-":"")+this._convertTime(n):this._convertTime(e)),t!==this.css.jq.duration.text()&&this.css.jq.duration.text(t))},_convertTime:n.prototype.time,_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg"),this.addStateClass("seeking")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg"),this.removeStateClass("seeking")},_resetGate:function(){this.html.audio.gate=!1,this.html.video.gate=!1,this.aurora.gate=!1,this.flash.gate=!1},_resetActive:function(){this.html.active=!1,this.aurora.active=!1,this.flash.active=!1},_escapeHtml:function(t){return t.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")},_qualifyURL:function(t){var e=document.createElement("div");return e.innerHTML='<a href="'+this._escapeHtml(t)+'">x</a>',e.firstChild.href},_absoluteMediaUrls:function(e){var n=this;return t.each(e,function(t,i){i&&n.format[t]&&"data:"!==i.substr(0,5)&&(e[t]=n._qualifyURL(i))}),e},addStateClass:function(t){this.ancestorJq.length&&this.ancestorJq.addClass(this.options.stateClass[t])},removeStateClass:function(t){this.ancestorJq.length&&this.ancestorJq.removeClass(this.options.stateClass[t])},setMedia:function(e){var n=this,i=!1,r=this.status.media.poster!==e.poster;this._resetMedia(),this._resetGate(),this._resetActive(),this.androidFix.setMedia=!1,this.androidFix.play=!1,this.androidFix.pause=!1,e=this._absoluteMediaUrls(e),t.each(this.formats,function(r,o){var a="video"===n.format[o].media;return t.each(n.solutions,function(r,s){if(n[s].support[o]&&n._validString(e[o])){var l="html"===s,c="aurora"===s;return a?(l?(n.html.video.gate=!0,n._html_setVideo(e),n.html.active=!0):(n.flash.gate=!0,n._flash_setVideo(e),n.flash.active=!0),n.css.jq.videoPlay.length&&n.css.jq.videoPlay.show(),n.status.video=!0):(l?(n.html.audio.gate=!0,n._html_setAudio(e),n.html.active=!0,t.jPlayer.platform.android&&(n.androidFix.setMedia=!0)):c?(n.aurora.gate=!0,n._aurora_setAudio(e),n.aurora.active=!0):(n.flash.gate=!0,n._flash_setAudio(e),n.flash.active=!0),n.css.jq.videoPlay.length&&n.css.jq.videoPlay.hide(),n.status.video=!1),i=!0,!1}}),!i&&void 0}),i?(this.status.nativeVideoControls&&this.html.video.gate||this._validString(e.poster)&&(r?this.htmlElement.poster.src=e.poster:this.internal.poster.jq.show()),"string"==typeof e.title&&(this.css.jq.title.length&&this.css.jq.title.html(e.title),this.htmlElement.audio&&this.htmlElement.audio.setAttribute("title",e.title),this.htmlElement.video&&this.htmlElement.video.setAttribute("title",e.title)),this.status.srcSet=!0,this.status.media=t.extend({},e),this._updateButtons(!1),this._updateInterface(),this._trigger(t.jPlayer.event.setmedia)):this._error({type:t.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:t.jPlayer.errorMsg.NO_SUPPORT,hint:t.jPlayer.errorHint.NO_SUPPORT})},_resetMedia:function(){this._resetStatus(),this._updateButtons(!1),this._updateInterface(),this._seeked(),this.internal.poster.jq.hide(),clearTimeout(this.internal.htmlDlyCmdId),this.html.active?this._html_resetMedia():this.aurora.active?this._aurora_resetMedia():this.flash.active&&this._flash_resetMedia()},clearMedia:function(){this._resetMedia(),this.html.active?this._html_clearMedia():this.aurora.active?this._aurora_clearMedia():this.flash.active&&this._flash_clearMedia(),this._resetGate(),this._resetActive()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.aurora.active?this._aurora_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},focus:function(){this.options.keyEnabled&&(t.jPlayer.focus=this)},play:function(t){"object"==typeof t&&this.options.useStateClassSkin&&!this.status.paused?this.pause(t):(t="number"==typeof t?t:NaN,this.status.srcSet?(this.focus(),this.html.active?this._html_play(t):this.aurora.active?this._aurora_play(t):this.flash.active&&this._flash_play(t)):this._urlNotSetError("play"))},videoPlay:function(){this.play()},pause:function(t){t="number"==typeof t?t:NaN,this.status.srcSet?this.html.active?this._html_pause(t):this.aurora.active?this._aurora_pause(t):this.flash.active&&this._flash_pause(t):this._urlNotSetError("pause")},tellOthers:function(e,n){var i=this,r="function"==typeof n,o=Array.prototype.slice.call(arguments);"string"==typeof e&&(r&&o.splice(1,1),t.jPlayer.prototype.destroyRemoved(),t.each(this.instances,function(){i.element!==this&&(!r||n.call(this.data("jPlayer"),i))&&this.jPlayer.apply(this,o)}))},pauseOthers:function(t){this.tellOthers("pause",function(){return this.status.srcSet},t)},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.aurora.active?this._aurora_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(t){t=this._limitValue(t,0,100),this.status.srcSet?this.html.active?this._html_playHead(t):this.aurora.active?this._aurora_playHead(t):this.flash.active&&this._flash_playHead(t):this._urlNotSetError("playHead")},_muted:function(t){this.mutedWorker(t),this.options.globalVolume&&this.tellOthers("mutedWorker",function(){return this.options.globalVolume},t)},mutedWorker:function(e){this.options.muted=e,this.html.used&&this._html_setProperty("muted",e),this.aurora.used&&this._aurora_mute(e),this.flash.used&&this._flash_mute(e),this.html.video.gate||this.html.audio.gate||(this._updateMute(e),this._updateVolume(this.options.volume),this._trigger(t.jPlayer.event.volumechange))},mute:function(t){"object"==typeof t&&this.options.useStateClassSkin&&this.options.muted?this._muted(!1):(t=t===e||!!t,this._muted(t))},unmute:function(t){t=t===e||!!t,this._muted(!t)},_updateMute:function(t){t===e&&(t=this.options.muted),t?this.addStateClass("muted"):this.removeStateClass("muted"),this.css.jq.mute.length&&this.css.jq.unmute.length&&(this.status.noVolume?(this.css.jq.mute.hide(),this.css.jq.unmute.hide()):t?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))},volume:function(t){this.volumeWorker(t),this.options.globalVolume&&this.tellOthers("volumeWorker",function(){return this.options.globalVolume},t)},volumeWorker:function(e){e=this._limitValue(e,0,1),this.options.volume=e,this.html.used&&this._html_setProperty("volume",e),this.aurora.used&&this._aurora_volume(e),this.flash.used&&this._flash_volume(e),this.html.video.gate||this.html.audio.gate||(this._updateVolume(e),this._trigger(t.jPlayer.event.volumechange))},volumeBar:function(e){if(this.css.jq.volumeBar.length){var n=t(e.currentTarget),i=n.offset(),r=e.pageX-i.left,o=n.width(),a=n.height()-e.pageY+i.top,s=n.height();this.volume(this.options.verticalVolume?a/s:r/o)}this.options.muted&&this._muted(!1)},_updateVolume:function(t){t===e&&(t=this.options.volume),t=this.options.muted?0:t,this.status.noVolume?(this.addStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.hide(),this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.hide(),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.hide()):(this.removeStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.show(),this.css.jq.volumeBarValue.length&&(this.css.jq.volumeBarValue.show(),this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"](100*t+"%")),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.show())},volumeMax:function(){this.volume(1),this.options.muted&&this._muted(!1)},_cssSelectorAncestor:function(e){var n=this;this.options.cssSelectorAncestor=e,this._removeUiClass(),this.ancestorJq=e?t(e):[],e&&1!==this.ancestorJq.length&&this._warning({type:t.jPlayer.warning.CSS_SELECTOR_COUNT,context:e,message:t.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:t.jPlayer.warningHint.CSS_SELECTOR_COUNT}),this._addUiClass(),t.each(this.options.cssSelector,function(t,e){n._cssSelector(t,e)}),this._updateInterface(),this._updateButtons(),this._updateAutohide(),this._updateVolume(),this._updateMute()},_cssSelector:function(e,n){var i=this;"string"==typeof n?t.jPlayer.prototype.options.cssSelector[e]?(this.css.jq[e]&&this.css.jq[e].length&&this.css.jq[e].unbind(".jPlayer"),this.options.cssSelector[e]=n,this.css.cs[e]=this.options.cssSelectorAncestor+" "+n,this.css.jq[e]=n?t(this.css.cs[e]):[],this.css.jq[e].length&&this[e]&&this.css.jq[e].bind("click.jPlayer",function(n){n.preventDefault(),i[e](n),i.options.autoBlur?t(this).blur():t(this).focus()}),n&&1!==this.css.jq[e].length&&this._warning({type:t.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[e],message:t.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[e].length+" found for "+e+" method.",hint:t.jPlayer.warningHint.CSS_SELECTOR_COUNT})):this._warning({type:t.jPlayer.warning.CSS_SELECTOR_METHOD,context:e,message:t.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:t.jPlayer.warningHint.CSS_SELECTOR_METHOD}):this._warning({type:t.jPlayer.warning.CSS_SELECTOR_STRING,context:n,message:t.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:t.jPlayer.warningHint.CSS_SELECTOR_STRING})},duration:function(t){this.options.toggleDuration&&(this.options.captureDuration&&t.stopPropagation(),this._setOption("remainingDuration",!this.options.remainingDuration))},seekBar:function(e){if(this.css.jq.seekBar.length){var n=t(e.currentTarget),i=n.offset(),r=100*(e.pageX-i.left)/n.width();this.playHead(r)}},playbackRate:function(t){this._setOption("playbackRate",t)},playbackRateBar:function(e){if(this.css.jq.playbackRateBar.length){var n,i=t(e.currentTarget),r=i.offset(),o=e.pageX-r.left,a=i.width(),s=i.height()-e.pageY+r.top,l=i.height();n=(this.options.verticalPlaybackRate?s/l:o/a)*(this.options.maxPlaybackRate-this.options.minPlaybackRate)+this.options.minPlaybackRate,this.playbackRate(n)}},_updatePlaybackRate:function(){var t=(this.options.playbackRate-this.options.minPlaybackRate)/(this.options.maxPlaybackRate-this.options.minPlaybackRate);this.status.playbackRateEnabled?(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.show(),this.css.jq.playbackRateBarValue.length&&(this.css.jq.playbackRateBarValue.show(),this.css.jq.playbackRateBarValue[this.options.verticalPlaybackRate?"height":"width"](100*t+"%"))):(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.hide(),this.css.jq.playbackRateBarValue.length&&this.css.jq.playbackRateBarValue.hide())},repeat:function(t){var e="object"==typeof t;this._loop(!(e&&this.options.useStateClassSkin&&this.options.loop))},repeatOff:function(){this._loop(!1)},_loop:function(e){this.options.loop!==e&&(this.options.loop=e,this._updateButtons(),this._trigger(t.jPlayer.event.repeat))},option:function(n,i){var r=n;if(0===arguments.length)return t.extend(!0,{},this.options);if("string"==typeof n){var o=n.split(".");if(i===e){for(var a=t.extend(!0,{},this.options),s=0;s<o.length;s++){if(a[o[s]]===e)return this._warning({type:t.jPlayer.warning.OPTION_KEY,context:n,message:t.jPlayer.warningMsg.OPTION_KEY,hint:t.jPlayer.warningHint.OPTION_KEY}),e;a=a[o[s]]}return a}for(var l=r={},c=0;c<o.length;c++)c<o.length-1?(l[o[c]]={},l=l[o[c]]):l[o[c]]=i}return this._setOptions(r),this},_setOptions:function(e){var n=this;return t.each(e,function(t,e){n._setOption(t,e)}),this},_setOption:function(e,n){var i=this;switch(e){case"volume":this.volume(n);break;case"muted":this._muted(n);break;case"globalVolume":this.options[e]=n;break;case"cssSelectorAncestor":this._cssSelectorAncestor(n);break;case"cssSelector":t.each(n,function(t,e){i._cssSelector(t,e)});break;case"playbackRate":this.options[e]=n=this._limitValue(n,this.options.minPlaybackRate,this.options.maxPlaybackRate),this.html.used&&this._html_setProperty("playbackRate",n),this._updatePlaybackRate();break;case"defaultPlaybackRate":this.options[e]=n=this._limitValue(n,this.options.minPlaybackRate,this.options.maxPlaybackRate),this.html.used&&this._html_setProperty("defaultPlaybackRate",n),this._updatePlaybackRate();break;case"minPlaybackRate":this.options[e]=n=this._limitValue(n,.1,this.options.maxPlaybackRate-.1),this._updatePlaybackRate();break;case"maxPlaybackRate":this.options[e]=n=this._limitValue(n,this.options.minPlaybackRate+.1,16),this._updatePlaybackRate();break;case"fullScreen":if(this.options[e]!==n){var r=t.jPlayer.nativeFeatures.fullscreen.used.webkitVideo;(!r||r&&!this.status.waitForPlay)&&(r||(this.options[e]=n),n?this._requestFullscreen():this._exitFullscreen(),r||this._setOption("fullWindow",n))}break;case"fullWindow":this.options[e]!==n&&(this._removeUiClass(),this.options[e]=n,this._refreshSize());break;case"size":this.options.fullWindow||this.options[e].cssClass===n.cssClass||this._removeUiClass(),this.options[e]=t.extend({},this.options[e],n),this._refreshSize();break;case"sizeFull":this.options.fullWindow&&this.options[e].cssClass!==n.cssClass&&this._removeUiClass(),this.options[e]=t.extend({},this.options[e],n),this._refreshSize();break;case"autohide":this.options[e]=t.extend({},this.options[e],n),this._updateAutohide();break;case"loop":this._loop(n);break;case"remainingDuration":this.options[e]=n,this._updateInterface();break;case"toggleDuration":this.options[e]=n;break;case"nativeVideoControls":this.options[e]=t.extend({},this.options[e],n),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this._restrictNativeVideoControls(),this._updateNativeVideoControls();break;case"noFullWindow":this.options[e]=t.extend({},this.options[e],n),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this._restrictNativeVideoControls(),this._updateButtons();break;case"noVolume":this.options[e]=t.extend({},this.options[e],n),this.status.noVolume=this._uaBlocklist(this.options.noVolume),this._updateVolume(),this._updateMute();break;case"emulateHtml":this.options[e]!==n&&(this.options[e]=n,n?this._emulateHtmlBridge():this._destroyHtmlBridge());break;case"timeFormat":this.options[e]=t.extend({},this.options[e],n);break;case"keyEnabled":this.options[e]=n,n||this!==t.jPlayer.focus||(t.jPlayer.focus=null);break;case"keyBindings":this.options[e]=t.extend(!0,{},this.options[e],n);break;case"audioFullScreen":this.options[e]=n;break;case"autoBlur":this.options[e]=n}return this},_refreshSize:function(){this._setSize(),this._addUiClass(),this._updateSize(),this._updateButtons(),this._updateAutohide(),this._trigger(t.jPlayer.event.resize)},_setSize:function(){this.options.fullWindow?(this.status.width=this.options.sizeFull.width,this.status.height=this.options.sizeFull.height,this.status.cssClass=this.options.sizeFull.cssClass):(this.status.width=this.options.size.width,this.status.height=this.options.size.height,this.status.cssClass=this.options.size.cssClass),this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){this.ancestorJq.length&&this.ancestorJq.addClass(this.status.cssClass)},_removeUiClass:function(){this.ancestorJq.length&&this.ancestorJq.removeClass(this.status.cssClass)},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),!this.status.waitForPlay&&this.html.active&&this.status.video||this.html.video.available&&this.html.used&&this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):!this.status.waitForPlay&&this.flash.active&&this.status.video&&this.internal.flash.jq.css({width:this.status.width,height:this.status.height})},_updateAutohide:function(){var t=this,e=".jPlayerAutohide",n="mousemove.jPlayer"+e,i=function(e){var n,i,r=!1;void 0!==t.internal.mouse?(n=t.internal.mouse.x-e.pageX,i=t.internal.mouse.y-e.pageY,r=Math.floor(n)>0||Math.floor(i)>0):r=!0,t.internal.mouse={x:e.pageX,y:e.pageY},r&&t.css.jq.gui.fadeIn(t.options.autohide.fadeIn,function(){clearTimeout(t.internal.autohideId),t.internal.autohideId=setTimeout(function(){t.css.jq.gui.fadeOut(t.options.autohide.fadeOut)},t.options.autohide.hold)})};this.css.jq.gui.length&&(this.css.jq.gui.stop(!0,!0),clearTimeout(this.internal.autohideId),delete this.internal.mouse,this.element.unbind(e),this.css.jq.gui.unbind(e),this.status.nativeVideoControls?this.css.jq.gui.hide():this.options.fullWindow&&this.options.autohide.full||!this.options.fullWindow&&this.options.autohide.restored?(this.element.bind(n,i),this.css.jq.gui.bind(n,i),this.css.jq.gui.hide()):this.css.jq.gui.show())},fullScreen:function(t){"object"==typeof t&&this.options.useStateClassSkin&&this.options.fullScreen?this._setOption("fullScreen",!1):this._setOption("fullScreen",!0)},restoreScreen:function(){this._setOption("fullScreen",!1)},_fullscreenAddEventListeners:function(){var e=this,n=t.jPlayer.nativeFeatures.fullscreen;n.api.fullscreenEnabled&&n.event.fullscreenchange&&("function"!=typeof this.internal.fullscreenchangeHandler&&(this.internal.fullscreenchangeHandler=function(){e._fullscreenchange()}),document.addEventListener(n.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1))},_fullscreenRemoveEventListeners:function(){var e=t.jPlayer.nativeFeatures.fullscreen;this.internal.fullscreenchangeHandler&&document.removeEventListener(e.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1)},_fullscreenchange:function(){this.options.fullScreen&&!t.jPlayer.nativeFeatures.fullscreen.api.fullscreenElement()&&this._setOption("fullScreen",!1)},_requestFullscreen:function(){var e=this.ancestorJq.length?this.ancestorJq[0]:this.element[0],n=t.jPlayer.nativeFeatures.fullscreen;n.used.webkitVideo&&(e=this.htmlElement.video),n.api.fullscreenEnabled&&n.api.requestFullscreen(e)},_exitFullscreen:function(){var e,n=t.jPlayer.nativeFeatures.fullscreen;n.used.webkitVideo&&(e=this.htmlElement.video),n.api.fullscreenEnabled&&n.api.exitFullscreen(e)},_html_initMedia:function(e){var n=t(this.htmlElement.media).empty();t.each(e.track||[],function(t,e){var i=document.createElement("track");i.setAttribute("kind",e.kind?e.kind:""),i.setAttribute("src",e.src?e.src:""),i.setAttribute("srclang",e.srclang?e.srclang:""),i.setAttribute("label",e.label?e.label:""),e.def&&i.setAttribute("default",e.def),n.append(i)}),this.htmlElement.media.src=this.status.src,"none"!==this.options.preload&&this._html_load(),this._trigger(t.jPlayer.event.timeupdate)},_html_setFormat:function(e){var n=this;t.each(this.formats,function(t,i){return n.html.support[i]&&e[i]?(n.status.src=e[i],n.status.format[i]=!0,n.status.formatType=i,!1):void 0})},_html_setAudio:function(t){this._html_setFormat(t),this.htmlElement.media=this.htmlElement.audio,this._html_initMedia(t)},_html_setVideo:function(t){this._html_setFormat(t),this.status.nativeVideoControls&&(this.htmlElement.video.poster=this._validString(t.poster)?t.poster:""),this.htmlElement.media=this.htmlElement.video,this._html_initMedia(t)},_html_resetMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id!==this.internal.video.id||this.status.nativeVideoControls||this.internal.video.jq.css({width:"0px",height:"0px"}),this.htmlElement.media.pause())},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.src="about:blank",this.htmlElement.media.load())},_html_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.htmlElement.media.load()),clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(t){var e=this,n=this.htmlElement.media;if(this.androidFix.pause=!1,this._html_load(),this.androidFix.setMedia)this.androidFix.play=!0,this.androidFix.time=t;else if(isNaN(t))n.play();else{this.internal.cmdsIgnored&&n.play();try{if(n.seekable&&!("object"==typeof n.seekable&&n.seekable.length>0))throw 1;n.currentTime=t,n.play()}catch(n){return void(this.internal.htmlDlyCmdId=setTimeout(function(){e.play(t)},250))}}this._html_checkWaitForPlay()},_html_pause:function(t){var e=this,n=this.htmlElement.media;if(this.androidFix.play=!1,t>0?this._html_load():clearTimeout(this.internal.htmlDlyCmdId),n.pause(),this.androidFix.setMedia)this.androidFix.pause=!0,this.androidFix.time=t;else if(!isNaN(t))try{if(n.seekable&&!("object"==typeof n.seekable&&n.seekable.length>0))throw 1;n.currentTime=t}catch(n){return void(this.internal.htmlDlyCmdId=setTimeout(function(){e.pause(t)},250))}t>0&&this._html_checkWaitForPlay()},_html_playHead:function(t){var e=this,n=this.htmlElement.media;this._html_load();try{if("object"==typeof n.seekable&&n.seekable.length>0)n.currentTime=t*n.seekable.end(n.seekable.length-1)/100;else{if(!(n.duration>0)||isNaN(n.duration))throw"e";n.currentTime=t*n.duration/100}}catch(n){return void(this.internal.htmlDlyCmdId=setTimeout(function(){e.playHead(t)},250))}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))},_html_setProperty:function(t,e){this.html.audio.available&&(this.htmlElement.audio[t]=e),this.html.video.available&&(this.htmlElement.video[t]=e)},_aurora_setAudio:function(e){var n=this;t.each(this.formats,function(t,i){return n.aurora.support[i]&&e[i]?(n.status.src=e[i],n.status.format[i]=!0,n.status.formatType=i,!1):void 0}),this.aurora.player=new AV.Player.fromURL(this.status.src),this._addAuroraEventListeners(this.aurora.player,this.aurora),"auto"===this.options.preload&&(this._aurora_load(),this.status.waitForLoad=!1)},_aurora_resetMedia:function(){this.aurora.player&&this.aurora.player.stop()},_aurora_clearMedia:function(){},_aurora_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.aurora.player.preload())},_aurora_play:function(e){this.status.waitForLoad||isNaN(e)||this.aurora.player.seek(e),this.aurora.player.playing||this.aurora.player.play(),this.status.waitForLoad=!1,this._aurora_checkWaitForPlay(),this._updateButtons(!0),this._trigger(t.jPlayer.event.play)},_aurora_pause:function(e){isNaN(e)||this.aurora.player.seek(1e3*e),this.aurora.player.pause(),e>0&&this._aurora_checkWaitForPlay(),this._updateButtons(!1),this._trigger(t.jPlayer.event.pause)},_aurora_playHead:function(t){this.aurora.player.duration>0&&this.aurora.player.seek(t*this.aurora.player.duration/100),this.status.waitForLoad||this._aurora_checkWaitForPlay()},_aurora_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1)},_aurora_volume:function(t){this.aurora.player.volume=100*t},_aurora_mute:function(t){t?(this.aurora.properties.lastvolume=this.aurora.player.volume,this.aurora.player.volume=0):this.aurora.player.volume=this.aurora.properties.lastvolume,this.aurora.properties.muted=t},_flash_setAudio:function(e){var n=this;try{t.each(this.formats,function(t,i){if(n.flash.support[i]&&e[i]){switch(i){case"m4a":case"fla":n._getMovie().fl_setAudio_m4a(e[i]);break;case"mp3":n._getMovie().fl_setAudio_mp3(e[i]);break;case"rtmpa":n._getMovie().fl_setAudio_rtmp(e[i])}return n.status.src=e[i],n.status.format[i]=!0,n.status.formatType=i,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(t){this._flashError(t)}},_flash_setVideo:function(e){var n=this;try{t.each(this.formats,function(t,i){if(n.flash.support[i]&&e[i]){switch(i){case"m4v":case"flv":n._getMovie().fl_setVideo_m4v(e[i]);break;case"rtmpv":n._getMovie().fl_setVideo_rtmp(e[i])}return n.status.src=e[i],n.status.format[i]=!0,n.status.formatType=i,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(t){this._flashError(t)}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"}),this._flash_pause(NaN)},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia()}catch(t){this._flashError(t)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(t){this._flashError(t)}this.status.waitForLoad=!1},_flash_play:function(t){try{this._getMovie().fl_play(t)}catch(t){this._flashError(t)}this.status.waitForLoad=!1,this._flash_checkWaitForPlay()},_flash_pause:function(t){try{this._getMovie().fl_pause(t)}catch(t){this._flashError(t)}t>0&&(this.status.waitForLoad=!1,this._flash_checkWaitForPlay())},_flash_playHead:function(t){try{this._getMovie().fl_play_head(t)}catch(t){this._flashError(t)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))},_flash_volume:function(t){try{this._getMovie().fl_volume(t)}catch(t){this._flashError(t)}},_flash_mute:function(t){try{this._getMovie().fl_mute(t)}catch(t){this._flashError(t)}},_getMovie:function(){return document[this.internal.flash.id]},_getFlashPluginVersion:function(){var t,e=0;if(window.ActiveXObject)try{if(t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){var n=t.GetVariable("$version");n&&(n=n.split(" ")[1].split(","),e=parseInt(n[0],10)+"."+parseInt(n[1],10))}}catch(t){}else navigator.plugins&&navigator.mimeTypes.length>0&&(t=navigator.plugins["Shockwave Flash"])&&(e=navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1"));return 1*e},_checkForFlash:function(t){var e=!1;return this._getFlashPluginVersion()>=t&&(e=!0),e},_validString:function(t){return t&&"string"==typeof t},_limitValue:function(t,e,n){return e>t?e:t>n?n:t},_urlNotSetError:function(e){this._error({type:t.jPlayer.error.URL_NOT_SET,context:e,message:t.jPlayer.errorMsg.URL_NOT_SET,hint:t.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(e){var n;n=this.internal.ready?"FLASH_DISABLED":"FLASH",this._error({type:t.jPlayer.error[n],context:this.internal.flash.swf,message:t.jPlayer.errorMsg[n]+e.message,hint:t.jPlayer.errorHint[n]}),this.internal.flash.jq.css({width:"1px",height:"1px"})},_error:function(e){this._trigger(t.jPlayer.event.error,e),this.options.errorAlerts&&this._alert("Error!"+(e.message?"\n"+e.message:"")+(e.hint?"\n"+e.hint:"")+"\nContext: "+e.context)},_warning:function(n){this._trigger(t.jPlayer.event.warning,e,n),this.options.warningAlerts&&this._alert("Warning!"+(n.message?"\n"+n.message:"")+(n.hint?"\n"+n.hint:"")+"\nContext: "+n.context)},_alert:function(t){var e="jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+t;this.options.consoleAlerts?window.console&&window.console.log&&window.console.log(e):alert(e)},_emulateHtmlBridge:function(){var e=this;t.each(t.jPlayer.emulateMethods.split(/\s+/g),function(t,n){e.internal.domNode[n]=function(t){e[n](t)}}),t.each(t.jPlayer.event,function(n,i){var r=!0;t.each(t.jPlayer.reservedEvent.split(/\s+/g),function(t,e){return e===n?(r=!1,!1):void 0}),r&&e.element.bind(i+".jPlayer.jPlayerHtml",function(){e._emulateHtmlUpdate();var t=document.createEvent("Event");t.initEvent(n,!1,!0),e.internal.domNode.dispatchEvent(t)})})},_emulateHtmlUpdate:function(){var e=this;t.each(t.jPlayer.emulateStatus.split(/\s+/g),function(t,n){e.internal.domNode[n]=e.status[n]}),t.each(t.jPlayer.emulateOptions.split(/\s+/g),function(t,n){e.internal.domNode[n]=e.options[n]})},_destroyHtmlBridge:function(){var e=this;this.element.unbind(".jPlayerHtml");var n=t.jPlayer.emulateMethods+" "+t.jPlayer.emulateStatus+" "+t.jPlayer.emulateOptions;t.each(n.split(/\s+/g),function(t,n){delete e.internal.domNode[n]})}},t.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"},t.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+t.jPlayer.prototype.version.script+" needs Jplayer.swf version "+t.jPlayer.prototype.version.needFlash+" but found "},t.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."},t.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"},t.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."},t.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}})?i.apply(e,r):i)||(t.exports=o),org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.audio",ver:"1.0",shortId:"audio",displayName:"Audio",author:"Amol Ghatol",title:"Audio Plugin",description:"",publishedDate:"",editor:{main:"editor/plugin.js",dependencies:[{type:"js",src:"editor/libs/jquery.jplayer.min.js"},{type:"plugin",plugin:"org.ekstep.assetbrowser",ver:"1.2"}],menu:[{id:"audio",category:"main",type:"icon",toolTip:"Add Audio",title:"Audio",iconClass:"icon-audio icon",onclick:{id:"org.ekstep.audio:assetbrowser:open"}}],config:[{propertyName:"aduioBrowser",title:"Audio Browser",description:"Choose a  from the browser",dataType:"audiobrowser",required:!0}],playable:!0}},org.ekstep.contenteditor.basePlugin.extend({audioData:void 0,name:void 0,initialize:function(){var t=this;ecEditor.addEventListener(t.manifest.id+":assetbrowser:open",this.openBrowser,this),ecEditor.addEventListener(t.manifest.id+":removeAudio",this.removeAudio,this),ecEditor.addEventListener(t.manifest.id+":toggleAudio",this.toggleAudio,this),ecEditor.addEventListener(t.manifest.id+":jplayerInit",this.jplayerInit,this)},newInstance:function(){var t=this.media?this.media[this.attributes.asset]:void 0;t&&t.src?(t.src=org.ekstep.contenteditor.mediaManager.getMediaOriginURL(t.src),this.addMedia(t),this.audioData={stageId:ecEditor.getCurrentStage().id,type:"audio",title:ecEditor._.isUndefined(t.name)?t.id:t.name,assetId:t.id,id:this.id,url:t.src},this.name=this.audioData.title,ecEditor.dispatchEvent("org.ekstep.stageconfig:addcomponent",this.audioData)):this.parent=void 0},openBrowser:function(){var t=this;ecEditor.dispatchEvent("org.ekstep.assetbrowser:show",{type:"audio",search_filter:{},callback:function(e){ecEditor.dispatchEvent(t.manifest.id+":create",e)}})},getCopy:function(){var t=this._super();return t.assetMedia=this.media[this.attributes.asset],t},onConfigChange:function(t,e){ecEditor.dispatchEvent("delete:invoke"),ecEditor.dispatchEvent(this.manifest.id+":create",e)},render:function(t){},removeAudio:function(t,e){ecEditor.getPluginInstance(e.id).remove(),ecEditor.dispatchEvent("org.ekstep.stageconfig:remove",e)},toggleAudio:function(t,e){ecEditor.getPluginInstance(e.id).config.autoplay=e.autoplay,ecEditor.dispatchEvent("org.ekstep.config:toggleStageEvent",{flag:e.autoplay,id:e.assetId})},jplayerInit:function(t,e){var n=e.id;ecEditor.jQuery("#"+n).jPlayer({swfPath:"js/jplayer/",supplied:"mp3",solution:"html, flash",preload:"auto",wmode:"window",ready:function(){ecEditor.jQuery(this).jPlayer("setMedia",{mp3:e.url}).jPlayer("play")},play:function(){ecEditor.jQuery(this).addClass("pause")},pause:function(){ecEditor.jQuery(this).removeClass("pause")},stop:function(){ecEditor.jQuery(this).removeClass("pause")}}),ecEditor.jQuery("#"+n).hasClass("pause")?ecEditor.jQuery("#"+n).jPlayer("pause"):ecEditor.jQuery("#"+n).jPlayer("play")},getDisplayName:function(){return this.name}}))},function(t,e){org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.hotspot",ver:"1.0",shortId:"hotspot",displayName:"Hotspot",author:"Santhosh Vasabhaktula",title:"Hotspot Plugin",description:"",publishedDate:"",editor:{main:"editor/plugin.js",dependencies:[],menu:[{id:"hotspot",category:"main",type:"icon",toolTip:"Add Hotspot",title:"Hotspot",iconClass:"icon-hotspot icon",onclick:{id:"org.ekstep.hotspot:create",data:{type:"roundrect",y:20,x:20,fill:"rgb(255,0,0)",w:15,h:25,opacity:.3,stroke:"rgba(255, 255, 255, 0)",strokeWidth:1}}}],behaviour:{rotatable:!0},configManifest:[{propertyName:"color",title:"Fill color",description:"Choose a color from the color picker",dataType:"colorpicker",required:!0,defaultValue:"rgb(255,0,0)"}],help:{src:"editor/help.md",dataType:"text"}},initdata:{props:{y:20,x:20}}},org.ekstep.contenteditor.basePlugin.extend({type:"hotspot",initialize:function(){},newInstance:function(){this.attributes.opacity=ecEditor._.isUndefined(this.attributes.opacity)?.4:this.attributes.opacity;var t=this.convertToFabric(this.attributes);"roundrect"===this.attributes.type&&(this.editorObj=new fabric.Rect(t))},onRemove:function(t){},updateAttributes:function(){var t=this;this&&(ecEditor._.forEach({"stroke-width":"stroke-width",scaleX:"scaleX",scaleY:"scaleY"},function(e,n){t.attributes[n]=t.editorObj.get(e)}),this.attributes.radius=this.editorObj.rx)},onConfigChange:function(t,e){"color"===t&&(this.editorObj.setFill(e),this.attributes.fill=e),ecEditor.render(),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()})},getConfig:function(){var t=this._super();return t.opacity=100*this.attributes.opacity,t.color=this.attributes.fill,t}}))},function(t,e){org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.scribblepad",ver:"1.0",author:"Santhosh Vasabhaktula",title:"Scribblepad Plugin",description:"",displayName:"Scribble",publishedDate:"",editor:{main:"editor/plugin.js",dependencies:[],menu:[{id:"scribblepad",category:"main",type:"icon",toolTip:"Add Scribblepad",title:"scribblepad",iconClass:"icon-scribble icon",onclick:{id:"org.ekstep.scribblepad:create",data:{type:"roundrect",y:20,x:25,fill:"#3399FF",w:27,h:60,stroke:"rgba(255, 255, 255, 0)",strokeWidth:2,opacity:.3}},media:[{id:"eraserImage",src:"assets/EraserImage.png",type:"image"}]}],configManifest:[{propertyName:"color",title:"Fill color",description:"Choose a color from the color picker",dataType:"colorpicker",required:!0,defaultValue:"#3399FF"},{propertyName:"opacity",title:"Transparency",description:"Set the transparency for element",dataType:"rangeslider",labelSuffix:"%",required:!0,minimumValue:0,maximumValue:100}],help:{src:"editor/help.md",dataType:"text"}},renderer:{main:"renderer/scribblepadplugin.js"}},org.ekstep.contenteditor.basePlugin.extend({type:"org.ekstep.scribblepad",initialize:function(){},newInstance:function(){var t=this.convertToFabric(this.attributes);t.stroke=this.attributes.stroke,t.strokeWidth=this.attributes.strokeWidth,t.fill=this.attributes.fill,"roundrect"===this.attributes.type&&(this.editorObj=new fabric.Rect(t),this.addMedia({id:"org.ekstep.scribblepad.eraser",src:"/assets/public/content/1460624453530trash.png",assetId:"org.ekstep.scribblepad.eraser",type:"image",preload:!0}))},updateAttributes:function(){var t=this;t&&ecEditor._.forEach({radius:"radius",opacity:"opacity",stroke:"stroke","stroke-width":"stroke-width",scaleX:"scaleX",scaleY:"scaleY"},function(e,n){t.attributes[n]=t.editorObj.get(e)})},onConfigChange:function(t,e){"color"===t&&(this.editorObj.setFill(e),this.attributes.fill=e),ecEditor.render(),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()})},getAttributes:function(){var t=this._super();return delete t.strokeDashArray,t["stroke-width"]=1,t.thickness=2,t},getConfig:function(){var t=this._super();return t.color=this.attributes.fill,t.opacity=100*this.attributes.opacity,t}}))},function(t,e){org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.stageconfig",ver:"1.0",author:"Sunil",title:"Stage Config",description:"",publishedDate:"",editor:{main:"editor/plugin.js"}},org.ekstep.contenteditor.basePlugin.extend({type:"org.ekstep.stageconfig",stageAudios:{},scope:ecEditor.getAngularScope(),initialize:function(){ecEditor.addEventListener(this.manifest.id+":addcomponent",this.register,this),ecEditor.addEventListener("stage:render:complete",this.stageRender,this),ecEditor.addEventListener(this.manifest.id+":remove",this.removeAudio,this)},register:function(t,e){this.stageAudios[e.stageId]||(this.stageAudios[e.stageId]=[]),this.stageAudios[e.stageId].push(e),this.showComponents(e.stageId)},getStageIndex:function(t){return ecEditor._.findIndex(this.stageConfig,function(e){return t.stageId===e.stageId})},addComponents:function(t){var e=this,n=ecEditor.getStagePluginInstances(t,["org.ekstep.audio"]);n.length&&(this.stageAudios[t]=this.stageAudios[t]?this.stageAudios[t]:[]),_.each(n,function(n){e.stageAudios[t].push(n.audioData)})},stageRender:function(t,e){this.showComponents(e.stageId)},showComponents:function(t){this.stageAudios[t]||this.addComponents(t);var e=this;this.hideStageComponents(t),setTimeout(function(){e.showStageComponents(t)},500),e=this,ecEditor.ngSafeApply(e.scope,function(){e.scope.currentStage=ecEditor.getCurrentStage()})},showStageComponents:function(t){var e=this,n=[];ecEditor._.forEach(this.stageAudios[t],function(t){var e=ecEditor.getPluginInstance(t.id);t.autoplay=e.config.autoplay,n.push(t)}),ecEditor.ngSafeApply(e.scope,function(){e.scope.stageAttachments.audio={},e.scope.stageAttachments.audio.items=n,e.scope.stageAttachments.audio.show=!0})},hideStageComponents:function(t){var e=this;ecEditor.ngSafeApply(e.scope,function(){e.scope.stageAttachments.audio={},e.scope.stageAttachments.audio.items=[],e.scope.stageAttachments.audio.show=!1})},removeAudio:function(t,e){this.stageAudios[e.stageId]=ecEditor._.reject(this.stageAudios[e.stageId],{id:e.id}),this.showComponents(e.stageId)}}))},function(t,e){org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.telemetry",ver:"1.0",author:"Sunil A S",title:"Telemetry Plugin",description:"",publishedDate:"",editor:{main:"editor/plugin.js"}},org.ekstep.contenteditor.basePlugin.extend({type:"org.ekstep.telemetry",service:void 0,initialize:function(){this.service=ecEditor.getService("telemetry"),ecEditor.addEventListener("content:load:complete",this.registerEvents,this),ecEditor.addEventListener("content:load:complete",this.logPluginErrors,this)},registerEvents:function(){var t=this;ecEditor.addEventListener("object:selected",function(e,n){n&&n.id&&""!=n.id&&t.interactEvent("select","","plugin",n.type,n.ver,n.id)},this),ecEditor.addEventListener("object:modified",function(e,n){n&&n.id&&""!=n.id&&t.interactEvent("modify","","plugin",n.type,n.ver,n.id)},this),ecEditor.addEventListener("object:unselected",function(e,n){n&&n.id&&""!=n.id&&t.interactEvent("unselect","","plugin",n.type,n.ver,n.id)},this),ecEditor.addEventListener("object:removed",function(e,n){if(n&&n.id&&""!=n.id){var i=ecEditor.getPluginInstance(n.id);t.service.pluginLifeCycle({type:"remove",pluginid:i.manifest.id,pluginver:i.manifest.ver,objectid:i.id,assetid:i.getAttribute("asset"),stage:ecEditor.getCurrentStage().id,containerid:"",containerplugin:""})}},this),ecEditor.addEventListener("stage:removed",function(e,n){if(n&&n.stageId&&""!=n.stageId){var i=ecEditor.getPluginInstance(n.stageId);t.service.pluginLifeCycle({type:"remove",pluginid:i.manifest.id,pluginver:i.manifest.ver,objectid:i.id,assetid:i.getAttribute("asset"),stage:i.id,containerid:"",containerplugin:""})}},this),ecEditor.addEventListener("stage:delete",function(e,n){n&&n.stageId&&""!=n.stageId&&t.interactEvent("click","delete","plugin","org.ekstep.stage","1.0",n.stageId)},this),ecEditor.addEventListener("stage:duplicate",function(e,n){n&&n.stageId&&""!=n.stageId&&t.interactEvent("duplicate","","plugin","org.ekstep.stage","1.0",n.stageId)},this),ecEditor.addEventListener("stage:select",function(e,n){n&&n.stageId&&""!=n.stageId&&t.interactEvent("select","","plugin","org.ekstep.stage","1.0",n.stageId)},this),ecEditor.addEventListener("stage:reorder",function(e,n){n&&n.stageId&&""!=n.stageId&&t.interactEvent("modify","reorder","stage","org.ekstep.stage","1.0",n.stageId)},this),ecEditor.addEventListener("plugin:load",function(e,n){n&&t.service.pluginLifeCycle({type:"load",pluginid:n.plugin,pluginver:n.version,objectid:"",stage:"",containerid:"",containerplugin:""})},this),ecEditor.addEventListener("plugin:add",function(e,n){var i=ecEditor.getCurrentStage()?ecEditor.getCurrentStage().id:"";n&&t.service.pluginLifeCycle({type:"add",pluginid:n.plugin,pluginver:n.version,objectid:n.instanceId,stage:i,containerid:"",containerplugin:""})},this),ecEditor.addEventListener("plugin:error",function(e,n){var i=ecEditor.getService("content").getContentMeta(org.ekstep.contenteditor.api.getContext("contentId")).pkgVersion,r={id:org.ekstep.contenteditor.api.getContext("contentId"),ver:!_.isUndefined(i)&&i.toString()||"0",type:"Content"};t.service.error({err:n.err,errtype:"CONTENT",stacktrace:n.stackTrace||"",object:r,plugin:{id:n.plugin,ver:n.version,category:""}})},this)},interactEvent:function(t,e,n,i,r,o){this.service.interact({type:t,subtype:e,target:n,pluginid:i,pluginver:r,objectid:o,stage:ecEditor.getCurrentStage().id})},logPluginErrors:function(t,e){var n=this,i=ecEditor.getService("content").getContentMeta(org.ekstep.contenteditor.api.getContext("contentId")).pkgVersion,r={id:org.ekstep.contenteditor.api.getContext("contentId"),ver:!_.isUndefined(i)&&i.toString()||"0",type:"Content"},o=org.ekstep.pluginframework.pluginManager.getErrors();_.each(o,function(t){n.service.error({err:t.error,errtype:"CONTENT",stacktrace:t.stackTrace||"",object:r,plugin:{id:t.plugin,ver:t.version,category:""}})})}}))},function(t,e){org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.preview",ver:"1.2",author:"Sunil A S",title:"preview",description:"",publishedDate:"",editor:{main:"editor/plugin.js",menu:[],dependencies:[{type:"css",src:"editor/style.css"}]}},org.ekstep.contenteditor.basePlugin.extend({type:"preview",previewURL:(ecEditor.getConfig("previewURL")||"/content/preview/preview.html")+"?webview=true",contentBody:void 0,initialize:function(){ecEditor.addEventListener("atpreview:show",this.initPreview,this);var t=document.createElement("div");t.classList.add("preview-modal"),t.id="contentPreview",t.innerHTML='<div class="preview-modal-content"><div class="preview-modal-wrapper"><div class="child preview-bgimage"></div><div class="child preview-iframe"><iframe id="previewContentIframe" width=100% height=100%></iframe></div></div>',document.body.appendChild(t)},initPreview:function(t,e){this.contentBody=e.contentBody,e.currentStage&&(this.contentBody.theme.startStage=ecEditor.getCurrentStage().id),ecEditor.getAngularScope().developerMode&&(this.contentBody.theme["plugin-manifest"]||(this.contentBody.theme["plugin-manifest"]={plugin:[]}),_.isArray(this.contentBody.theme["plugin-manifest"].plugin)||(this.contentBody.theme["plugin-manifest"].plugin=[this.contentBody.theme["plugin-manifest"].plugin]),this.contentBody.theme["plugin-manifest"].plugin.splice(0,0,{id:"org.ekstep.developer",ver:"1.0",type:"plugin",hostPath:org.ekstep.pluginframework.hostRepo.basePath,preload:!0})),this.showPreview(e)},getConfiguration:function(){var t={},e={},n={repos:ecEditor.getConfig("pluginRepo"),showEndpage:!0},i=ecEditor.getService("content").getContentMeta(ecEditor.getContext("contentId"));return t.etags=ecEditor.getContext("etags")||[],e.context={mode:"edit",contentId:ecEditor.getContext("contentId"),sid:ecEditor.getContext("sid"),uid:ecEditor.getContext("uid"),channel:ecEditor.getContext("channel")||"in.ekstep",pdata:ecEditor.getContext("pdata")||{id:"in.ekstep",pid:"",ver:"1.0"},app:t.etags.app||[],dims:t.etags.dims||[],partner:t.etags.partner||[]},ecEditor.getConfig("previewConfig")?e.config=ecEditor.getConfig("previewConfig"):e.config=n,e.metadata=i,e.data="application/vnd.ekstep.ecml-archive"==i.mimeType?this.contentBody:{},e},showPreview:function(t){var e=this,n=e.getConfiguration(),i=ecEditor.jQuery("#previewContentIframe")[0];if(t.parentElement)n.config.showEndPage=n.config.showEndPage||!1,i=ecEditor.jQuery(t.element)[0];else{var r=ecEditor.resolvePluginResource(e.manifest.id,e.manifest.ver,"editor/images/editor-frame.png");ecEditor.jQuery(".preview-bgimage").css("background","url("+r+")")}ecEditor._.isEmpty(i.src)?(i.src=e.previewURL,i.onload=function(){i.contentWindow.initializePreview(n)}):i.contentWindow.initializePreview(n);var o=document.getElementById("contentPreview"),a=document.getElementsByClassName("preview-modal-content")[0];t.parentElement||(o.style.display="block"),window.onclick=function(t){t.target==a&&(o.style.display="none",i.contentWindow.EkstepRendererAPI.stopAll(),i.contentWindow.EkstepRendererAPI.removeHtmlElements())}}}))},function(t,e,n){var i,r,o;!function(){"use strict";function a(t){return angular.isArray(t)?2==t.length?t.concat(t):3==t.length?t.concat([t[1]]):t:[t,t,t,t]}function s(t,e){if(!e)return t;var n=l(e[0])?parseFloat(e[0])*t.height/100:e[0],i=l(e[1])?parseFloat(e[1])*t.width/100:e[1],r=l(e[2])?parseFloat(e[2])*t.height/100:e[2],o=l(e[3])?parseFloat(e[3])*t.width/100:e[3];return{top:t.top-n,left:t.left-o,bottom:t.bottom+r,right:t.right+i,height:t.height+n+r,width:t.width+o+i}}function l(t){return angular.isString(t)&&t.indexOf("%")>0}function c(t){this.didSubscribeFunc=t}function u(t,e){return new c(function(n){var i=function(t){n(t)},r=angular.element(t);e.split(" ").map(t=>r[0].addEventListener(t,i,!0)),n.$dispose=function(){e.split(" ").map(t=>r[0].removeEventListener(t,i,!0))}})}angular.module("angular-inview",[]).directive("inView",["$parse",function(t){return{restrict:"A",require:"?^^inViewContainer",link:function(e,n,i,r){var o={};i.inViewOptions&&(o=e.$eval(i.inViewOptions)),o.offset&&(o.offset=a(o.offset)),o.viewportOffset&&(o.viewportOffset=a(o.viewportOffset));var l,d=(l={type:"initial"},new c(function(t){setTimeout(function(){t(l)})})).merge(u(window,"checkInView click ready wheel mousewheel DomMouseScroll MozMousePixelScroll resize scroll touchmove mouseup keydown"));r&&(d=d.merge(r.eventsSignal)),o.throttle&&(d=d.throttle(o.throttle));var h=d.map(function(t){var e;e=s(e=r?r.getViewportRect():function(){var t={top:0,left:0,width:window.innerWidth,right:window.innerWidth,height:window.innerHeight,bottom:window.innerHeight};return t.height?t:("CSS1Compat"===document.compatMode?(t.width=t.right=document.documentElement.clientWidth,t.height=t.bottom=document.documentElement.clientHeight):(t.width=t.right=document.body.clientWidth,t.height=t.bottom=document.body.clientHeight),t)}(),o.viewportOffset);var i,a,l=s(n[0].getBoundingClientRect(),o.offset),c={inView:!!(n[0].offsetWidth||n[0].offsetHeight||n[0].getClientRects().length)&&(i=l,a=e,!(a.left>i.right||a.right<i.left||a.top>i.bottom||a.bottom<i.top)),event:t,element:n,elementRect:l,viewportRect:e};return o.generateParts&&c.inView&&(c.parts={},c.parts.top=l.top>=e.top,c.parts.left=l.left>=e.left,c.parts.bottom=l.bottom<=e.bottom,c.parts.right=l.right<=e.right),c}).scan({},function(t,e){return o.generateDirection&&e.inView&&t.elementRect&&(e.direction={horizontal:e.elementRect.left-t.elementRect.left,vertical:e.elementRect.top-t.elementRect.top}),e.changed=e.inView!==t.inView||!angular.equals(e.parts,t.parts)||!angular.equals(e.direction,t.direction),e}).filter(function(t){return!(!t.changed||"initial"===t.event.type&&!t.inView)}),f=t(i.inView),p=h.subscribe(function(t){e.$applyAsync(function(){f(e,{$inview:t.inView,$inviewInfo:t})})});e.$on("$destroy",p)}}}]).directive("inViewContainer",function(){return{restrict:"A",controller:["$element",function(t){this.element=t,this.eventsSignal=u(t,"scroll"),this.getViewportRect=function(){return t[0].getBoundingClientRect()}}]}}),c.prototype.subscribe=function(t){return this.didSubscribeFunc(t),function(){t.$dispose&&(t.$dispose(),t.$dispose=null)}},c.prototype.map=function(t){var e=this;return new c(function(n){n.$dispose=e.subscribe(function(e){n(t(e))})})},c.prototype.filter=function(t){var e=this;return new c(function(n){n.$dispose=e.subscribe(function(e){t(e)&&n(e)})})},c.prototype.scan=function(t,e){var n=this;return new c(function(i){var r=t;i.$dispose=n.subscribe(function(t){r=e(r,t),i(r)})})},c.prototype.merge=function(t){return function(){var t=arguments;return new c(function(e){for(var n=[],i=t.length-1;i>=0;i--)n.push(t[i].subscribe(function(){e.apply(null,arguments)}));e.$dispose=function(){for(var t=n.length-1;t>=0;t--)n[t]&&n[t]()}})}(this,t)},c.prototype.throttle=function(t){var e,n,i=this;return new c(function(r){var o=i.subscribe(function(){var i=+new Date,o=arguments;e&&i<e+t?(clearTimeout(n),n=setTimeout(function(){e=i,r.apply(null,o)},t)):(e=i,r.apply(null,o))});r.$dispose=function(){clearTimeout(n),o&&o()}})},r=[n(15)],void 0===(o="function"==typeof(i="angular-inview")?i.apply(e,r):i)||(t.exports=o)}(),angular.module("puigcerber.camelize",[]).filter("camelize",function(){return function(t){return t?t.replace(/[^A-Za-z0-9]+(\w|$)/g,function(t,e){return e.toUpperCase()}).replace(/^(.)/,function(t,e){return e.toLowerCase()}):t}}),org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.activitybrowser",ver:"1.3",author:"Archana Baskaran",title:"Activity Browser Plugin",description:"",publishedDate:"",editor:{main:"editor/plugin.js",dependencies:[{type:"css",src:"editor/plugin.css"},{type:"js",src:"editor/libs/angular-inview.js"},{type:"js",src:"editor/camelize.js"}],views:[{template:"./activityBrowser.html",controller:"./activityBrowser.js"}],menu:[{id:"activitybrowser",category:"main",type:"icon",toolTip:"Add Activity",title:"Activity Browser",iconClass:"fa fa-magic",onclick:{id:"org.ekstep.activitybrowser:showpopup"}}],configManifest:[]}},org.ekstep.contenteditor.basePlugin.extend({currentInstance:void 0,initialize:function(){var t=this;ecEditor.addEventListener("org.ekstep.activitybrowser:showpopup",this.loadBrowser,this),ecEditor.resolvePluginResource(t.manifest.id,t.manifest.ver,"editor/activityBrowser.html"),ecEditor.resolvePluginResource(t.manifest.id,t.manifest.ver,"editor/activityBrowser.js"),ecEditor.getService("popup").loadNgModules(n(43),n(44),!0)},newInstance:function(){},loadBrowser:function(){currentInstance=this,ecEditor.getService("popup").open({template:"activityBrowser",controller:"activityBrowserCtrl",controllerAs:"$ctrl",resolve:{instance:function(){return currentInstance}},width:900,showClose:!1,className:"ngdialog-theme-plain"},function(){})}}))},function(t,e){t.exports='<script type="text/ng-template" ng-app="activityBrowserApp" ng-controller="activityBrowserCtrl as $ctrl" id="activityBrowser">\n    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/jquery.slick/1.6.0/slick.css" />\n    \x3c!-- Add the slick-theme.css if you want default styling --\x3e\n    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/jquery.slick/1.6.0/slick-theme.css" />\n    <div class="ui modal fullscreen active activity-browser-modal">\n        <div class="header" style="padding-right:1em;">\n            <div class="ui two column grid">\n                <div class="row">\n                    <div class="column">\n                        <span>Add activity</span>\n                    </div>\n                    <div class="column right aligned">\n                        <i class="cursor-pointer close link icon" ng-click="closePopup()"></i>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div ng-class="$ctrl.showPluginDetails ? \'content\' : \'content full-screen\'">\n            <div class="ui divided grid activity-browser-controls">\n                <div class="row" style="background-color: #F9F9F9;" ng-show="!$ctrl.showPluginDetails">\n                    <div class="six wide column" style="display:flex; flex-flow:row; align-items:center;">\n                        <span class="height-100-percent" style="margin-right:10px;"><i class="search icon" style="margin-top:10px;"></i></span>\n                        <div class="ui transparent input custom-input height-100-percent" style=\'flex-grow:1; margin-right:5px;\'>\n                            <input class="height-100-percent" type="text" placeholder="Search activity" ng-model="$ctrl.activityOptions.searchQuery" ng-keypress="$event.keyCode === 13 ? $ctrl.getActivities() : null" />\n                        </div>\n                        <button class="ui primary button height-100-percent" ng-click="$ctrl.getActivities();$ctrl.generateTelemetry({type: \'click\', subtype: \'search\', target: \'searchActivityCard\'})">Search</button>\n                    </div>\n                    <div class="ui vertical divider"></div>\n                    <div class="three wide right aligned column" style="display:flex; flex-flow:row; align-items:center;">\n                        <label style="margin-right:10px;">\n                            Category\n                        </label>\n                        <div style="flex-grow:1;" class="ui input" ng-init="$ctrl.activityOptions.categories = []">\n                            <select multiple="" class="ui dropdown search lableCls custom-dropdown" ng-model="$ctrl.activityOptions.categories" ng-options="type for type in $ctrl.categories" ng-change="$ctrl.getActivities();$ctrl.generateTelemetry({type: \'click\', subtype:    \'advanceSearch\', target: \'searchActivityCard\'})">\n                                <option value="">\n                                    Type\n                                </option>\n                            </select>\n                        </div>\n                    </div>\n                    <div class="three wide right aligned column" style="box-shadow:none; display:flex; flex-flow:row; align-items:center;">\n                        <label style="margin-right:10px;">\n                            Concepts\n                        </label>\n                        <div class="ui fluid transparent input custom-input" style="flex-grow:1;">\n                            <input type="text" placeholder="Concepts" ng-model="$ctrl.activityOptions.conceptsPlaceHolder" id="activityConceptSelector" selectable="false" readonly>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="ui grid activity-browser-body">\n                <div ng-if="$ctrl.showPluginDetails" class="row activity-information-row">\n                    <div class="twelve wide column height-100-percent" style="padding-left:114px; padding-right:115px; padding-top: 1.5em;">\n                        <div class="ui items height-100-percent">\n                            <div class="item" style="width:50%;">\n                                <div class="ui small image">\n                                    <img ng-src="{{$ctrl.pluginDetails.appIcon || $ctrl.defaultActivityImage}}" />\n                                </div>\n                                <div class="content">\n                                    <div class="header">\n                                        <a style="color:#4a4a4a;">{{$ctrl.pluginDetails.name | limitTo: 30}}</a>\n                                        <span style="margin-left:23px; color:#9b9b9b; font-size:12px;" data-tooltip="Version : {{$ctrl.pluginDetails.semanticVersion}}"><i class="info circle link icon"></i></span>\n                                    </div>\n                                    <div class="meta" style="margin-top:5px; color: #9b9b9b;">\n                                        by&nbsp;:&nbsp;<span>{{$ctrl.pluginDetails.creator}}</span>\n                                    </div>\n                                    <div class="description" style="display:flex; justify-content:space-between; margin-top:20px; color:#4a4a4a;">\n                                        <p>\n                                            Grade&nbsp;:&nbsp;<span ng-repeat="grade in $ctrl.pluginDetails.gradeLevel">\n                                                <span ng-if="$last">&nbsp;and&nbsp;</span> {{grade.replace(\'Grade \',\'\')}}\n                                            <span ng-if="!$last && ($index < $ctrl.pluginDetails.gradeLevel.length-2)">,</span>\n                                            </span>\n                                        </p>\n                                        <p>\n                                            Category&nbsp;:&nbsp;<span ng-repeat="category in $ctrl.pluginDetails.category">\n                                                {{category}}</span>\n                                        </p>\n                                    </div>\n                                    <div class="description" style="display:flex; justify-content:space-between; margin-top:0; color:#4a4a4a;">\n                                        <p>\n                                            Subject&nbsp;:&nbsp;<span>{{$ctrl.pluginDetails.subject}}</span>\n                                        </p>\n                                        <p>\n                                            Language&nbsp;:&nbsp;<span ng-repeat="language in $ctrl.pluginDetails.language">\n                                                {{language}}</span>\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="item" style="margin-top:2em;">\n                                <div class="content">\n                                    <div class="header" style="color:#4a4a4a;">Description</div>\n                                    <div class="description" style="color:#9b9b9b; max-height:100px; overflow-y:auto; overflow-x:hidden;">\n                                        {{$ctrl.pluginDetails.description | limitTo : 350}}\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="item" style="margin-top:2em;">\n                                <div class="content">\n                                    <div ng-if="$ctrl.imageAvailable">\n                                        <slider images="$ctrl.images"></slider>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div ng-if="!$ctrl.showPluginDetails" class="row height-100-percent">\n                    <div class="column height-100-percent">\n                        <div class="ui segment height-100-percent activity-segment" style="overflow-y:auto; border:none; box-shadow:none; padding:0; padding-bottom:1em;">\n                            <div class="ui vertical segment activity-browser-content-loader" ng-if="$ctrl.loading">\n                                <div class="ui active inverted dimmer">\n                                    <div class="ui text loader">Just one second, We\'re fetching activities for you.</div>\n                                </div>\n                            </div>\n                            <div ng-if="$ctrl.activityPageApiResponse" ng-class=" $ctrl.expandedGroupId !=\'\' && $ctrl.expandedGroupId != \'{{activityGroup.name | camelize}}\' ? \'ui vertical segment     hide-segment\' : \'ui vertical segment show-segment\'" ng-show="$ctrl.activityGroupsList.length > 0 && !$ctrl.hideMainPage" id="{{activityGroup.name | camelize}}" ng-repeat="activityGroup in $ctrl.activityGroupsList">\n                                <p>{{activityGroup.name}} ({{activityGroup.contents.length}})<a ng-show="($ctrl.clickedViewMoreLinkId != \'{{activityGroup.name | camelize}}ViewMore\')" id="{{activityGroup.name | camelize}}ViewMore" style="float:right; cursor:pointer;" ng-click="$ctrl.viewMorePlugins($event)">View More&nbsp;<i class="angle right icon"></i></a></p>\n                                <div ng-class="$ctrl.expandedGroupId == \'{{activityGroup.name | camelize}}\' ? \'ui five stackable cards activity-cards expanded-segment\' : \'ui five stackable cards activity-cards collapsed-segment\'">\n                                    <div class="ui link card activity-card" ng-click="$ctrl.viewPluginDetails(activity); $ctrl.generateTelemetry({type: \'click\', subtype: \'select\', target: \'activityCard\'});" ng-repeat="activity in activityGroup.contents track by $index">\n                                        <div class="blurring dimmable image">\n                                            <div class="ui dimmer">\n                                                <div class="content">\n                                                    <div class="center">\n                                                        <p title="{{activity.description}}">{{activity.description | limitTo:100}}<span ng-if="activity.description.length > 100">...</span></p>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <img class="activity-appicon" ng-src="{{activity.appIcon || $ctrl.defaultActivityImage}}">\n                                        </div>\n                                        <div class="content activity-meta">\n                                            <div class="ui tiny header" style="margin-bottom:0.5em">\n                                                {{activity.name | limitTo:23}}<span ng-if="activity.name.length > 23">...</span>\n                                            </div>\n                                            <div class="meta">\n                                                <div ng-if="activity.gradeLevel">\n                                                    Grade :\n                                                    <span ng-repeat="grade in activity.gradeLevel"><span ng-if="$index < 2">{{grade.replace(\'Grade \',\'\')}}</span><span ng-if="$index == 2"> and {{activity.gradeLevel.length - 2}} more..</span><span ng-if="($index < 1) && !$last">,</span>\n                                                    </span>\n                                                </div>\n                                                <div ng-if="activity.subject">\n                                                    Subject :\n                                                    <span>{{activity.subject}}</span>\n                                                </div>\n                                                <div ng-if="activity.language">\n                                                    Language :\n                                                    <span ng-repeat="lang in activity.language"><span ng-if="$index < 2">{{lang}}</span><span ng-if="$index == 2"> and {{activity.language.length - 2}} more..</span><span ng-if="($index < 1) && !$last">,</span>\n                                                    </span>\n                                                </div>\n                                                <div ng-if="activity.category">\n                                                    Category :\n                                                    <span ng-repeat="cat in activity.category"><span ng-if="$index < 2">{{cat}}</span><span ng-if="$index == 2"> and {{activity.category.length - 2}} more..</span><span ng-if="($index < 1) && !$last">,</span>\n                                                    </span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div class="content" style="padding:5px 10px;">\n                                            <div class="right floated">\n                                                <button class="ui mini primary button" ng-click="$ctrl.addPlugin(activity);$ctrl.generateTelemetry({type: \'click\', subtype: \'add\', target: \'addActivityCard\'})">Add</button>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div ng-if="!$ctrl.activityPageApiResponse" class="ui vertical segment" ng-show="$ctrl.activitiesList.length > 0 && !$ctrl.hideMainPage" style="border-bottom:transparent;">\n                                <div class="ui five stackable cards activity-cards" ng-show="$ctrl.activitiesList.length > 0 && !$ctrl.hideMainPage">\n                                    <div class="ui link card activity-card" ng-repeat="activity in $ctrl.activitiesList track by $index" in-view="lineInView($index, $inview, activity, \'ActivityBrowser\', $index)" in-view-options="{ throttle: 1000 }" ng-click="$ctrl.viewPluginDetails(activity); $ctrl.generateTelemetry({type: \'click\', subtype: \'select\', target: \'activityCard\'});">\n                                        <div class="blurring dimmable image">\n                                            <div class="ui dimmer">\n                                                <div class="content">\n                                                    <div class="center">\n                                                        <p title="{{activity.description}}">{{activity.description | limitTo:100}}<span ng-if="activity.description.length > 100">...</span></p>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <img class="activity-appicon" ng-src="{{activity.appIcon || $ctrl.defaultActivityImage}}">\n                                        </div>\n                                        <div class="content activity-meta">\n                                            <div class="ui tiny header" style="margin-bottom:0.5em">\n                                                {{activity.name | limitTo:23}}<span ng-if="activity.name.length > 23">...</span>\n                                            </div>\n                                            <div class="meta">\n                                                <div ng-if="activity.gradeLevel">\n                                                    Grade :\n                                                    <span ng-repeat="grade in activity.gradeLevel"><span ng-if="$index < 2">{{grade.replace(\'Grade \',\'\')}}</span><span ng-if="$index == 2"> and {{activity.gradeLevel.length - 2}} more..</span><span ng-if="($index < 1) && !$last">,</span>\n                                                    </span>\n                                                </div>\n                                                <div ng-if="activity.subject">\n                                                    Subject :\n                                                    <span>{{activity.subject}}</span>\n                                                </div>\n                                                <div ng-if="activity.language">\n                                                    Language :\n                                                    <span ng-repeat="lang in activity.language"><span ng-if="$index < 2">{{lang}}</span><span ng-if="$index == 2"> and {{activity.language.length - 2}} more..</span><span ng-if="($index < 1) && !$last">,</span>\n                                                    </span>\n                                                </div>\n                                                <div ng-if="activity.category">\n                                                    Category :\n                                                    <span ng-repeat="cat in activity.category"><span ng-if="$index < 2">{{cat}}</span><span ng-if="$index == 2"> and {{activity.category.length - 2}} more..</span><span ng-if="($index < 1) && !$last">,</span>\n                                                    </span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div class="content" style="padding:5px 10px;">\n                                            <div class="right floated">\n                                                <button class="ui mini primary button" ng-click="$ctrl.addPlugin(activity);$ctrl.generateTelemetry({type: \'click\', subtype: \'add\', target: \'addActivityCard\'})">Add</button>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="ui vertical segment" ng-show="$ctrl.noActivities">\n                                <div class="ui huge info message activity-browser-center">\n                                    <p>No activities found.</p>\n                                </div>\n                            </div>\n                            <div class="ui vertical segment" ng-if="$ctrl.errorLoadingActivities">\n                                <div class="ui negative message activity-browser-center">\n                                    <div class="header">\n                                        We\'re sorry!\n                                    </div>\n                                    <p>There\'s an error while fetching activities, <a href ng-click="$ctrl.getActivities();$ctrl.generateTelemetry({type: \'click\', subtype: \'search\', target: \'searchActivityCard\'})">Click here</a> to try again.</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="actions" ng-show="$ctrl.showPluginDetails || $ctrl.viewMorePluginsFlag">\n            <div class="ui grid">\n                <div class="ui two wide column left aligned">\n                    <div class="ui basic primary button" ng-click="$ctrl.closePluginDetails();$ctrl.generateTelemetry({type: \'click\', subtype: \'back\', target: \'backButton\'})">Back</div>\n                </div>\n                <div class="ui ten wide column right aligned">\n                    <button class="ui primary button" ng-click="$ctrl.addPlugin($ctrl.selectedPlugin);$ctrl.generateTelemetry({type: \'click\', subtype: \'add\', target: \'addActivityCard\'})">Add</button>\n                </div>\n            </div>\n        </div>\n    </div>\n<\/script>'},function(t,e,n){"use strict";angular.module("activityBrowserApp",["angular-inview"]).controller("activityBrowserCtrl",["$scope","instance",function(t,e){var n=this;ecEditor.getAngularScope(),n.errorLoadingActivities=!1,n.activitiesList=[],n.noActivities=!1,n.loading=!1,n.inViewLogs=[],n.defaultActivityImage=ecEditor.resolvePluginResource(e.manifest.id,e.manifest.ver,"assets/default-activity.png"),n.activityOptions={searchQuery:"",conceptsPlaceHolder:"(0) Concepts",concepts:{},categories:{}},n.categories={core:"core",learning:"learning",literacy:"literacy",math:"math",science:"science",time:"time",wordnet:"wordnet",game:"game",mcq:"mcq",mtf:"mtf",ftb:"ftb"},n.viewMorePluginsFlag=!1,n.clickedViewMoreLinkId="",n.expandedGroupId="",n.showPluginDetails=!1,n.pluginDetails={},n.images=t.images=[],n.viewMorePlugins=function(e){n.viewMorePluginsFlag=!0,n.clickedViewMoreLinkId=e.target.id,n.expandedGroupId=n.clickedViewMoreLinkId.replace("ViewMore",""),t.$safeApply()},n.viewPluginDetails=function(e){n.hideMainPage=!0,n.getPluginDetails(e.identifier),n.selectedPlugin=e,t.$safeApply()},n.closePluginDetails=function(){n.showPluginDetails=!1,n.viewMorePluginsFlag=!1,n.clickedViewMoreLinkId="",n.expandedGroupId="",n.hideMainPage=!1,n.applyDimmerToCard(),t.$safeApply()},n.getActivities=function(){n.loading=!0,n.hideMainPage=!1,n.errorLoadingActivities=!1,n.noActivities=!1,n.activitiesList=[],t.$safeApply();var e={request:{query:n.activityOptions.searchQuery,filters:{objectType:["Content"],contentType:["plugin"],status:["live"],concepts:n.activityOptions.concepts,category:n.activityOptions.categories},sort_by:{lastUpdatedOn:"desc"},limit:200}},i=ecEditor.getConfig("pluginsRepoUrl")?ecEditor.getConfig("pluginsRepoUrl"):void 0;ecEditor.getService("search").pluginsSearch(i,e,function(e,i){n.loading=!1,t.$safeApply(),e?n.errorLoadingActivities=!0:i.data.result.count<=0?n.noActivities=!0:(ecEditor._.forEach(i.data.result.content,function(t){_.isUndefined(t.category)?n.activitiesList.push(t):t.category&&-1==t.category.indexOf("library")&&n.activitiesList.push(t)}),n.applyDimmerToCard())})},n.addPlugin=function(e){var i=new Date(e.lastPublishedOn||(new Date).toString()).getTime();ecEditor.loadAndInitPlugin(e.code,e.semanticVersion,i),n.generateImpression({type:"view",subtype:"popup-add",pageid:"ActivityBrowser"}),n.inViewLogs=[],t.closeThisDialog()},n.getActivities(),ecEditor.dispatchEvent("org.ekstep.conceptselector:init",{element:"activityConceptSelector",selectedConcepts:[],callback:function(e){n.activityOptions.conceptsPlaceHolder="("+e.length+") concepts selected",n.activityOptions.concepts=_.map(e,function(t){return t.id}),t.$safeApply(),n.getActivities()}}),n.applyDimmerToCard=function(){setTimeout(function(){ecEditor.jQuery(".activity-cards .image").dimmer({on:"hover"})},500)},t.$on("ngDialog.opened",function(){ecEditor.jQuery(".ui.dropdown.lableCls").dropdown({useLabels:!1,forceSelection:!1})}),n.generateTelemetry=function(t){t&&org.ekstep.contenteditor.api.getService(ServiceConstants.TELEMETRY_SERVICE).interact({type:t.type,subtype:t.subtype,target:t.target,pluginid:e.manifest.id,pluginver:e.manifest.ver,objectid:"",stage:ecEditor.getCurrentStage().id})},n.generateImpression=function(t){t&&ecEditor.getService("telemetry").impression({type:t.type,subtype:t.subtype||"",pageid:t.pageid||"",uri:window.location.href,visits:n.inViewLogs})},t.closePopup=function(){n.generateImpression({type:"view",subtype:"popup-exit",pageid:"ActivityBrowser"}),n.inViewLogs=[],n.generateTelemetry({type:"click",subtype:"close",target:"closeButton"}),t.closeThisDialog()},t.lineInView=function(t,e,i,r,o){var a=_.filter(n.inViewLogs,function(t){return t.identifier===i.identifier});e&&0===a.length&&n.inViewLogs.push({objid:i.identifier,objtype:i.contentType||"Plugin",section:r,index:t})},n.getPluginDetails=function(i){n.loading=!0,n.imageAvailable=!1,n.errorLoadingActivities=!1,n.pluginDetails={},n.images=t.images=[],ecEditor.getService("content").getContent(i,function(i,r){n.loading=!1,r?(n.pluginDetails=r,r.usedByContent&&r.usedByContent.length?n.getPluginScreenshots(r.usedByContent):(n.images.push({image:ecEditor.resolvePluginResource(e.manifest.id,e.manifest.ver,"assets/default-activity.png")}),n.imageAvailable=!0),n.showPluginDetails=!0):n.errorLoadingActivities=!0,t.$safeApply()})},n.getPluginScreenshots=function(i){var r={request:{filters:{contentType:["asset"],identifier:i}}};ecEditor.getService("search").search(r,function(i,r){r.data&&(r=r.data),r&&"OK"===r.responseCode&&r.result.count>0?r.result.content.forEach(function(t){t.downloadUrl&&n.images.push({image:t.downloadUrl})}):n.images.push({image:ecEditor.resolvePluginResource(e.manifest.id,e.manifest.ver,"assets/default-activity.png")}),n.imageAvailable=!0,t.$safeApply()})}}]),angular.module("activityBrowserApp").directive("slider",function(){return{restrict:"EA",scope:{images:"=",group:"=?"},controller:["$scope",function(t){t.group=t.group||1,t.currentIndex=0,t.direction="left",t.$watch("group",function(){var e=[],n=[];for(angular.copy(t.images,n);0<n.length;0+t.group)n[0]&&e.push(n.splice(0,t.group));t.setCurrent(0),t.slides=t.images}),t.setCurrent=function(e){t.direction=e>t.currentIndex?"left":"right",t.currentIndex=e},t.isCurrent=function(e){return t.currentIndex===e},t.next=function(){t.direction="left",t.currentIndex=t.currentIndex<t.slides.length-1?++t.currentIndex:0},t.prev=function(){t.direction="right",t.currentIndex=t.currentIndex>0?--t.currentIndex:t.slides.length-1}}],template:'<div class="slides group-{{group}}"><div ng-repeat="slide in slides"><div ng-show="isCurrent($index)" class="slide slide-animation"><div ng-repeat="item in slide" class="ui small image"><img ng-src="{{item}}"/></div></div></div><div class="controls" ng-if="slides.length > 1"><div class="navigation"><a ng-click="prev()" class="prev"><span><i class="chevron circle left big icon"></i></span></a><a ng-click="next()" class="next"><span><i class="chevron circle right big icon"></i></span></a></div></div></div>',link:function(t,e,n){}}})},function(t,e,n){org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.collaborator",ver:"1.1",author:"Gourav More",title:"collaborator",description:"",publishedDate:"",editor:{main:"editor/plugin.js",menu:[],views:[{template:"./popup.html",controller:""}]}},org.ekstep.contenteditor.basePlugin.extend({type:"collaborator",isCollaboratorPopupOpened:!1,initialize:function(){ecEditor.addEventListener("collaborator:add",this.addCollaborator,this),ecEditor.resolvePluginResource(this.manifest.id,this.manifest.ver,"editor/popup.html"),ecEditor.getService("popup").loadNgModules(n(46),void 0,!0)},addCollaborator:function(t,e){this.showPreview(function(){ecEditor.jQuery("#colUsersDropdown").dropdown({apiSettings:{url:ecEditor.getConfig("baseURL")+"/index.php?option=com_ekcontent&task=contentform.getUsersToInvite&id="+window.context.id+"&isEditor=true&search={query}",cache:!0},saveRemoteData:!0,fields:{remoteValues:"results",values:"values",name:"name",text:"text",value:"value"},minCharacters:1,forceSelection:!1})}),this.collaboratorsInfo()},showPreview:function(t){var e=this;ecEditor.getService("popup").open({template:"partials_org.ekstep.collaborator.html",controller:["$scope",function(n){n.getUrlLink=e.getUrlLink,n.viewContentLink=window.context.viewContentLink,n.sendInvites=e.sendInvites,e.copyAnswer="Copy",n.copyAnswer=e.copyAnswer,n.notifyUser=e.notifyUser,n.contentId=window.context.id,n.collaborators=e.collaborators,n.loading=e.loading,n.isLoading=e.isLoading,n.isError=e.isError,n.$on("ngDialog.opened",function(n,i){e.isCollaboratorPopupOpened=!0,t()})}],showClose:!1,width:900,className:"ngdialog-theme-default"},function(){isCollaboratorPopupOpened=!1})},getUrlLink:function(){ecEditor.jQuery("#copyTarget").select();try{var t=document.execCommand("copy");this.copyAnswer=t?"Copied!":"Unable to copy!"}catch(t){this.copyAnswer="Unsupported Browser!"}},sendInvites:function(){var t=this;ecEditor.jQuery("#colInviteForm").form({inline:!0,fields:{inviteUsers:{identifier:"inviteUsers",rules:[{type:"empty",prompt:"Please select usernames"}]},invite_msg:{identifier:"invite_msg",rules:[{type:"empty",prompt:"Invite message should not be blank"}]}},onSuccess:function(e,n){t.notifyUser(e,n)},onFailure:function(t,e){return console.log("fields validation failed"),!1}})},notifyUser:function(t,e){var n=this;ecEditor.jQuery.ajax({url:ecEditor.getConfig("baseURL")+"/index.php?option=com_ekcontent&task=contentform.inviteUsers",headers:{"x-auth":"session"},type:"POST",data:e,async:!1,beforeSend:function(){n.loading="active",n.isLoading=!0,n.isError=!1,ecEditor.ngSafeApply(ecEditor.getAngularScope())},success:function(t){1==t?n.isLoading=!1:n.isError=!0,ecEditor.jQuery(".collaborator_msg").transition("drop"),ecEditor.ngSafeApply(ecEditor.getAngularScope())},error:function(){console.log("Error")}})},collaboratorsInfo:function(){var t=this;ecEditor.jQuery.ajax({url:ecEditor.getConfig("baseURL")+"/index.php?option=com_api&app=ekcontent&resource=collaborator&format=raw",headers:{"x-auth":"session"},type:"GET",data:{id:window.context.id},async:!1,success:function(e){t.collaborators=e?e.result.collaborators:null},error:function(){console.log("Error")}})},generateTelemetry:function(t){t&&ecEditor.getService("telemetry").interact({type:t.type,subtype:t.subtype,id:t.target,pageid:org.ekstep.contenteditor.api.getCurrentStage().id||"",target:{id:t.targetid||"",type:"plugin",ver:""},plugin:{id:this.manifest.id,ver:this.manifest.ver,category:"core"},ver:"3.0"})}}))},function(t,e){t.exports='<script type="text/ng-template" id="partials_org.ekstep.collaborator.html">\n\t<div class="ui form" id="colInviteForm">\n\t\t<div class="ui {{loading}} inverted dimmer">\n\t\t\t<div class="ui large text loader" ng-show="isLoading==true && isError==false">Sending invitation...</div>\n\t\t\t<div class="content" ng-show="isLoading==false && isError==false">\n\t\t\t  <div class="center">\n\t\t\t\t<h2 class="ui icon header" style="color: green!important;">\n\t\t\t\t  <i class="collaborator_msg checkmark icon"></i>\n\t\t\t\t Invitation sent Successfully!\n\t\t\t\t</h2>\n\t\t\t\t<div class="ui grid">\n\t\t\t\t\t<div class="six wide right floated column">\n\t\t\t\t\t\t<div class="ui green ok button"  ng-click="this.closeThisDialog(); generateTelemetry({type: \'click\', subtype: \'close\', target: \'closeAddCollaboratorPopUp\', targetid:contentId})">\n\t\t\t\t\t\t  <i class="checkmark icon"></i>\n\t\t\t\t\t\t  Ok\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t  </div>\n\t\t\t</div>\n\t\t\t<div class="content" ng-show="isError==true">\n\t\t\t  <div class="center">\n\t\t\t\t<h2 class="ui icon header" style="color: red!important;">\n\t\t\t\t  <i class="collaborator_msg warning sign icon"></i>\n\t\t\t\t\tSomething went wrong please try again later\n\t\t\t\t</h2>\n\t\t\t\t<div class="ui grid">\n\t\t\t\t\t<div class="six wide right floated column">\n\t\t\t\t\t\t<div class="ui red ok button"  ng-click="loading = \'\'">\n\t\t\t\t\t\t  <i class="checkmark icon"></i>\n\t\t\t\t\t\t  Ok\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t  </div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="field">\n\t\t\t<label>URL</label>\n\t\t\t<div class="ui action input">\n\t\t\t  <input readonly="" type="text" value="{{viewContentLink}}" id="copyTarget">\n\t\t\t  <div class="ui right labeled icon button" id="copyButton"  ng-click="getUrlLink(); generateTelemetry({type: \'click\', subtype: \'copy\', target: \'copyMetaFormUrl\', targetid:contentId})"><i class="copy icon"></i>{{copyAnswer}}</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="field">\n\t\t\t<label for="colUsersDropdown">Type usernames</label>\n\t\t\t<div class="ui fluid multiple search selection dropdown" id="colUsersDropdown" name="colUsersDropdown" data-validate="colUsersDropdown" >\n\t\t\t <input type="hidden" name="inviteUsers" id="inviteUsers">\n\t\t\t <i class="search icon"></i>\n\t\t\t\t<input class="search">\n\t\t\t\t\t<div class="default text">Type usernames to invite to collaborate</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="field" ng-show="collaborators!=null">\n\t\t\t<div class="ui small message">\n\t\t\t\t<div class="header">You have already invited these users to collaborate</div>\n\t\t\t\t<div class="ui mini horizontal divided list">\n\t\t\t\t\t<div class="item" ng-repeat="collaborator in collaborators">\n\t\t\t\t\t\t<img class="ui avatar image" src="{{collaborator.avatar}}">\n\t\t\t\t\t\t<div class="content" title="{{collaborator.email}}">\n\t\t\t\t\t\t\t{{collaborator.name}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="field">\n\t\t<label for="invite_msg">Invitation message</label>\n\t\t<textarea type="textarea" name="invite_msg" id="invite_msg">Hi, &#13;&#10; &#13;&#10;I need you to contribute to this lesson that I am creating on EkStep Community portal. I am adding you as a collaborator, looking forward to your inputs!</textarea>\n\t\t</div>\n\n\t\t<div class="actions">\n\t\t\t<div class="ui grid">\n\t\t\t\t<div class="wide column right aligned">\n\t\t\t\t\t<div class="ui buttons">\n\t\t\t\t\t\t<button class="ui orange button" ng-click="closeThisDialog(); generateTelemetry({type: \'click\', subtype: \'close\', target: \'closeAddCollaboratorPopUp\', targetid:contentId})" type="button">Cancel</button>\n\t\t\t\t\t\t<div class="or"></div>\n\t\t\t\t\t\t<button class="ui blue button submit button" ng-click="sendInvites(); generateTelemetry({type: \'click\', subtype: \'send\', target: \'sendInvitesToCollaborator\', targetid:contentId})" type="button">Send Invites</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<input type="hidden" name="id" value="{{contentId}}">\n\t</div>\n<\/script>\n'},function(t,e,n){org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.download",ver:"1.0",author:"Gourav More",title:"download",description:"",publishedDate:"",editor:{main:"editor/plugin.js",menu:[],views:[{template:"./popup.html",controller:""}]}},org.ekstep.contenteditor.basePlugin.extend({type:"download",initialize:function(){ecEditor.addEventListener("download:content",this.downloadContent,this),ecEditor.resolvePluginResource(this.manifest.id,this.manifest.ver,"editor/popup.html"),ecEditor.getService("popup").loadNgModules(n(48),void 0,!0)},downloadContent:function(){var t=this;t.isSending="active",t.isLoading=!1,t.isSuccess=!1,t.isDownloading=!0,ecEditor.getService("popup").open({template:"partials_org.ekstep.download.html",controller:["$scope",function(e){e.isSending=t.isSending,e.isLoading=t.isLoading,e.isSuccess=t.isSuccess,e.isDownloading=t.isDownloading,e.cntName=ecEditor.getService("content").getContentMeta(ecEditor.getContext("contentId")).name,t.getDownloadUrl(function(n){n?(e.isLoading=!0,e.isDownloading=!1,ecEditor.ngSafeApply(ecEditor.getAngularScope()),t.sendEmail(e,n)):(e.isLoading=!1,e.isDownloading=!1,e.status=!1,e.getMessage="Content is not ready to download, please try again later",ecEditor.jQuery(".ct_download_msg").transition("drop"),ecEditor.ngSafeApply(ecEditor.getAngularScope()))})}],showClose:!1,width:900,background:"transparent!important",className:"ngdialog-theme-plain dwContent"})},getDownloadUrl:function(t){var e=ecEditor.getService("content").getContentMeta(ecEditor.getContext("contentId")).name.toLowerCase();ecEditor.getService("content").downloadContent(ecEditor.getContext("contentId"),e,function(e,n){e||"OK"!=n.data.responseCode?t(!1):t(n.data.result.ECAR_URL)})},sendEmail:function(t,e){ecEditor.jQuery.ajax({url:ecEditor.getConfig("baseURL")+"/index.php?option=com_api&app=ekcontent&resource=download&format=raw",headers:{"x-auth":"session"},type:"POST",data:{downloadUrl:e,name:ecEditor.getService("content").getContentMeta(ecEditor.getContext("contentId")).name},success:function(e){t.isLoading=!1,t.status="OK"==e.responseCode,t.getMessage=e.result,ecEditor.jQuery(".ct_download_msg").transition("drop"),ecEditor.ngSafeApply(ecEditor.getAngularScope())},error:function(){t.isLoading=!1,t.status=!1,t.getMessage="Unable to send email, please try again later",ecEditor.jQuery(".ct_download_msg").transition("drop"),ecEditor.ngSafeApply(ecEditor.getAngularScope())}})}}))},function(t,e){t.exports='<script type="text/ng-template" id="partials_org.ekstep.download.html">\n<style>\n.dwContent .ngdialog-content{\n\tbackground: transparent!important;\n}\n</style>\n\t<div class="ui page {{isSending}} inverted dimmer popupZindex" >\n\t\t<div class="content" ng-show="!isLoading && !isDownloading">\n\t\t  <div class="center">\n\t\t\t  <div class="ui icon header">\n\t\t\t\t\t<span ng-show="status"><i class="ct_download_msg checkmark icon"></i></span>\n\t\t\t\t\t<span ng-show="!status"><i class="ct_download_msg warning sign icon"></i></span>\n\t\t\t\t\t{{getMessage}}\n\t\t\t  </div>\n\t\t\t  <div class="actions">\n\t\t\t\t<div class="ui grid">\n\t\t\t\t\t<div class="six wide right floated column">\n\t\t\t\t\t\t<div class="ui green ok button"  ng-click="this.closeThisDialog()">\n\t\t\t\t\t\t  <i class="checkmark icon"></i>\n\t\t\t\t\t\t  Ok\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t  </div>\n\t\t  </div>\n\t\t</div>\n\t\t<div class="content" ng-show="isLoading == true">\n\t\t\t<div class="center">\n\t\t\t\t<div class="ui big text loader">\n\t\t\t\t\t<h2><i class="mail outline icon"></i>\n\t\t\t\t\t\tSending email, please wait....\n\t\t\t\t\t</h2>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="content" ng-show="isDownloading">\n\t\t\t<div class="center">\n\t\t\t\t<div class="ui indeterminate big text loader">\n\t\t\t\t\t<h2><i class="download outline icon"></i>\n\t\t\t\t\t\tPreparing Downloads...\n\t\t\t\t\t</h2>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n<\/script>\n'},function(t,e){org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.unsupported",ver:"1.0",author:"Harish Kumar Gangula",title:"Unsupported Plugin",description:"This plugin is fallback to the other plugins",publishedDate:"",editor:{main:"editor/plugin.js",menu:[],help:{src:"editor/help.md",dataType:"text"}}},org.ekstep.contenteditor.basePlugin.extend({type:"unsupported",initialize:function(){ecEditor.addEventListener("unsupported:invoke",this.showUnsupported,this)},props:{x:0,y:0,w:40,h:40,r:0},hasDims:!1,newInstance:function(){var t=this,e=this.parent;this.parent=void 0;var n=this.setImageDimensions(this.data.data),i=ecEditor.getConfig("absURL")+ecEditor.resolvePluginResource(this.manifest.id,this.manifest.ver,"assets/unsupportedplugin.png");fabric.Image.fromURL(i,function(n){t.editorObj=n,t.parent=e,t.postInit()},n)},setImageDimensions:function(t){var e=_.clone(this.props);return _.has(t,["x"])&&_.has(t,["w"])&&(this.attributes.x=e.x=t.x,this.attributes.y=e.y=t.y,this.attributes.w=e.w=t.w,this.attributes.h=e.h=t.h,this.percentToPixel(this.attributes),this.hasDims=!0),this.percentToPixel(e),this.convertToFabric(e)},fromECML:function(t){t.data.id=t.data.id||t.data.pluginId,this.setData(t.data)},toECML:function(){if(this.hasDims){var t=_.clone(this.attributes);this.pixelToPercent(t),this.data.data.x=t.x,this.data.data.y=t.y,this.data.data.w=t.w,this.data.data.h=t.h}return this.data.data},getCopy:function(){return{data:{data:_.cloneDeep(this.toECML()),pluginId:this.data.id}}},getConfig:function(){},getAttributes:function(){},getManifestId:function(){return this.data.id}}))},function(t,e,n){org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.wordinfobrowser",ver:"1.0",shortId:"wordinfobrowser",author:"Kartheek Palla",title:"Add Word Info Popup",description:"",publishedDate:"",editor:{main:"editor/plugin.js",help:{src:"editor/help.md",dataType:"text"},dependencies:[{type:"css",src:"editor/plugin.css"}],views:[{template:"./wordinfobrowser.html",controller:"./wordinfobrowserapp.js"}],configManifest:[{propertyName:"color",title:"Font color",description:"Choose a color from the color picker",dataType:"colorpicker",required:!0,defaultValue:"rgb(255,0,0)"},{propertyName:"font",dataType:"group",description:"Choose fontweight and fontstyle",config:[{propertyName:"fontweight",title:"Font Weight",toolTip:"Bold",description:"Select font size for the text",dataType:"icon",iconClass:"bold icon",required:!0,defaultValue:!1},{propertyName:"fontstyle",title:"Font Style",toolTip:"Italic",description:"Select font style for the text",dataType:"icon",iconClass:"italic icon",required:!0,defaultValue:!1}]},{propertyName:"fontfamily",title:"Font Family",description:"Select font family for the text",dataType:"select",range:["Arial","Courier","Georgia","Helvetica","Monospace","Sans-serif","Serif","Tahoma","Times","Trebuchet MS","Verdana","NotoSansKannada","NotoSansGujarati","NotoSansBengali","NotoSansGurmukhi","NotoSansOriya","NotoSansDevanagari","NotoSansTamil","NotoSansTelugu","NotoNastaliqUrdu","NotoSansMalayalam"],required:!0,defaultValue:"Sans-serif"},{propertyName:"fontsize",title:"Font Size",description:"Select font size for the text",dataType:"select",range:[18,20,22,24,26,28,32,36,40,44,48,54,60,66,72,80,88,96],required:!0,defaultValue:18},{propertyName:"wordfontcolor",title:"Word Font Color",description:"Choose a color from the color picker to highlight the font color of selected word",dataType:"colorpicker",required:!0,defaultValue:"#0000FF"},{propertyName:"wordhighlightcolor",title:"Word Highlight Color",description:"Choose a color from the color picker to highlight the selected word",dataType:"colorpicker",required:!0,defaultValue:"#FFFF00"},{propertyName:"wordunderlinecolor",title:"Word underline Color",description:"Choose a color from the color picker to underline the selected word",dataType:"colorpicker",required:!0,defaultValue:"#0000FF"}]}},org.ekstep.contenteditor.basePlugin.extend({type:"wordinfobrowser",currentInstance:void 0,cb:void 0,text:void 0,initialize:function(){var t=this;ecEditor.addEventListener("object:unselected",this.objectUnselected,this),ecEditor.addEventListener("delete:invoked",this.deleteObject,this),ecEditor.addEventListener(t.manifest.id+":showpopup",this.loadHtml,this),setTimeout(function(){ecEditor.resolvePluginResource(t.manifest.id,t.manifest.ver,"editor/wordinfobrowser.html"),ecEditor.resolvePluginResource(t.manifest.id,t.manifest.ver,"editor/wordinfobrowserapp.js"),ecEditor.getService("popup").loadNgModules(n(51),n(52),!0)},1e3)},loadHtml:function(t,e){(currentInstance=this).cb=e.callback,this.attributes=e.textObj.attributes,this.config=e.textObj.config,"wordinfo"==e.textObj.attributes.textType&&(this.editorObj=e.textObj.editorObj),ecEditor.getService("popup").open({template:"wordinfobrowser",controller:"wordinfobrowsercontroller",controllerAs:"$ctrl",resolve:{instance:function(){return currentInstance}},width:900,showClose:!1,className:"ngdialog-theme-plain"},function(){})}}))},function(t,e){t.exports='<script type="text/ng-template" ng-app="wordinfobrowserapp" ng-controller="wordinfobrowsercontroller as $ctrl" id="wordinfobrowser">\n<div class="ui modal large active wordinfo-modal">\n    <div class="header">\n        <div class="ui two column grid">\n            <div class="row">\n                <div class="column">\n                    <span><i class="icon-wordinfo icon"></i>Word Info Popup</span>\n                </div>\n                <div class="column wordinfo-modal-close">\n                    <i class="cursor-pointer close icon" ng-click="closeThisDialog()"></i>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="content wordinfo-content">\n        <div class="ui segment wordinfo-loading" ng-show="$ctrl.loading">\n            <div class="ui active inverted dimmer">\n                <div class="ui text loader">Just one second, We\'re fetching that content for you.</div>\n            </div>\n        </div>\n        <div ng-if="$ctrl.errorLoadingKeywords" class="ui negative message wordinfo-browser-content">\n            <div class="header">\n                We\'re sorry!\n            </div>\n            <p>There\'s an error while fetching keywords, <a href ng-click="$ctrl.getKeywords()">Click here</a> to try again.\n            </p>\n        </div>\n        <div class="ui grid container" ng-if="!$ctrl.loading && !$ctrl.errorLoadingKeywords">\n            <div class="two column row">\n                <div class="column wordinfo-leftContent">\n                    <div class="ui container" ng-show="!$ctrl.showTypeownText">\n                        <div class="ui container">\n                            <div class="helptext">Your Paragraph</div>\n                            <div class="column textHeight" ng-click="$ctrl.showTextbox()">\n                                {{$ctrl.selectedSentence}}\n                            </div>\n                        </div>\n                        <div class="ui divider"></div>\n                        <div class="ui container">\n                            <div class="helptext">We found the following words in Word Duniya</div>\n                            <div class="ui labels">\n                                <a class="ui large label" ng-class="$ctrl.slectedWords.indexOf(word) > -1 ? \'teal\' : \'\' " ng-repeat="word in $ctrl.keywords track by $index" ng-click="$ctrl.selectWords($index, word, $event)" ng-show="$ctrl.keywords.length > 0 && !$ctrl.showTypeownText">{{word}}</a>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="ui form" ng-show="$ctrl.showTypeownText">\n                        <div class="field" id="editorDiv">\n                            <textarea ng-model="$ctrl.selectedSentence" rows="9" placeholder="Add text here"></textarea>\n                        </div>\n                        <button class="ui right floated primary button" ng-click="$ctrl.getKeywords()" ng-disabled="$ctrl.selectedSentence == \'\'">Get Words</button>\n                    </div>\n                    <div class="ui huge info message" ng-show="$ctrl.keywords.length == 0 && $ctrl.noKeywords">\n                        <p>No Keywords found.</p>\n                    </div>\n                </div>\n                <div class="column wordinfo-rightContent">\n                    Select words from the list to add their meaning as a popup. When the child will tap the word, it will show word information in a popup.<br/><br/>\n                    After selecting words, please check the preview to make sure information is available.<br/><br/>\n                    If there are any words that do not have information, it will show as blank. You can add this information in the Word Duniya.<br/><br/>\n                    Come back to this wizard any time to add / remove words or edit the sentence.\n                </div>\n            </div>\n            \x3c!-- <div class="one column row">\n                Don\'t See the words in Word Duniya? Help us make it better &nbsp;&nbsp;<a ng-href="" target="_blank"> Click Here</a> \n            </div>  --\x3e\n        </div>\n    </div>\n    <div class="actions">\n        <div class="ui buttons" >\n            <button class="ui orange button" ng-click="closeThisDialog()" type="button">Cancel</button>\n            <div class="or"></div>\n            <button class="ui blue button" type="button" ng-click="$ctrl.addToLesson()" ng-disabled="$ctrl.slectedWords.length <= 0 || $ctrl.errorLoadingKeywords">Add To Lesson</button>\n        </div>\n    </div>\n</div>'},function(t,e,n){"use strict";angular.module("wordinfobrowserapp",[]).controller("wordinfobrowsercontroller",["$scope","$injector","instance",function(t,e,n){var i=this;i.selectedSentence=n.config.text,i.showTypeownText=!1,i.textList={},i.keywords=[],i.slectedWords=[],i.prevSlectedWords=[],i.loading=!1,i.noKeywords=!1,i.errorLoadingKeywords=!1,i.template={id:"infoTemplate",g:{x:"0",y:"0",w:"100",h:"100",image:{asset:"org.ekstep.text.popuptint",x:"0",y:"0",w:"100",h:"100",visible:"true",id:"popup-Tint"},text:[{x:"25",y:"25",w:"50",h:"9",visible:"true",editable:"true",model:"word.lemma",weight:"normal",font:"helvetica",color:"rgb(0,0,0)",fontsize:"75",align:"left","z-index":"1",id:"lemma"},{x:"25",y:"35",w:"50",h:"40",visible:"true",editable:"true",model:"word.gloss",weight:"normal",font:"helvetica",color:"rgb(0,0,0)",fontsize:"43",align:"left","z-index":"2",id:"gloss"}],shape:{x:"20",y:"20",w:"60",h:"60",visible:"true",editable:"true",type:"roundrect",radius:"10",opacity:"1",fill:"#45b3a5","stroke-width":"1","z-index":"0",id:"textBg"}}},i.selectWords=function(e,n,r){-1!=ecEditor._.indexOf(i.slectedWords,n)?(i.slectedWords.splice(ecEditor._.indexOf(i.slectedWords,n),1),$(event.target).removeClass("teal"),t.$safeApply()):(i.slectedWords.push(n),$(event.target).addClass("teal"),t.$safeApply())},i.getKeywords=function(){i.loading=!0,i.errorLoadingKeywords=!1,i.keywords=[];var e={request:{language_id:"en",wordSuggestions:!0,relatedWords:!0,translations:!0,equivalentWords:!0,content:i.selectedSentence}};ecEditor.getService("language").getKeyWords(e,function(e,n){return i.loading=!1,e?(i.errorLoadingKeywords=!0,void t.$safeApply()):Object.keys(n.data.result).length<=0?(i.noKeywords=!0,i.showTypeownText=!1,void t.$safeApply()):(i.showTypeownText=!1,void ecEditor._.forEach(n.data.result,function(e,n){i.keywords.push(n),t.$safeApply()}))})},i.getKeywords(),i.addToLesson=function(){var e={request:{filters:{lemma:i.slectedWords,objectType:["Word"]}}};ecEditor.getService("search").search(e,function(e,r){if(!e){var o={};ecEditor._.forEach(r.data.result.words,function(t){o[t.lemma]={lemma:t.lemma,gloss:ecEditor._.isUndefined(t.meaning)?"":t.meaning}});var a={controller:{id:"dictionary",data:o},template:i.template},s={text:i.selectedSentence,words:i.slectedWords.join(),wordfontcolor:"#0000FF",wordhighlightcolor:"#FFFF00",wordunderlinecolor:"#0000FF"};n.cb(s,a),t.closeThisDialog()}})},i.showTextbox=function(){i.showTypeownText=!0,i.noKeywords=!1},ecEditor._.isUndefined(n.editorObj)||(i.selectedSentence=n.config.text,i.prevSlectedWords=i.slectedWords=ecEditor._.isUndefined(n.config.words)?[]:n.config.words.split(","),t.$safeApply())}])},function(t,e,n){(function(e,i){var r;t.exports=function t(e,n,i){function o(s,l){if(!n[s]){if(!e[s]){if(!l&&("function"==typeof r&&r))return r(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){return o(e[s][1][t]||t)},u,u.exports,t,e,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){var i=t("./src/converter");e.exports=i},{"./src/converter":25}],2:[function(t,n,i){(function(t){(function(){var e,r=200,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",l=1,c=2,u=4,d=1,h=2,f=1,p=2,g=4,m=8,v=16,y=32,E=64,b=128,C=256,T=512,w=800,I=16,O=1/0,D=9007199254740991,_=1.7976931348623157e308,k=NaN,R=4294967295,x=R-1,S=R>>>1,K=[["ary",b],["bind",f],["bindKey",p],["curry",m],["curryRight",v],["flip",T],["partial",y],["partialRight",E],["rearg",C]],$="[object Arguments]",A="[object Array]",N="[object AsyncFunction]",P="[object Boolean]",L="[object Date]",F="[object DOMException]",M="[object Error]",j="[object Function]",B="[object GeneratorFunction]",q="[object Map]",H="[object Number]",V="[object Null]",U="[object Object]",z="[object Proxy]",W="[object RegExp]",X="[object Set]",G="[object String]",Y="[object Symbol]",Q="[object Undefined]",J="[object WeakMap]",Z="[object ArrayBuffer]",tt="[object DataView]",et="[object Float32Array]",nt="[object Float64Array]",it="[object Int8Array]",rt="[object Int16Array]",ot="[object Int32Array]",at="[object Uint8Array]",st="[object Uint8ClampedArray]",lt="[object Uint16Array]",ct="[object Uint32Array]",ut=/\b__p \+= '';/g,dt=/\b(__p \+=) '' \+/g,ht=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ft=/&(?:amp|lt|gt|quot|#39);/g,pt=/[&<>"']/g,gt=RegExp(ft.source),mt=RegExp(pt.source),vt=/<%-([\s\S]+?)%>/g,yt=/<%([\s\S]+?)%>/g,Et=/<%=([\s\S]+?)%>/g,bt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ct=/^\w*$/,Tt=/^\./,wt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,It=/[\\^$.*+?()[\]{}|]/g,Ot=RegExp(It.source),Dt=/^\s+|\s+$/g,_t=/^\s+/,kt=/\s+$/,Rt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,xt=/\{\n\/\* \[wrapped with (.+)\] \*/,St=/,? & /,Kt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,$t=/\\(\\)?/g,At=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Nt=/\w*$/,Pt=/^[-+]0x[0-9a-f]+$/i,Lt=/^0b[01]+$/i,Ft=/^\[object .+?Constructor\]$/,Mt=/^0o[0-7]+$/i,jt=/^(?:0|[1-9]\d*)$/,Bt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,qt=/($^)/,Ht=/['\n\r\u2028\u2029\\]/g,Vt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ut="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",zt="["+Ut+"]",Wt="["+Vt+"]",Xt="\\d+",Gt="[a-z\\xdf-\\xf6\\xf8-\\xff]",Yt="[^\\ud800-\\udfff"+Ut+Xt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",Qt="\\ud83c[\\udffb-\\udfff]",Jt="[^\\ud800-\\udfff]",Zt="(?:\\ud83c[\\udde6-\\uddff]){2}",te="[\\ud800-\\udbff][\\udc00-\\udfff]",ee="[A-Z\\xc0-\\xd6\\xd8-\\xde]",ne="(?:"+Gt+"|"+Yt+")",ie="(?:"+ee+"|"+Yt+")",re="(?:"+Wt+"|"+Qt+")"+"?",oe="[\\ufe0e\\ufe0f]?"+re+("(?:\\u200d(?:"+[Jt,Zt,te].join("|")+")[\\ufe0e\\ufe0f]?"+re+")*"),ae="(?:"+["[\\u2700-\\u27bf]",Zt,te].join("|")+")"+oe,se="(?:"+[Jt+Wt+"?",Wt,Zt,te,"[\\ud800-\\udfff]"].join("|")+")",le=RegExp("['’]","g"),ce=RegExp(Wt,"g"),ue=RegExp(Qt+"(?="+Qt+")|"+se+oe,"g"),de=RegExp([ee+"?"+Gt+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[zt,ee,"$"].join("|")+")",ie+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[zt,ee+ne,"$"].join("|")+")",ee+"?"+ne+"+(?:['’](?:d|ll|m|re|s|t|ve))?",ee+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",Xt,ae].join("|"),"g"),he=RegExp("[\\u200d\\ud800-\\udfff"+Vt+"\\ufe0e\\ufe0f]"),fe=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ge=-1,me={};me[et]=me[nt]=me[it]=me[rt]=me[ot]=me[at]=me[st]=me[lt]=me[ct]=!0,me[$]=me[A]=me[Z]=me[P]=me[tt]=me[L]=me[M]=me[j]=me[q]=me[H]=me[U]=me[W]=me[X]=me[G]=me[J]=!1;var ve={};ve[$]=ve[A]=ve[Z]=ve[tt]=ve[P]=ve[L]=ve[et]=ve[nt]=ve[it]=ve[rt]=ve[ot]=ve[q]=ve[H]=ve[U]=ve[W]=ve[X]=ve[G]=ve[Y]=ve[at]=ve[st]=ve[lt]=ve[ct]=!0,ve[M]=ve[j]=ve[J]=!1;var ye={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ee=parseFloat,be=parseInt,Ce="object"==typeof t&&t&&t.Object===Object&&t,Te="object"==typeof self&&self&&self.Object===Object&&self,we=Ce||Te||Function("return this")(),Ie="object"==typeof i&&i&&!i.nodeType&&i,Oe=Ie&&"object"==typeof n&&n&&!n.nodeType&&n,De=Oe&&Oe.exports===Ie,_e=De&&Ce.process,ke=function(){try{return _e&&_e.binding&&_e.binding("util")}catch(t){}}(),Re=ke&&ke.isArrayBuffer,xe=ke&&ke.isDate,Se=ke&&ke.isMap,Ke=ke&&ke.isRegExp,$e=ke&&ke.isSet,Ae=ke&&ke.isTypedArray;function Ne(t,e){return t.set(e[0],e[1]),t}function Pe(t,e){return t.add(e),t}function Le(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Fe(t,e,n,i){for(var r=-1,o=null==t?0:t.length;++r<o;){var a=t[r];e(i,a,n(a),t)}return i}function Me(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function je(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Be(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function qe(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var a=t[n];e(a,n,t)&&(o[r++]=a)}return o}function He(t,e){return!!(null==t?0:t.length)&&Ze(t,e,0)>-1}function Ve(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function Ue(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function ze(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function We(t,e,n,i){var r=-1,o=null==t?0:t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function Xe(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function Ge(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var Ye=rn("length");function Qe(t,e,n){var i;return n(t,function(t,n,r){if(e(t,n,r))return i=n,!1}),i}function Je(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function Ze(t,e,n){return e==e?function(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):Je(t,en,n)}function tn(t,e,n,i){for(var r=n-1,o=t.length;++r<o;)if(i(t[r],e))return r;return-1}function en(t){return t!=t}function nn(t,e){var n=null==t?0:t.length;return n?sn(t,e)/n:k}function rn(t){return function(n){return null==n?e:n[t]}}function on(t){return function(n){return null==t?e:t[n]}}function an(t,e,n,i,r){return r(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)}),n}function sn(t,n){for(var i,r=-1,o=t.length;++r<o;){var a=n(t[r]);a!==e&&(i=i===e?a:i+a)}return i}function ln(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function cn(t){return function(e){return t(e)}}function un(t,e){return Ue(e,function(e){return t[e]})}function dn(t,e){return t.has(e)}function hn(t,e){for(var n=-1,i=t.length;++n<i&&Ze(e,t[n],0)>-1;);return n}function fn(t,e){for(var n=t.length;n--&&Ze(e,t[n],0)>-1;);return n}var pn=on({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),gn=on({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function mn(t){return"\\"+ye[t]}function vn(t){return he.test(t)}function yn(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function En(t,e){return function(n){return t(e(n))}}function bn(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var a=t[n];a!==e&&a!==s||(t[n]=s,o[r++]=n)}return o}function Cn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Tn(t){return vn(t)?function(t){for(var e=ue.lastIndex=0;ue.test(t);)++e;return e}(t):Ye(t)}function wn(t){return vn(t)?function(t){return t.match(ue)||[]}(t):function(t){return t.split("")}(t)}var In=on({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),On=function t(n){var i,Vt=(n=null==n?we:On.defaults(we.Object(),n,On.pick(we,pe))).Array,Ut=n.Date,zt=n.Error,Wt=n.Function,Xt=n.Math,Gt=n.Object,Yt=n.RegExp,Qt=n.String,Jt=n.TypeError,Zt=Vt.prototype,te=Wt.prototype,ee=Gt.prototype,ne=n["__core-js_shared__"],ie=te.toString,re=ee.hasOwnProperty,oe=0,ae=(i=/[^.]+$/.exec(ne&&ne.keys&&ne.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",se=ee.toString,ue=ie.call(Gt),he=we._,ye=Yt("^"+ie.call(re).replace(It,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ce=De?n.Buffer:e,Te=n.Symbol,Ie=n.Uint8Array,Oe=Ce?Ce.allocUnsafe:e,_e=En(Gt.getPrototypeOf,Gt),ke=Gt.create,Ye=ee.propertyIsEnumerable,on=Zt.splice,Dn=Te?Te.isConcatSpreadable:e,_n=Te?Te.iterator:e,kn=Te?Te.toStringTag:e,Rn=function(){try{var t=Ro(Gt,"defineProperty");return t({},"",{}),t}catch(t){}}(),xn=n.clearTimeout!==we.clearTimeout&&n.clearTimeout,Sn=Ut&&Ut.now!==we.Date.now&&Ut.now,Kn=n.setTimeout!==we.setTimeout&&n.setTimeout,$n=Xt.ceil,An=Xt.floor,Nn=Gt.getOwnPropertySymbols,Pn=Ce?Ce.isBuffer:e,Ln=n.isFinite,Fn=Zt.join,Mn=En(Gt.keys,Gt),jn=Xt.max,Bn=Xt.min,qn=Ut.now,Hn=n.parseInt,Vn=Xt.random,Un=Zt.reverse,zn=Ro(n,"DataView"),Wn=Ro(n,"Map"),Xn=Ro(n,"Promise"),Gn=Ro(n,"Set"),Yn=Ro(n,"WeakMap"),Qn=Ro(Gt,"create"),Jn=Yn&&new Yn,Zn={},ti=ta(zn),ei=ta(Wn),ni=ta(Xn),ii=ta(Gn),ri=ta(Yn),oi=Te?Te.prototype:e,ai=oi?oi.valueOf:e,si=oi?oi.toString:e;function li(t){if(vs(t)&&!as(t)&&!(t instanceof hi)){if(t instanceof di)return t;if(re.call(t,"__wrapped__"))return ea(t)}return new di(t)}var ci=function(){function t(){}return function(n){if(!ms(n))return{};if(ke)return ke(n);t.prototype=n;var i=new t;return t.prototype=e,i}}();function ui(){}function di(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=e}function hi(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=R,this.__views__=[]}function fi(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function pi(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function gi(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function mi(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new gi;++e<n;)this.add(t[e])}function vi(t){var e=this.__data__=new pi(t);this.size=e.size}function yi(t,e){var n=as(t),i=!n&&os(t),r=!n&&!i&&us(t),o=!n&&!i&&!r&&Os(t),a=n||i||r||o,s=a?ln(t.length,Qt):[],l=s.length;for(var c in t)!e&&!re.call(t,c)||a&&("length"==c||r&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Po(c,l))||s.push(c);return s}function Ei(t){var n=t.length;return n?t[pr(0,n-1)]:e}function bi(t,n,i){(i===e||ns(t[n],i))&&(i!==e||n in t)||Oi(t,n,i)}function Ci(t,n,i){var r=t[n];re.call(t,n)&&ns(r,i)&&(i!==e||n in t)||Oi(t,n,i)}function Ti(t,e){for(var n=t.length;n--;)if(ns(t[n][0],e))return n;return-1}function wi(t,e,n,i){return Ki(t,function(t,r,o){e(i,t,n(t),o)}),i}function Ii(t,e){return t&&Wr(e,Ws(e),t)}function Oi(t,e,n){"__proto__"==e&&Rn?Rn(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Di(t,n){for(var i=-1,r=n.length,o=Vt(r),a=null==t;++i<r;)o[i]=a?e:qs(t,n[i]);return o}function _i(t,n,i){return t==t&&(i!==e&&(t=t<=i?t:i),n!==e&&(t=t>=n?t:n)),t}function ki(t,n,i,r,o,a){var s,d=n&l,h=n&c,f=n&u;if(i&&(s=o?i(t,r,o,a):i(t)),s!==e)return s;if(!ms(t))return t;var p=as(t);if(p){if(s=function(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&re.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!d)return zr(t,s)}else{var g=Ko(t),m=g==j||g==B;if(us(t))return jr(t,d);if(g==U||g==$||m&&!o){if(s=h||m?{}:Ao(t),!d)return h?function(t,e){return Wr(t,So(t),e)}(t,function(t,e){return t&&Wr(e,Xs(e),t)}(s,t)):function(t,e){return Wr(t,xo(t),e)}(t,Ii(s,t))}else{if(!ve[g])return o?t:{};s=function(t,e,n,i){var r,o,a,s=t.constructor;switch(e){case Z:return Br(t);case P:case L:return new s(+t);case tt:return function(t,e){var n=e?Br(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,i);case et:case nt:case it:case rt:case ot:case at:case st:case lt:case ct:return qr(t,i);case q:return function(t,e,n){return We(e?n(yn(t),l):yn(t),Ne,new t.constructor)}(t,i,n);case H:case G:return new s(t);case W:return(a=new(o=t).constructor(o.source,Nt.exec(o))).lastIndex=o.lastIndex,a;case X:return function(t,e,n){return We(e?n(Cn(t),l):Cn(t),Pe,new t.constructor)}(t,i,n);case Y:return r=t,ai?Gt(ai.call(r)):{}}}(t,g,ki,d)}}a||(a=new vi);var v=a.get(t);if(v)return v;a.set(t,s);var y=p?e:(f?h?To:Co:h?Xs:Ws)(t);return Me(y||t,function(e,r){y&&(e=t[r=e]),Ci(s,r,ki(e,n,i,r,t,a))}),s}function Ri(t,n,i){var r=i.length;if(null==t)return!r;for(t=Gt(t);r--;){var o=i[r],a=n[o],s=t[o];if(s===e&&!(o in t)||!a(s))return!1}return!0}function xi(t,n,i){if("function"!=typeof t)throw new Jt(o);return Wo(function(){t.apply(e,i)},n)}function Si(t,e,n,i){var o=-1,a=He,s=!0,l=t.length,c=[],u=e.length;if(!l)return c;n&&(e=Ue(e,cn(n))),i?(a=Ve,s=!1):e.length>=r&&(a=dn,s=!1,e=new mi(e));t:for(;++o<l;){var d=t[o],h=null==n?d:n(d);if(d=i||0!==d?d:0,s&&h==h){for(var f=u;f--;)if(e[f]===h)continue t;c.push(d)}else a(e,h,i)||c.push(d)}return c}li.templateSettings={escape:vt,evaluate:yt,interpolate:Et,variable:"",imports:{_:li}},li.prototype=ui.prototype,li.prototype.constructor=li,di.prototype=ci(ui.prototype),di.prototype.constructor=di,hi.prototype=ci(ui.prototype),hi.prototype.constructor=hi,fi.prototype.clear=function(){this.__data__=Qn?Qn(null):{},this.size=0},fi.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},fi.prototype.get=function(t){var n=this.__data__;if(Qn){var i=n[t];return i===a?e:i}return re.call(n,t)?n[t]:e},fi.prototype.has=function(t){var n=this.__data__;return Qn?n[t]!==e:re.call(n,t)},fi.prototype.set=function(t,n){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=Qn&&n===e?a:n,this},pi.prototype.clear=function(){this.__data__=[],this.size=0},pi.prototype.delete=function(t){var e=this.__data__,n=Ti(e,t);return!(n<0)&&(n==e.length-1?e.pop():on.call(e,n,1),--this.size,!0)},pi.prototype.get=function(t){var n=this.__data__,i=Ti(n,t);return i<0?e:n[i][1]},pi.prototype.has=function(t){return Ti(this.__data__,t)>-1},pi.prototype.set=function(t,e){var n=this.__data__,i=Ti(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},gi.prototype.clear=function(){this.size=0,this.__data__={hash:new fi,map:new(Wn||pi),string:new fi}},gi.prototype.delete=function(t){var e=_o(this,t).delete(t);return this.size-=e?1:0,e},gi.prototype.get=function(t){return _o(this,t).get(t)},gi.prototype.has=function(t){return _o(this,t).has(t)},gi.prototype.set=function(t,e){var n=_o(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},mi.prototype.add=mi.prototype.push=function(t){return this.__data__.set(t,a),this},mi.prototype.has=function(t){return this.__data__.has(t)},vi.prototype.clear=function(){this.__data__=new pi,this.size=0},vi.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},vi.prototype.get=function(t){return this.__data__.get(t)},vi.prototype.has=function(t){return this.__data__.has(t)},vi.prototype.set=function(t,e){var n=this.__data__;if(n instanceof pi){var i=n.__data__;if(!Wn||i.length<r-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new gi(i)}return n.set(t,e),this.size=n.size,this};var Ki=Yr(ji),$i=Yr(Bi,!0);function Ai(t,e){var n=!0;return Ki(t,function(t,i,r){return n=!!e(t,i,r)}),n}function Ni(t,n,i){for(var r=-1,o=t.length;++r<o;){var a=t[r],s=n(a);if(null!=s&&(l===e?s==s&&!Is(s):i(s,l)))var l=s,c=a}return c}function Pi(t,e){var n=[];return Ki(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n}function Li(t,e,n,i,r){var o=-1,a=t.length;for(n||(n=No),r||(r=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?Li(s,e-1,n,i,r):ze(r,s):i||(r[r.length]=s)}return r}var Fi=Qr(),Mi=Qr(!0);function ji(t,e){return t&&Fi(t,e,Ws)}function Bi(t,e){return t&&Mi(t,e,Ws)}function qi(t,e){return qe(e,function(e){return fs(t[e])})}function Hi(t,n){for(var i=0,r=(n=Pr(n,t)).length;null!=t&&i<r;)t=t[Zo(n[i++])];return i&&i==r?t:e}function Vi(t,e,n){var i=e(t);return as(t)?i:ze(i,n(t))}function Ui(t){return null==t?t===e?Q:V:kn&&kn in Gt(t)?function(t){var n=re.call(t,kn),i=t[kn];try{t[kn]=e;var r=!0}catch(t){}var o=se.call(t);return r&&(n?t[kn]=i:delete t[kn]),o}(t):function(t){return se.call(t)}(t)}function zi(t,e){return t>e}function Wi(t,e){return null!=t&&re.call(t,e)}function Xi(t,e){return null!=t&&e in Gt(t)}function Gi(t,n,i){for(var r=i?Ve:He,o=t[0].length,a=t.length,s=a,l=Vt(a),c=1/0,u=[];s--;){var d=t[s];s&&n&&(d=Ue(d,cn(n))),c=Bn(d.length,c),l[s]=!i&&(n||o>=120&&d.length>=120)?new mi(s&&d):e}d=t[0];var h=-1,f=l[0];t:for(;++h<o&&u.length<c;){var p=d[h],g=n?n(p):p;if(p=i||0!==p?p:0,!(f?dn(f,g):r(u,g,i))){for(s=a;--s;){var m=l[s];if(!(m?dn(m,g):r(t[s],g,i)))continue t}f&&f.push(g),u.push(p)}}return u}function Yi(t,n,i){var r=null==(t=Uo(t,n=Pr(n,t)))?t:t[Zo(ha(n))];return null==r?e:Le(r,t,i)}function Qi(t){return vs(t)&&Ui(t)==$}function Ji(t,e,n,i,r){return t===e||(null==t||null==e||!vs(t)&&!vs(e)?t!=t&&e!=e:Zi(t,e,n,i,Ji,r))}function Zi(t,n,i,r,o,a){var s=as(t),l=as(n),c=s?A:Ko(t),u=l?A:Ko(n),f=(c=c==$?U:c)==U,p=(u=u==$?U:u)==U,g=c==u;if(g&&us(t)){if(!us(n))return!1;s=!0,f=!1}if(g&&!f)return a||(a=new vi),s||Os(t)?Eo(t,n,i,r,o,a):function(t,e,n,i,r,o,a){switch(n){case tt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Z:return!(t.byteLength!=e.byteLength||!o(new Ie(t),new Ie(e)));case P:case L:case H:return ns(+t,+e);case M:return t.name==e.name&&t.message==e.message;case W:case G:return t==e+"";case q:var s=yn;case X:var l=i&d;if(s||(s=Cn),t.size!=e.size&&!l)return!1;var c=a.get(t);if(c)return c==e;i|=h,a.set(t,e);var u=Eo(s(t),s(e),i,r,o,a);return a.delete(t),u;case Y:if(ai)return ai.call(t)==ai.call(e)}return!1}(t,n,c,i,r,o,a);if(!(i&d)){var m=f&&re.call(t,"__wrapped__"),v=p&&re.call(n,"__wrapped__");if(m||v){var y=m?t.value():t,E=v?n.value():n;return a||(a=new vi),o(y,E,i,r,a)}}return!!g&&(a||(a=new vi),function(t,n,i,r,o,a){var s=i&d,l=Co(t),c=l.length;if(c!=Co(n).length&&!s)return!1;for(var u=c;u--;){var h=l[u];if(!(s?h in n:re.call(n,h)))return!1}var f=a.get(t);if(f&&a.get(n))return f==n;var p=!0;a.set(t,n),a.set(n,t);for(var g=s;++u<c;){var m=t[h=l[u]],v=n[h];if(r)var y=s?r(v,m,h,n,t,a):r(m,v,h,t,n,a);if(!(y===e?m===v||o(m,v,i,r,a):y)){p=!1;break}g||(g="constructor"==h)}if(p&&!g){var E=t.constructor,b=n.constructor;E!=b&&"constructor"in t&&"constructor"in n&&!("function"==typeof E&&E instanceof E&&"function"==typeof b&&b instanceof b)&&(p=!1)}return a.delete(t),a.delete(n),p}(t,n,i,r,o,a))}function tr(t,n,i,r){var o=i.length,a=o,s=!r;if(null==t)return!a;for(t=Gt(t);o--;){var l=i[o];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++o<a;){var c=(l=i[o])[0],u=t[c],f=l[1];if(s&&l[2]){if(u===e&&!(c in t))return!1}else{var p=new vi;if(r)var g=r(u,f,c,t,n,p);if(!(g===e?Ji(f,u,d|h,r,p):g))return!1}}return!0}function er(t){return!(!ms(t)||ae&&ae in t)&&(fs(t)?ye:Ft).test(ta(t))}function nr(t){return"function"==typeof t?t:null==t?El:"object"==typeof t?as(t)?sr(t[0],t[1]):ar(t):kl(t)}function ir(t){if(!Bo(t))return Mn(t);var e=[];for(var n in Gt(t))re.call(t,n)&&"constructor"!=n&&e.push(n);return e}function rr(t,e){return t<e}function or(t,e){var n=-1,i=ls(t)?Vt(t.length):[];return Ki(t,function(t,r,o){i[++n]=e(t,r,o)}),i}function ar(t){var e=ko(t);return 1==e.length&&e[0][2]?Ho(e[0][0],e[0][1]):function(n){return n===t||tr(n,t,e)}}function sr(t,n){return Fo(t)&&qo(n)?Ho(Zo(t),n):function(i){var r=qs(i,t);return r===e&&r===n?Hs(i,t):Ji(n,r,d|h)}}function lr(t,n,i,r,o){t!==n&&Fi(n,function(a,s){if(ms(a))o||(o=new vi),function(t,n,i,r,o,a,s){var l=t[i],c=n[i],u=s.get(c);if(u)bi(t,i,u);else{var d=a?a(l,c,i+"",t,n,s):e,h=d===e;if(h){var f=as(c),p=!f&&us(c),g=!f&&!p&&Os(c);d=c,f||p||g?as(l)?d=l:cs(l)?d=zr(l):p?(h=!1,d=jr(c,!0)):g?(h=!1,d=qr(c,!0)):d=[]:bs(c)||os(c)?(d=l,os(l)?d=$s(l):(!ms(l)||r&&fs(l))&&(d=Ao(c))):h=!1}h&&(s.set(c,d),o(d,c,r,a,s),s.delete(c)),bi(t,i,d)}}(t,n,s,i,lr,r,o);else{var l=r?r(t[s],a,s+"",t,n,o):e;l===e&&(l=a),bi(t,s,l)}},Xs)}function cr(t,n){var i=t.length;if(i)return Po(n+=n<0?i:0,i)?t[n]:e}function ur(t,e,n){var i=-1;return e=Ue(e.length?e:[El],cn(Do())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(or(t,function(t,n,r){return{criteria:Ue(e,function(e){return e(t)}),index:++i,value:t}}),function(t,e){return function(t,e,n){for(var i=-1,r=t.criteria,o=e.criteria,a=r.length,s=n.length;++i<a;){var l=Hr(r[i],o[i]);if(l)return i>=s?l:l*("desc"==n[i]?-1:1)}return t.index-e.index}(t,e,n)})}function dr(t,e,n){for(var i=-1,r=e.length,o={};++i<r;){var a=e[i],s=Hi(t,a);n(s,a)&&vr(o,Pr(a,t),s)}return o}function hr(t,e,n,i){var r=i?tn:Ze,o=-1,a=e.length,s=t;for(t===e&&(e=zr(e)),n&&(s=Ue(t,cn(n)));++o<a;)for(var l=0,c=e[o],u=n?n(c):c;(l=r(s,u,l,i))>-1;)s!==t&&on.call(s,l,1),on.call(t,l,1);return t}function fr(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==o){var o=r;Po(r)?on.call(t,r,1):kr(t,r)}}return t}function pr(t,e){return t+An(Vn()*(e-t+1))}function gr(t,e){var n="";if(!t||e<1||e>D)return n;do{e%2&&(n+=t),(e=An(e/2))&&(t+=t)}while(e);return n}function mr(t,e){return Xo(Vo(t,e,El),t+"")}function vr(t,n,i,r){if(!ms(t))return t;for(var o=-1,a=(n=Pr(n,t)).length,s=a-1,l=t;null!=l&&++o<a;){var c=Zo(n[o]),u=i;if(o!=s){var d=l[c];(u=r?r(d,c,l):e)===e&&(u=ms(d)?d:Po(n[o+1])?[]:{})}Ci(l,c,u),l=l[c]}return t}var yr=Jn?function(t,e){return Jn.set(t,e),t}:El,Er=Rn?function(t,e){return Rn(t,"toString",{configurable:!0,enumerable:!1,value:ml(e),writable:!0})}:El;function br(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(n=n>r?r:n)<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var o=Vt(r);++i<r;)o[i]=t[i+e];return o}function Cr(t,e){var n;return Ki(t,function(t,i,r){return!(n=e(t,i,r))}),!!n}function Tr(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e==e&&r<=S){for(;i<r;){var o=i+r>>>1,a=t[o];null!==a&&!Is(a)&&(n?a<=e:a<e)?i=o+1:r=o}return r}return wr(t,e,El,n)}function wr(t,n,i,r){n=i(n);for(var o=0,a=null==t?0:t.length,s=n!=n,l=null===n,c=Is(n),u=n===e;o<a;){var d=An((o+a)/2),h=i(t[d]),f=h!==e,p=null===h,g=h==h,m=Is(h);if(s)var v=r||g;else v=u?g&&(r||f):l?g&&f&&(r||!p):c?g&&f&&!p&&(r||!m):!p&&!m&&(r?h<=n:h<n);v?o=d+1:a=d}return Bn(a,x)}function Ir(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var a=t[n],s=e?e(a):a;if(!n||!ns(s,l)){var l=s;o[r++]=0===a?0:a}}return o}function Or(t){return"number"==typeof t?t:Is(t)?k:+t}function Dr(t){if("string"==typeof t)return t;if(as(t))return Ue(t,Dr)+"";if(Is(t))return si?si.call(t):"";var e=t+"";return"0"==e&&1/t==-O?"-0":e}function _r(t,e,n){var i=-1,o=He,a=t.length,s=!0,l=[],c=l;if(n)s=!1,o=Ve;else if(a>=r){var u=e?null:fo(t);if(u)return Cn(u);s=!1,o=dn,c=new mi}else c=e?[]:l;t:for(;++i<a;){var d=t[i],h=e?e(d):d;if(d=n||0!==d?d:0,s&&h==h){for(var f=c.length;f--;)if(c[f]===h)continue t;e&&c.push(h),l.push(d)}else o(c,h,n)||(c!==l&&c.push(h),l.push(d))}return l}function kr(t,e){return null==(t=Uo(t,e=Pr(e,t)))||delete t[Zo(ha(e))]}function Rr(t,e,n,i){return vr(t,e,n(Hi(t,e)),i)}function xr(t,e,n,i){for(var r=t.length,o=i?r:-1;(i?o--:++o<r)&&e(t[o],o,t););return n?br(t,i?0:o,i?o+1:r):br(t,i?o+1:0,i?r:o)}function Sr(t,e){var n=t;return n instanceof hi&&(n=n.value()),We(e,function(t,e){return e.func.apply(e.thisArg,ze([t],e.args))},n)}function Kr(t,e,n){var i=t.length;if(i<2)return i?_r(t[0]):[];for(var r=-1,o=Vt(i);++r<i;)for(var a=t[r],s=-1;++s<i;)s!=r&&(o[r]=Si(o[r]||a,t[s],e,n));return _r(Li(o,1),e,n)}function $r(t,n,i){for(var r=-1,o=t.length,a=n.length,s={};++r<o;){var l=r<a?n[r]:e;i(s,t[r],l)}return s}function Ar(t){return cs(t)?t:[]}function Nr(t){return"function"==typeof t?t:El}function Pr(t,e){return as(t)?t:Fo(t,e)?[t]:Jo(As(t))}var Lr=mr;function Fr(t,n,i){var r=t.length;return i=i===e?r:i,!n&&i>=r?t:br(t,n,i)}var Mr=xn||function(t){return we.clearTimeout(t)};function jr(t,e){if(e)return t.slice();var n=t.length,i=Oe?Oe(n):new t.constructor(n);return t.copy(i),i}function Br(t){var e=new t.constructor(t.byteLength);return new Ie(e).set(new Ie(t)),e}function qr(t,e){var n=e?Br(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Hr(t,n){if(t!==n){var i=t!==e,r=null===t,o=t==t,a=Is(t),s=n!==e,l=null===n,c=n==n,u=Is(n);if(!l&&!u&&!a&&t>n||a&&s&&c&&!l&&!u||r&&s&&c||!i&&c||!o)return 1;if(!r&&!a&&!u&&t<n||u&&i&&o&&!r&&!a||l&&i&&o||!s&&o||!c)return-1}return 0}function Vr(t,e,n,i){for(var r=-1,o=t.length,a=n.length,s=-1,l=e.length,c=jn(o-a,0),u=Vt(l+c),d=!i;++s<l;)u[s]=e[s];for(;++r<a;)(d||r<o)&&(u[n[r]]=t[r]);for(;c--;)u[s++]=t[r++];return u}function Ur(t,e,n,i){for(var r=-1,o=t.length,a=-1,s=n.length,l=-1,c=e.length,u=jn(o-s,0),d=Vt(u+c),h=!i;++r<u;)d[r]=t[r];for(var f=r;++l<c;)d[f+l]=e[l];for(;++a<s;)(h||r<o)&&(d[f+n[a]]=t[r++]);return d}function zr(t,e){var n=-1,i=t.length;for(e||(e=Vt(i));++n<i;)e[n]=t[n];return e}function Wr(t,n,i,r){var o=!i;i||(i={});for(var a=-1,s=n.length;++a<s;){var l=n[a],c=r?r(i[l],t[l],l,i,t):e;c===e&&(c=t[l]),o?Oi(i,l,c):Ci(i,l,c)}return i}function Xr(t,e){return function(n,i){var r=as(n)?Fe:wi,o=e?e():{};return r(n,t,Do(i,2),o)}}function Gr(t){return mr(function(n,i){var r=-1,o=i.length,a=o>1?i[o-1]:e,s=o>2?i[2]:e;for(a=t.length>3&&"function"==typeof a?(o--,a):e,s&&Lo(i[0],i[1],s)&&(a=o<3?e:a,o=1),n=Gt(n);++r<o;){var l=i[r];l&&t(n,l,r,a)}return n})}function Yr(t,e){return function(n,i){if(null==n)return n;if(!ls(n))return t(n,i);for(var r=n.length,o=e?r:-1,a=Gt(n);(e?o--:++o<r)&&!1!==i(a[o],o,a););return n}}function Qr(t){return function(e,n,i){for(var r=-1,o=Gt(e),a=i(e),s=a.length;s--;){var l=a[t?s:++r];if(!1===n(o[l],l,o))break}return e}}function Jr(t){return function(n){var i=vn(n=As(n))?wn(n):e,r=i?i[0]:n.charAt(0),o=i?Fr(i,1).join(""):n.slice(1);return r[t]()+o}}function Zr(t){return function(e){return We(fl(ol(e).replace(le,"")),t,"")}}function to(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=ci(t.prototype),i=t.apply(n,e);return ms(i)?i:n}}function eo(t){return function(n,i,r){var o=Gt(n);if(!ls(n)){var a=Do(i,3);n=Ws(n),i=function(t){return a(o[t],t,o)}}var s=t(n,i,r);return s>-1?o[a?n[s]:s]:e}}function no(t){return bo(function(n){var i=n.length,r=i,a=di.prototype.thru;for(t&&n.reverse();r--;){var s=n[r];if("function"!=typeof s)throw new Jt(o);if(a&&!l&&"wrapper"==Io(s))var l=new di([],!0)}for(r=l?r:i;++r<i;){var c=Io(s=n[r]),u="wrapper"==c?wo(s):e;l=u&&Mo(u[0])&&u[1]==(b|m|y|C)&&!u[4].length&&1==u[9]?l[Io(u[0])].apply(l,u[3]):1==s.length&&Mo(s)?l[c]():l.thru(s)}return function(){var t=arguments,e=t[0];if(l&&1==t.length&&as(e))return l.plant(e).value();for(var r=0,o=i?n[r].apply(this,t):e;++r<i;)o=n[r].call(this,o);return o}})}function io(t,n,i,r,o,a,s,l,c,u){var d=n&b,h=n&f,g=n&p,y=n&(m|v),E=n&T,C=g?e:to(t);return function f(){for(var p=arguments.length,m=Vt(p),v=p;v--;)m[v]=arguments[v];if(y)var b=Oo(f),T=function(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}(m,b);if(r&&(m=Vr(m,r,o,y)),a&&(m=Ur(m,a,s,y)),p-=T,y&&p<u){var w=bn(m,b);return uo(t,n,io,f.placeholder,i,m,w,l,c,u-p)}var I=h?i:this,O=g?I[t]:t;return p=m.length,l?m=function(t,n){for(var i=t.length,r=Bn(n.length,i),o=zr(t);r--;){var a=n[r];t[r]=Po(a,i)?o[a]:e}return t}(m,l):E&&p>1&&m.reverse(),d&&c<p&&(m.length=c),this&&this!==we&&this instanceof f&&(O=C||to(O)),O.apply(I,m)}}function ro(t,e){return function(n,i){return function(t,e,n,i){return ji(t,function(t,r,o){e(i,n(t),r,o)}),i}(n,t,e(i),{})}}function oo(t,n){return function(i,r){var o;if(i===e&&r===e)return n;if(i!==e&&(o=i),r!==e){if(o===e)return r;"string"==typeof i||"string"==typeof r?(i=Dr(i),r=Dr(r)):(i=Or(i),r=Or(r)),o=t(i,r)}return o}}function ao(t){return bo(function(e){return e=Ue(e,cn(Do())),mr(function(n){var i=this;return t(e,function(t){return Le(t,i,n)})})})}function so(t,n){var i=(n=n===e?" ":Dr(n)).length;if(i<2)return i?gr(n,t):n;var r=gr(n,$n(t/Tn(n)));return vn(n)?Fr(wn(r),0,t).join(""):r.slice(0,t)}function lo(t){return function(n,i,r){return r&&"number"!=typeof r&&Lo(n,i,r)&&(i=r=e),n=Rs(n),i===e?(i=n,n=0):i=Rs(i),function(t,e,n,i){for(var r=-1,o=jn($n((e-t)/(n||1)),0),a=Vt(o);o--;)a[i?o:++r]=t,t+=n;return a}(n,i,r=r===e?n<i?1:-1:Rs(r),t)}}function co(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Ks(e),n=Ks(n)),t(e,n)}}function uo(t,n,i,r,o,a,s,l,c,u){var d=n&m;n|=d?y:E,(n&=~(d?E:y))&g||(n&=~(f|p));var h=[t,n,o,d?a:e,d?s:e,d?e:a,d?e:s,l,c,u],v=i.apply(e,h);return Mo(t)&&zo(v,h),v.placeholder=r,Go(v,t,n)}function ho(t){var e=Xt[t];return function(t,n){if(t=Ks(t),n=null==n?0:Bn(xs(n),292)){var i=(As(t)+"e").split("e");return+((i=(As(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}var fo=Gn&&1/Cn(new Gn([,-0]))[1]==O?function(t){return new Gn(t)}:Il;function po(t){return function(e){var n=Ko(e);return n==q?yn(e):n==X?function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}(e):function(t,e){return Ue(e,function(e){return[e,t[e]]})}(e,t(e))}}function go(t,n,i,r,a,l,c,u){var d=n&p;if(!d&&"function"!=typeof t)throw new Jt(o);var h=r?r.length:0;if(h||(n&=~(y|E),r=a=e),c=c===e?c:jn(xs(c),0),u=u===e?u:xs(u),h-=a?a.length:0,n&E){var T=r,w=a;r=a=e}var I=d?e:wo(t),O=[t,n,i,r,a,T,w,l,c,u];if(I&&function(t,e){var n=t[1],i=e[1],r=n|i,o=r<(f|p|b),a=i==b&&n==m||i==b&&n==C&&t[7].length<=e[8]||i==(b|C)&&e[7].length<=e[8]&&n==m;if(!o&&!a)return t;i&f&&(t[2]=e[2],r|=n&f?0:g);var l=e[3];if(l){var c=t[3];t[3]=c?Vr(c,l,e[4]):l,t[4]=c?bn(t[3],s):e[4]}(l=e[5])&&(c=t[5],t[5]=c?Ur(c,l,e[6]):l,t[6]=c?bn(t[5],s):e[6]),(l=e[7])&&(t[7]=l),i&b&&(t[8]=null==t[8]?e[8]:Bn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r}(O,I),t=O[0],n=O[1],i=O[2],r=O[3],a=O[4],!(u=O[9]=O[9]===e?d?0:t.length:jn(O[9]-h,0))&&n&(m|v)&&(n&=~(m|v)),n&&n!=f)D=n==m||n==v?function(t,n,i){var r=to(t);return function o(){for(var a=arguments.length,s=Vt(a),l=a,c=Oo(o);l--;)s[l]=arguments[l];var u=a<3&&s[0]!==c&&s[a-1]!==c?[]:bn(s,c);return(a-=u.length)<i?uo(t,n,io,o.placeholder,e,s,u,e,e,i-a):Le(this&&this!==we&&this instanceof o?r:t,this,s)}}(t,n,u):n!=y&&n!=(f|y)||a.length?io.apply(e,O):function(t,e,n,i){var r=e&f,o=to(t);return function e(){for(var a=-1,s=arguments.length,l=-1,c=i.length,u=Vt(c+s),d=this&&this!==we&&this instanceof e?o:t;++l<c;)u[l]=i[l];for(;s--;)u[l++]=arguments[++a];return Le(d,r?n:this,u)}}(t,n,i,r);else var D=function(t,e,n){var i=e&f,r=to(t);return function e(){return(this&&this!==we&&this instanceof e?r:t).apply(i?n:this,arguments)}}(t,n,i);return Go((I?yr:zo)(D,O),t,n)}function mo(t,n,i,r){return t===e||ns(t,ee[i])&&!re.call(r,i)?n:t}function vo(t,n,i,r,o,a){return ms(t)&&ms(n)&&(a.set(n,t),lr(t,n,e,vo,a),a.delete(n)),t}function yo(t){return bs(t)?e:t}function Eo(t,n,i,r,o,a){var s=i&d,l=t.length,c=n.length;if(l!=c&&!(s&&c>l))return!1;var u=a.get(t);if(u&&a.get(n))return u==n;var f=-1,p=!0,g=i&h?new mi:e;for(a.set(t,n),a.set(n,t);++f<l;){var m=t[f],v=n[f];if(r)var y=s?r(v,m,f,n,t,a):r(m,v,f,t,n,a);if(y!==e){if(y)continue;p=!1;break}if(g){if(!Ge(n,function(t,e){if(!dn(g,e)&&(m===t||o(m,t,i,r,a)))return g.push(e)})){p=!1;break}}else if(m!==v&&!o(m,v,i,r,a)){p=!1;break}}return a.delete(t),a.delete(n),p}function bo(t){return Xo(Vo(t,e,sa),t+"")}function Co(t){return Vi(t,Ws,xo)}function To(t){return Vi(t,Xs,So)}var wo=Jn?function(t){return Jn.get(t)}:Il;function Io(t){for(var e=t.name+"",n=Zn[e],i=re.call(Zn,e)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==t)return r.name}return e}function Oo(t){return(re.call(li,"placeholder")?li:t).placeholder}function Do(){var t=li.iteratee||bl;return t=t===bl?nr:t,arguments.length?t(arguments[0],arguments[1]):t}function _o(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function ko(t){for(var e=Ws(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,qo(r)]}return e}function Ro(t,n){var i=function(t,n){return null==t?e:t[n]}(t,n);return er(i)?i:e}var xo=Nn?function(t){return null==t?[]:(t=Gt(t),qe(Nn(t),function(e){return Ye.call(t,e)}))}:Sl,So=Nn?function(t){for(var e=[];t;)ze(e,xo(t)),t=_e(t);return e}:Sl,Ko=Ui;function $o(t,e,n){for(var i=-1,r=(e=Pr(e,t)).length,o=!1;++i<r;){var a=Zo(e[i]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++i!=r?o:!!(r=null==t?0:t.length)&&gs(r)&&Po(a,r)&&(as(t)||os(t))}function Ao(t){return"function"!=typeof t.constructor||Bo(t)?{}:ci(_e(t))}function No(t){return as(t)||os(t)||!!(Dn&&t&&t[Dn])}function Po(t,e){return!!(e=null==e?D:e)&&("number"==typeof t||jt.test(t))&&t>-1&&t%1==0&&t<e}function Lo(t,e,n){if(!ms(n))return!1;var i=typeof e;return!!("number"==i?ls(n)&&Po(e,n.length):"string"==i&&e in n)&&ns(n[e],t)}function Fo(t,e){if(as(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Is(t))||Ct.test(t)||!bt.test(t)||null!=e&&t in Gt(e)}function Mo(t){var e=Io(t),n=li[e];if("function"!=typeof n||!(e in hi.prototype))return!1;if(t===n)return!0;var i=wo(n);return!!i&&t===i[0]}(zn&&Ko(new zn(new ArrayBuffer(1)))!=tt||Wn&&Ko(new Wn)!=q||Xn&&"[object Promise]"!=Ko(Xn.resolve())||Gn&&Ko(new Gn)!=X||Yn&&Ko(new Yn)!=J)&&(Ko=function(t){var n=Ui(t),i=n==U?t.constructor:e,r=i?ta(i):"";if(r)switch(r){case ti:return tt;case ei:return q;case ni:return"[object Promise]";case ii:return X;case ri:return J}return n});var jo=ne?fs:Kl;function Bo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ee)}function qo(t){return t==t&&!ms(t)}function Ho(t,n){return function(i){return null!=i&&i[t]===n&&(n!==e||t in Gt(i))}}function Vo(t,n,i){return n=jn(n===e?t.length-1:n,0),function(){for(var e=arguments,r=-1,o=jn(e.length-n,0),a=Vt(o);++r<o;)a[r]=e[n+r];r=-1;for(var s=Vt(n+1);++r<n;)s[r]=e[r];return s[n]=i(a),Le(t,this,s)}}function Uo(t,e){return e.length<2?t:Hi(t,br(e,0,-1))}var zo=Yo(yr),Wo=Kn||function(t,e){return we.setTimeout(t,e)},Xo=Yo(Er);function Go(t,e,n){var i=e+"";return Xo(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(Rt,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return Me(K,function(n){var i="_."+n[0];e&n[1]&&!He(t,i)&&t.push(i)}),t.sort()}(function(t){var e=i.match(xt);return e?e[1].split(St):[]}(),n)))}function Yo(t){var n=0,i=0;return function(){var r=qn(),o=I-(r-i);if(i=r,o>0){if(++n>=w)return arguments[0]}else n=0;return t.apply(e,arguments)}}function Qo(t,n){var i=-1,r=t.length,o=r-1;for(n=n===e?r:n;++i<n;){var a=pr(i,o),s=t[a];t[a]=t[i],t[i]=s}return t.length=n,t}var Jo=function(t){var e=Ya(function(t){var e=[];return Tt.test(t)&&e.push(""),t.replace(wt,function(t,n,i,r){e.push(i?r.replace($t,"$1"):n||t)}),e},function(t){return 500===n.size&&n.clear(),t}),n=e.cache;return e}();function Zo(t){if("string"==typeof t||Is(t))return t;var e=t+"";return"0"==e&&1/t==-O?"-0":e}function ta(t){if(null!=t){try{return ie.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function ea(t){if(t instanceof hi)return t.clone();var e=new di(t.__wrapped__,t.__chain__);return e.__actions__=zr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var na=mr(function(t,e){return cs(t)?Si(t,Li(e,1,cs,!0)):[]}),ia=mr(function(t,n){var i=ha(n);return cs(i)&&(i=e),cs(t)?Si(t,Li(n,1,cs,!0),Do(i,2)):[]}),ra=mr(function(t,n){var i=ha(n);return cs(i)&&(i=e),cs(t)?Si(t,Li(n,1,cs,!0),e,i):[]});function oa(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:xs(n);return r<0&&(r=jn(i+r,0)),Je(t,Do(e,3),r)}function aa(t,n,i){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return i!==e&&(o=xs(i),o=i<0?jn(r+o,0):Bn(o,r-1)),Je(t,Do(n,3),o,!0)}function sa(t){return(null==t?0:t.length)?Li(t,1):[]}function la(t){return t&&t.length?t[0]:e}var ca=mr(function(t){var e=Ue(t,Ar);return e.length&&e[0]===t[0]?Gi(e):[]}),ua=mr(function(t){var n=ha(t),i=Ue(t,Ar);return n===ha(i)?n=e:i.pop(),i.length&&i[0]===t[0]?Gi(i,Do(n,2)):[]}),da=mr(function(t){var n=ha(t),i=Ue(t,Ar);return(n="function"==typeof n?n:e)&&i.pop(),i.length&&i[0]===t[0]?Gi(i,e,n):[]});function ha(t){var n=null==t?0:t.length;return n?t[n-1]:e}var fa=mr(pa);function pa(t,e){return t&&t.length&&e&&e.length?hr(t,e):t}var ga=bo(function(t,e){var n=null==t?0:t.length,i=Di(t,e);return fr(t,Ue(e,function(t){return Po(t,n)?+t:t}).sort(Hr)),i});function ma(t){return null==t?t:Un.call(t)}var va=mr(function(t){return _r(Li(t,1,cs,!0))}),ya=mr(function(t){var n=ha(t);return cs(n)&&(n=e),_r(Li(t,1,cs,!0),Do(n,2))}),Ea=mr(function(t){var n=ha(t);return n="function"==typeof n?n:e,_r(Li(t,1,cs,!0),e,n)});function ba(t){if(!t||!t.length)return[];var e=0;return t=qe(t,function(t){if(cs(t))return e=jn(t.length,e),!0}),ln(e,function(e){return Ue(t,rn(e))})}function Ca(t,n){if(!t||!t.length)return[];var i=ba(t);return null==n?i:Ue(i,function(t){return Le(n,e,t)})}var Ta=mr(function(t,e){return cs(t)?Si(t,e):[]}),wa=mr(function(t){return Kr(qe(t,cs))}),Ia=mr(function(t){var n=ha(t);return cs(n)&&(n=e),Kr(qe(t,cs),Do(n,2))}),Oa=mr(function(t){var n=ha(t);return n="function"==typeof n?n:e,Kr(qe(t,cs),e,n)}),Da=mr(ba),_a=mr(function(t){var n=t.length,i=n>1?t[n-1]:e;return Ca(t,i="function"==typeof i?(t.pop(),i):e)});function ka(t){var e=li(t);return e.__chain__=!0,e}function Ra(t,e){return e(t)}var xa=bo(function(t){var n=t.length,i=n?t[0]:0,r=this.__wrapped__,o=function(e){return Di(e,t)};return!(n>1||this.__actions__.length)&&r instanceof hi&&Po(i)?((r=r.slice(i,+i+(n?1:0))).__actions__.push({func:Ra,args:[o],thisArg:e}),new di(r,this.__chain__).thru(function(t){return n&&!t.length&&t.push(e),t})):this.thru(o)}),Sa=Xr(function(t,e,n){re.call(t,n)?++t[n]:Oi(t,n,1)}),Ka=eo(oa),$a=eo(aa);function Aa(t,e){return(as(t)?Me:Ki)(t,Do(e,3))}function Na(t,e){return(as(t)?je:$i)(t,Do(e,3))}var Pa=Xr(function(t,e,n){re.call(t,n)?t[n].push(e):Oi(t,n,[e])}),La=mr(function(t,e,n){var i=-1,r="function"==typeof e,o=ls(t)?Vt(t.length):[];return Ki(t,function(t){o[++i]=r?Le(e,t,n):Yi(t,e,n)}),o}),Fa=Xr(function(t,e,n){Oi(t,n,e)});function Ma(t,e){return(as(t)?Ue:or)(t,Do(e,3))}var ja=Xr(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),Ba=mr(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Lo(t,e[0],e[1])?e=[]:n>2&&Lo(e[0],e[1],e[2])&&(e=[e[0]]),ur(t,Li(e,1),[])}),qa=Sn||function(){return we.Date.now()};function Ha(t,n,i){return n=i?e:n,n=t&&null==n?t.length:n,go(t,b,e,e,e,e,n)}function Va(t,n){var i;if("function"!=typeof n)throw new Jt(o);return t=xs(t),function(){return--t>0&&(i=n.apply(this,arguments)),t<=1&&(n=e),i}}var Ua=mr(function(t,e,n){var i=f;if(n.length){var r=bn(n,Oo(Ua));i|=y}return go(t,i,e,n,r)}),za=mr(function(t,e,n){var i=f|p;if(n.length){var r=bn(n,Oo(za));i|=y}return go(e,i,t,n,r)});function Wa(t,n,i){var r,a,s,l,c,u,d=0,h=!1,f=!1,p=!0;if("function"!=typeof t)throw new Jt(o);function g(n){var i=r,o=a;return r=a=e,d=n,l=t.apply(o,i)}function m(t){var i=t-u;return u===e||i>=n||i<0||f&&t-d>=s}function v(){var t=qa();if(m(t))return y(t);c=Wo(v,function(t){var e=n-(t-u);return f?Bn(e,s-(t-d)):e}(t))}function y(t){return c=e,p&&r?g(t):(r=a=e,l)}function E(){var t=qa(),i=m(t);if(r=arguments,a=this,u=t,i){if(c===e)return function(t){return d=t,c=Wo(v,n),h?g(t):l}(u);if(f)return c=Wo(v,n),g(u)}return c===e&&(c=Wo(v,n)),l}return n=Ks(n)||0,ms(i)&&(h=!!i.leading,s=(f="maxWait"in i)?jn(Ks(i.maxWait)||0,n):s,p="trailing"in i?!!i.trailing:p),E.cancel=function(){c!==e&&Mr(c),d=0,r=u=a=c=e},E.flush=function(){return c===e?l:y(qa())},E}var Xa=mr(function(t,e){return xi(t,1,e)}),Ga=mr(function(t,e,n){return xi(t,Ks(e)||0,n)});function Ya(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Jt(o);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=t.apply(this,i);return n.cache=o.set(r,a)||o,a};return n.cache=new(Ya.Cache||gi),n}function Qa(t){if("function"!=typeof t)throw new Jt(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ya.Cache=gi;var Ja=Lr(function(t,e){var n=(e=1==e.length&&as(e[0])?Ue(e[0],cn(Do())):Ue(Li(e,1),cn(Do()))).length;return mr(function(i){for(var r=-1,o=Bn(i.length,n);++r<o;)i[r]=e[r].call(this,i[r]);return Le(t,this,i)})}),Za=mr(function(t,n){var i=bn(n,Oo(Za));return go(t,y,e,n,i)}),ts=mr(function(t,n){var i=bn(n,Oo(ts));return go(t,E,e,n,i)}),es=bo(function(t,n){return go(t,C,e,e,e,n)});function ns(t,e){return t===e||t!=t&&e!=e}var is=co(zi),rs=co(function(t,e){return t>=e}),os=Qi(function(){return arguments}())?Qi:function(t){return vs(t)&&re.call(t,"callee")&&!Ye.call(t,"callee")},as=Vt.isArray,ss=Re?cn(Re):function(t){return vs(t)&&Ui(t)==Z};function ls(t){return null!=t&&gs(t.length)&&!fs(t)}function cs(t){return vs(t)&&ls(t)}var us=Pn||Kl,ds=xe?cn(xe):function(t){return vs(t)&&Ui(t)==L};function hs(t){if(!vs(t))return!1;var e=Ui(t);return e==M||e==F||"string"==typeof t.message&&"string"==typeof t.name&&!bs(t)}function fs(t){if(!ms(t))return!1;var e=Ui(t);return e==j||e==B||e==N||e==z}function ps(t){return"number"==typeof t&&t==xs(t)}function gs(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=D}function ms(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function vs(t){return null!=t&&"object"==typeof t}var ys=Se?cn(Se):function(t){return vs(t)&&Ko(t)==q};function Es(t){return"number"==typeof t||vs(t)&&Ui(t)==H}function bs(t){if(!vs(t)||Ui(t)!=U)return!1;var e=_e(t);if(null===e)return!0;var n=re.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ie.call(n)==ue}var Cs=Ke?cn(Ke):function(t){return vs(t)&&Ui(t)==W},Ts=$e?cn($e):function(t){return vs(t)&&Ko(t)==X};function ws(t){return"string"==typeof t||!as(t)&&vs(t)&&Ui(t)==G}function Is(t){return"symbol"==typeof t||vs(t)&&Ui(t)==Y}var Os=Ae?cn(Ae):function(t){return vs(t)&&gs(t.length)&&!!me[Ui(t)]},Ds=co(rr),_s=co(function(t,e){return t<=e});function ks(t){if(!t)return[];if(ls(t))return ws(t)?wn(t):zr(t);if(_n&&t[_n])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[_n]());var e=Ko(t);return(e==q?yn:e==X?Cn:nl)(t)}function Rs(t){return t?(t=Ks(t))===O||t===-O?(t<0?-1:1)*_:t==t?t:0:0===t?t:0}function xs(t){var e=Rs(t),n=e%1;return e==e?n?e-n:e:0}function Ss(t){return t?_i(xs(t),0,R):0}function Ks(t){if("number"==typeof t)return t;if(Is(t))return k;if(ms(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ms(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Dt,"");var n=Lt.test(t);return n||Mt.test(t)?be(t.slice(2),n?2:8):Pt.test(t)?k:+t}function $s(t){return Wr(t,Xs(t))}function As(t){return null==t?"":Dr(t)}var Ns=Gr(function(t,e){if(Bo(e)||ls(e))Wr(e,Ws(e),t);else for(var n in e)re.call(e,n)&&Ci(t,n,e[n])}),Ps=Gr(function(t,e){Wr(e,Xs(e),t)}),Ls=Gr(function(t,e,n,i){Wr(e,Xs(e),t,i)}),Fs=Gr(function(t,e,n,i){Wr(e,Ws(e),t,i)}),Ms=bo(Di),js=mr(function(t){return t.push(e,mo),Le(Ls,e,t)}),Bs=mr(function(t){return t.push(e,vo),Le(Ys,e,t)});function qs(t,n,i){var r=null==t?e:Hi(t,n);return r===e?i:r}function Hs(t,e){return null!=t&&$o(t,e,Xi)}var Vs=ro(function(t,e,n){t[e]=n},ml(El)),Us=ro(function(t,e,n){re.call(t,e)?t[e].push(n):t[e]=[n]},Do),zs=mr(Yi);function Ws(t){return ls(t)?yi(t):ir(t)}function Xs(t){return ls(t)?yi(t,!0):function(t){if(!ms(t))return function(t){var e=[];if(null!=t)for(var n in Gt(t))e.push(n);return e}(t);var e=Bo(t),n=[];for(var i in t)("constructor"!=i||!e&&re.call(t,i))&&n.push(i);return n}(t)}var Gs=Gr(function(t,e,n){lr(t,e,n)}),Ys=Gr(function(t,e,n,i){lr(t,e,n,i)}),Qs=bo(function(t,e){var n={};if(null==t)return n;var i=!1;e=Ue(e,function(e){return e=Pr(e,t),i||(i=e.length>1),e}),Wr(t,To(t),n),i&&(n=ki(n,l|c|u,yo));for(var r=e.length;r--;)kr(n,e[r]);return n}),Js=bo(function(t,e){return null==t?{}:function(t,e){return dr(t,e,function(e,n){return Hs(t,n)})}(t,e)});function Zs(t,e){if(null==t)return{};var n=Ue(To(t),function(t){return[t]});return e=Do(e),dr(t,n,function(t,n){return e(t,n[0])})}var tl=po(Ws),el=po(Xs);function nl(t){return null==t?[]:un(t,Ws(t))}var il=Zr(function(t,e,n){return e=e.toLowerCase(),t+(n?rl(e):e)});function rl(t){return hl(As(t).toLowerCase())}function ol(t){return(t=As(t))&&t.replace(Bt,pn).replace(ce,"")}var al=Zr(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),sl=Zr(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),ll=Jr("toLowerCase"),cl=Zr(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),ul=Zr(function(t,e,n){return t+(n?" ":"")+hl(e)}),dl=Zr(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),hl=Jr("toUpperCase");function fl(t,n,i){return t=As(t),(n=i?e:n)===e?function(t){return fe.test(t)}(t)?function(t){return t.match(de)||[]}(t):function(t){return t.match(Kt)||[]}(t):t.match(n)||[]}var pl=mr(function(t,n){try{return Le(t,e,n)}catch(t){return hs(t)?t:new zt(t)}}),gl=bo(function(t,e){return Me(e,function(e){e=Zo(e),Oi(t,e,Ua(t[e],t))}),t});function ml(t){return function(){return t}}var vl=no(),yl=no(!0);function El(t){return t}function bl(t){return nr("function"==typeof t?t:ki(t,l))}var Cl=mr(function(t,e){return function(n){return Yi(n,t,e)}}),Tl=mr(function(t,e){return function(n){return Yi(t,n,e)}});function wl(t,e,n){var i=Ws(e),r=qi(e,i);null!=n||ms(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=qi(e,Ws(e)));var o=!(ms(n)&&"chain"in n&&!n.chain),a=fs(t);return Me(r,function(n){var i=e[n];t[n]=i,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=zr(this.__actions__)).push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,ze([this.value()],arguments))})}),t}function Il(){}var Ol=ao(Ue),Dl=ao(Be),_l=ao(Ge);function kl(t){return Fo(t)?rn(Zo(t)):function(t){return function(e){return Hi(e,t)}}(t)}var Rl=lo(),xl=lo(!0);function Sl(){return[]}function Kl(){return!1}var $l,Al=oo(function(t,e){return t+e},0),Nl=ho("ceil"),Pl=oo(function(t,e){return t/e},1),Ll=ho("floor"),Fl=oo(function(t,e){return t*e},1),Ml=ho("round"),jl=oo(function(t,e){return t-e},0);return li.after=function(t,e){if("function"!=typeof e)throw new Jt(o);return t=xs(t),function(){if(--t<1)return e.apply(this,arguments)}},li.ary=Ha,li.assign=Ns,li.assignIn=Ps,li.assignInWith=Ls,li.assignWith=Fs,li.at=Ms,li.before=Va,li.bind=Ua,li.bindAll=gl,li.bindKey=za,li.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return as(t)?t:[t]},li.chain=ka,li.chunk=function(t,n,i){n=(i?Lo(t,n,i):n===e)?1:jn(xs(n),0);var r=null==t?0:t.length;if(!r||n<1)return[];for(var o=0,a=0,s=Vt($n(r/n));o<r;)s[a++]=br(t,o,o+=n);return s},li.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var o=t[e];o&&(r[i++]=o)}return r},li.concat=function(){var t=arguments.length;if(!t)return[];for(var e=Vt(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return ze(as(n)?zr(n):[n],Li(e,1))},li.cond=function(t){var e=null==t?0:t.length,n=Do();return t=e?Ue(t,function(t){if("function"!=typeof t[1])throw new Jt(o);return[n(t[0]),t[1]]}):[],mr(function(n){for(var i=-1;++i<e;){var r=t[i];if(Le(r[0],this,n))return Le(r[1],this,n)}})},li.conforms=function(t){return function(t){var e=Ws(t);return function(n){return Ri(n,t,e)}}(ki(t,l))},li.constant=ml,li.countBy=Sa,li.create=function(t,e){var n=ci(t);return null==e?n:Ii(n,e)},li.curry=function t(n,i,r){var o=go(n,m,e,e,e,e,e,i=r?e:i);return o.placeholder=t.placeholder,o},li.curryRight=function t(n,i,r){var o=go(n,v,e,e,e,e,e,i=r?e:i);return o.placeholder=t.placeholder,o},li.debounce=Wa,li.defaults=js,li.defaultsDeep=Bs,li.defer=Xa,li.delay=Ga,li.difference=na,li.differenceBy=ia,li.differenceWith=ra,li.drop=function(t,n,i){var r=null==t?0:t.length;return r?br(t,(n=i||n===e?1:xs(n))<0?0:n,r):[]},li.dropRight=function(t,n,i){var r=null==t?0:t.length;return r?br(t,0,(n=r-(n=i||n===e?1:xs(n)))<0?0:n):[]},li.dropRightWhile=function(t,e){return t&&t.length?xr(t,Do(e,3),!0,!0):[]},li.dropWhile=function(t,e){return t&&t.length?xr(t,Do(e,3),!0):[]},li.fill=function(t,n,i,r){var o=null==t?0:t.length;return o?(i&&"number"!=typeof i&&Lo(t,n,i)&&(i=0,r=o),function(t,n,i,r){var o=t.length;for((i=xs(i))<0&&(i=-i>o?0:o+i),(r=r===e||r>o?o:xs(r))<0&&(r+=o),r=i>r?0:Ss(r);i<r;)t[i++]=n;return t}(t,n,i,r)):[]},li.filter=function(t,e){return(as(t)?qe:Pi)(t,Do(e,3))},li.flatMap=function(t,e){return Li(Ma(t,e),1)},li.flatMapDeep=function(t,e){return Li(Ma(t,e),O)},li.flatMapDepth=function(t,n,i){return i=i===e?1:xs(i),Li(Ma(t,n),i)},li.flatten=sa,li.flattenDeep=function(t){return null!=t&&t.length?Li(t,O):[]},li.flattenDepth=function(t,n){return null!=t&&t.length?Li(t,n=n===e?1:xs(n)):[]},li.flip=function(t){return go(t,T)},li.flow=vl,li.flowRight=yl,li.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},li.functions=function(t){return null==t?[]:qi(t,Ws(t))},li.functionsIn=function(t){return null==t?[]:qi(t,Xs(t))},li.groupBy=Pa,li.initial=function(t){return null!=t&&t.length?br(t,0,-1):[]},li.intersection=ca,li.intersectionBy=ua,li.intersectionWith=da,li.invert=Vs,li.invertBy=Us,li.invokeMap=La,li.iteratee=bl,li.keyBy=Fa,li.keys=Ws,li.keysIn=Xs,li.map=Ma,li.mapKeys=function(t,e){var n={};return e=Do(e,3),ji(t,function(t,i,r){Oi(n,e(t,i,r),t)}),n},li.mapValues=function(t,e){var n={};return e=Do(e,3),ji(t,function(t,i,r){Oi(n,i,e(t,i,r))}),n},li.matches=function(t){return ar(ki(t,l))},li.matchesProperty=function(t,e){return sr(t,ki(e,l))},li.memoize=Ya,li.merge=Gs,li.mergeWith=Ys,li.method=Cl,li.methodOf=Tl,li.mixin=wl,li.negate=Qa,li.nthArg=function(t){return t=xs(t),mr(function(e){return cr(e,t)})},li.omit=Qs,li.omitBy=function(t,e){return Zs(t,Qa(Do(e)))},li.once=function(t){return Va(2,t)},li.orderBy=function(t,n,i,r){return null==t?[]:(as(n)||(n=null==n?[]:[n]),as(i=r?e:i)||(i=null==i?[]:[i]),ur(t,n,i))},li.over=Ol,li.overArgs=Ja,li.overEvery=Dl,li.overSome=_l,li.partial=Za,li.partialRight=ts,li.partition=ja,li.pick=Js,li.pickBy=Zs,li.property=kl,li.propertyOf=function(t){return function(n){return null==t?e:Hi(t,n)}},li.pull=fa,li.pullAll=pa,li.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?hr(t,e,Do(n,2)):t},li.pullAllWith=function(t,n,i){return t&&t.length&&n&&n.length?hr(t,n,e,i):t},li.pullAt=ga,li.range=Rl,li.rangeRight=xl,li.rearg=es,li.reject=function(t,e){return(as(t)?qe:Pi)(t,Qa(Do(e,3)))},li.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],o=t.length;for(e=Do(e,3);++i<o;){var a=t[i];e(a,i,t)&&(n.push(a),r.push(i))}return fr(t,r),n},li.rest=function(t,n){if("function"!=typeof t)throw new Jt(o);return mr(t,n=n===e?n:xs(n))},li.reverse=ma,li.sampleSize=function(t,n,i){return n=(i?Lo(t,n,i):n===e)?1:xs(n),(as(t)?function(t,e){return Qo(zr(t),_i(e,0,t.length))}:function(t,e){var n=nl(t);return Qo(n,_i(e,0,n.length))})(t,n)},li.set=function(t,e,n){return null==t?t:vr(t,e,n)},li.setWith=function(t,n,i,r){return r="function"==typeof r?r:e,null==t?t:vr(t,n,i,r)},li.shuffle=function(t){return(as(t)?function(t){return Qo(zr(t))}:function(t){return Qo(nl(t))})(t)},li.slice=function(t,n,i){var r=null==t?0:t.length;return r?(i&&"number"!=typeof i&&Lo(t,n,i)?(n=0,i=r):(n=null==n?0:xs(n),i=i===e?r:xs(i)),br(t,n,i)):[]},li.sortBy=Ba,li.sortedUniq=function(t){return t&&t.length?Ir(t):[]},li.sortedUniqBy=function(t,e){return t&&t.length?Ir(t,Do(e,2)):[]},li.split=function(t,n,i){return i&&"number"!=typeof i&&Lo(t,n,i)&&(n=i=e),(i=i===e?R:i>>>0)?(t=As(t))&&("string"==typeof n||null!=n&&!Cs(n))&&!(n=Dr(n))&&vn(t)?Fr(wn(t),0,i):t.split(n,i):[]},li.spread=function(t,e){if("function"!=typeof t)throw new Jt(o);return e=null==e?0:jn(xs(e),0),mr(function(n){var i=n[e],r=Fr(n,0,e);return i&&ze(r,i),Le(t,this,r)})},li.tail=function(t){var e=null==t?0:t.length;return e?br(t,1,e):[]},li.take=function(t,n,i){return t&&t.length?br(t,0,(n=i||n===e?1:xs(n))<0?0:n):[]},li.takeRight=function(t,n,i){var r=null==t?0:t.length;return r?br(t,(n=r-(n=i||n===e?1:xs(n)))<0?0:n,r):[]},li.takeRightWhile=function(t,e){return t&&t.length?xr(t,Do(e,3),!1,!0):[]},li.takeWhile=function(t,e){return t&&t.length?xr(t,Do(e,3)):[]},li.tap=function(t,e){return e(t),t},li.throttle=function(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new Jt(o);return ms(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Wa(t,e,{leading:i,maxWait:e,trailing:r})},li.thru=Ra,li.toArray=ks,li.toPairs=tl,li.toPairsIn=el,li.toPath=function(t){return as(t)?Ue(t,Zo):Is(t)?[t]:zr(Jo(As(t)))},li.toPlainObject=$s,li.transform=function(t,e,n){var i=as(t),r=i||us(t)||Os(t);if(e=Do(e,4),null==n){var o=t&&t.constructor;n=r?i?new o:[]:ms(t)&&fs(o)?ci(_e(t)):{}}return(r?Me:ji)(t,function(t,i,r){return e(n,t,i,r)}),n},li.unary=function(t){return Ha(t,1)},li.union=va,li.unionBy=ya,li.unionWith=Ea,li.uniq=function(t){return t&&t.length?_r(t):[]},li.uniqBy=function(t,e){return t&&t.length?_r(t,Do(e,2)):[]},li.uniqWith=function(t,n){return n="function"==typeof n?n:e,t&&t.length?_r(t,e,n):[]},li.unset=function(t,e){return null==t||kr(t,e)},li.unzip=ba,li.unzipWith=Ca,li.update=function(t,e,n){return null==t?t:Rr(t,e,Nr(n))},li.updateWith=function(t,n,i,r){return r="function"==typeof r?r:e,null==t?t:Rr(t,n,Nr(i),r)},li.values=nl,li.valuesIn=function(t){return null==t?[]:un(t,Xs(t))},li.without=Ta,li.words=fl,li.wrap=function(t,e){return Za(Nr(e),t)},li.xor=wa,li.xorBy=Ia,li.xorWith=Oa,li.zip=Da,li.zipObject=function(t,e){return $r(t||[],e||[],Ci)},li.zipObjectDeep=function(t,e){return $r(t||[],e||[],vr)},li.zipWith=_a,li.entries=tl,li.entriesIn=el,li.extend=Ps,li.extendWith=Ls,wl(li,li),li.add=Al,li.attempt=pl,li.camelCase=il,li.capitalize=rl,li.ceil=Nl,li.clamp=function(t,n,i){return i===e&&(i=n,n=e),i!==e&&(i=(i=Ks(i))==i?i:0),n!==e&&(n=(n=Ks(n))==n?n:0),_i(Ks(t),n,i)},li.clone=function(t){return ki(t,u)},li.cloneDeep=function(t){return ki(t,l|u)},li.cloneDeepWith=function(t,n){return ki(t,l|u,n="function"==typeof n?n:e)},li.cloneWith=function(t,n){return ki(t,u,n="function"==typeof n?n:e)},li.conformsTo=function(t,e){return null==e||Ri(t,e,Ws(e))},li.deburr=ol,li.defaultTo=function(t,e){return null==t||t!=t?e:t},li.divide=Pl,li.endsWith=function(t,n,i){t=As(t),n=Dr(n);var r=t.length,o=i=i===e?r:_i(xs(i),0,r);return(i-=n.length)>=0&&t.slice(i,o)==n},li.eq=ns,li.escape=function(t){return(t=As(t))&&mt.test(t)?t.replace(pt,gn):t},li.escapeRegExp=function(t){return(t=As(t))&&Ot.test(t)?t.replace(It,"\\$&"):t},li.every=function(t,n,i){var r=as(t)?Be:Ai;return i&&Lo(t,n,i)&&(n=e),r(t,Do(n,3))},li.find=Ka,li.findIndex=oa,li.findKey=function(t,e){return Qe(t,Do(e,3),ji)},li.findLast=$a,li.findLastIndex=aa,li.findLastKey=function(t,e){return Qe(t,Do(e,3),Bi)},li.floor=Ll,li.forEach=Aa,li.forEachRight=Na,li.forIn=function(t,e){return null==t?t:Fi(t,Do(e,3),Xs)},li.forInRight=function(t,e){return null==t?t:Mi(t,Do(e,3),Xs)},li.forOwn=function(t,e){return t&&ji(t,Do(e,3))},li.forOwnRight=function(t,e){return t&&Bi(t,Do(e,3))},li.get=qs,li.gt=is,li.gte=rs,li.has=function(t,e){return null!=t&&$o(t,e,Wi)},li.hasIn=Hs,li.head=la,li.identity=El,li.includes=function(t,e,n,i){t=ls(t)?t:nl(t),n=n&&!i?xs(n):0;var r=t.length;return n<0&&(n=jn(r+n,0)),ws(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&Ze(t,e,n)>-1},li.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:xs(n);return r<0&&(r=jn(i+r,0)),Ze(t,e,r)},li.inRange=function(t,n,i){return n=Rs(n),i===e?(i=n,n=0):i=Rs(i),function(t,e,n){return t>=Bn(e,n)&&t<jn(e,n)}(t=Ks(t),n,i)},li.invoke=zs,li.isArguments=os,li.isArray=as,li.isArrayBuffer=ss,li.isArrayLike=ls,li.isArrayLikeObject=cs,li.isBoolean=function(t){return!0===t||!1===t||vs(t)&&Ui(t)==P},li.isBuffer=us,li.isDate=ds,li.isElement=function(t){return vs(t)&&1===t.nodeType&&!bs(t)},li.isEmpty=function(t){if(null==t)return!0;if(ls(t)&&(as(t)||"string"==typeof t||"function"==typeof t.splice||us(t)||Os(t)||os(t)))return!t.length;var e=Ko(t);if(e==q||e==X)return!t.size;if(Bo(t))return!ir(t).length;for(var n in t)if(re.call(t,n))return!1;return!0},li.isEqual=function(t,e){return Ji(t,e)},li.isEqualWith=function(t,n,i){var r=(i="function"==typeof i?i:e)?i(t,n):e;return r===e?Ji(t,n,e,i):!!r},li.isError=hs,li.isFinite=function(t){return"number"==typeof t&&Ln(t)},li.isFunction=fs,li.isInteger=ps,li.isLength=gs,li.isMap=ys,li.isMatch=function(t,e){return t===e||tr(t,e,ko(e))},li.isMatchWith=function(t,n,i){return i="function"==typeof i?i:e,tr(t,n,ko(n),i)},li.isNaN=function(t){return Es(t)&&t!=+t},li.isNative=function(t){if(jo(t))throw new zt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return er(t)},li.isNil=function(t){return null==t},li.isNull=function(t){return null===t},li.isNumber=Es,li.isObject=ms,li.isObjectLike=vs,li.isPlainObject=bs,li.isRegExp=Cs,li.isSafeInteger=function(t){return ps(t)&&t>=-D&&t<=D},li.isSet=Ts,li.isString=ws,li.isSymbol=Is,li.isTypedArray=Os,li.isUndefined=function(t){return t===e},li.isWeakMap=function(t){return vs(t)&&Ko(t)==J},li.isWeakSet=function(t){return vs(t)&&"[object WeakSet]"==Ui(t)},li.join=function(t,e){return null==t?"":Fn.call(t,e)},li.kebabCase=al,li.last=ha,li.lastIndexOf=function(t,n,i){var r=null==t?0:t.length;if(!r)return-1;var o=r;return i!==e&&(o=(o=xs(i))<0?jn(r+o,0):Bn(o,r-1)),n==n?function(t,e,n){for(var i=o+1;i--;)if(t[i]===e)return i;return i}(t,n):Je(t,en,o,!0)},li.lowerCase=sl,li.lowerFirst=ll,li.lt=Ds,li.lte=_s,li.max=function(t){return t&&t.length?Ni(t,El,zi):e},li.maxBy=function(t,n){return t&&t.length?Ni(t,Do(n,2),zi):e},li.mean=function(t){return nn(t,El)},li.meanBy=function(t,e){return nn(t,Do(e,2))},li.min=function(t){return t&&t.length?Ni(t,El,rr):e},li.minBy=function(t,n){return t&&t.length?Ni(t,Do(n,2),rr):e},li.stubArray=Sl,li.stubFalse=Kl,li.stubObject=function(){return{}},li.stubString=function(){return""},li.stubTrue=function(){return!0},li.multiply=Fl,li.nth=function(t,n){return t&&t.length?cr(t,xs(n)):e},li.noConflict=function(){return we._===this&&(we._=he),this},li.noop=Il,li.now=qa,li.pad=function(t,e,n){t=As(t);var i=(e=xs(e))?Tn(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return so(An(r),n)+t+so($n(r),n)},li.padEnd=function(t,e,n){t=As(t);var i=(e=xs(e))?Tn(t):0;return e&&i<e?t+so(e-i,n):t},li.padStart=function(t,e,n){t=As(t);var i=(e=xs(e))?Tn(t):0;return e&&i<e?so(e-i,n)+t:t},li.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Hn(As(t).replace(_t,""),e||0)},li.random=function(t,n,i){if(i&&"boolean"!=typeof i&&Lo(t,n,i)&&(n=i=e),i===e&&("boolean"==typeof n?(i=n,n=e):"boolean"==typeof t&&(i=t,t=e)),t===e&&n===e?(t=0,n=1):(t=Rs(t),n===e?(n=t,t=0):n=Rs(n)),t>n){var r=t;t=n,n=r}if(i||t%1||n%1){var o=Vn();return Bn(t+o*(n-t+Ee("1e-"+((o+"").length-1))),n)}return pr(t,n)},li.reduce=function(t,e,n){var i=as(t)?We:an,r=arguments.length<3;return i(t,Do(e,4),n,r,Ki)},li.reduceRight=function(t,e,n){var i=as(t)?Xe:an,r=arguments.length<3;return i(t,Do(e,4),n,r,$i)},li.repeat=function(t,n,i){return n=(i?Lo(t,n,i):n===e)?1:xs(n),gr(As(t),n)},li.replace=function(){var t=arguments,e=As(t[0]);return t.length<3?e:e.replace(t[1],t[2])},li.result=function(t,n,i){var r=-1,o=(n=Pr(n,t)).length;for(o||(o=1,t=e);++r<o;){var a=null==t?e:t[Zo(n[r])];a===e&&(r=o,a=i),t=fs(a)?a.call(t):a}return t},li.round=Ml,li.runInContext=t,li.sample=function(t){return(as(t)?Ei:function(t){return Ei(nl(t))})(t)},li.size=function(t){if(null==t)return 0;if(ls(t))return ws(t)?Tn(t):t.length;var e=Ko(t);return e==q||e==X?t.size:ir(t).length},li.snakeCase=cl,li.some=function(t,n,i){var r=as(t)?Ge:Cr;return i&&Lo(t,n,i)&&(n=e),r(t,Do(n,3))},li.sortedIndex=function(t,e){return Tr(t,e)},li.sortedIndexBy=function(t,e,n){return wr(t,e,Do(n,2))},li.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=Tr(t,e);if(i<n&&ns(t[i],e))return i}return-1},li.sortedLastIndex=function(t,e){return Tr(t,e,!0)},li.sortedLastIndexBy=function(t,e,n){return wr(t,e,Do(n,2),!0)},li.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=Tr(t,e,!0)-1;if(ns(t[n],e))return n}return-1},li.startCase=ul,li.startsWith=function(t,e,n){return t=As(t),n=null==n?0:_i(xs(n),0,t.length),e=Dr(e),t.slice(n,n+e.length)==e},li.subtract=jl,li.sum=function(t){return t&&t.length?sn(t,El):0},li.sumBy=function(t,e){return t&&t.length?sn(t,Do(e,2)):0},li.template=function(t,n,i){var r=li.templateSettings;i&&Lo(t,n,i)&&(n=e),t=As(t),n=Ls({},n,r,mo);var o,a,s=Ls({},n.imports,r.imports,mo),l=Ws(s),c=un(s,l),u=0,d=n.interpolate||qt,h="__p += '",f=Yt((n.escape||qt).source+"|"+d.source+"|"+(d===Et?At:qt).source+"|"+(n.evaluate||qt).source+"|$","g"),p="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++ge+"]")+"\n";t.replace(f,function(e,n,i,r,s,l){return i||(i=r),h+=t.slice(u,l).replace(Ht,mn),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),s&&(a=!0,h+="';\n"+s+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=l+e.length,e}),h+="';\n";var g=n.variable;g||(h="with (obj) {\n"+h+"\n}\n"),h=(a?h.replace(ut,""):h).replace(dt,"$1").replace(ht,"$1;"),h="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=pl(function(){return Wt(l,p+"return "+h).apply(e,c)});if(m.source=h,hs(m))throw m;return m},li.times=function(t,e){if((t=xs(t))<1||t>D)return[];var n=R,i=Bn(t,R);e=Do(e),t-=R;for(var r=ln(i,e);++n<t;)e(n);return r},li.toFinite=Rs,li.toInteger=xs,li.toLength=Ss,li.toLower=function(t){return As(t).toLowerCase()},li.toNumber=Ks,li.toSafeInteger=function(t){return t?_i(xs(t),-D,D):0===t?t:0},li.toString=As,li.toUpper=function(t){return As(t).toUpperCase()},li.trim=function(t,n,i){if((t=As(t))&&(i||n===e))return t.replace(Dt,"");if(!t||!(n=Dr(n)))return t;var r=wn(t),o=wn(n);return Fr(r,hn(r,o),fn(r,o)+1).join("")},li.trimEnd=function(t,n,i){if((t=As(t))&&(i||n===e))return t.replace(kt,"");if(!t||!(n=Dr(n)))return t;var r=wn(t);return Fr(r,0,fn(r,wn(n))+1).join("")},li.trimStart=function(t,n,i){if((t=As(t))&&(i||n===e))return t.replace(_t,"");if(!t||!(n=Dr(n)))return t;var r=wn(t);return Fr(r,hn(r,wn(n))).join("")},li.truncate=function(t,n){var i=30,r="...";if(ms(n)){var o="separator"in n?n.separator:o;i="length"in n?xs(n.length):i,r="omission"in n?Dr(n.omission):r}var a=(t=As(t)).length;if(vn(t)){var s=wn(t);a=s.length}if(i>=a)return t;var l=i-Tn(r);if(l<1)return r;var c=s?Fr(s,0,l).join(""):t.slice(0,l);if(o===e)return c+r;if(s&&(l+=c.length-l),Cs(o)){if(t.slice(l).search(o)){var u,d=c;for(o.global||(o=Yt(o.source,As(Nt.exec(o))+"g")),o.lastIndex=0;u=o.exec(d);)var h=u.index;c=c.slice(0,h===e?l:h)}}else if(t.indexOf(Dr(o),l)!=l){var f=c.lastIndexOf(o);f>-1&&(c=c.slice(0,f))}return c+r},li.unescape=function(t){return(t=As(t))&&gt.test(t)?t.replace(ft,In):t},li.uniqueId=function(t){var e=++oe;return As(t)+e},li.upperCase=dl,li.upperFirst=hl,li.each=Aa,li.eachRight=Na,li.first=la,wl(li,($l={},ji(li,function(t,e){re.call(li.prototype,e)||($l[e]=t)}),$l),{chain:!1}),li.VERSION="4.17.4",Me(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){li[t].placeholder=li}),Me(["drop","take"],function(t,n){hi.prototype[t]=function(i){i=i===e?1:jn(xs(i),0);var r=this.__filtered__&&!n?new hi(this):this.clone();return r.__filtered__?r.__takeCount__=Bn(i,r.__takeCount__):r.__views__.push({size:Bn(i,R),type:t+(r.__dir__<0?"Right":"")}),r},hi.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Me(["filter","map","takeWhile"],function(t,e){var n=e+1,i=1==n||3==n;hi.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Do(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}}),Me(["head","last"],function(t,e){var n="take"+(e?"Right":"");hi.prototype[t]=function(){return this[n](1).value()[0]}}),Me(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");hi.prototype[t]=function(){return this.__filtered__?new hi(this):this[n](1)}}),hi.prototype.compact=function(){return this.filter(El)},hi.prototype.find=function(t){return this.filter(t).head()},hi.prototype.findLast=function(t){return this.reverse().find(t)},hi.prototype.invokeMap=mr(function(t,e){return"function"==typeof t?new hi(this):this.map(function(n){return Yi(n,t,e)})}),hi.prototype.reject=function(t){return this.filter(Qa(Do(t)))},hi.prototype.slice=function(t,n){t=xs(t);var i=this;return i.__filtered__&&(t>0||n<0)?new hi(i):(t<0?i=i.takeRight(-t):t&&(i=i.drop(t)),n!==e&&(i=(n=xs(n))<0?i.dropRight(-n):i.take(n-t)),i)},hi.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},hi.prototype.toArray=function(){return this.take(R)},ji(hi.prototype,function(t,n){var i=/^(?:filter|find|map|reject)|While$/.test(n),r=/^(?:head|last)$/.test(n),o=li[r?"take"+("last"==n?"Right":""):n],a=r||/^find/.test(n);o&&(li.prototype[n]=function(){var n=this.__wrapped__,s=r?[1]:arguments,l=n instanceof hi,c=s[0],u=l||as(n),d=function(t){var e=o.apply(li,ze([t],s));return r&&h?e[0]:e};u&&i&&"function"==typeof c&&1!=c.length&&(l=u=!1);var h=this.__chain__,f=!!this.__actions__.length,p=a&&!h,g=l&&!f;if(!a&&u){n=g?n:new hi(this);var m=t.apply(n,s);return m.__actions__.push({func:Ra,args:[d],thisArg:e}),new di(m,h)}return p&&g?t.apply(this,s):(m=this.thru(d),p?r?m.value()[0]:m.value():m)})}),Me(["pop","push","shift","sort","splice","unshift"],function(t){var e=Zt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);li.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(as(r)?r:[],t)}return this[n](function(n){return e.apply(as(n)?n:[],t)})}}),ji(hi.prototype,function(t,e){var n=li[e];if(n){var i=n.name+"";(Zn[i]||(Zn[i]=[])).push({name:e,func:n})}}),Zn[io(e,p).name]=[{name:"wrapper",func:e}],hi.prototype.clone=function(){var t=new hi(this.__wrapped__);return t.__actions__=zr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=zr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=zr(this.__views__),t},hi.prototype.reverse=function(){if(this.__filtered__){var t=new hi(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},hi.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=as(t),i=e<0,r=n?t.length:0,o=function(t,e,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Bn(e,t+a);break;case"takeRight":t=jn(t,e-a)}}return{start:t,end:e}}(0,r,this.__views__),a=o.start,s=o.end,l=s-a,c=i?s:a-1,u=this.__iteratees__,d=u.length,h=0,f=Bn(l,this.__takeCount__);if(!n||!i&&r==l&&f==l)return Sr(t,this.__actions__);var p=[];t:for(;l--&&h<f;){for(var g=-1,m=t[c+=e];++g<d;){var v=u[g],y=v.iteratee,E=v.type,b=y(m);if(2==E)m=b;else if(!b){if(1==E)continue t;break t}}p[h++]=m}return p},li.prototype.at=xa,li.prototype.chain=function(){return ka(this)},li.prototype.commit=function(){return new di(this.value(),this.__chain__)},li.prototype.next=function(){this.__values__===e&&(this.__values__=ks(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?e:this.__values__[this.__index__++]}},li.prototype.plant=function(t){for(var n,i=this;i instanceof ui;){var r=ea(i);r.__index__=0,r.__values__=e,n?o.__wrapped__=r:n=r;var o=r;i=i.__wrapped__}return o.__wrapped__=t,n},li.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof hi){var n=t;return this.__actions__.length&&(n=new hi(this)),(n=n.reverse()).__actions__.push({func:Ra,args:[ma],thisArg:e}),new di(n,this.__chain__)}return this.thru(ma)},li.prototype.toJSON=li.prototype.valueOf=li.prototype.value=function(){return Sr(this.__wrapped__,this.__actions__)},li.prototype.first=li.prototype.head,_n&&(li.prototype[_n]=function(){return this}),li}();Oe?((Oe.exports=On)._=On,Ie._=On):we._=On}).call(this)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e,n){(function(){var t,n,i,r,o,a,s,l,c,u,d,h,f=[].slice,p={}.hasOwnProperty;t=function(){var t,e,n,i,r,o;if(o=arguments[0],r=2<=arguments.length?f.call(arguments,1):[],a(Object.assign))Object.assign.apply(null,arguments);else for(t=0,n=r.length;t<n;t++)if(null!=(i=r[t]))for(e in i)p.call(i,e)&&(o[e]=i[e]);return o},a=function(t){return!!t&&"[object Function]"===Object.prototype.toString.call(t)},s=function(t){var e;return!!t&&("function"==(e=typeof t)||"object"===e)},r=function(t){return a(Array.isArray)?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},o=function(t){var e;if(r(t))return!t.length;for(e in t)if(p.call(t,e))return!1;return!0},l=function(t){var e,n;return s(t)&&(n=Object.getPrototypeOf(t))&&(e=n.constructor)&&"function"==typeof e&&e instanceof e&&Function.prototype.toString.call(e)===Function.prototype.toString.call(Object)},h=function(t){return(t.split(/[-_\s]+|(?=[A-Z][a-z])/)||[]).filter(function(t){return!!t})},n=function(t){var e,n,r,o,a,s;for(o="",n=e=0,r=(a=h(t)).length;e<r;n=++e)s=a[n],o+=n?i(s.toLowerCase()):s.toLowerCase();return o},d=function(t){var e,n,r,o,a,s;for(o="",n=e=0,r=(a=h(t)).length;e<r;n=++e)s=a[n],o+=i(s.toLowerCase());return o},c=function(t){var e,n,i,r,o,a;for(r="",n=e=0,i=(o=h(t)).length;e<i;n=++e)a=o[n],r+=(n?"-":"")+a.toLowerCase();return r},u=function(t){var e,n,i,r,o,a;for(r="",n=e=0,i=(o=h(t)).length;e<i;n=++e)a=o[n],r+=(n?"_":"")+a.toLowerCase();return r},i=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},e.exports.assign=t,e.exports.isFunction=a,e.exports.isObject=s,e.exports.isArray=r,e.exports.isEmpty=o,e.exports.isPlainObject=l,e.exports.camelCase=n,e.exports.titleCase=d,e.exports.kebabCase=c,e.exports.snakeCase=u,e.exports.capitalize=i,e.exports.words=h}).call(this)},{}],4:[function(t,e,n){(function(){e.exports=function(){function t(t,e,n){if(this.options=t.options,this.stringify=t.stringify,null==e)throw new Error("Missing attribute name of element "+t.name);if(null==n)throw new Error("Missing attribute value for attribute "+e+" of element "+t.name);this.name=this.stringify.attName(e),this.value=this.stringify.attValue(n)}return t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(t){return this.options.writer.set(t).attribute(this)},t}()}).call(this)},{}],5:[function(t,e,n){(function(){var n,i={}.hasOwnProperty;n=t("./XMLNode"),e.exports=function(t){function e(t,n){if(e.__super__.constructor.call(this,t),null==n)throw new Error("Missing CDATA text");this.text=this.stringify.cdata(n)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,n),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(t){return this.options.writer.set(t).cdata(this)},e}()}).call(this)},{"./XMLNode":16}],6:[function(t,e,n){(function(){var n,i={}.hasOwnProperty;n=t("./XMLNode"),e.exports=function(t){function e(t,n){if(e.__super__.constructor.call(this,t),null==n)throw new Error("Missing comment text");this.text=this.stringify.comment(n)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,n),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(t){return this.options.writer.set(t).comment(this)},e}()}).call(this)},{"./XMLNode":16}],7:[function(t,e,n){(function(){var n,i={}.hasOwnProperty;n=t("./XMLNode"),e.exports=function(t){function e(t,n,i,r,o,a){if(e.__super__.constructor.call(this,t),null==n)throw new Error("Missing DTD element name");if(null==i)throw new Error("Missing DTD attribute name");if(!r)throw new Error("Missing DTD attribute type");if(!o)throw new Error("Missing DTD attribute default");if(0!==o.indexOf("#")&&(o="#"+o),!o.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT");if(a&&!o.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT");this.elementName=this.stringify.eleName(n),this.attributeName=this.stringify.attName(i),this.attributeType=this.stringify.dtdAttType(r),this.defaultValue=this.stringify.dtdAttDefault(a),this.defaultValueType=o}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,n),e.prototype.toString=function(t){return this.options.writer.set(t).dtdAttList(this)},e}()}).call(this)},{"./XMLNode":16}],8:[function(t,e,n){(function(){var n,i={}.hasOwnProperty;n=t("./XMLNode"),e.exports=function(t){function e(t,n,i){if(e.__super__.constructor.call(this,t),null==n)throw new Error("Missing DTD element name");i||(i="(#PCDATA)"),Array.isArray(i)&&(i="("+i.join(",")+")"),this.name=this.stringify.eleName(n),this.value=this.stringify.dtdElementValue(i)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,n),e.prototype.toString=function(t){return this.options.writer.set(t).dtdElement(this)},e}()}).call(this)},{"./XMLNode":16}],9:[function(t,e,n){(function(){var n,i,r={}.hasOwnProperty;i=t("./Utility").isObject,n=t("./XMLNode"),e.exports=function(t){function e(t,n,r,o){if(e.__super__.constructor.call(this,t),null==r)throw new Error("Missing entity name");if(null==o)throw new Error("Missing entity value");if(this.pe=!!n,this.name=this.stringify.eleName(r),i(o)){if(!o.pubID&&!o.sysID)throw new Error("Public and/or system identifiers are required for an external entity");if(o.pubID&&!o.sysID)throw new Error("System identifier is required for a public external entity");if(null!=o.pubID&&(this.pubID=this.stringify.dtdPubID(o.pubID)),null!=o.sysID&&(this.sysID=this.stringify.dtdSysID(o.sysID)),null!=o.nData&&(this.nData=this.stringify.dtdNData(o.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity")}else this.value=this.stringify.dtdEntityValue(o)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,n),e.prototype.toString=function(t){return this.options.writer.set(t).dtdEntity(this)},e}()}).call(this)},{"./Utility":3,"./XMLNode":16}],10:[function(t,e,n){(function(){var n,i={}.hasOwnProperty;n=t("./XMLNode"),e.exports=function(t){function e(t,n,i){if(e.__super__.constructor.call(this,t),null==n)throw new Error("Missing notation name");if(!i.pubID&&!i.sysID)throw new Error("Public or system identifiers are required for an external entity");this.name=this.stringify.eleName(n),null!=i.pubID&&(this.pubID=this.stringify.dtdPubID(i.pubID)),null!=i.sysID&&(this.sysID=this.stringify.dtdSysID(i.sysID))}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,n),e.prototype.toString=function(t){return this.options.writer.set(t).dtdNotation(this)},e}()}).call(this)},{"./XMLNode":16}],11:[function(t,e,n){(function(){var n,i,r={}.hasOwnProperty;i=t("./Utility").isObject,n=t("./XMLNode"),e.exports=function(t){function e(t,n,r,o){var a;e.__super__.constructor.call(this,t),i(n)&&(n=(a=n).version,r=a.encoding,o=a.standalone),n||(n="1.0"),this.version=this.stringify.xmlVersion(n),null!=r&&(this.encoding=this.stringify.xmlEncoding(r)),null!=o&&(this.standalone=this.stringify.xmlStandalone(o))}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,n),e.prototype.toString=function(t){return this.options.writer.set(t).declaration(this)},e}()}).call(this)},{"./Utility":3,"./XMLNode":16}],12:[function(t,e,n){(function(){var n,i,r,o,a,s,l={}.hasOwnProperty;s=t("./Utility").isObject,a=t("./XMLNode"),n=t("./XMLDTDAttList"),r=t("./XMLDTDEntity"),i=t("./XMLDTDElement"),o=t("./XMLDTDNotation"),e.exports=function(t){function e(t,n,i){var r,o;e.__super__.constructor.call(this,t),this.documentObject=t,s(n)&&(n=(r=n).pubID,i=r.sysID),null==i&&(i=(o=[n,i])[0],n=o[1]),null!=n&&(this.pubID=this.stringify.dtdPubID(n)),null!=i&&(this.sysID=this.stringify.dtdSysID(i))}return function(t,e){for(var n in e)l.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,a),e.prototype.element=function(t,e){var n;return n=new i(this,t,e),this.children.push(n),this},e.prototype.attList=function(t,e,i,r,o){var a;return a=new n(this,t,e,i,r,o),this.children.push(a),this},e.prototype.entity=function(t,e){var n;return n=new r(this,!1,t,e),this.children.push(n),this},e.prototype.pEntity=function(t,e){var n;return n=new r(this,!0,t,e),this.children.push(n),this},e.prototype.notation=function(t,e){var n;return n=new o(this,t,e),this.children.push(n),this},e.prototype.toString=function(t){return this.options.writer.set(t).docType(this)},e.prototype.ele=function(t,e){return this.element(t,e)},e.prototype.att=function(t,e,n,i,r){return this.attList(t,e,n,i,r)},e.prototype.ent=function(t,e){return this.entity(t,e)},e.prototype.pent=function(t,e){return this.pEntity(t,e)},e.prototype.not=function(t,e){return this.notation(t,e)},e.prototype.up=function(){return this.root()||this.documentObject},e}()}).call(this)},{"./Utility":3,"./XMLDTDAttList":7,"./XMLDTDElement":8,"./XMLDTDEntity":9,"./XMLDTDNotation":10,"./XMLNode":16}],13:[function(t,e,n){(function(){var n,i,r,o,a={}.hasOwnProperty;o=t("./Utility").isPlainObject,n=t("./XMLNode"),r=t("./XMLStringifier"),i=t("./XMLStringWriter"),e.exports=function(t){function e(t){e.__super__.constructor.call(this,null),t||(t={}),t.writer||(t.writer=new i),this.options=t,this.stringify=new r(t),this.isDocument=!0}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,n),e.prototype.end=function(t){var e;return t?o(t)&&(e=t,t=this.options.writer.set(e)):t=this.options.writer,t.document(this)},e.prototype.toString=function(t){return this.options.writer.set(t).document(this)},e}()}).call(this)},{"./Utility":3,"./XMLNode":16,"./XMLStringWriter":20,"./XMLStringifier":21}],14:[function(t,e,n){(function(){var n,i,r,o,a,s,l,c,u,d,h,f,p,g,m,v,y,E,b,C={}.hasOwnProperty;b=t("./Utility"),y=b.isObject,v=b.isFunction,E=b.isPlainObject,d=t("./XMLElement"),i=t("./XMLCData"),r=t("./XMLComment"),f=t("./XMLRaw"),m=t("./XMLText"),h=t("./XMLProcessingInstruction"),c=t("./XMLDeclaration"),u=t("./XMLDocType"),o=t("./XMLDTDAttList"),s=t("./XMLDTDEntity"),a=t("./XMLDTDElement"),l=t("./XMLDTDNotation"),n=t("./XMLAttribute"),g=t("./XMLStringifier"),p=t("./XMLStringWriter"),e.exports=function(){function t(t,e,n){var i;t||(t={}),t.writer?E(t.writer)&&(i=t.writer,t.writer=new p(i)):t.writer=new p(t),this.options=t,this.writer=t.writer,this.stringify=new g(t),this.onDataCallback=e||function(){},this.onEndCallback=n||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return t.prototype.node=function(t,e,n){var i;if(null==t)throw new Error("Missing node name");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node");return this.openCurrent(),t=t.valueOf(),null==e&&(e={}),e=e.valueOf(),y(e)||(n=(i=[e,n])[0],e=i[1]),this.currentNode=new d(this,t,e),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=n&&this.text(n),this},t.prototype.element=function(t,e,n){return this.currentNode&&this.currentNode instanceof u?this.dtdElement.apply(this,arguments):this.node(t,e,n)},t.prototype.attribute=function(t,e){var i,r;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode");if(null!=t&&(t=t.valueOf()),y(t))for(i in t)C.call(t,i)&&(r=t[i],this.attribute(i,r));else v(e)&&(e=e.apply()),this.options.skipNullAttributes&&null==e||(this.currentNode.attributes[t]=new n(this,t,e));return this},t.prototype.text=function(t){var e;return this.openCurrent(),e=new m(this,t),this.onData(this.writer.text(e,this.currentLevel+1)),this},t.prototype.cdata=function(t){var e;return this.openCurrent(),e=new i(this,t),this.onData(this.writer.cdata(e,this.currentLevel+1)),this},t.prototype.comment=function(t){var e;return this.openCurrent(),e=new r(this,t),this.onData(this.writer.comment(e,this.currentLevel+1)),this},t.prototype.raw=function(t){var e;return this.openCurrent(),e=new f(this,t),this.onData(this.writer.raw(e,this.currentLevel+1)),this},t.prototype.instruction=function(t,e){var n,i,r,o,a;if(this.openCurrent(),null!=t&&(t=t.valueOf()),null!=e&&(e=e.valueOf()),Array.isArray(t))for(n=0,o=t.length;n<o;n++)i=t[n],this.instruction(i);else if(y(t))for(i in t)C.call(t,i)&&(r=t[i],this.instruction(i,r));else v(e)&&(e=e.apply()),a=new h(this,t,e),this.onData(this.writer.processingInstruction(a,this.currentLevel+1));return this},t.prototype.declaration=function(t,e,n){var i;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node");return i=new c(this,t,e,n),this.onData(this.writer.declaration(i,this.currentLevel+1)),this},t.prototype.doctype=function(t,e,n){if(this.openCurrent(),null==t)throw new Error("Missing root node name");if(this.root)throw new Error("dtd() must come before the root node");return this.currentNode=new u(this,e,n),this.currentNode.rootNodeName=t,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},t.prototype.dtdElement=function(t,e){var n;return this.openCurrent(),n=new a(this,t,e),this.onData(this.writer.dtdElement(n,this.currentLevel+1)),this},t.prototype.attList=function(t,e,n,i,r){var a;return this.openCurrent(),a=new o(this,t,e,n,i,r),this.onData(this.writer.dtdAttList(a,this.currentLevel+1)),this},t.prototype.entity=function(t,e){var n;return this.openCurrent(),n=new s(this,!1,t,e),this.onData(this.writer.dtdEntity(n,this.currentLevel+1)),this},t.prototype.pEntity=function(t,e){var n;return this.openCurrent(),n=new s(this,!0,t,e),this.onData(this.writer.dtdEntity(n,this.currentLevel+1)),this},t.prototype.notation=function(t,e){var n;return this.openCurrent(),n=new l(this,t,e),this.onData(this.writer.dtdNotation(n,this.currentLevel+1)),this},t.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},t.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},t.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},t.prototype.openNode=function(t){if(!t.isOpen)return!this.root&&0===this.currentLevel&&t instanceof d&&(this.root=t),this.onData(this.writer.openNode(t,this.currentLevel)),t.isOpen=!0},t.prototype.closeNode=function(t){if(!t.isClosed)return this.onData(this.writer.closeNode(t,this.currentLevel)),t.isClosed=!0},t.prototype.onData=function(t){return this.documentStarted=!0,this.onDataCallback(t)},t.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},t.prototype.ele=function(){return this.element.apply(this,arguments)},t.prototype.nod=function(t,e,n){return this.node(t,e,n)},t.prototype.txt=function(t){return this.text(t)},t.prototype.dat=function(t){return this.cdata(t)},t.prototype.com=function(t){return this.comment(t)},t.prototype.ins=function(t,e){return this.instruction(t,e)},t.prototype.dec=function(t,e,n){return this.declaration(t,e,n)},t.prototype.dtd=function(t,e,n){return this.doctype(t,e,n)},t.prototype.e=function(t,e,n){return this.element(t,e,n)},t.prototype.n=function(t,e,n){return this.node(t,e,n)},t.prototype.t=function(t){return this.text(t)},t.prototype.d=function(t){return this.cdata(t)},t.prototype.c=function(t){return this.comment(t)},t.prototype.r=function(t){return this.raw(t)},t.prototype.i=function(t,e){return this.instruction(t,e)},t.prototype.att=function(){return this.currentNode&&this.currentNode instanceof u?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},t.prototype.a=function(){return this.currentNode&&this.currentNode instanceof u?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},t.prototype.ent=function(t,e){return this.entity(t,e)},t.prototype.pent=function(t,e){return this.pEntity(t,e)},t.prototype.not=function(t,e){return this.notation(t,e)},t}()}).call(this)},{"./Utility":3,"./XMLAttribute":4,"./XMLCData":5,"./XMLComment":6,"./XMLDTDAttList":7,"./XMLDTDElement":8,"./XMLDTDEntity":9,"./XMLDTDNotation":10,"./XMLDeclaration":11,"./XMLDocType":12,"./XMLElement":15,"./XMLProcessingInstruction":17,"./XMLRaw":18,"./XMLStringWriter":20,"./XMLStringifier":21,"./XMLText":22}],15:[function(t,e,n){(function(){var n,i,r,o,a,s={}.hasOwnProperty;a=t("./Utility"),o=a.isObject,r=a.isFunction,i=t("./XMLNode"),n=t("./XMLAttribute"),e.exports=function(t){function e(t,n,i){if(e.__super__.constructor.call(this,t),null==n)throw new Error("Missing element name");this.name=this.stringify.eleName(n),this.attributes={},null!=i&&this.attribute(i),t.isDocument&&(this.isRoot=!0,this.documentObject=t,t.rootObject=this)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,i),e.prototype.clone=function(){var t,e,n,i;for(e in(n=Object.create(this)).isRoot&&(n.documentObject=null),n.attributes={},i=this.attributes)s.call(i,e)&&(t=i[e],n.attributes[e]=t.clone());return n.children=[],this.children.forEach(function(t){var e;return(e=t.clone()).parent=n,n.children.push(e)}),n},e.prototype.attribute=function(t,e){var i,a;if(null!=t&&(t=t.valueOf()),o(t))for(i in t)s.call(t,i)&&(a=t[i],this.attribute(i,a));else r(e)&&(e=e.apply()),this.options.skipNullAttributes&&null==e||(this.attributes[t]=new n(this,t,e));return this},e.prototype.removeAttribute=function(t){var e,n,i;if(null==t)throw new Error("Missing attribute name");if(t=t.valueOf(),Array.isArray(t))for(n=0,i=t.length;n<i;n++)e=t[n],delete this.attributes[e];else delete this.attributes[t];return this},e.prototype.toString=function(t){return this.options.writer.set(t).element(this)},e.prototype.att=function(t,e){return this.attribute(t,e)},e.prototype.a=function(t,e){return this.attribute(t,e)},e}()}).call(this)},{"./Utility":3,"./XMLAttribute":4,"./XMLNode":16}],16:[function(t,e,n){(function(){var n,i,r,o,a,s,l,c,u,d,h,f,p={}.hasOwnProperty;f=t("./Utility"),h=f.isObject,d=f.isFunction,u=f.isEmpty,a=null,n=null,i=null,r=null,o=null,l=null,c=null,s=null,e.exports=function(){function e(e){this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.children=[],a||(a=t("./XMLElement"),n=t("./XMLCData"),i=t("./XMLComment"),r=t("./XMLDeclaration"),o=t("./XMLDocType"),l=t("./XMLRaw"),c=t("./XMLText"),s=t("./XMLProcessingInstruction"))}return e.prototype.element=function(t,e,n){var i,r,o,a,s,l,c,f,g,m;if(l=null,null==e&&(e={}),e=e.valueOf(),h(e)||(n=(g=[e,n])[0],e=g[1]),null!=t&&(t=t.valueOf()),Array.isArray(t))for(o=0,c=t.length;o<c;o++)r=t[o],l=this.element(r);else if(d(t))l=this.element(t.apply());else if(h(t)){for(s in t)if(p.call(t,s))if(m=t[s],d(m)&&(m=m.apply()),h(m)&&u(m)&&(m=null),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===s.indexOf(this.stringify.convertAttKey))l=this.attribute(s.substr(this.stringify.convertAttKey.length),m);else if(!this.options.separateArrayItems&&Array.isArray(m))for(a=0,f=m.length;a<f;a++)r=m[a],(i={})[s]=r,l=this.element(i);else h(m)?(l=this.element(s)).element(m):l=this.element(s,m)}else l=!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===t.indexOf(this.stringify.convertTextKey)?this.text(n):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===t.indexOf(this.stringify.convertCDataKey)?this.cdata(n):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===t.indexOf(this.stringify.convertCommentKey)?this.comment(n):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===t.indexOf(this.stringify.convertRawKey)?this.raw(n):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===t.indexOf(this.stringify.convertPIKey)?this.instruction(t.substr(this.stringify.convertPIKey.length),n):this.node(t,e,n);if(null==l)throw new Error("Could not create any elements with: "+t);return l},e.prototype.insertBefore=function(t,e,n){var i,r,o;if(this.isRoot)throw new Error("Cannot insert elements at root level");return r=this.parent.children.indexOf(this),o=this.parent.children.splice(r),i=this.parent.element(t,e,n),Array.prototype.push.apply(this.parent.children,o),i},e.prototype.insertAfter=function(t,e,n){var i,r,o;if(this.isRoot)throw new Error("Cannot insert elements at root level");return r=this.parent.children.indexOf(this),o=this.parent.children.splice(r+1),i=this.parent.element(t,e,n),Array.prototype.push.apply(this.parent.children,o),i},e.prototype.remove=function(){var t;if(this.isRoot)throw new Error("Cannot remove the root element");return t=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[t,t-t+1].concat([])),this.parent},e.prototype.node=function(t,e,n){var i,r;return null!=t&&(t=t.valueOf()),e||(e={}),e=e.valueOf(),h(e)||(n=(r=[e,n])[0],e=r[1]),i=new a(this,t,e),null!=n&&i.text(n),this.children.push(i),i},e.prototype.text=function(t){var e;return e=new c(this,t),this.children.push(e),this},e.prototype.cdata=function(t){var e;return e=new n(this,t),this.children.push(e),this},e.prototype.comment=function(t){var e;return e=new i(this,t),this.children.push(e),this},e.prototype.commentBefore=function(t){var e,n;return e=this.parent.children.indexOf(this),n=this.parent.children.splice(e),this.parent.comment(t),Array.prototype.push.apply(this.parent.children,n),this},e.prototype.commentAfter=function(t){var e,n;return e=this.parent.children.indexOf(this),n=this.parent.children.splice(e+1),this.parent.comment(t),Array.prototype.push.apply(this.parent.children,n),this},e.prototype.raw=function(t){var e;return e=new l(this,t),this.children.push(e),this},e.prototype.instruction=function(t,e){var n,i,r,o,a;if(null!=t&&(t=t.valueOf()),null!=e&&(e=e.valueOf()),Array.isArray(t))for(o=0,a=t.length;o<a;o++)n=t[o],this.instruction(n);else if(h(t))for(n in t)p.call(t,n)&&(i=t[n],this.instruction(n,i));else d(e)&&(e=e.apply()),r=new s(this,t,e),this.children.push(r);return this},e.prototype.instructionBefore=function(t,e){var n,i;return n=this.parent.children.indexOf(this),i=this.parent.children.splice(n),this.parent.instruction(t,e),Array.prototype.push.apply(this.parent.children,i),this},e.prototype.instructionAfter=function(t,e){var n,i;return n=this.parent.children.indexOf(this),i=this.parent.children.splice(n+1),this.parent.instruction(t,e),Array.prototype.push.apply(this.parent.children,i),this},e.prototype.declaration=function(t,e,n){var i,o;return i=this.document(),o=new r(i,t,e,n),i.children[0]instanceof r?i.children[0]=o:i.children.unshift(o),i.root()||i},e.prototype.doctype=function(t,e){var n,i,r,a,s,l,c,u,d;for(n=this.document(),i=new o(n,t,e),r=a=0,l=(u=n.children).length;a<l;r=++a)if(u[r]instanceof o)return n.children[r]=i,i;for(r=s=0,c=(d=n.children).length;s<c;r=++s)if(d[r].isRoot)return n.children.splice(r,0,i),i;return n.children.push(i),i},e.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},e.prototype.root=function(){var t;for(t=this;t;){if(t.isDocument)return t.rootObject;if(t.isRoot)return t;t=t.parent}},e.prototype.document=function(){var t;for(t=this;t;){if(t.isDocument)return t;t=t.parent}},e.prototype.end=function(t){return this.document().end(t)},e.prototype.prev=function(){var t;if((t=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node");return this.parent.children[t-1]},e.prototype.next=function(){var t;if(-1===(t=this.parent.children.indexOf(this))||t===this.parent.children.length-1)throw new Error("Already at the last node");return this.parent.children[t+1]},e.prototype.importDocument=function(t){var e;return(e=t.root().clone()).parent=this,e.isRoot=!1,this.children.push(e),this},e.prototype.ele=function(t,e,n){return this.element(t,e,n)},e.prototype.nod=function(t,e,n){return this.node(t,e,n)},e.prototype.txt=function(t){return this.text(t)},e.prototype.dat=function(t){return this.cdata(t)},e.prototype.com=function(t){return this.comment(t)},e.prototype.ins=function(t,e){return this.instruction(t,e)},e.prototype.doc=function(){return this.document()},e.prototype.dec=function(t,e,n){return this.declaration(t,e,n)},e.prototype.dtd=function(t,e){return this.doctype(t,e)},e.prototype.e=function(t,e,n){return this.element(t,e,n)},e.prototype.n=function(t,e,n){return this.node(t,e,n)},e.prototype.t=function(t){return this.text(t)},e.prototype.d=function(t){return this.cdata(t)},e.prototype.c=function(t){return this.comment(t)},e.prototype.r=function(t){return this.raw(t)},e.prototype.i=function(t,e){return this.instruction(t,e)},e.prototype.u=function(){return this.up()},e.prototype.importXMLBuilder=function(t){return this.importDocument(t)},e}()}).call(this)},{"./Utility":3,"./XMLCData":5,"./XMLComment":6,"./XMLDeclaration":11,"./XMLDocType":12,"./XMLElement":15,"./XMLProcessingInstruction":17,"./XMLRaw":18,"./XMLText":22}],17:[function(t,e,n){(function(){var n,i={}.hasOwnProperty;n=t("./XMLNode"),e.exports=function(t){function e(t,n,i){if(e.__super__.constructor.call(this,t),null==n)throw new Error("Missing instruction target");this.target=this.stringify.insTarget(n),i&&(this.value=this.stringify.insValue(i))}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,n),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(t){return this.options.writer.set(t).processingInstruction(this)},e}()}).call(this)},{"./XMLNode":16}],18:[function(t,e,n){(function(){var n,i={}.hasOwnProperty;n=t("./XMLNode"),e.exports=function(t){function e(t,n){if(e.__super__.constructor.call(this,t),null==n)throw new Error("Missing raw text");this.value=this.stringify.raw(n)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,n),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(t){return this.options.writer.set(t).raw(this)},e}()}).call(this)},{"./XMLNode":16}],19:[function(t,e,n){(function(){var n,i,r,o,a,s,l,c,u,d,h,f,p,g={}.hasOwnProperty;l=t("./XMLDeclaration"),c=t("./XMLDocType"),n=t("./XMLCData"),i=t("./XMLComment"),u=t("./XMLElement"),h=t("./XMLRaw"),f=t("./XMLText"),d=t("./XMLProcessingInstruction"),r=t("./XMLDTDAttList"),o=t("./XMLDTDElement"),a=t("./XMLDTDEntity"),s=t("./XMLDTDNotation"),p=t("./XMLWriterBase"),e.exports=function(t){function e(t,n){this.stream=t,e.__super__.constructor.call(this,n)}return function(t,e){for(var n in e)g.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,p),e.prototype.document=function(t){var e,n,r,o,a,s,u,h;for(n=0,o=(s=t.children).length;n<o;n++)(e=s[n]).isLastRootNode=!1;for(t.children[t.children.length-1].isLastRootNode=!0,h=[],r=0,a=(u=t.children).length;r<a;r++)switch(e=u[r],!1){case!(e instanceof l):h.push(this.declaration(e));break;case!(e instanceof c):h.push(this.docType(e));break;case!(e instanceof i):h.push(this.comment(e));break;case!(e instanceof d):h.push(this.processingInstruction(e));break;default:h.push(this.element(e))}return h},e.prototype.attribute=function(t){return this.stream.write(" "+t.name+'="'+t.value+'"')},e.prototype.cdata=function(t,e){return this.stream.write(this.space(e)+"<![CDATA["+t.text+"]]>"+this.endline(t))},e.prototype.comment=function(t,e){return this.stream.write(this.space(e)+"\x3c!-- "+t.text+" --\x3e"+this.endline(t))},e.prototype.declaration=function(t,e){return this.stream.write(this.space(e)),this.stream.write('<?xml version="'+t.version+'"'),null!=t.encoding&&this.stream.write(' encoding="'+t.encoding+'"'),null!=t.standalone&&this.stream.write(' standalone="'+t.standalone+'"'),this.stream.write("?>"),this.stream.write(this.endline(t))},e.prototype.docType=function(t,e){var l,c,u,h;if(e||(e=0),this.stream.write(this.space(e)),this.stream.write("<!DOCTYPE "+t.root().name),t.pubID&&t.sysID?this.stream.write(' PUBLIC "'+t.pubID+'" "'+t.sysID+'"'):t.sysID&&this.stream.write(' SYSTEM "'+t.sysID+'"'),t.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(t)),c=0,u=(h=t.children).length;c<u;c++)switch(l=h[c],!1){case!(l instanceof r):this.dtdAttList(l,e+1);break;case!(l instanceof o):this.dtdElement(l,e+1);break;case!(l instanceof a):this.dtdEntity(l,e+1);break;case!(l instanceof s):this.dtdNotation(l,e+1);break;case!(l instanceof n):this.cdata(l,e+1);break;case!(l instanceof i):this.comment(l,e+1);break;case!(l instanceof d):this.processingInstruction(l,e+1);break;default:throw new Error("Unknown DTD node type: "+l.constructor.name)}this.stream.write("]")}return this.stream.write(">"),this.stream.write(this.endline(t))},e.prototype.element=function(t,e){var r,o,a,s,l,c,p,m;for(l in e||(e=0),m=this.space(e),this.stream.write(m+"<"+t.name),c=t.attributes)g.call(c,l)&&(r=c[l],this.attribute(r));if(0===t.children.length||t.children.every(function(t){return""===t.value}))this.allowEmpty?this.stream.write("></"+t.name+">"):this.stream.write("/>");else if(this.pretty&&1===t.children.length&&null!=t.children[0].value)this.stream.write(">"),this.stream.write(t.children[0].value),this.stream.write("</"+t.name+">");else{for(this.stream.write(">"+this.newline),a=0,s=(p=t.children).length;a<s;a++)switch(o=p[a],!1){case!(o instanceof n):this.cdata(o,e+1);break;case!(o instanceof i):this.comment(o,e+1);break;case!(o instanceof u):this.element(o,e+1);break;case!(o instanceof h):this.raw(o,e+1);break;case!(o instanceof f):this.text(o,e+1);break;case!(o instanceof d):this.processingInstruction(o,e+1);break;default:throw new Error("Unknown XML node type: "+o.constructor.name)}this.stream.write(m+"</"+t.name+">")}return this.stream.write(this.endline(t))},e.prototype.processingInstruction=function(t,e){return this.stream.write(this.space(e)+"<?"+t.target),t.value&&this.stream.write(" "+t.value),this.stream.write("?>"+this.endline(t))},e.prototype.raw=function(t,e){return this.stream.write(this.space(e)+t.value+this.endline(t))},e.prototype.text=function(t,e){return this.stream.write(this.space(e)+t.value+this.endline(t))},e.prototype.dtdAttList=function(t,e){return this.stream.write(this.space(e)+"<!ATTLIST "+t.elementName+" "+t.attributeName+" "+t.attributeType),"#DEFAULT"!==t.defaultValueType&&this.stream.write(" "+t.defaultValueType),t.defaultValue&&this.stream.write(' "'+t.defaultValue+'"'),this.stream.write(">"+this.endline(t))},e.prototype.dtdElement=function(t,e){return this.stream.write(this.space(e)+"<!ELEMENT "+t.name+" "+t.value+">"+this.endline(t))},e.prototype.dtdEntity=function(t,e){return this.stream.write(this.space(e)+"<!ENTITY"),t.pe&&this.stream.write(" %"),this.stream.write(" "+t.name),t.value?this.stream.write(' "'+t.value+'"'):(t.pubID&&t.sysID?this.stream.write(' PUBLIC "'+t.pubID+'" "'+t.sysID+'"'):t.sysID&&this.stream.write(' SYSTEM "'+t.sysID+'"'),t.nData&&this.stream.write(" NDATA "+t.nData)),this.stream.write(">"+this.endline(t))},e.prototype.dtdNotation=function(t,e){return this.stream.write(this.space(e)+"<!NOTATION "+t.name),t.pubID&&t.sysID?this.stream.write(' PUBLIC "'+t.pubID+'" "'+t.sysID+'"'):t.pubID?this.stream.write(' PUBLIC "'+t.pubID+'"'):t.sysID&&this.stream.write(' SYSTEM "'+t.sysID+'"'),this.stream.write(">"+this.endline(t))},e.prototype.endline=function(t){return t.isLastRootNode?"":this.newline},e}()}).call(this)},{"./XMLCData":5,"./XMLComment":6,"./XMLDTDAttList":7,"./XMLDTDElement":8,"./XMLDTDEntity":9,"./XMLDTDNotation":10,"./XMLDeclaration":11,"./XMLDocType":12,"./XMLElement":15,"./XMLProcessingInstruction":17,"./XMLRaw":18,"./XMLText":22,"./XMLWriterBase":23}],20:[function(t,e,n){(function(){var n,i,r,o,a,s,l,c,u,d,h,f,p,g={}.hasOwnProperty;l=t("./XMLDeclaration"),c=t("./XMLDocType"),n=t("./XMLCData"),i=t("./XMLComment"),u=t("./XMLElement"),h=t("./XMLRaw"),f=t("./XMLText"),d=t("./XMLProcessingInstruction"),r=t("./XMLDTDAttList"),o=t("./XMLDTDElement"),a=t("./XMLDTDEntity"),s=t("./XMLDTDNotation"),p=t("./XMLWriterBase"),e.exports=function(t){function e(t){e.__super__.constructor.call(this,t)}return function(t,e){for(var n in e)g.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,p),e.prototype.document=function(t){var e,n,r,o,a;for(o="",n=0,r=(a=t.children).length;n<r;n++)e=a[n],o+=function(){switch(!1){case!(e instanceof l):return this.declaration(e);case!(e instanceof c):return this.docType(e);case!(e instanceof i):return this.comment(e);case!(e instanceof d):return this.processingInstruction(e);default:return this.element(e,0)}}.call(this);return this.pretty&&o.slice(-this.newline.length)===this.newline&&(o=o.slice(0,-this.newline.length)),o},e.prototype.attribute=function(t){return" "+t.name+'="'+t.value+'"'},e.prototype.cdata=function(t,e){return this.space(e)+"<![CDATA["+t.text+"]]>"+this.newline},e.prototype.comment=function(t,e){return this.space(e)+"\x3c!-- "+t.text+" --\x3e"+this.newline},e.prototype.declaration=function(t,e){var n;return n=this.space(e),n+='<?xml version="'+t.version+'"',null!=t.encoding&&(n+=' encoding="'+t.encoding+'"'),null!=t.standalone&&(n+=' standalone="'+t.standalone+'"'),(n+="?>")+this.newline},e.prototype.docType=function(t,e){var l,c,u,h,f;if(e||(e=0),h=this.space(e),h+="<!DOCTYPE "+t.root().name,t.pubID&&t.sysID?h+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(h+=' SYSTEM "'+t.sysID+'"'),t.children.length>0){for(h+=" [",h+=this.newline,c=0,u=(f=t.children).length;c<u;c++)l=f[c],h+=function(){switch(!1){case!(l instanceof r):return this.dtdAttList(l,e+1);case!(l instanceof o):return this.dtdElement(l,e+1);case!(l instanceof a):return this.dtdEntity(l,e+1);case!(l instanceof s):return this.dtdNotation(l,e+1);case!(l instanceof n):return this.cdata(l,e+1);case!(l instanceof i):return this.comment(l,e+1);case!(l instanceof d):return this.processingInstruction(l,e+1);default:throw new Error("Unknown DTD node type: "+l.constructor.name)}}.call(this);h+="]"}return(h+=">")+this.newline},e.prototype.element=function(t,e){var r,o,a,s,l,c,p,m,v;for(l in e||(e=0),c="",c+=(v=this.space(e))+"<"+t.name,p=t.attributes)g.call(p,l)&&(r=p[l],c+=this.attribute(r));if(0===t.children.length||t.children.every(function(t){return""===t.value}))this.allowEmpty?c+="></"+t.name+">"+this.newline:c+="/>"+this.newline;else if(this.pretty&&1===t.children.length&&null!=t.children[0].value)c+=">",c+=t.children[0].value,c+="</"+t.name+">"+this.newline;else{for(c+=">"+this.newline,a=0,s=(m=t.children).length;a<s;a++)o=m[a],c+=function(){switch(!1){case!(o instanceof n):return this.cdata(o,e+1);case!(o instanceof i):return this.comment(o,e+1);case!(o instanceof u):return this.element(o,e+1);case!(o instanceof h):return this.raw(o,e+1);case!(o instanceof f):return this.text(o,e+1);case!(o instanceof d):return this.processingInstruction(o,e+1);default:throw new Error("Unknown XML node type: "+o.constructor.name)}}.call(this);c+=v+"</"+t.name+">"+this.newline}return c},e.prototype.processingInstruction=function(t,e){var n;return n=this.space(e)+"<?"+t.target,t.value&&(n+=" "+t.value),n+"?>"+this.newline},e.prototype.raw=function(t,e){return this.space(e)+t.value+this.newline},e.prototype.text=function(t,e){return this.space(e)+t.value+this.newline},e.prototype.dtdAttList=function(t,e){var n;return n=this.space(e)+"<!ATTLIST "+t.elementName+" "+t.attributeName+" "+t.attributeType,"#DEFAULT"!==t.defaultValueType&&(n+=" "+t.defaultValueType),t.defaultValue&&(n+=' "'+t.defaultValue+'"'),n+">"+this.newline},e.prototype.dtdElement=function(t,e){return this.space(e)+"<!ELEMENT "+t.name+" "+t.value+">"+this.newline},e.prototype.dtdEntity=function(t,e){var n;return n=this.space(e)+"<!ENTITY",t.pe&&(n+=" %"),n+=" "+t.name,t.value?n+=' "'+t.value+'"':(t.pubID&&t.sysID?n+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(n+=' SYSTEM "'+t.sysID+'"'),t.nData&&(n+=" NDATA "+t.nData)),n+">"+this.newline},e.prototype.dtdNotation=function(t,e){var n;return n=this.space(e)+"<!NOTATION "+t.name,t.pubID&&t.sysID?n+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.pubID?n+=' PUBLIC "'+t.pubID+'"':t.sysID&&(n+=' SYSTEM "'+t.sysID+'"'),n+">"+this.newline},e.prototype.openNode=function(t,e){var n,i,r,o;if(e||(e=0),t instanceof u){for(i in r=this.space(e)+"<"+t.name,o=t.attributes)g.call(o,i)&&(n=o[i],r+=this.attribute(n));return r+(t.children?">":"/>")+this.newline}return r=this.space(e)+"<!DOCTYPE "+t.rootNodeName,t.pubID&&t.sysID?r+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(r+=' SYSTEM "'+t.sysID+'"'),r+(t.children?" [":">")+this.newline},e.prototype.closeNode=function(t,e){switch(e||(e=0),!1){case!(t instanceof u):return this.space(e)+"</"+t.name+">"+this.newline;case!(t instanceof c):return this.space(e)+"]>"+this.newline}},e}()}).call(this)},{"./XMLCData":5,"./XMLComment":6,"./XMLDTDAttList":7,"./XMLDTDElement":8,"./XMLDTDEntity":9,"./XMLDTDNotation":10,"./XMLDeclaration":11,"./XMLDocType":12,"./XMLElement":15,"./XMLProcessingInstruction":17,"./XMLRaw":18,"./XMLText":22,"./XMLWriterBase":23}],21:[function(t,e,n){(function(){var n,i,r,o,a,s=function(t,e){return function(){return t.apply(e,arguments)}},l={}.hasOwnProperty;r=t("./Utility"),n=r.camelCase,a=r.titleCase,i=r.kebabCase,o=r.snakeCase,e.exports=function(){function t(t){var e,n,i;for(e in this.assertLegalChar=s(this.assertLegalChar,this),t||(t={}),this.allowSurrogateChars=t.allowSurrogateChars,this.noDoubleEncoding=t.noDoubleEncoding,this.textCase=t.textCase,n=t.stringify||{})l.call(n,e)&&(i=n[e],this[e]=i)}return t.prototype.eleName=function(t){return t=""+t||"",t=this.applyCase(t),this.assertLegalChar(t)},t.prototype.eleText=function(t){return t=""+t||"",this.assertLegalChar(this.elEscape(t))},t.prototype.cdata=function(t){return t=(t=""+t||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(t)},t.prototype.comment=function(t){if((t=""+t||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+t);return this.assertLegalChar(t)},t.prototype.raw=function(t){return""+t||""},t.prototype.attName=function(t){return t=""+t||"",this.applyCase(t)},t.prototype.attValue=function(t){return t=""+t||"",this.attEscape(t)},t.prototype.insTarget=function(t){return""+t||""},t.prototype.insValue=function(t){if((t=""+t||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+t);return t},t.prototype.xmlVersion=function(t){if(!(t=""+t||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+t);return t},t.prototype.xmlEncoding=function(t){if(!(t=""+t||"").match(/^[A-Za-z](?:[A-Za-z0-9._-]|-)*$/))throw new Error("Invalid encoding: "+t);return t},t.prototype.xmlStandalone=function(t){return t?"yes":"no"},t.prototype.dtdPubID=function(t){return""+t||""},t.prototype.dtdSysID=function(t){return""+t||""},t.prototype.dtdElementValue=function(t){return""+t||""},t.prototype.dtdAttType=function(t){return""+t||""},t.prototype.dtdAttDefault=function(t){return null!=t?""+t||"":t},t.prototype.dtdEntityValue=function(t){return""+t||""},t.prototype.dtdNData=function(t){return""+t||""},t.prototype.convertAttKey="@",t.prototype.convertPIKey="?",t.prototype.convertTextKey="#text",t.prototype.convertCDataKey="#cdata",t.prototype.convertCommentKey="#comment",t.prototype.convertRawKey="#raw",t.prototype.assertLegalChar=function(t){var e,n;if(e=this.allowSurrogateChars?/[\u0000-\u0008\u000B-\u000C\u000E-\u001F\uFFFE-\uFFFF]/:/[\u0000-\u0008\u000B-\u000C\u000E-\u001F\uD800-\uDFFF\uFFFE-\uFFFF]/,n=t.match(e))throw new Error("Invalid character ("+n+") in string: "+t+" at index "+n.index);return t},t.prototype.applyCase=function(t){switch(this.textCase){case"camel":return n(t);case"title":return a(t);case"kebab":case"lower":return i(t);case"snake":return o(t);case"upper":return i(t).toUpperCase();default:return t}},t.prototype.elEscape=function(t){var e;return e=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,t.replace(e,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},t.prototype.attEscape=function(t){var e;return e=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,t.replace(e,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},t}()}).call(this)},{"./Utility":3}],22:[function(t,e,n){(function(){var n,i={}.hasOwnProperty;n=t("./XMLNode"),e.exports=function(t){function e(t,n){if(e.__super__.constructor.call(this,t),null==n)throw new Error("Missing element text");this.value=this.stringify.eleText(n)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,n),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(t){return this.options.writer.set(t).text(this)},e}()}).call(this)},{"./XMLNode":16}],23:[function(t,e,n){(function(){var t={}.hasOwnProperty;e.exports=function(){function e(e){var n,i,r,o,a,s,l;for(n in e||(e={}),this.pretty=e.pretty||!1,this.allowEmpty=null!=(i=e.allowEmpty)&&i,this.pretty?(this.indent=null!=(r=e.indent)?r:"  ",this.newline=null!=(o=e.newline)?o:"\n",this.offset=null!=(a=e.offset)?a:0):(this.indent="",this.newline="",this.offset=0),s=e.writer||{})t.call(s,n)&&(l=s[n],this[n]=l)}return e.prototype.set=function(e){var n,i,r;for(n in e||(e={}),"pretty"in e&&(this.pretty=e.pretty),"allowEmpty"in e&&(this.allowEmpty=e.allowEmpty),this.pretty?(this.indent="indent"in e?e.indent:"  ",this.newline="newline"in e?e.newline:"\n",this.offset="offset"in e?e.offset:0):(this.indent="",this.newline="",this.offset=0),i=e.writer||{})t.call(i,n)&&(r=i[n],this[n]=r);return this},e.prototype.space=function(t){return this.pretty?new Array((t||0)+this.offset+1).join(this.indent):""},e}()}).call(this)},{}],24:[function(t,e,n){(function(){var n,i,r,o,a,s,l;l=t("./Utility"),a=l.assign,s=l.isFunction,n=t("./XMLDocument"),i=t("./XMLDocumentCB"),o=t("./XMLStringWriter"),r=t("./XMLStreamWriter"),e.exports.create=function(t,e,i,r){var o,s;if(null==t)throw new Error("Root element needs a name");return r=a({},e,i,r),s=(o=new n(r)).element(t),r.headless||(o.declaration(r),null==r.pubID&&null==r.sysID||o.doctype(r)),s},e.exports.begin=function(t,e,r){var o;return s(t)&&(e=(o=[t,e])[0],r=o[1],t={}),e?new i(t,e,r):new n(t)},e.exports.stringWriter=function(t){return new o(t)},e.exports.streamWriter=function(t,e){return new r(t,e)}}).call(this)},{"./Utility":3,"./XMLDocument":13,"./XMLDocumentCB":14,"./XMLStreamWriter":19,"./XMLStringWriter":20}],25:[function(t,e,n){var i=t("./ecmlBuilder"),r=function(){this.ecmlBuilder=new i};r.prototype.buildECML=function(t,e){return this.ecmlBuilder.buildECML(t,e)},e.exports=r},{"./ecmlBuilder":26}],26:[function(t,e,n){var i=t("lodash"),r=t("xmlbuilder"),o=function(){this.start=function(t,e){var n=this,r=i.omitBy(t,i.isObject);i.forIn(r,function(t,i){n.addProperty(i,t,e)});var o=i.pickBy(t,i.isObject);i.forIn(o,function(t,i){n.addObject(i,t,e)})},this.addProperty=function(t,e,n){switch(t){case"__text":n=n.txt(e);break;case"__cdata":n=n.dat(e);break;default:n=0===e?n.att(t,"0"):n.att(t,(e||"").toString())}},this.addObject=function(t,e,n){var r=this;i.isArray(e)?i.each(e,function(e){r.buildXML(t,e,n)}):r.buildXML(t,e,n)},this.buildXML=function(t,e,n){var r=this;n=n.ele(t);var o=i.omitBy(e,i.isObject);i.forIn(o,function(t,e){r.addProperty(e,t,n)});var a=i.pickBy(e,i.isObject);i.forIn(a,function(t,e){"__cdata"===e?r.addProperty(e,JSON.stringify(t),n):r.addObject(e,t,n)}),n=n.up()}};o.prototype.buildECML=function(t,e){var n=r.create("theme");return this.start(t.theme,n),e?n.end({pretty:!0}):n.end()},e.exports=o},{lodash:2,xmlbuilder:24}]},{},[1])(1);var o="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},a=function(){var t=/\blang(?:uage)?-(\w+)\b/i,e=0,n=o.Prism={util:{encode:function(t){return t instanceof i?new i(t.type,n.util.encode(t.content),t.alias):"Array"===n.util.type(t)?t.map(n.util.encode):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(t){return Object.prototype.toString.call(t).match(/\[object (\w+)\]/)[1]},objId:function(t){return t.__id||Object.defineProperty(t,"__id",{value:++e}),t.__id},clone:function(t){switch(n.util.type(t)){case"Object":var e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=n.util.clone(t[i]));return e;case"Array":return t.map&&t.map(function(t){return n.util.clone(t)})}return t}},languages:{extend:function(t,e){var i=n.util.clone(n.languages[t]);for(var r in e)i[r]=e[r];return i},insertBefore:function(t,e,i,r){var o=(r=r||n.languages)[t];if(2==arguments.length){for(var a in i=arguments[1])i.hasOwnProperty(a)&&(o[a]=i[a]);return o}var s={};for(var l in o)if(o.hasOwnProperty(l)){if(l==e)for(var a in i)i.hasOwnProperty(a)&&(s[a]=i[a]);s[l]=o[l]}return n.languages.DFS(n.languages,function(e,n){n===r[t]&&e!=t&&(this[e]=s)}),r[t]=s},DFS:function(t,e,i,r){for(var o in r=r||{},t)t.hasOwnProperty(o)&&(e.call(t,o,t[o],i||o),"Object"!==n.util.type(t[o])||r[n.util.objId(t[o])]?"Array"!==n.util.type(t[o])||r[n.util.objId(t[o])]||(r[n.util.objId(t[o])]=!0,n.languages.DFS(t[o],e,o,r)):(r[n.util.objId(t[o])]=!0,n.languages.DFS(t[o],e,null,r)))}},plugins:{},highlightAll:function(t,e){var i={callback:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};n.hooks.run("before-highlightall",i);for(var r,o=i.elements||document.querySelectorAll(i.selector),a=0;r=o[a++];)n.highlightElement(r,!0===t,i.callback)},highlightElement:function(e,i,r){for(var a,s,l=e;l&&!t.test(l.className);)l=l.parentNode;l&&(a=(l.className.match(t)||[,""])[1].toLowerCase(),s=n.languages[a]),e.className=e.className.replace(t,"").replace(/\s+/g," ")+" language-"+a,l=e.parentNode,/pre/i.test(l.nodeName)&&(l.className=l.className.replace(t,"").replace(/\s+/g," ")+" language-"+a);var c={element:e,language:a,grammar:s,code:e.textContent};if(n.hooks.run("before-sanity-check",c),!c.code||!c.grammar)return c.code&&(c.element.textContent=c.code),void n.hooks.run("complete",c);if(n.hooks.run("before-highlight",c),i&&o.Worker){var u=new Worker(n.filename);u.onmessage=function(t){c.highlightedCode=t.data,n.hooks.run("before-insert",c),c.element.innerHTML=c.highlightedCode,r&&r.call(c.element),n.hooks.run("after-highlight",c),n.hooks.run("complete",c)},u.postMessage(JSON.stringify({language:c.language,code:c.code,immediateClose:!0}))}else c.highlightedCode=n.highlight(c.code,c.grammar,c.language),n.hooks.run("before-insert",c),c.element.innerHTML=c.highlightedCode,r&&r.call(e),n.hooks.run("after-highlight",c),n.hooks.run("complete",c)},highlight:function(t,e,r){var o=n.tokenize(t,e);return i.stringify(n.util.encode(o),r)},tokenize:function(t,e){var i=n.Token,r=[t],o=e.rest;if(o){for(var a in o)e[a]=o[a];delete e.rest}t:for(var a in e)if(e.hasOwnProperty(a)&&e[a]){var s=e[a];s="Array"===n.util.type(s)?s:[s];for(var l=0;l<s.length;++l){var c=s[l],u=c.inside,d=!!c.lookbehind,h=!!c.greedy,f=0,p=c.alias;if(h&&!c.pattern.global){var g=c.pattern.toString().match(/[imuy]*$/)[0];c.pattern=RegExp(c.pattern.source,g+"g")}c=c.pattern||c;for(var m=0,v=0;m<r.length;v+=r[m].length,++m){var y=r[m];if(r.length>t.length)break t;if(!(y instanceof i)){c.lastIndex=0;var E=1;if(!(O=c.exec(y))&&h&&m!=r.length-1){if(c.lastIndex=v,!(O=c.exec(t)))break;for(var b=O.index+(d?O[1].length:0),C=O.index+O[0].length,T=m,w=v,I=r.length;I>T&&C>w;++T)b>=(w+=r[T].length)&&(++m,v=w);if(r[m]instanceof i||r[T-1].greedy)continue;E=T-m,y=t.slice(v,w),O.index-=v}if(O){d&&(f=O[1].length),C=(b=O.index+f)+(O=O[0].slice(f)).length;var O,D=y.slice(0,b),_=y.slice(C),k=[m,E];D&&k.push(D);var R=new i(a,u?n.tokenize(O,u):O,p,O,h);k.push(R),_&&k.push(_),Array.prototype.splice.apply(r,k)}}}}}return r},hooks:{all:{},add:function(t,e){var i=n.hooks.all;i[t]=i[t]||[],i[t].push(e)},run:function(t,e){var i=n.hooks.all[t];if(i&&i.length)for(var r,o=0;r=i[o++];)r(e)}}},i=n.Token=function(t,e,n,i,r){this.type=t,this.content=e,this.alias=n,this.length=0|(i||"").length,this.greedy=!!r};if(i.stringify=function(t,e,r){if("string"==typeof t)return t;if("Array"===n.util.type(t))return t.map(function(n){return i.stringify(n,e,t)}).join("");var o={type:t.type,content:i.stringify(t.content,e,r),tag:"span",classes:["token",t.type],attributes:{},language:e,parent:r};if("comment"==o.type&&(o.attributes.spellcheck="true"),t.alias){var a="Array"===n.util.type(t.alias)?t.alias:[t.alias];Array.prototype.push.apply(o.classes,a)}n.hooks.run("wrap",o);var s=Object.keys(o.attributes).map(function(t){return t+'="'+(o.attributes[t]||"").replace(/"/g,"&quot;")+'"'}).join(" ");return"<"+o.tag+' class="'+o.classes.join(" ")+'"'+(s?" "+s:"")+">"+o.content+"</"+o.tag+">"},!o.document)return o.addEventListener?(o.addEventListener("message",function(t){var e=JSON.parse(t.data),i=e.language,r=e.code,a=e.immediateClose;o.postMessage(n.highlight(r,n.languages[i],i)),a&&o.close()},!1),o.Prism):o.Prism;var r=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return r&&(n.filename=r.src,document.addEventListener&&!r.hasAttribute("data-manual")&&("loading"!==document.readyState?window.requestAnimationFrame?window.requestAnimationFrame(n.highlightAll):window.setTimeout(n.highlightAll,16):document.addEventListener("DOMContentLoaded",n.highlightAll))),o.Prism}();void 0!==t&&t.exports&&(t.exports=a),void 0!==e&&(e.Prism=a),a.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/i,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},a.hooks.add("wrap",function(t){"entity"===t.type&&(t.attributes.title=t.content.replace(/&amp;/,"&"))}),a.languages.xml=a.languages.markup,a.languages.html=a.languages.markup,a.languages.mathml=a.languages.markup,a.languages.svg=a.languages.markup,a.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:{pattern:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,greedy:!0},property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},a.languages.css.atrule.inside.rest=a.util.clone(a.languages.css),a.languages.markup&&(a.languages.insertBefore("markup","tag",{style:{pattern:/(<style[\w\W]*?>)[\w\W]*?(?=<\/style>)/i,lookbehind:!0,inside:a.languages.css,alias:"language-css"}}),a.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|').*?\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:a.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:a.languages.css}},alias:"language-css"}},a.languages.markup.tag)),a.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:{pattern:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(true|false)\b/,function:/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},a.languages.javascript=a.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,function:/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*\*?|\/|~|\^|%|\.{3}/}),a.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0,greedy:!0}}),a.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\\\|\\?[^\\])*?`/,greedy:!0,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:a.languages.javascript}},string:/[\s\S]+/}}}),a.languages.markup&&a.languages.insertBefore("markup","tag",{script:{pattern:/(<script[\w\W]*?>)[\w\W]*?(?=<\/script>)/i,lookbehind:!0,inside:a.languages.javascript,alias:"language-javascript"}}),a.languages.js=a.languages.javascript,"undefined"!=typeof self&&self.Prism&&self.document&&a.hooks.add("complete",function(t){if(t.code){var e=t.element.parentNode,n=/\s*\bline-numbers\b\s*/;if(e&&/pre/i.test(e.nodeName)&&(n.test(e.className)||n.test(t.element.className))&&!t.element.querySelector(".line-numbers-rows")){n.test(t.element.className)&&(t.element.className=t.element.className.replace(n,"")),n.test(e.className)||(e.className+=" line-numbers");var i,r=t.code.match(/\n(?!$)/g),o=r?r.length+1:1,a=new Array(o+1);a=a.join("<span></span>"),(i=document.createElement("span")).setAttribute("aria-hidden","true"),i.className="line-numbers-rows",i.innerHTML=a,e.hasAttribute("data-start")&&(e.style.counterReset="linenumber "+(parseInt(e.getAttribute("data-start"),10)-1)),t.element.appendChild(i)}}}),function(){if("undefined"!=typeof self&&self.Prism&&self.document){var t=[],e={},n=function(){};a.plugins.toolbar={};var i=a.plugins.toolbar.registerButton=function(n,i){var r;r="function"==typeof i?i:function(t){var e;return"function"==typeof i.onClick?((e=document.createElement("button")).type="button",e.addEventListener("click",function(){i.onClick.call(this,t)})):"string"==typeof i.url?(e=document.createElement("a")).href=i.url:e=document.createElement("span"),e.textContent=i.text,e},t.push(e[n]=r)},r=a.plugins.toolbar.hook=function(i){var r=i.element.parentNode;if(r&&/pre/i.test(r.nodeName)&&!r.classList.contains("code-toolbar")){r.classList.add("code-toolbar");var o=document.createElement("div");o.classList.add("toolbar"),document.body.hasAttribute("data-toolbar-order")&&(t=document.body.getAttribute("data-toolbar-order").split(",").map(function(t){return e[t]||n})),t.forEach(function(t){var e=t(i);if(e){var n=document.createElement("div");n.classList.add("toolbar-item"),n.appendChild(e),o.appendChild(n)}}),r.appendChild(o)}};i("label",function(t){var e=t.element.parentNode;if(e&&/pre/i.test(e.nodeName)&&e.hasAttribute("data-label")){var n,i,r=e.getAttribute("data-label");try{i=document.querySelector("template#"+r)}catch(t){}return i?n=i.content:(e.hasAttribute("data-url")?(n=document.createElement("a")).href=e.getAttribute("data-url"):n=document.createElement("span"),n.textContent=r),n}}),a.hooks.add("complete",r)}}(),function(){function t(t){this.defaults=i({},t)}function e(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})}function n(t){for(var e=0,n=0;n<t.length;++n)t.charCodeAt(n)=="\t".charCodeAt(0)&&(e+=3);return t.length+e}if("undefined"!=typeof self&&self.Prism&&self.document){var i=Object.assign||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t};t.prototype={setDefaults:function(t){this.defaults=i(this.defaults,t)},normalize:function(t,n){for(var r in n=i(this.defaults,n)){var o=e(r);"normalize"!==r&&"setDefaults"!==o&&n[r]&&this[o]&&(t=this[o].call(this,t,n[r]))}return t},leftTrim:function(t){return t.replace(/^\s+/,"")},rightTrim:function(t){return t.replace(/\s+$/,"")},tabsToSpaces:function(t,e){return e=0|e||4,t.replace(/\t/g,new Array(++e).join(" "))},spacesToTabs:function(t,e){return e=0|e||4,t.replace(new RegExp(" {"+e+"}","g"),"\t")},removeTrailing:function(t){return t.replace(/\s*?$/gm,"")},removeInitialLineFeed:function(t){return t.replace(/^(?:\r?\n|\r)/,"")},removeIndent:function(t){var e=t.match(/^[^\S\n\r]*(?=\S)/gm);return e&&e[0].length?(e.sort(function(t,e){return t.length-e.length}),e[0].length?t.replace(new RegExp("^"+e[0],"gm"),""):t):t},indent:function(t,e){return t.replace(/^[^\S\n\r]*(?=\S)/gm,new Array(++e).join("\t")+"$&")},breakLines:function(t,e){e=!0===e?80:0|e||80;for(var i=t.split("\n"),r=0;r<i.length;++r)if(!(n(i[r])<=e)){for(var o=i[r].split(/(\s+)/g),a=0,s=0;s<o.length;++s){var l=n(o[s]);(a+=l)>e&&(o[s]="\n"+o[s],a=l)}i[r]=o.join("")}return i.join("\n")}},a.plugins.NormalizeWhitespace=new t({"remove-trailing":!0,"remove-indent":!0,"left-trim":!0,"right-trim":!0}),a.hooks.add("before-sanity-check",function(t){var e=t.element.parentNode,n=/\bno-whitespace-normalization\b/;if(!(!t.code||!e||"pre"!==e.nodeName.toLowerCase()||t.settings&&!1===t.settings["whitespace-normalization"]||n.test(e.className)||n.test(t.element.className))){for(var i=e.childNodes,r="",o="",s=!1,l=a.plugins.NormalizeWhitespace,c=0;c<i.length;++c){var u=i[c];u==t.element?s=!0:"#text"===u.nodeName&&(s?o+=u.nodeValue:r+=u.nodeValue,e.removeChild(u),--c)}if(t.element.children.length&&a.plugins.KeepMarkup){var d=r+t.element.innerHTML+o;t.element.innerHTML=l.normalize(d,t.settings),t.code=t.element.textContent}else t.code=r+t.code+o,t.code=l.normalize(t.code,t.settings)}})}}(),function(){if("undefined"!=typeof self&&self.Prism&&self.document){if(!a.plugins.toolbar)return void console.warn("Copy to Clipboard plugin loaded before Toolbar plugin.");var t=window.Clipboard||void 0;t||(t=n(61));var e=[];if(!t){var i=document.createElement("script"),r=document.querySelector("head");i.onload=function(){if(t=window.Clipboard)for(;e.length;)e.pop()()},i.src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.5.8/clipboard.min.js",r.appendChild(i)}a.plugins.toolbar.registerButton("copy-to-clipboard",function(n){function i(){var e=new t(o,{text:function(){return n.code}});e.on("success",function(){o.textContent="Copied!",r()}),e.on("error",function(){o.textContent="Press Ctrl+C to copy",r()})}function r(){setTimeout(function(){o.textContent="Copy"},5e3)}var o=document.createElement("a");return o.textContent="Copy",t?i():e.push(i),o})}}(),org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.viewecml",ver:"1.0",author:"Anshu Narayan",title:"viewecml Plugin",description:"",publishedDate:"",editor:{main:"editor/plugin.js",dependencies:[{type:"js",src:"editor/libs/dist/E2EConverter.js"},{type:"css",src:"editor/libs/prism/prism.css"},{type:"js",src:"editor/libs/prism/prism.js"}],views:[{template:"./ECMLbrowser.html",controller:""}],menu:[{}]}},org.ekstep.contenteditor.basePlugin.extend({type:"viewecml",callback:function(){},initialize:function(){a.plugins.NormalizeWhitespace.setDefaults({"break-lines":80}),converter=new i,ecEditor.addEventListener(this.manifest.id+":show",this.initViewECML,this),ecEditor.resolvePluginResource(this.manifest.id,this.manifest.ver,"editor/ECMLbrowser.html"),setTimeout(function(){ecEditor.getService("popup").loadNgModules(n(62),void 0,!0)},1e3)},initViewECML:function(t,e){var n=this;this.callback=e,this.loadResource("editor/ECMLbrowser.html","html",function(t,e){n.showECMLBrowser(t,e)})},showECMLBrowser:function(t,e){ecEditor.getService("popup").open({template:"partials_org.ekstep.ECMLbrowser.html",controller:["$scope",this.controllerCallback],controllerAs:"$ctrl",showClose:!1,width:900,className:"ngdialog-theme-plain"})},controllerCallback:function(t,e){var n=this;n.contentBody="ECML Content",n.previewLoad=function(){var e=org.ekstep.contenteditor.stageManager.toECML();ecEditor.getAngularScope().developerMode&&(e.theme["plugin-manifest"]||(e.theme["plugin-manifest"]={plugin:[]}),_.isArray(e.theme["plugin-manifest"].plugin)||(e.theme["plugin-manifest"].plugin=[e.theme["plugin-manifest"].plugin]),e.theme["plugin-manifest"].plugin.splice(0,0,{id:"org.ekstep.developer",ver:"1.0",type:"plugin",hostPath:org.ekstep.pluginframework.hostRepo.basePath,preload:!0})),n.contentBody=converter.buildECML(e,!0),t.$safeApply(function(){setTimeout(function(){a.highlightElement(ecEditor.jQuery("#xmlBody")[0])},100)})},n.previewLoad(),n.copyToClipboard=function(t){var e,n,i=document.getElementById(t),r="_hiddenCopyText_",o="INPUT"===i.tagName||"TEXTAREA"===i.tagName;if(o)e=(a=i).selectionStart,n=i.selectionEnd;else{if(!(a=document.getElementById(r))){var a=document.createElement("textarea");a.style.position="absolute",a.style.left="-9999px",a.style.top="0",a.id=r,document.body.appendChild(a)}a.textContent=i.textContent}var s,l=document.activeElement;a.focus(),a.setSelectionRange(0,a.value.length),console.log(a);try{s=document.execCommand("copy"),window.alert("Copied!")}catch(t){s=!1}return l&&"function"==typeof l.focus&&l.focus(),o?i.setSelectionRange(e,n):a.textContent="",s},n.closeWindow=function(){t.closeThisDialog()}}}))}).call(this,n(17),n(54))},function(t,e,n){(function(e){t.exports=e.E2EConverter=n(55)}).call(this,n(17))},function(t,e,n){var i=n(56),r=function(){this.ecmlBuilder=new i};r.prototype.buildECML=function(t,e){return this.ecmlBuilder.buildECML(t,e)},t.exports=r},function(t,e,n){var i=n(57),r=function(){this.start=function(t,e){var n=this,i=_.omitBy(t,_.isObject);_.forIn(i,function(t,i){n.addProperty(i,t,e)});var r=_.pickBy(t,_.isObject);_.forIn(r,function(t,i){n.addObject(i,t,e)})},this.addProperty=function(t,e,n){switch(t){case"__text":n=n.txt(e);break;case"__cdata":n=n.dat(e);break;default:n=0===e?n.att(t,"0"):n.att(t,(e||"").toString())}},this.addObject=function(t,e,n){var i=this;_.isArray(e)?_.each(e,function(e){i.buildXML(t,e,n)}):i.buildXML(t,e,n)},this.buildXML=function(t,e,n){var i=this;n=n.ele(t);var r=_.omitBy(e,_.isObject);_.forIn(r,function(t,e){i.addProperty(e,t,n)});var o=_.pickBy(e,_.isObject);_.forIn(o,function(t,e){"__cdata"===e?i.addProperty(e,JSON.stringify(t),n):i.addObject(e,t,n)}),n=n.up()}};r.prototype.buildECML=function(t,e){var n=i.create("theme");return this.start(t.theme,n),e?n.end({pretty:!0}):n.end()},t.exports=r},function(t,e,n){(function(){var e,i,r,o,a,s,l;l=n(1),a=l.assign,s=l.isFunction,e=n(58),i=n(59),o=n(14),r=n(60),t.exports.create=function(t,n,i,r){var o,s;if(null==t)throw new Error("Root element needs a name.");return r=a({},n,i,r),s=(o=new e(r)).element(t),r.headless||(o.declaration(r),null==r.pubID&&null==r.sysID||o.doctype(r)),s},t.exports.begin=function(t,n,r){var o;return s(t)&&(n=(o=[t,n])[0],r=o[1],t={}),n?new i(t,n,r):new e(t)},t.exports.stringWriter=function(t){return new o(t)},t.exports.streamWriter=function(t,e){return new r(t,e)}}).call(this)},function(t,e,n){(function(){var e,i,r,o,a={}.hasOwnProperty;o=n(1).isPlainObject,e=n(0),r=n(19),i=n(14),t.exports=function(t){function n(t){n.__super__.constructor.call(this,null),this.name="?xml",t||(t={}),t.writer||(t.writer=new i),this.options=t,this.stringify=new r(t),this.isDocument=!0}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,e),n.prototype.end=function(t){var e;return t?o(t)&&(e=t,t=this.options.writer.set(e)):t=this.options.writer,t.document(this)},n.prototype.toString=function(t){return this.options.writer.set(t).document(this)},n}()}).call(this)},function(t,e,n){(function(){var e,i,r,o,a,s,l,c,u,d,h,f,p,g,m,v,y,E,b,C,T={}.hasOwnProperty;C=n(1),E=C.isObject,y=C.isFunction,b=C.isPlainObject,v=C.getValue,d=n(2),i=n(3),r=n(4),f=n(11),m=n(12),h=n(13),c=n(5),u=n(6),o=n(7),s=n(8),a=n(9),l=n(10),e=n(18),g=n(19),p=n(14),t.exports=function(){function t(t,e,n){var i;this.name="?xml",t||(t={}),t.writer?b(t.writer)&&(i=t.writer,t.writer=new p(i)):t.writer=new p(t),this.options=t,this.writer=t.writer,this.stringify=new g(t),this.onDataCallback=e||function(){},this.onEndCallback=n||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return t.prototype.node=function(t,e,n){var i;if(null==t)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(t));return this.openCurrent(),t=v(t),null==e&&(e={}),e=v(e),E(e)||(n=(i=[e,n])[0],e=i[1]),this.currentNode=new d(this,t,e),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=n&&this.text(n),this},t.prototype.element=function(t,e,n){return this.currentNode&&this.currentNode instanceof u?this.dtdElement.apply(this,arguments):this.node(t,e,n)},t.prototype.attribute=function(t,n){var i,r;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(t));if(null!=t&&(t=v(t)),E(t))for(i in t)T.call(t,i)&&(r=t[i],this.attribute(i,r));else y(n)&&(n=n.apply()),this.options.skipNullAttributes&&null==n||(this.currentNode.attributes[t]=new e(this,t,n));return this},t.prototype.text=function(t){var e;return this.openCurrent(),e=new m(this,t),this.onData(this.writer.text(e,this.currentLevel+1),this.currentLevel+1),this},t.prototype.cdata=function(t){var e;return this.openCurrent(),e=new i(this,t),this.onData(this.writer.cdata(e,this.currentLevel+1),this.currentLevel+1),this},t.prototype.comment=function(t){var e;return this.openCurrent(),e=new r(this,t),this.onData(this.writer.comment(e,this.currentLevel+1),this.currentLevel+1),this},t.prototype.raw=function(t){var e;return this.openCurrent(),e=new f(this,t),this.onData(this.writer.raw(e,this.currentLevel+1),this.currentLevel+1),this},t.prototype.instruction=function(t,e){var n,i,r,o,a;if(this.openCurrent(),null!=t&&(t=v(t)),null!=e&&(e=v(e)),Array.isArray(t))for(n=0,o=t.length;n<o;n++)i=t[n],this.instruction(i);else if(E(t))for(i in t)T.call(t,i)&&(r=t[i],this.instruction(i,r));else y(e)&&(e=e.apply()),a=new h(this,t,e),this.onData(this.writer.processingInstruction(a,this.currentLevel+1),this.currentLevel+1);return this},t.prototype.declaration=function(t,e,n){var i;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return i=new c(this,t,e,n),this.onData(this.writer.declaration(i,this.currentLevel+1),this.currentLevel+1),this},t.prototype.doctype=function(t,e,n){if(this.openCurrent(),null==t)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new u(this,e,n),this.currentNode.rootNodeName=t,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},t.prototype.dtdElement=function(t,e){var n;return this.openCurrent(),n=new a(this,t,e),this.onData(this.writer.dtdElement(n,this.currentLevel+1),this.currentLevel+1),this},t.prototype.attList=function(t,e,n,i,r){var a;return this.openCurrent(),a=new o(this,t,e,n,i,r),this.onData(this.writer.dtdAttList(a,this.currentLevel+1),this.currentLevel+1),this},t.prototype.entity=function(t,e){var n;return this.openCurrent(),n=new s(this,!1,t,e),this.onData(this.writer.dtdEntity(n,this.currentLevel+1),this.currentLevel+1),this},t.prototype.pEntity=function(t,e){var n;return this.openCurrent(),n=new s(this,!0,t,e),this.onData(this.writer.dtdEntity(n,this.currentLevel+1),this.currentLevel+1),this},t.prototype.notation=function(t,e){var n;return this.openCurrent(),n=new l(this,t,e),this.onData(this.writer.dtdNotation(n,this.currentLevel+1),this.currentLevel+1),this},t.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},t.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},t.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},t.prototype.openNode=function(t){if(!t.isOpen)return!this.root&&0===this.currentLevel&&t instanceof d&&(this.root=t),this.onData(this.writer.openNode(t,this.currentLevel),this.currentLevel),t.isOpen=!0},t.prototype.closeNode=function(t){if(!t.isClosed)return this.onData(this.writer.closeNode(t,this.currentLevel),this.currentLevel),t.isClosed=!0},t.prototype.onData=function(t,e){return this.documentStarted=!0,this.onDataCallback(t,e+1)},t.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},t.prototype.debugInfo=function(t){return null==t?"":"node: <"+t+">"},t.prototype.ele=function(){return this.element.apply(this,arguments)},t.prototype.nod=function(t,e,n){return this.node(t,e,n)},t.prototype.txt=function(t){return this.text(t)},t.prototype.dat=function(t){return this.cdata(t)},t.prototype.com=function(t){return this.comment(t)},t.prototype.ins=function(t,e){return this.instruction(t,e)},t.prototype.dec=function(t,e,n){return this.declaration(t,e,n)},t.prototype.dtd=function(t,e,n){return this.doctype(t,e,n)},t.prototype.e=function(t,e,n){return this.element(t,e,n)},t.prototype.n=function(t,e,n){return this.node(t,e,n)},t.prototype.t=function(t){return this.text(t)},t.prototype.d=function(t){return this.cdata(t)},t.prototype.c=function(t){return this.comment(t)},t.prototype.r=function(t){return this.raw(t)},t.prototype.i=function(t,e){return this.instruction(t,e)},t.prototype.att=function(){return this.currentNode&&this.currentNode instanceof u?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},t.prototype.a=function(){return this.currentNode&&this.currentNode instanceof u?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},t.prototype.ent=function(t,e){return this.entity(t,e)},t.prototype.pent=function(t,e){return this.pEntity(t,e)},t.prototype.not=function(t,e){return this.notation(t,e)},t}()}).call(this)},function(t,e,n){(function(){var e,i,r,o,a,s,l,c,u,d,h,f,p,g={}.hasOwnProperty;l=n(5),c=n(6),e=n(3),i=n(4),u=n(2),h=n(11),f=n(12),d=n(13),r=n(7),o=n(9),a=n(8),s=n(10),p=n(20),t.exports=function(t){function n(t,e){n.__super__.constructor.call(this,e),this.stream=t}return function(t,e){for(var n in e)g.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,p),n.prototype.document=function(t){var e,n,r,o,a,s,u,h;for(n=0,o=(s=t.children).length;n<o;n++)(e=s[n]).isLastRootNode=!1;for(t.children[t.children.length-1].isLastRootNode=!0,h=[],r=0,a=(u=t.children).length;r<a;r++)switch(e=u[r],!1){case!(e instanceof l):h.push(this.declaration(e));break;case!(e instanceof c):h.push(this.docType(e));break;case!(e instanceof i):h.push(this.comment(e));break;case!(e instanceof d):h.push(this.processingInstruction(e));break;default:h.push(this.element(e))}return h},n.prototype.attribute=function(t){return this.stream.write(" "+t.name+'="'+t.value+'"')},n.prototype.cdata=function(t,e){return this.stream.write(this.space(e)+"<![CDATA["+t.text+"]]>"+this.endline(t))},n.prototype.comment=function(t,e){return this.stream.write(this.space(e)+"\x3c!-- "+t.text+" --\x3e"+this.endline(t))},n.prototype.declaration=function(t,e){return this.stream.write(this.space(e)),this.stream.write('<?xml version="'+t.version+'"'),null!=t.encoding&&this.stream.write(' encoding="'+t.encoding+'"'),null!=t.standalone&&this.stream.write(' standalone="'+t.standalone+'"'),this.stream.write(this.spacebeforeslash+"?>"),this.stream.write(this.endline(t))},n.prototype.docType=function(t,n){var l,c,u,h;if(n||(n=0),this.stream.write(this.space(n)),this.stream.write("<!DOCTYPE "+t.root().name),t.pubID&&t.sysID?this.stream.write(' PUBLIC "'+t.pubID+'" "'+t.sysID+'"'):t.sysID&&this.stream.write(' SYSTEM "'+t.sysID+'"'),t.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(t)),c=0,u=(h=t.children).length;c<u;c++)switch(l=h[c],!1){case!(l instanceof r):this.dtdAttList(l,n+1);break;case!(l instanceof o):this.dtdElement(l,n+1);break;case!(l instanceof a):this.dtdEntity(l,n+1);break;case!(l instanceof s):this.dtdNotation(l,n+1);break;case!(l instanceof e):this.cdata(l,n+1);break;case!(l instanceof i):this.comment(l,n+1);break;case!(l instanceof d):this.processingInstruction(l,n+1);break;default:throw new Error("Unknown DTD node type: "+l.constructor.name)}this.stream.write("]")}return this.stream.write(this.spacebeforeslash+">"),this.stream.write(this.endline(t))},n.prototype.element=function(t,n){var r,o,a,s,l,c,p,m;for(l in n||(n=0),m=this.space(n),this.stream.write(m+"<"+t.name),c=t.attributes)g.call(c,l)&&(r=c[l],this.attribute(r));if(0===t.children.length||t.children.every(function(t){return""===t.value}))this.allowEmpty?this.stream.write("></"+t.name+">"):this.stream.write(this.spacebeforeslash+"/>");else if(this.pretty&&1===t.children.length&&null!=t.children[0].value)this.stream.write(">"),this.stream.write(t.children[0].value),this.stream.write("</"+t.name+">");else{for(this.stream.write(">"+this.newline),a=0,s=(p=t.children).length;a<s;a++)switch(o=p[a],!1){case!(o instanceof e):this.cdata(o,n+1);break;case!(o instanceof i):this.comment(o,n+1);break;case!(o instanceof u):this.element(o,n+1);break;case!(o instanceof h):this.raw(o,n+1);break;case!(o instanceof f):this.text(o,n+1);break;case!(o instanceof d):this.processingInstruction(o,n+1);break;default:throw new Error("Unknown XML node type: "+o.constructor.name)}this.stream.write(m+"</"+t.name+">")}return this.stream.write(this.endline(t))},n.prototype.processingInstruction=function(t,e){return this.stream.write(this.space(e)+"<?"+t.target),t.value&&this.stream.write(" "+t.value),this.stream.write(this.spacebeforeslash+"?>"+this.endline(t))},n.prototype.raw=function(t,e){return this.stream.write(this.space(e)+t.value+this.endline(t))},n.prototype.text=function(t,e){return this.stream.write(this.space(e)+t.value+this.endline(t))},n.prototype.dtdAttList=function(t,e){return this.stream.write(this.space(e)+"<!ATTLIST "+t.elementName+" "+t.attributeName+" "+t.attributeType),"#DEFAULT"!==t.defaultValueType&&this.stream.write(" "+t.defaultValueType),t.defaultValue&&this.stream.write(' "'+t.defaultValue+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(t))},n.prototype.dtdElement=function(t,e){return this.stream.write(this.space(e)+"<!ELEMENT "+t.name+" "+t.value),this.stream.write(this.spacebeforeslash+">"+this.endline(t))},n.prototype.dtdEntity=function(t,e){return this.stream.write(this.space(e)+"<!ENTITY"),t.pe&&this.stream.write(" %"),this.stream.write(" "+t.name),t.value?this.stream.write(' "'+t.value+'"'):(t.pubID&&t.sysID?this.stream.write(' PUBLIC "'+t.pubID+'" "'+t.sysID+'"'):t.sysID&&this.stream.write(' SYSTEM "'+t.sysID+'"'),t.nData&&this.stream.write(" NDATA "+t.nData)),this.stream.write(this.spacebeforeslash+">"+this.endline(t))},n.prototype.dtdNotation=function(t,e){return this.stream.write(this.space(e)+"<!NOTATION "+t.name),t.pubID&&t.sysID?this.stream.write(' PUBLIC "'+t.pubID+'" "'+t.sysID+'"'):t.pubID?this.stream.write(' PUBLIC "'+t.pubID+'"'):t.sysID&&this.stream.write(' SYSTEM "'+t.sysID+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(t))},n.prototype.endline=function(t){return t.isLastRootNode?"":this.newline},n}()}).call(this)},function(t,e,n){
/*!
 * clipboard.js v2.0.1
 * https://zenorocha.github.io/clipboard.js
 * 
 * Licensed MIT © Zeno Rocha
 */
t.exports=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,n){var i,r,o;r=[t,n(7)],void 0!==(o="function"==typeof(i=function(t,e){"use strict";var n=function(t){return t&&t.__esModule?t:{default:t}}(e),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.resolveOptions(e),this.initSelection()}return r(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var i=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=i+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,n.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,n.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==(void 0===t?"undefined":i(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=o})?i.apply(e,r):i)&&(t.exports=o)},function(t,e,n){var i=n(6),r=n(5);t.exports=function(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!i.string(e))throw new TypeError("Second argument must be a String");if(!i.fn(n))throw new TypeError("Third argument must be a Function");if(i.node(t))return function(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}(t,e,n);if(i.nodeList(t))return function(t,e,n){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,n)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,n)})}}}(t,e,n);if(i.string(t))return function(t,e,n){return r(document.body,t,e,n)}(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},function(t,e){function n(){}n.prototype={on:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function i(){r.off(t,i),e.apply(n,arguments)}var r=this;return i._=e,this.on(t,i,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,r=n.length;i<r;i++)n[i].fn.apply(n[i].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),i=n[t],r=[];if(i&&e)for(var o=0,a=i.length;o<a;o++)i[o].fn!==e&&i[o].fn._!==e&&r.push(i[o]);return r.length?n[t]=r:delete n[t],this}},t.exports=n},function(t,e,n){var i,r,o;r=[t,n(0),n(2),n(1)],void 0!==(o="function"==typeof(i=function(t,e,n,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}var a=r(e),s=r(n),l=r(i),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),d=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.resolveOptions(n),i.listenClick(t),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),u(e,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===c(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,l.default)(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new a.default({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return o("action",t)}},{key:"defaultTarget",value:function(t){var e=o("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return o("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,n=!!document.queryCommandSupported;return e.forEach(function(t){n=n&&!!document.queryCommandSupported(t)}),n}}]),e}();t.exports=d})?i.apply(e,r):i)&&(t.exports=o)},function(t,e){if("undefined"!=typeof Element&&!Element.prototype.matches){var n=Element.prototype;n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}t.exports=function(t,e){for(;t&&9!==t.nodeType;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}},function(t,e,n){function i(t,e,n,i,o){var a=r.apply(this,arguments);return t.addEventListener(n,a,o),{destroy:function(){t.removeEventListener(n,a,o)}}}function r(t,e,n,i){return function(n){n.delegateTarget=o(n.target,e),n.delegateTarget&&i.call(t,n)}}var o=n(4);t.exports=function(t,e,n,r,o){return"function"==typeof t.addEventListener?i.apply(null,arguments):"function"==typeof n?i.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,function(t){return i(t,e,n,r,o)}))}},function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var n=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},function(t,e){t.exports=function(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var i=window.getSelection(),r=document.createRange();r.selectNodeContents(t),i.removeAllRanges(),i.addRange(r),e=i.toString()}return e}}])},function(t,e){t.exports='<script type="text/ng-template" ng-app="org.ekstep.viewECML-1.0" ng-controller="ECMLbrowser as $ctrl" id="partials_org.ekstep.ECMLbrowser.html">\n<style>\n.ECMLbrowser_content {\n    margin-top: 20px;    \n    height: 420px;\n}\n</style>\n<div class="ui large modal active" style="top: 10% !important">\n    <div class="header">\n        <div class="ui grid">\n            <div class="fourteen column row">\n                <div class="left floated three wide column">\n                    <i class="file code outline icon"></i>\n                    <label>ECML</label>\n                </div>\n                <div>\n                    <span class="right floated column"><i class="copy link icon" ng-click="$ctrl.copyToClipboard(\'hiddenXmlBody\')"></i></span>\n                    <span class="right floated column"><i class="remove link icon" ng-click="$ctrl.closeWindow()"></i></span>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="content">\n        <div class="ui grid ECMLbrowser_content">\n            <pre class="line-numbers language-markup" style="width:100%;"><code class="language-markup" id="xmlBody">{{$ctrl.contentBody}}</code></pre>\n        </div>\n        <div id="hiddenXmlBody" style="display: none;">{{$ctrl.contentBody}}</div>\n    </div>\n</div>\n<\/script>\n\n'},function(t,e){org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.utils",ver:"1.0",author:"HarishKumar Gangula",title:"Utils Plugin",description:"This plugin is used to add utilitites",publishedDate:"",editor:{main:"editor/plugin.js",menu:[{id:"copy",category:"context",type:"icon",toolTip:"copy",title:"copy",iconClass:"copy icon",state:"HIDE",onclick:{id:"copy:copyItem",data:{}}},{id:"paste",category:"context",type:"icon",toolTip:"paste",title:"paste",iconClass:"paste icon",state:"HIDE",onclick:{id:"paste:pasteItem",data:{}}},{id:"delete",category:"context",type:"icon",toolTip:"Delete",title:"Delete",iconClass:"trash outline icon",state:"HIDE",onclick:{id:"delete:invoke",data:{}}},{id:"reorder",category:"context",type:"icon",toolTip:"Arrange",title:"Arrange",iconClass:"icon-arrange icon",state:"HIDE",submenu:[{id:"bringforward",category:"context",type:"icon",toolTip:"Bring forward",title:"Bring forward",iconClass:"icon-bringforward icon",onclick:{id:"reorder:bringforward",data:{}}},{id:"bringfront",category:"context",type:"icon",toolTip:"Bring to front",title:"Bring to front",iconClass:"icon-bringfront icon",onclick:{id:"reorder:bringfront",data:{}}},{id:"sendbackward",category:"context",type:"icon",toolTip:"Send backward",title:"Send backward",iconClass:"icon-sendbackward icon",onclick:{id:"reorder:sendbackward",data:{}}},{id:"sendback",category:"context",type:"icon",toolTip:"Send to back",title:"Send to back",iconClass:"icon-sendback icon",onclick:{id:"reorder:sendback",data:{}}}]}]}},org.ekstep.contenteditor.basePlugin.extend({type:"utils",picker:void 0,clipboard:void 0,activeGroup:void 0,initialize:function(){ecEditor.addEventListener("reorder:bringforward",this.bringforward,this),ecEditor.addEventListener("reorder:bringfront",this.bringfront,this),ecEditor.addEventListener("reorder:sendbackward",this.sendbackward,this),ecEditor.addEventListener("reorder:sendback",this.sendback,this),ecEditor.addEventListener("copy:copyItem",this.copyItem,this),ecEditor.addEventListener("paste:pasteItem",this.pasteItem,this),ecEditor.addEventListener("delete:invoke",this.deleteObject,this),ecEditor.addEventListener("object:selected",this.objectSelected,this),ecEditor.addEventListener("object:unselected",this.objectUnSelected,this)},bringfront:function(t,e){ecEditor.getCanvas().bringToFront(ecEditor.getEditorObject()),ecEditor.render(),ecEditor.dispatchEvent("object:modified",{id:ecEditor.getEditorObject().id})},sendback:function(t,e){ecEditor.getCanvas().sendToBack(ecEditor.getEditorObject()),ecEditor.render(),ecEditor.dispatchEvent("object:modified",{id:ecEditor.getEditorObject().id})},bringforward:function(t,e){ecEditor.getCanvas().bringForward(ecEditor.getEditorObject()),ecEditor.render(),ecEditor.dispatchEvent("object:modified",{id:ecEditor.getEditorObject().id})},sendbackward:function(t,e){ecEditor.getCanvas().sendBackwards(ecEditor.getEditorObject()),ecEditor.render(),ecEditor.dispatchEvent("object:modified",{id:ecEditor.getEditorObject().id})},copyItem:function(){this.clipboard=_.cloneDeep(ecEditor.getCurrentObject()?ecEditor.getCurrentObject():ecEditor.getCurrentGroup()),this.activeGroup=ecEditor.getCanvas().getActiveGroup()&&ecEditor.getCanvas().getActiveGroup().getObjects(),this.clipboard&&ecEditor.updateContextMenu({id:"paste",state:"SHOW",data:{}})},pasteItem:function(){var t=this;this.clipboard&&(_.isArray(this.clipboard)?(ecEditor.getCanvas().discardActiveGroup(),this.clipboard.forEach(function(e,n){e.editorObj.top=t.activeGroup[n].top+10,e.editorObj.left=t.activeGroup[n].left+10,ecEditor.cloneInstance(e)})):ecEditor.cloneInstance(this.clipboard),this.clipboard=void 0,ecEditor.updateContextMenu({id:"paste",state:"HIDE",data:{}}))},deleteObject:function(t,e){var n=ecEditor.getEditorGroup(),i=ecEditor.getEditorObject(),r=this;n?(ecEditor.getCanvas().discardActiveGroup(),n.getObjects().forEach(function(t){r.remove(t)})):i&&r.remove(i)},remove:function(t){ecEditor.dispatchEvent("delete:invoked",{editorObj:ecEditor.getPluginInstance(t.id).attributes}),ecEditor.getCanvas().remove(t),ecEditor.dispatchEvent("stage:modified",{id:t.id})},objectSelected:function(t,e){ecEditor.updateContextMenus([{id:"reorder",state:"SHOW",data:{}},{id:"copy",state:"SHOW",data:{}},{id:"delete",state:"SHOW",data:{}}])},objectUnSelected:function(t,e){ecEditor.updateContextMenus([{id:"reorder",state:"HIDE",data:{}},{id:"copy",state:"HIDE",data:{}},{id:"delete",state:"HIDE",data:{}}])}}))},function(t,e,n){var i,r,o,a={useajax:!1,regexobject:{headline:/^(\#{1,6})([^\#\n]+)$/m,code:/\s\`\`\`\n?([^`]+)\`\`\`/g,hr:/^(?:([\*\-_] ?)+)\1\1$/gm,lists:/^((\s*((\*|\-)|\d(\.|\))) [^\n]+)\n)+/gm,bolditalic:/(?:([\*_~]{1,3}))([^\*_~\n]+[^\*_~\s])\1/g,links:/!?\[([^\]<>]+)\]\(([^ \)<>]+)( "[^\(\)\"]+")?\)/g,reflinks:/\[([^\]]+)\]\[([^\]]+)\]/g,smlinks:/\@([a-z0-9]{3,})\@(t|gh|fb|gp|adn)/gi,mail:/<(([a-z0-9_\-\.])+\@([a-z0-9_\-\.])+\.([a-z]{2,7}))>/gim,tables:/\n(([^|\n]+ *\| *)+([^|\n]+\n))((:?\-+:?\|)+(:?\-+:?)*\n)((([^|\n]+ *\| *)+([^|\n]+)\n)+)/g,include:/[\[<]include (\S+) from (https?:\/\/[a-z0-9\.\-]+\.[a-z]{2,9}[a-z0-9\.\-\?\&\/]+)[\]>]/gi,url:/<([a-zA-Z0-9@:%_\+.~#?&\/=]{2,256}\.[a-z]{2,4}\b(\/[\-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?)>/g,url2:/[ \t\n]([a-zA-Z]{2,16}:\/\/[a-zA-Z0-9@:%_\+.~#?&=]{2,256}.[a-z]{2,4}\b(\/[\-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?)[ \t\n]/g},codeblocks:{},parse:function(t,e){"use strict";var n,i,r,o,s,l,c,u,d,h,f,p=0,g=[],m=0,v=0,y=0,E="";for(t="\n"+t+"\n",!0!==e&&(a.regexobject.lists=/^((\s*(\*|\d\.) [^\n]+)\n)+/gm),t=t.replace("$&","&#x0024&amp;");null!==(f=a.regexobject.code.exec(t));)E=a.crc32(f[0]),a.codeblocks[E]="<code>\n"+a.htmlEncode(f[1]).replace(/\n/gm,"<br/>").replace(/\ /gm,"&nbsp;")+"</code>\n",t=t.replace(f[0]," §§§"+E+"§§§ ");for(;null!==(f=a.regexobject.headline.exec(t));)d=f[1].length,t=t.replace(f[0],"<h"+d+">"+f[2]+"</h"+d+">\n");for(;null!==(f=a.regexobject.lists.exec(t));){for(m=0,h="*"===f[0].trim().substr(0,1)||"-"===f[0].trim().substr(0,1)?"<ul>":"<ol>",l=f[0].split("\n"),c=[],i=0,s=!1,v=0;v<l.length;v++)if(null!==(n=/^((\s*)((\*|\-)|\d(\.|\))) ([^\n]+))/.exec(l[v]))){for(void 0===n[2]||0===n[2].length?p=0:(!1===s&&(s=n[2].replace(/\t/,"    ").length),p=Math.round(n[2].replace(/\t/,"    ").length/s));i>p;)h+=c.pop(),i--,m--;for(;p>i;)"*"===n[0].trim().substr(0,1)||"-"===n[0].trim().substr(0,1)?(h+="<ul>",c.push("</ul>")):(h+="<ol>",c.push("</ol>")),i++,m++;h+="<li>"+n[6]+"</li>\n"}for(;m>0;)h+="</ul>",m--;h+="*"===f[0].trim().substr(0,1)||"-"===f[0].trim().substr(0,1)?"</ul>":"</ol>",t=t.replace(f[0],h+"\n")}for(;null!==(f=a.regexobject.tables.exec(t));){for(h="<table><tr>",l=f[1].split("|"),o=f[4].split("|"),v=0;v<l.length;v++)o.length<=v?o.push(0):":"===o[v].trimRight().slice(-1)&&!0!==e?":"===o[v][0]?o[v]=3:o[v]=2:!0!==e&&":"===o[v][0]?o[v]=1:o[v]=0;for(r=["<th>",'<th align="left">','<th align="right">','<th align="center">'],v=0;v<l.length;v++)h+=r[o[v]]+l[v].trim()+"</th>";for(h+="</tr>",r=["<td>",'<td align="left">','<td align="right">','<td align="center">'],c=f[7].split("\n"),v=0;v<c.length;v++)if(0!==(u=c[v].split("|"))[0].length){for(;o.length<u.length;)o.push(0);for(h+="<tr>",y=0;y<u.length;y++)h+=r[o[y]]+u[y].trim()+"</td>";h+="</tr>\n"}h+="</table>",t=t.replace(f[0],h)}for(v=0;3>v;v++)for(;null!==(f=a.regexobject.bolditalic.exec(t));)if(h=[],"~~"===f[1])t=t.replace(f[0],"<del>"+f[2]+"</del>");else{switch(f[1].length){case 1:h=["<i>","</i>"];break;case 2:h=["<b>","</b>"];break;case 3:h=["<i><b>","</b></i>"]}t=t.replace(f[0],h[0]+f[2]+h[1])}for(;null!==(f=a.regexobject.links.exec(t));)t="!"===f[0].substr(0,1)?t.replace(f[0],'<img src="'+f[2]+'" alt="'+f[1]+'" title="'+f[1]+'" />\n'):t.replace(f[0],"<a "+a.mmdCSSclass(f[2],e)+'href="'+f[2]+'">'+f[1]+"</a>\n");for(;null!==(f=a.regexobject.mail.exec(t));)t=t.replace(f[0],'<a href="mailto:'+f[1]+'">'+f[1]+"</a>");for(;null!==(f=a.regexobject.url.exec(t));)-1===(h=f[1]).indexOf("://")&&(h="http://"+h),t=t.replace(f[0],"<a "+a.mmdCSSclass(h,e)+'href="'+h+'">'+h.replace(/(https:\/\/|http:\/\/|mailto:|ftp:\/\/)/gim,"")+"</a>");for(;null!==(f=a.regexobject.reflinks.exec(t));)null!==(l=(c=new RegExp("\\["+f[2]+"\\]: ?([^ \n]+)","gi")).exec(t))&&(t=t.replace(f[0],"<a "+a.mmdCSSclass(l[1],e)+'href="'+l[1]+'">'+f[1]+"</a>"),g.push(l[0]));for(v=0;v<g.length;v++)t=t.replace(g[v],"");for(;null!==(f=a.regexobject.smlinks.exec(t));){switch(f[2]){case"t":h="https://twitter.com/"+f[1];break;case"gh":h="https://github.com/"+f[1];break;case"fb":h="https://www.facebook.com/"+f[1];break;case"gp":h="https://plus.google.com/+"+f[1];break;case"adn":h="https://alpha.app.net/"+f[1]}t=t.replace(f[0],"<a "+a.mmdCSSclass(h,e)+'href="'+h+'">'+f[1]+"</a>")}for(;null!==(f=a.regexobject.url2.exec(t));)h=f[1],t=t.replace(f[0],"<a "+a.mmdCSSclass(h,e)+'href="'+h+'">'+h+"</a>");for(;null!==(f=a.regexobject.hr.exec(t));)t=t.replace(f[0],"\n<hr/>\n");if(!1!==a.useajax&&!0!==e)for(;null!==(f=a.regexobject.include.exec(t));)if(l=f[2].replace(/[\.\:\/]+/gm,""),c="",document.getElementById(l)?c=document.getElementById(l).innerHTML.trim():a.ajax(f[2]),"csv"===f[1]&&""!==c){for((u={";":[],"\t":[],",":[],"|":[]})[0]=[";","\t",",","|"],c=c.split("\n"),y=0;y<u[0].length;y++)for(v=0;v<c.length;v++)v>0&&!1!==u[u[0][y]]&&(u[u[0][y]][v]!==u[u[0][y]][v-1]||1===u[u[0][y]][v])&&(u[u[0][y]]=!1);if(!1!==u[";"]||!1!==u["\t"]||!1!==u[","]||!1!==u["|"]){for(!1!==u[";"]?u=";":u["\t"]?u="\t":u[","]?u=",":u["|"]&&(u="|"),h="<table>",v=0;v<c.length;v++){for(l=c[v].split(u),h+="<tr>",y=0;y<l.length;y++)h+="<td>"+a.htmlEncode(l[y])+"</td>";h+="</tr>"}h+="</table>",t=t.replace(f[0],h)}else t=t.replace(f[0],"<code>"+c.join("\n")+"</code>")}else t=t.replace(f[0],"");for(var b in t=(t=t.replace(/ {2,}[\n]{1,}/gim,"<br/>")).replace(/[\n]{2,}/gim,"<br/><br/>"),a.codeblocks)a.codeblocks.hasOwnProperty(b)&&(t=t.replace("§§§"+b+"§§§",a.codeblocks[b]));return t.replace("&#x0024&amp;","$&")},ajax:function(t){"use strict";var e;if(document.getElementById(t.replace(/[\.\:\/]+/gm,"")))return!1;if(window.ActiveXObject)try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){return e=null,t}else e=new XMLHttpRequest;e.onreadystatechange=function(){if(4===e.readyState){var n=document.createElement("code");n.innerHTML=e.responseText,n.id=t.replace(/[\.\:\/]+/gm,""),n.style.display="none",document.getElementsByTagName("body")[0].appendChild(n),a.useajax()}},e.open("GET",t,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send()},crc32:function(t){"use strict";var e,n,i=0,r=["00000000","77073096","EE0E612C","990951BA","076DC419","706AF48F","E963A535","9E6495A3","0EDB8832","79DCB8A4","E0D5E91E","97D2D988","09B64C2B","7EB17CBD","E7B82D07","90BF1D91","1DB71064","6AB020F2","F3B97148","84BE41DE","1ADAD47D","6DDDE4EB","F4D4B551","83D385C7","136C9856","646BA8C0","FD62F97A","8A65C9EC","14015C4F","63066CD9","FA0F3D63","8D080DF5","3B6E20C8","4C69105E","D56041E4","A2677172","3C03E4D1","4B04D447","D20D85FD","A50AB56B","35B5A8FA","42B2986C","DBBBC9D6","ACBCF940","32D86CE3","45DF5C75","DCD60DCF","ABD13D59","26D930AC","51DE003A","C8D75180","BFD06116","21B4F4B5","56B3C423","CFBA9599","B8BDA50F","2802B89E","5F058808","C60CD9B2","B10BE924","2F6F7C87","58684C11","C1611DAB","B6662D3D","76DC4190","01DB7106","98D220BC","EFD5102A","71B18589","06B6B51F","9FBFE4A5","E8B8D433","7807C9A2","0F00F934","9609A88E","E10E9818","7F6A0DBB","086D3D2D","91646C97","E6635C01","6B6B51F4","1C6C6162","856530D8","F262004E","6C0695ED","1B01A57B","8208F4C1","F50FC457","65B0D9C6","12B7E950","8BBEB8EA","FCB9887C","62DD1DDF","15DA2D49","8CD37CF3","FBD44C65","4DB26158","3AB551CE","A3BC0074","D4BB30E2","4ADFA541","3DD895D7","A4D1C46D","D3D6F4FB","4369E96A","346ED9FC","AD678846","DA60B8D0","44042D73","33031DE5","AA0A4C5F","DD0D7CC9","5005713C","270241AA","BE0B1010","C90C2086","5768B525","206F85B3","B966D409","CE61E49F","5EDEF90E","29D9C998","B0D09822","C7D7A8B4","59B33D17","2EB40D81","B7BD5C3B","C0BA6CAD","EDB88320","9ABFB3B6","03B6E20C","74B1D29A","EAD54739","9DD277AF","04DB2615","73DC1683","E3630B12","94643B84","0D6D6A3E","7A6A5AA8","E40ECF0B","9309FF9D","0A00AE27","7D079EB1","F00F9344","8708A3D2","1E01F268","6906C2FE","F762575D","806567CB","196C3671","6E6B06E7","FED41B76","89D32BE0","10DA7A5A","67DD4ACC","F9B9DF6F","8EBEEFF9","17B7BE43","60B08ED5","D6D6A3E8","A1D1937E","38D8C2C4","4FDFF252","D1BB67F1","A6BC5767","3FB506DD","48B2364B","D80D2BDA","AF0A1B4C","36034AF6","41047A60","DF60EFC3","A867DF55","316E8EEF","4669BE79","CB61B38C","BC66831A","256FD2A0","5268E236","CC0C7795","BB0B4703","220216B9","5505262F","C5BA3BBE","B2BD0B28","2BB45A92","5CB36A04","C2D7FFA7","B5D0CF31","2CD99E8B","5BDEAE1D","9B64C2B0","EC63F226","756AA39C","026D930A","9C0906A9","EB0E363F","72076785","05005713","95BF4A82","E2B87A14","7BB12BAE","0CB61B38","92D28E9B","E5D5BE0D","7CDCEFB7","0BDBDF21","86D3D2D4","F1D4E242","68DDB3F8","1FDA836E","81BE16CD","F6B9265B","6FB077E1","18B74777","88085AE6","FF0F6A70","66063BCA","11010B5C","8F659EFF","F862AE69","616BFFD3","166CCF45","A00AE278","D70DD2EE","4E048354","3903B3C2","A7672661","D06016F7","4969474D","3E6E77DB","AED16A4A","D9D65ADC","40DF0B66","37D83BF0","A9BCAE53","DEBB9EC5","47B2CF7F","30B5FFE9","BDBDF21C","CABAC28A","53B39330","24B4A3A6","BAD03605","CDD70693","54DE5729","23D967BF","B3667A2E","C4614AB8","5D681B02","2A6F2B94","B40BBE37","C30C8EA1","5A05DF1B","2D02EF8D"];for(n=t.length,i^=-1,e=0;n>e;e++)i=i>>>8^"0x"+r[255&(i^t.charCodeAt(e))];return-1^i},countingChars:function(t,e){"use strict";return"object"==typeof(t=t.split(e))?t.length-1:0},htmlEncode:function(t){"use strict";var e=document.createElement("div");return e.appendChild(document.createTextNode(t)),t=e.innerHTML,e=void 0,t},mmdCSSclass:function(t,e){"use strict";var n;return-1!==t.indexOf("/")&&!0!==e?'class="mmd_'+(n=0===(n=t.split("/"))[1].length?n[2].split("."):n[0].split("."))[n.length-2].replace(/[^\w\d]/g,"")+n[n.length-1]+'" ':""}};!function(n,s){"use strict";r=[],void 0===(o="function"==typeof(i=function(){return a})?i.apply(e,r):i)||(t.exports=o)}(),org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.help",ver:"1.0",displayName:"Help",author:"Sunil A S",title:"Help Plugin",description:"",publishedDate:"",editor:{main:"editor/plugin.js",dependencies:[{type:"js",src:"editor/libs/micromarkdown.min.js"}],sidebarMenu:[{id:"help",type:"icon",toolTip:"Help",title:"Help",iconClass:"help icon",templateURL:"editor/partials/sidebarHelpTemplate.html"}]}},org.ekstep.contenteditor.basePlugin.extend({type:"help",initialize:function(){org.ekstep.contenteditor.api.addEventListener("sidebar:help",this.showHelpTab,this),org.ekstep.contenteditor.api.addEventListener("object:selected",this.showHelpTab,this),org.ekstep.contenteditor.api.addEventListener("object:unselected",this.showHelpTab,this)},showHelpTab:function(){org.ekstep.contenteditor.api.getCurrentObject()?org.ekstep.contenteditor.api.getCurrentObject().getHelp(function(t){org.ekstep.contenteditor.api.jQuery("#pluginHelpContent").html(a.parse(t))}):org.ekstep.contenteditor.api.getCurrentStage().getHelp(function(t){org.ekstep.contenteditor.api.jQuery("#pluginHelpContent").html(a.parse(t))})}}))},function(t,e){org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.editorstate",ver:"1.0",shortId:"editorstate",author:"Sunil A S",title:"Editor State",description:"",publishedDate:"",editor:{main:"editor/plugin.js"}},org.ekstep.contenteditor.basePlugin.extend({extPluginsList:[],state:{plugin:{},stage:{},sidebar:{}},initialize:function(){var t=this;ecEditor.addEventListener("content:before:save",function(){ecEditor.dispatchEvent(t.manifest.id+":state",t.getEditorState(),t)},this),ecEditor.addEventListener("content:load:complete",this.setEditorState,this),ecEditor.addEventListener("plugin:load",function(e,n){t.extPluginsList.push({plugin:n.plugin,version:n.version})})},getEditorState:function(){return this.state.plugin={noOfExtPlugins:this.extPluginsList.length,extPlugins:this.extPluginsList},this.state.stage={noOfStages:ecEditor.getAllStages().length,currentStage:ecEditor.getCurrentStage().id,selectedPluginObject:ecEditor.getCurrentObject().id||void 0},this.state.sidebar={selectedMenu:ecEditor.getCurrentSidebarMenu()},this.state},setEditorState:function(){this.setStageState(),this.setPluginState(),this.setSidebarState()},_getStateFromService:function(){if(ecEditor.getService(ServiceConstants.CONTENT_SERVICE).getContentMeta(ecEditor.getContext("contentId")).editorState)return JSON.parse(ecEditor.getService(ServiceConstants.CONTENT_SERVICE).getContentMeta(ecEditor.getContext("contentId")).editorState)},setStageState:function(){var t=this._getStateFromService();t&&t.stage?(ecEditor.dispatchEvent("stage:select",{stageId:t.stage.currentStage}),t.stage.selectedPluginObject&&_.forEach(ecEditor.getStage(t.stage.currentStage).children,function(e){e.id===t.stage.selectedPluginObject&&ecEditor.getCurrentStage().canvas.setActiveObject(e.editorObj)})):ecEditor.dispatchEvent("stage:select",{stageId:ecEditor.getAllStages()[0].id})},setPluginState:function(){var t=this._getStateFromService();t&&t.plugin&&t.plugin.extPlugins.forEach(function(t){ecEditor.loadPlugin(t.plugin,t.version)})},setSidebarState:function(){var t=this._getStateFromService();t&&t.sidebar?ecEditor.showSidebarMenu(t.sidebar.selectedMenu):ecEditor.showSidebarMenu("settings")}}))},function(t,e){org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.contenteditorfunctions",ver:"1.2",author:"Sunil A S",description:"",publishedDate:"",editor:{main:"editor/plugin.js",dependencies:[{type:"plugin",plugin:"org.ekstep.toaster",ver:"1.0"}]}},org.ekstep.contenteditor.basePlugin.extend({editorState:void 0,telemetryService:org.ekstep.contenteditor.api.getService(ServiceConstants.TELEMETRY_SERVICE),lastSaved:void 0,popUpValues:{},isSaveNotificationPopupOpened:!1,contentService:org.ekstep.contenteditor.api.getService(ServiceConstants.CONTENT_SERVICE),popupService:org.ekstep.contenteditor.api.getService(ServiceConstants.POPUP_SERVICE),conflictdialogOptions:{showPlatformPreview:!1},initialize:function(){var t=this;ecEditor.addEventListener("org.ekstep.editorstate:state",this.setEditorState,this),ecEditor.addEventListener("org.ekstep.contenteditor:save",this.resolveSaveFn,this),ecEditor.addEventListener("org.ekstep.contenteditor:save:meta",this.saveMetadata,this),ecEditor.addEventListener("org.ekstep.contenteditor:preview",function(e,n){t.previewContent(n.fromBeginning)},this),ecEditor.addEventListener("org.ekstep.contenteditor:save:force",this.saveBrowserContent,this),ecEditor.addEventListener("org.ekstep.contenteditor:review",this.reviewContent,this),ecEditor.addEventListener("org.ekstep.contenteditor:publish",this.publishContent,this),ecEditor.addEventListener("org.ekstep.contenteditor:reject",this.rejectContent,this),ecEditor.addEventListener("org.ekstep.contenteditor:acceptFlag",this.acceptContentFlag,this),ecEditor.addEventListener("org.ekstep.contenteditor:discardFlag",this.discardContentFlag,this),ecEditor.addEventListener("org.ekstep.contenteditor:retire",this.retireContent,this),ecEditor.addEventListener("org.ekstep.contenteditor:unlistedPublish",this.unlistedPublishContent,this)},setEditorState:function(t,e){e&&(this.editorState=e)},reviewContent:function(t,e){var n=ecEditor.getContext("contentId");ecEditor.getService(ServiceConstants.CONTENT_SERVICE).sendForReview({contentId:n,channel:ecEditor.getContext("channel")},function(t,n){n&&n.data&&"OK"==n.data.responseCode?ecEditor.dispatchEvent("org.ekstep.toaster:success",{title:"Content sent for review...",position:"topCenter",icon:"fa fa-check-circle"}):ecEditor.dispatchEvent("org.ekstep.toaster:error",{message:"Sending for review failed, please try again later...",position:"topCenter",icon:"fa fa-warning"}),e&&e(t,n)})},resolveSaveFn:function(t,e){switch(ecEditor.getService(ServiceConstants.CONTENT_SERVICE).getContentMeta(ecEditor.getContext("contentId")).mimeType){case"application/vnd.ekstep.ecml-archive":this.saveContent(t,e),this.conflictdialogOptions.showPlatformPreview=!0;break;case"application/vnd.ekstep.content-collection":this.saveCollectionContent(t,e);break;case"application/vnd.ekstep.html-archive":case"application/vnd.ekstep.h5p-archive":case"application/epub":case"video/mp4":case"application/pdf":case"video/x-youtube":case"video/webm":case"text/x-url":this.saveGenericEditorContent(t,e);break;default:e.callback&&e.callback("unable to resolve save call for the mimetype")}},saveGenericEditorContent:function(t,e){var n=ecEditor._.assign({savingPopup:!0,successPopup:!0,failPopup:!0},e);n.savingPopup&&this.saveNotification("saving"),this._patchContent(e,e.body,n)},saveContent:function(t,e){console.log("Save invoked:",t,e),(e=ecEditor._.assign({savingPopup:!0,successPopup:!0,failPopup:!0,callback:function(){}},e)).savingPopup&&this.saveNotification("saving");var n={};e.contentMeta&&(n=e.contentMeta),n.stageIcons=JSON.stringify(org.ekstep.contenteditor.stageManager.getStageIcons()),org.ekstep.pluginframework.eventManager.dispatchEvent("content:before:save");var i=org.ekstep.contenteditor.stageManager.toECML(),r=org.ekstep.contenteditor.stageManager.getSummary();if(r){n.totalQuestions=r.totalQuestions,n.totalScore=r.totalScore;var o=ecEditor.getService(ServiceConstants.CONTENT_SERVICE).getContentMeta(ecEditor.getContext("contentId"));ecEditor._.isEqual(ecEditor._.map(r.questions,"identifier").sort(),ecEditor._.map(o.questions,"identifier").sort())||(n.questions=r.questions)}n.editorState=JSON.stringify(this.editorState),n.pragma=org.ekstep.contenteditor.stageManager.getPragma(),this._patchContent(n,i,e)},_patchContent:function(t,e,n){var i=this;t&&(t=JSON.parse(angular.toJson(t))),this.patchContent(t,e,function(t,e){if(t)e&&!ecEditor._.isUndefined(e.responseJSON)?"ERR_STALE_VERSION_KEY"==e.responseJSON.params.err?i.showConflictDialog(n):i.changePopupValues("error"):n&&n.failPopup&&(n.savingPopup||i.saveNotification(),i.changePopupValues("error"));else if(e&&"OK"==e.data.responseCode){if("application/vnd.ekstep.content-collection"===ecEditor.getService(ServiceConstants.CONTENT_SERVICE).getContentMeta(ecEditor.getContext("contentId")).mimeType&&org.ekstep.services.stateService.state.dialCodeMap){var r=_.get(org.ekstep.services.stateService.state.dialCodeMap,ecEditor.getContext("contentId"));_.isUndefined(r)||(i.dialcodeLink([{dialcode:r,identifier:ecEditor.getContext("contentId")}]),i.storeDialCodes(ecEditor.getContext("contentId"),r),_.unset(org.ekstep.services.stateService.state.dialCodeMap,ecEditor.getContext("contentId")))}n&&n.successPopup&&(n.savingPopup||i.saveNotification(),i.changePopupValues("success")),ecEditor.dispatchEvent("org.ekstep.contenteditor:after-save",{})}"function"==typeof n.callback&&n.callback(t,e)},n)},saveBrowserContent:function(t,e){var n=this;this.fetchPlatformContentVersionKey(function(i){n.resolveSaveFn(t,e)})},patchContent:function(t,e,n,i){var r=this;org.ekstep.contenteditor.migration&&org.ekstep.contenteditor.migration.isMigratedContent()?(t||(t={}),t.oldContentBody=org.ekstep.contenteditor.migration.getBackupContent(),r.showMigratedContentSaveDialog(function(o,a){a&&r.contentService.saveContent(org.ekstep.contenteditor.api.getContext("contentId"),t,e,n),o&&i&&i.callback("save action interrupted by user")})):r.contentService.saveContent(org.ekstep.contenteditor.api.getContext("contentId"),t,e,n)},saveMetadata:function(t,e){this._patchContent(e.contentMeta,void 0,e)},showMigratedContentSaveDialog:function(t){var e=this;this.popupService.open({template:ecEditor.resolvePluginResource(e.manifest.id,e.manifest.ver,"editor/partials/migratedContentSaveMsg.html"),controller:["$scope",function(n){n.saveContent=function(){org.ekstep.contenteditor.migration.clearMigrationFlag(),t(void 0,!0)},n.enableSaveBtn=function(){e.saveBtnEnabled=!0,t(!0,void 0)}}],showClose:!1,closeByDocument:!1,closeByEscape:!1})},saveNotification:function(t){var e=this,n={template:ecEditor.resolvePluginResource(e.manifest.id,e.manifest.ver,"editor/partials/saveMessage.html"),controller:["$scope",function(t){t.popUpValues=e.popUpValues,t.$on("ngDialog.opened",function(t,n){e.isSaveNotificationPopupOpened=!0})}],showClose:!1,closeByEscape:!1,closeByDocument:!1};console.log("config",n),this.changePopupValues(t),e.isSaveNotificationPopupOpened||this.popupService.open(n,function(){e.isSaveNotificationPopupOpened=!1})},changePopupValues:function(t){"success"===t?(this.popUpValues.headerMsg="Content Saved!",this.popUpValues.popUpIcon="circle check green",this.popUpValues.showCloseButton=!0,this.popUpValues.saveNotificationCloseButton="saveSuccessNotificationCloseButton"):"error"===t&&(this.popUpValues.headerMsg="Failed to save Content",this.popUpValues.popUpIcon="circle remove red",this.popUpValues.showCloseButton=!0,this.popUpValues.saveNotificationCloseButton="saveFailNotificationCloseButton"),"saving"===t&&(this.popUpValues.headerMsg="Saving content please wait...",this.popUpValues.showCloseButton=!1)},showConflictDialog:function(t){var e=this;this.popupService.open({template:ecEditor.resolvePluginResource(e.manifest.id,e.manifest.ver,"editor/partials/conflictDialog.html"),controller:["$scope",function(n){n.showPlatformPreview=!1,e.conflictdialogOptions.showPlatformPreview&&(n.showPlatformPreview=!0),n.previewPlatformContent=function(){e.previewPlatformContent()},n.saveBrowserContent=function(){e.saveBrowserContent(void 0,t),n.closeThisDialog()},n.previewContent=function(){e.previewContent()},n.refreshContent=function(){e.refreshContent()},n.firetelemetry=function(t,n){e.telemetryService.interact({type:"click",subtype:"popup",target:n,pluginid:"org.ekstep.contenteditorfunctions",pluginver:"1.2",objectid:t.id,stage:ecEditor.getCurrentStage().id})},n.showAdvancedOption=!1}],className:"ngdialog-theme-plain header-conflict-dialog",showClose:!1,closeByDocument:!0,closeByEscape:!0})},previewContent:function(t){var e=!!_.isUndefined(t);org.ekstep.pluginframework.eventManager.dispatchEvent("atpreview:show",{contentBody:org.ekstep.contenteditor.stageManager.toECML(),currentStage:e})},refreshContent:function(){location.reload()},previewPlatformContent:function(){this.fetchPlatformContentBody(function(t){org.ekstep.pluginframework.eventManager.dispatchEvent("atpreview:show",{contentBody:t,currentStage:!0})})},fetchPlatformContentVersionKey:function(t){org.ekstep.contenteditor.api.getService(ServiceConstants.CONTENT_SERVICE).getContentVersionKey(org.ekstep.contenteditor.api.getContext("contentId"),function(e,n){e&&alert("Failed to get updated version key. Please report an issue."),n.versionKey&&t(n)})},fetchPlatformContentBody:function(t){org.ekstep.contenteditor.api.getService(ServiceConstants.CONTENT_SERVICE).getContent(org.ekstep.contenteditor.api.getContext("contentId"),function(e,n){if(e&&alert("Failed to get updated content. Please report an issue."),n&&n.body)try{var i=JSON.parse(n.body);t(i)}catch(e){alert("Failed to parse body from platform. Please report an issue.")}})},publishContent:function(t,e){var n=ecEditor.getContext("contentId");ecEditor.getService(ServiceConstants.CONTENT_SERVICE).publishContent({contentId:n,channel:ecEditor.getContext("channel"),data:e},function(t,n){n&&n.data&&"OK"==n.data.responseCode?ecEditor.dispatchEvent("org.ekstep.toaster:success",{title:"Content published successfully!",position:"topCenter",icon:"fa fa-check-circle"}):ecEditor.dispatchEvent("org.ekstep.toaster:error",{message:"Unable to publish content, try again!",position:"topCenter",icon:"fa fa-warning"}),e.callback&&e.callback(t,n)})},rejectContent:function(t,e){ecEditor.getService(ServiceConstants.CONTENT_SERVICE).rejectContent({contentId:ecEditor.getContext("contentId"),channel:ecEditor.getContext("channel"),data:e},function(t,n){n&&n.data&&"OK"==n.data.responseCode?ecEditor.dispatchEvent("org.ekstep.toaster:success",{title:"Content rejected successfully!",position:"topCenter",icon:"fa fa-check-circle"}):ecEditor.dispatchEvent("org.ekstep.toaster:error",{message:"Unable to reject content, try again!",position:"topCenter",icon:"fa fa-warning"}),e.callback&&e.callback(t,n)})},acceptContentFlag:function(t,e){ecEditor.getService(ServiceConstants.CONTENT_SERVICE).acceptContentFlag({contentId:ecEditor.getContext("contentId")},function(t,n){n&&n.data&&"OK"==n.data.responseCode?ecEditor.dispatchEvent("org.ekstep.toaster:success",{title:"Content flag accepted successfully!",position:"topCenter",icon:"fa fa-check-circle"}):ecEditor.dispatchEvent("org.ekstep.toaster:error",{message:"Unable to accept content flag, try again!",position:"topCenter",icon:"fa fa-warning"}),e.callback&&e.callback(t,n)})},discardContentFlag:function(t,e){ecEditor.getService(ServiceConstants.CONTENT_SERVICE).discardContentFlag({contentId:ecEditor.getContext("contentId")},function(t,n){n&&n.data&&"OK"==n.data.responseCode?ecEditor.dispatchEvent("org.ekstep.toaster:success",{title:"Content flag discarded successfully!",position:"topCenter",icon:"fa fa-check-circle"}):ecEditor.dispatchEvent("org.ekstep.toaster:error",{message:"Unable to discard content flag, try again!",position:"topCenter",icon:"fa fa-warning"}),e.callback&&e.callback(t,n)})},retireContent:function(t,e){ecEditor.getService(ServiceConstants.CONTENT_SERVICE).retireContent({contentId:ecEditor.getContext("contentId")},function(t,n){n&&n.data&&"OK"==n.data.responseCode?ecEditor.dispatchEvent("org.ekstep.toaster:success",{title:"Content retired successfully!",position:"topCenter",icon:"fa fa-check-circle"}):ecEditor.dispatchEvent("org.ekstep.toaster:error",{message:"Unable to retire content, try again!",position:"topCenter",icon:"fa fa-warning"}),e.callback&&e.callback(t,n)})},saveCollectionContent:function(t,e){e=e||{};var n,i=this,r={validNodes:[],invalidNodes:[]},o=org.ekstep.collectioneditor.api.getService("collection").getCollectionHierarchy();if(o&&(o=JSON.parse(angular.toJson(o))),console.log("contentBody",o),n=["name","contentType","mimeType"],ecEditor._.forIn(org.ekstep.collectioneditor.cache.nodesModified,function(t,e){n.forEach(function(n){t.metadata.hasOwnProperty(n)&&t.metadata[n]?r.validNodes.push(e):r.invalidNodes.push(e)})}),this.lowlightNode(r.validNodes),0<_.size(r.invalidNodes))return e.showNotification&&ecEditor.dispatchEvent("org.ekstep.toaster:error",{message:"Please update the collection details before save",position:"topCenter",icon:"fa fa-warning"}),this.hightlightNode(r.invalidNodes),e.callback&&e.callback("mandatory fields are missing in the data!"),!1;ecEditor.getService(ServiceConstants.CONTENT_SERVICE).saveCollectionHierarchy({body:o},function(t,n){n&&n.data&&"OK"==n.data.responseCode?(e.showNotification&&ecEditor.dispatchEvent("org.ekstep.toaster:success",{title:"Content saved successfully!",position:"topCenter",icon:"fa fa-check-circle"}),org.ekstep.collectioneditor.api.getService("collection").clearCache(),ecEditor._.forIn(n.data.result.identifiers,function(t,e){var n=ecEditor.getService(ServiceConstants.COLLECTION_SERVICE).getNodeById(e);n&&(n.data.id=t)}),i.highlightNodeForInvalidDialCode(n),ecEditor.dispatchEvent("meta:after:save",{})):t&&401===n.status&&"Unauthorized"===n.statusText?e.showNotification&&ecEditor.dispatchEvent("org.ekstep.toaster:error",{message:"Your session has timed out due to inactivity. Please login to resume!",position:"topCenter",icon:"fa fa-warning"}):e.showNotification&&ecEditor.dispatchEvent("org.ekstep.toaster:error",{message:"Unable to save the content, try again!",position:"topCenter",icon:"fa fa-warning"}),e.callback&&e.callback(t,n)})},highlightNodeForInvalidDialCode:function(t){var e=this,n=[];ecEditor._.forEach(org.ekstep.services.stateService.state.invaliddialCodeMap,function(n,i){_.has(t.data.result.identifiers,i)?(delete org.ekstep.services.stateService.state.invaliddialCodeMap[i],org.ekstep.services.stateService.setState("invaliddialCodeMap",t.data.result.identifiers[i],n),org.ekstep.services.collectionService.highlightNode(t.data.result.identifiers[i]),e.storeDialCodes(t.data.result.identifiers[i],n)):(e.storeDialCodes(i,n),org.ekstep.services.collectionService.highlightNode(i))}),ecEditor._.forEach(org.ekstep.services.stateService.state.dialCodeMap,function(i,r){_.has(t.data.result.identifiers,r)?(delete org.ekstep.services.stateService.state.dialCodeMap[r],org.ekstep.services.stateService.setState("dialCodeMap",t.data.result.identifiers[r],i),n.push({identifier:t.data.result.identifiers[r],dialcode:i}),org.ekstep.services.collectionService.lowLightNode(t.data.result.identifiers[r]),e.storeDialCodes(t.data.result.identifiers[r],i)):(n.push({identifier:r,dialcode:i}),org.ekstep.services.collectionService.lowLightNode(r),e.storeDialCodes(r,i))}),e.dialcodeLink(n)},dialcodeLink:function(t){if(_.isEmpty(t))ecEditor._.isEmpty(org.ekstep.services.stateService.state.invaliddialCodeMap)||ecEditor.dispatchEvent("org.ekstep.toaster:warning",{title:"Unable to update some of the DIAL codes.",position:"topCenter",icon:"fa fa-warning"});else{var e={request:{content:t}};ecEditor.getService("dialcode").dialcodeLink(ecEditor.getContext("channel"),e,function(t,e){t?ecEditor.dispatchEvent("org.ekstep.toaster:error",{title:"DIAL code(s) updating failed!",position:"topCenter",icon:"fa fa-warning"}):ecEditor._.isEmpty(org.ekstep.services.stateService.state.dialCodeMap)||ecEditor._.isEmpty(org.ekstep.services.stateService.state.invaliddialCodeMap)?ecEditor.dispatchEvent("org.ekstep.toaster:success",{title:"DIAL code(s) updated successfully!",position:"topCenter",icon:"fa fa-check-circle"}):ecEditor.dispatchEvent("org.ekstep.toaster:warning",{title:"Unable to update some of the DIAL codes.",position:"topCenter",icon:"fa fa-warning"})})}},storeDialCodes:function(t,e){var n=ecEditor.getService(ServiceConstants.COLLECTION_SERVICE).getNodeById(t);n&&n.data&&(n.data.metadata.dialcodes=e)},hightlightNode:function(t){_.forEach(_.omitBy(_.uniq(t),_.isEmpty),function(t){org.ekstep.services.collectionService.highlightNode(t)})},lowlightNode:function(t){_.forEach(_.omitBy(_.uniq(t),_.isEmpty),function(t){org.ekstep.services.collectionService.lowLightNode(t)})},unlistedPublishContent:function(t,e){var n=ecEditor.getContext("contentId");ecEditor.getService(ServiceConstants.CONTENT_SERVICE).unlistedPublishContent({contentId:n},function(t,n){n&&n.data&&"OK"==n.data.responseCode?ecEditor.dispatchEvent("org.ekstep.toaster:success",{title:"Content limited shared successfully!",position:"topCenter",icon:"fa fa-check-circle"}):ecEditor.dispatchEvent("org.ekstep.toaster:error",{message:"Unable to share content, try again!",position:"topCenter",icon:"fa fa-warning"}),e.callback&&e.callback(t,n)})}}))},function(t,e,n){org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.keyboardshortcuts",ver:"1.0",author:"Akash Gupta",editor:{main:"editor/plugin.js",views:[{template:"./templates/shortcutspopup.html",controller:""}]}},org.ekstep.contenteditor.basePlugin.extend({type:"shortcuts",isPopupOpen:!1,events:{copyElem:"copy:copyItem",pasteElem:"paste:pasteItem",deleteElem:"delete:invoke",createStage:"stage:create",duplicateStage:"stage:duplicate",saveContent:"org.ekstep.contenteditor:save",selectStage:"stage:select",sendToBack:"reorder:sendback",sendToFront:"reorder:bringfront"},initialize:function(){var t=this,e=ecEditor.resolvePluginResource(t.manifest.id,t.manifest.ver,"editor/templates/shortcutspopup.html");ecEditor.getService("popup").loadNgModules(n(68),void 0,!0),ecEditor.registerKeyboardCommand("mod+c",function(e){e.preventDefault(),ecEditor.dispatchEvent(t.events.copyElem)}),ecEditor.registerKeyboardCommand("mod+v",function(e){e.preventDefault(),ecEditor.dispatchEvent(t.events.pasteElem),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()})}),ecEditor.registerKeyboardCommand(["del","backspace"],function(e){e.preventDefault(),ecEditor.dispatchEvent(t.events.deleteElem),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()})}),ecEditor.registerKeyboardCommand("ctrl+m",function(e){e.preventDefault(),ecEditor.dispatchEvent(t.events.createStage,{position:"afterCurrent"}),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()})}),ecEditor.registerKeyboardCommand("mod+d",function(e){e.preventDefault(),ecEditor.dispatchEvent(t.events.duplicateStage,{stageId:org.ekstep.contenteditor.api.getCurrentStage().id}),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()})}),ecEditor.registerKeyboardCommand("mod+x",function(e){e.preventDefault(),ecEditor.dispatchEvent(t.events.copyElem),ecEditor.dispatchEvent(t.events.deleteElem)}),ecEditor.registerKeyboardCommand("mod+a",function(t){t.preventDefault();var e=org.ekstep.contenteditor.api.getCanvas();e.deactivateAll();var n=e.getObjects().map(function(t){return t.set("active",!0)}),i=new fabric.Group(n,{originX:"left",originY:"top"});e.setActiveGroup(i.setCoords()).renderAll()}),org.ekstep.contenteditor.api.getCanvas().on("object:moving",t.moveRichText),ecEditor.registerKeyboardCommand("mod+s",function(e){e.preventDefault(),ecEditor.dispatchEvent(t.events.saveContent)}),ecEditor.registerKeyboardCommand("mod+/",function(n){n.preventDefault(),t.isPopupOpen||ecEditor.getService("popup").open({templateUrl:e,controller:["$scope",function(e){e.$on("ngDialog.opened",function(e,n){t.isPopupOpen=!0})}],width:900,showClose:!0,className:"ngdialog-theme-default"},function(){t.isPopupOpen=!1})}),ecEditor.registerKeyboardCommand(["home","command+up"],function(e){e.preventDefault(),ecEditor.dispatchEvent(t.events.selectStage,{prevStageId:org.ekstep.contenteditor.api.getCurrentStage().id,stageId:org.ekstep.contenteditor.api.getAllStages()[0].id})}),ecEditor.registerKeyboardCommand(["end","command+down"],function(e){e.preventDefault(),ecEditor.dispatchEvent(t.events.selectStage,{prevStageId:org.ekstep.contenteditor.api.getCurrentStage().id,stageId:org.ekstep.contenteditor.stageManager.stages[org.ekstep.contenteditor.stageManager.stages.length-1].id})}),ecEditor.registerKeyboardCommand("mod+b",function(t){var e=org.ekstep.contenteditor.api.getCurrentObject();e&&(t.preventDefault(),e.onConfigChange("fontweight","bold"),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()}))}),ecEditor.registerKeyboardCommand("mod+i",function(t){var e=org.ekstep.contenteditor.api.getCurrentObject();e&&(t.preventDefault(),e.onConfigChange("fontstyle","italic"),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()}))}),ecEditor.registerKeyboardCommand("mod+shift+.",function(t){var e=org.ekstep.contenteditor.api.getCurrentObject();if(e){t.preventDefault();var n=e.getConfig().fontsize;n=parseInt(n,10),e.onConfigChange("fontsize",n+1),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()})}}),ecEditor.registerKeyboardCommand("mod+shift+,",function(t){var e=org.ekstep.contenteditor.api.getCurrentObject();if(e){t.preventDefault();var n=e.getConfig().fontsize;n=parseInt(n,10),e.onConfigChange("fontsize",n-1),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()})}}),ecEditor.registerKeyboardCommand("mod+alt+shift+l",function(t){var e=org.ekstep.contenteditor.api.getCurrentObject();e&&(t.preventDefault(),e.onConfigChange("align","left"),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()}))}),ecEditor.registerKeyboardCommand("mod+alt+shift+r",function(t){var e=org.ekstep.contenteditor.api.getCurrentObject();e&&(t.preventDefault(),e.onConfigChange("align","right"),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()}))}),ecEditor.registerKeyboardCommand("mod+alt+shift+e",function(t){var e=org.ekstep.contenteditor.api.getCurrentObject();e&&(t.preventDefault(),e.onConfigChange("align","center"),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()}))}),ecEditor.registerKeyboardCommand("mod+down",function(e){e.preventDefault(),ecEditor.dispatchEvent(t.events.sendToBack),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()})}),ecEditor.registerKeyboardCommand("mod+up",function(e){e.preventDefault(),ecEditor.dispatchEvent(t.events.sendToFront),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()})}),ecEditor.registerKeyboardCommand("up",function(t){var e=org.ekstep.contenteditor.api.getCurrentObject(),n=org.ekstep.contenteditor.api.getEditorGroup();if(n)t.preventDefault(),_.each(org.ekstep.contenteditor.api.getCurrentGroup(),function(t){var e=ecEditor.jQuery("#"+t.id);0!=e.length&&(e[0].style.top=parseInt(e[0].style.top,10)-3+"px"),t.setAttribute("y",t.attributes.y-3)}),n.top=n.top-3,org.ekstep.contenteditor.api.render(),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()});else if(e){t.preventDefault();var i=ecEditor.jQuery("#"+e.id);0!=i.length&&(i[0].style.top=parseInt(i[0].style.top,10)-3+"px"),e.editorObj.top=e.editorObj.top-3,e.setAttribute("y",e.editorObj.top),org.ekstep.contenteditor.api.render(),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()})}}),ecEditor.registerKeyboardCommand("down",function(t){var e=org.ekstep.contenteditor.api.getCurrentObject(),n=org.ekstep.contenteditor.api.getEditorGroup();if(n)t.preventDefault(),_.each(org.ekstep.contenteditor.api.getCurrentGroup(),function(t){var e=ecEditor.jQuery("#"+t.id);0!=e.length&&(e[0].style.top=parseInt(e[0].style.top,10)+3+"px"),t.setAttribute("y",t.attributes.y+3)}),n.top=n.top+3,org.ekstep.contenteditor.api.render(),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()});else if(e){t.preventDefault();var i=ecEditor.jQuery("#"+e.id);0!=i.length&&(i[0].style.top=parseInt(i[0].style.top,10)+3+"px"),e.editorObj.top=e.editorObj.top+3,e.setAttribute("y",e.editorObj.top),org.ekstep.contenteditor.api.render(),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()})}}),ecEditor.registerKeyboardCommand("left",function(t){var e=org.ekstep.contenteditor.api.getCurrentObject(),n=org.ekstep.contenteditor.api.getEditorGroup();if(n)t.preventDefault(),_.each(org.ekstep.contenteditor.api.getCurrentGroup(),function(t){var e=ecEditor.jQuery("#"+t.id);0!=e.length&&(e[0].style.left=parseInt(e[0].style.left,10)-3+"px"),t.setAttribute("x",t.attributes.x-3)}),n.left=n.left-3,org.ekstep.contenteditor.api.render(),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()});else if(e){t.preventDefault();var i=ecEditor.jQuery("#"+e.id);0!=i.length&&(i[0].style.left=parseInt(i[0].style.left,10)-3+"px"),e.editorObj.left=e.editorObj.left-3,e.setAttribute("x",e.editorObj.left),org.ekstep.contenteditor.api.render(),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()})}}),ecEditor.registerKeyboardCommand("right",function(t){var e=org.ekstep.contenteditor.api.getCurrentObject(),n=org.ekstep.contenteditor.api.getEditorGroup();if(n)t.preventDefault(),_.each(org.ekstep.contenteditor.api.getCurrentGroup(),function(t){var e=ecEditor.jQuery("#"+t.id);0!=e.length&&(e[0].style.left=parseInt(e[0].style.left,10)+3+"px"),t.setAttribute("x",t.attributes.x+3)}),n.left=n.left+3,org.ekstep.contenteditor.api.render(),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()});else if(e){t.preventDefault();var i=ecEditor.jQuery("#"+e.id);0!=i.length&&(i[0].style.left=parseInt(i[0].style.left,10)+3+"px"),e.editorObj.left=e.editorObj.left+3,e.setAttribute("x",e.editorObj.left),org.ekstep.contenteditor.api.render(),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()})}}),ecEditor.registerKeyboardCommand("shift+up",function(t){var e=org.ekstep.contenteditor.api.getCurrentObject(),n=org.ekstep.contenteditor.api.getEditorGroup();if(n)t.preventDefault(),_.each(org.ekstep.contenteditor.api.getCurrentGroup(),function(t){var e=ecEditor.jQuery("#"+t.id);0!=e.length&&(e[0].style.top=parseInt(e[0].style.top,10)-1+"px"),t.setAttribute("x",t.attributes.x-1)}),n.top=n.top-1,org.ekstep.contenteditor.api.render(),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()});else if(e){t.preventDefault();var i=ecEditor.jQuery("#"+e.id);0!=i.length&&(i[0].style.top=parseInt(i[0].style.top,10)-1+"px"),e.editorObj.top=e.editorObj.top-1,e.setAttribute("y",e.editorObj.top),org.ekstep.contenteditor.api.render(),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()})}}),ecEditor.registerKeyboardCommand("shift+down",function(t){var e=org.ekstep.contenteditor.api.getCurrentObject(),n=org.ekstep.contenteditor.api.getEditorGroup();if(n)t.preventDefault(),_.each(org.ekstep.contenteditor.api.getCurrentGroup(),function(t){var e=ecEditor.jQuery("#"+t.id);0!=e.length&&(e[0].style.top=parseInt(e[0].style.top,10)+1+"px"),t.setAttribute("x",t.attributes.x+1)}),n.top=n.top+1,org.ekstep.contenteditor.api.render(),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()});else if(e){t.preventDefault();var i=ecEditor.jQuery("#"+e.id);0!=i.length&&(i[0].style.top=parseInt(i[0].style.top,10)+1+"px"),e.editorObj.top=e.editorObj.top+1,e.setAttribute("y",e.editorObj.top),org.ekstep.contenteditor.api.render(),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()})}}),ecEditor.registerKeyboardCommand("shift+left",function(t){var e=org.ekstep.contenteditor.api.getCurrentObject(),n=org.ekstep.contenteditor.api.getEditorGroup();if(n)t.preventDefault(),_.each(org.ekstep.contenteditor.api.getCurrentGroup(),function(t){var e=ecEditor.jQuery("#"+t.id);0!=e.length&&(e[0].style.left=parseInt(e[0].style.left,10)-1+"px"),t.setAttribute("x",t.attributes.x-1)}),n.left=n.left-1,org.ekstep.contenteditor.api.render(),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()});else if(e){t.preventDefault();var i=ecEditor.jQuery("#"+e.id);0!=i.length&&(i[0].style.left=parseInt(i[0].style.left,10)-1+"px"),e.editorObj.left=e.editorObj.left-1,e.setAttribute("x",e.editorObj.left),org.ekstep.contenteditor.api.render(),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()})}}),ecEditor.registerKeyboardCommand("shift+right",function(t){var e=org.ekstep.contenteditor.api.getCurrentObject(),n=org.ekstep.contenteditor.api.getEditorGroup();if(n)t.preventDefault(),_.each(org.ekstep.contenteditor.api.getCurrentGroup(),function(t){var e=ecEditor.jQuery("#"+t.id);0!=e.length&&(e[0].style.left=parseInt(e[0].style.left,10)+1+"px"),t.setAttribute("x",t.attributes.x+1)}),n.left=n.left+1,org.ekstep.contenteditor.api.render(),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()});else if(e){t.preventDefault();var i=ecEditor.jQuery("#"+e.id);0!=i.length&&(i[0].style.left=parseInt(i[0].style.left,10)+1+"px"),e.editorObj.left=e.editorObj.left+1,e.setAttribute("x",e.editorObj.left),org.ekstep.contenteditor.api.render(),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()})}})},moveRichText:function(t){var e=org.ekstep.contenteditor.api.getEditorGroup();e&&_.each(e.getObjects(),function(t){0!=ecEditor.jQuery("#"+t.id).length&&ecEditor.jQuery("#"+t.id).css({top:e.top+e.height/2+t.top,left:e.left+e.width/2+t.left})})}}))},function(t,e){t.exports='<style>\n    #shortCut {\n        width: 100%;\n        overflow-y: auto;\n        overflow-x: hidden;\n        height: 450px;\n    }\n    .shortcut-table {\n        width: 100%;\n        margin-left: 3.6em;\n    }\n    .shortcut-popup {\n        height: 450px !important\n    }\n</style>\n<div class="ui large modal active" style="top: 5% !important">\n    <div class="header">\n        <div class="ui grid">\n            <div class="fourteen column row">\n                <div class="left floated five wide column">\n                    <i class="file code outline icon"></i>\n                    <label><b>Keyboard ShortCuts</b></label>\n                </div>\n                <div>\n                    <span class="right floated column"><i class="remove link icon" ng-click="closeThisDialog()"></i></span>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="content">\n        <div class="ui grid shortcut-popup">\n            <pre class="line-numbers language-markup shortcut-popup`" id="shortCut">\n                <table class="shortcut-table">\n                    <tr>\n                        <th colspan="2">ShortCuts(Windows)</th>\n                        <th colspan="2">ShortCuts(Mac)</th>\n                        <th colspan="6">Details</th>\n                    </tr>\n                    <tr>\n                        <td colspan="2">Ctrl + x</td>\n                        <td colspan="2">Command + x</td>\n                        <td colspan="6">Cut selected object</td>\n                    </tr>\n                    <tr>\n                        <td colspan="2">Ctrl + c</td>\n                        <td colspan="2">Command + c</td>\n                        <td colspan="6">Copy selected object</td>\n                    </tr>\n                    <tr>\n                        <td colspan="2">Ctrl + v</td>\n                        <td colspan="2">Command + v</td>\n                        <td colspan="6">Paste selected object</td>\n                    </tr>\n                    <tr>\n                        <td colspan="2">Ctrl + a</td>\n                        <td colspan="2">Command + a</td>\n                        <td colspan="6">Select all object</td>\n                    </tr>\n                    <tr>\n                        <td colspan="2">Delete</td>\n                        <td colspan="2">Delete</td>\n                        <td colspan="6">Delete selected object</td>\n                    </tr>\n                    <tr>\n                        <td colspan="2">Ctrl + m</td>\n                        <td colspan="2">Command + m</td>\n                        <td colspan="6">Add a new stage</td>\n                    </tr>\n                    <tr>\n                        <td colspan="2">Ctrl + d</td>\n                        <td colspan="2">Command + d</td>\n                        <td colspan="6">Duplicate a stage</td>\n                    </tr>\n                    <tr>\n                        <td colspan="2">Ctrl + s</td>\n                        <td colspan="2">Command + s</td>\n                        <td colspan="6">Save content</td>\n                    </tr>\n                    <tr>\n                        <td colspan="2">Home</td>\n                        <td colspan="2">Command + up</td>\n                        <td colspan="6">Go to First Slide</td>\n                    </tr>\n                    <tr>\n                        <td colspan="2">End</td>\n                        <td colspan="2">Command + down</td>\n                        <td colspan="6">Go to last Slide</td>\n                    </tr>\n                    <tr>\n                        <td colspan="2">Ctrl + b</td>\n                        <td colspan="2">Command + b</td>\n                        <td colspan="6">Make text style as bold</td>\n                    </tr>\n                    <tr>\n                        <td colspan="2">Ctrl + i</td>\n                        <td colspan="2">Command + i</td>\n                        <td colspan="6">Make text style as italic</td>\n                    </tr>\n                    <tr>\n                        <td colspan="2">Ctrl + shift + ></td>\n                        <td colspan="2">Command + shift + ></td>\n                        <td colspan="6">Increase text size of selected text object</td>\n                    </tr>\n                    <tr>\n                        <td colspan="2">Ctrl + shift + <</td>\n                        <td colspan="2">Command + shift + <</td>\n                        <td colspan="6">Decrease text size of selected text object</td>\n                    </tr>\n                    <tr>\n                        <td colspan="2">Ctrl + alt + shift + l</td>\n                        <td colspan="2">Command + alt + shift + l</td>\n                        <td colspan="6">Align a text object to left</td>\n                    </tr>\n                    <tr>\n                        <td colspan="2">Ctrl + alt + shift + r</td>\n                        <td colspan="2">Command + alt + shift + r</td>\n                        <td colspan="6">Align a text object to right</td>\n                    </tr>\n                    <tr>\n                        <td colspan="2">Ctrl + alt + shift + e</td>\n                        <td colspan="2">Command + alt + shift + e</td>\n                        <td colspan="6">Align a text object to center</td>\n                    </tr>\n                    <tr>\n                        <td colspan="2">Ctrl + down arrow</td>\n                        <td colspan="2">Command + down arrow</td>\n                        <td colspan="6">Send an object to back</td>\n                    </tr>\n                    <tr>\n                        <td colspan="2">Ctrl + up arrow</td>\n                        <td colspan="2">Command + up arrow</td>\n                        <td colspan="6">Send an object to front</td>\n                    </tr>\n                    <tr>\n                        <td colspan="2">Up arrow</td>\n                        <td colspan="2">Up arrow</td>\n                        <td colspan="6">Move selected object up by 3 pixel</td>\n                    </tr>\n                    <tr>\n                        <td colspan="2">Down arrow</td>\n                        <td colspan="2">Down arrow</td>\n                        <td colspan="6">Move selected object down by 3 pixel</td>\n                    </tr>\n                    <tr>\n                        <td colspan="2">Left arrow</td>\n                        <td colspan="2">Left arrow</td>\n                        <td colspan="2">Move selected object left by 3 pixel</td>\n                    </tr>\n                    <tr>\n                        <td colspan="2">Right arrow</td>\n                        <td colspan="2">Right arrow</td>\n                        <td colspan="6">Move selected object right by 3 pixel</td>\n                    </tr>\n                    <tr>\n                        <td colspan="2">Shift + up arrow</td>\n                        <td colspan="2">Shift + up arrow</td>\n                        <td colspan="6">Move selected object up by 1 pixel</td>\n                    </tr>\n                    <tr>\n                        <td colspan="2">Shift + down arrow</td>\n                        <td colspan="2">Shift + down arrow</td>\n                        <td colspan="6">Move selected object down by 1 pixel</td>\n                    </tr>\n                    <tr>\n                        <td colspan="2">Shift + left arrow</td>\n                        <td colspan="2">Shift + left arrow</td>\n                        <td colspan="2">Move selected object left by 1 pixel</td>\n                    </tr>\n                    <tr>\n                        <td colspan="2">Shift + right arrow</td>\n                        <td colspan="2">Shift + right arrow</td>\n                        <td colspan="6">Move selected object right by 1 pixel</td>\n                    </tr>\n                    <tr>\n                        <td colspan="2">Ctrl + /</td>\n                        <td colspan="2">Command + /</td>\n                        <td colspan="6">Show keyboard shortcut popup</td>\n                    </tr>\n                </table>\n            </pre>\n        </div>\n    </div>\n</div>'},function(t,e,n){var i,r,o,a,s,l,c,u,d;window.CKEDITOR&&window.CKEDITOR.dom||(window.CKEDITOR||(window.CKEDITOR=function(){var t=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,e={timestamp:"H0CF",version:"4.6.2 (Standard)",revision:"20af917",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:t},status:"unloaded",basePath:function(){var e=window.CKEDITOR_BASEPATH||"";if(!e)for(var n=document.getElementsByTagName("script"),i=0;i<n.length;i++){var r=n[i].src.match(t);if(r){e=r[1];break}}if(-1==e.indexOf(":/")&&"//"!=e.slice(0,2)&&(e=0===e.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+e:location.href.match(/^[^\?]*\/(?:)/)[0]+e),!e)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return e}(),getUrl:function(t){return-1==t.indexOf(":/")&&0!==t.indexOf("/")&&(t=this.basePath+t),this.timestamp&&"/"!=t.charAt(t.length-1)&&!/[&?]t=/.test(t)&&(t+=(0<=t.indexOf("?")?"&":"?")+"t="+this.timestamp),t},domReady:function(){function t(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",t,!1),e()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",t),e())}catch(t){}}function e(){for(var t;t=n.shift();)t()}var n=[];return function(e){if(n.push(e),"complete"===document.readyState&&setTimeout(t,1),1==n.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",t),window.attachEvent("onload",t),e=!1;try{e=!window.frameElement}catch(t){}document.documentElement.doScroll&&e&&function e(){try{document.documentElement.doScroll("left")}catch(t){return void setTimeout(e,1)}t()}()}}}()},n=window.CKEDITOR_GETURL;if(n){var i=e.getUrl;e.getUrl=function(t){return n.call(e,t)||i.call(e,t)}}return e}()),CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(t){var e,n=CKEDITOR.event.prototype;for(e in n)null==t[e]&&(t[e]=n[e])},CKEDITOR.event.prototype=function(){function t(t){var i=e(this);return i[t]||(i[t]=new n(t))}var e=function(t){return(t=t.getPrivate&&t.getPrivate()||t._||(t._={})).events||(t.events={})},n=function(t){this.name=t,this.listeners=[]};return n.prototype={getListenerIndex:function(t){for(var e=0,n=this.listeners;e<n.length;e++)if(n[e].fn==t)return e;return-1}},{define:function(e,n){var i=t.call(this,e);CKEDITOR.tools.extend(i,n,!0)},on:function(e,n,i,r,o){function a(t,o,a,l){return t={name:e,sender:this,editor:t,data:o,listenerData:r,stop:a,cancel:l,removeListener:s},!1!==n.call(i,t)&&t.data}function s(){c.removeListener(e,n)}var l=t.call(this,e);if(0>l.getListenerIndex(n)){l=l.listeners,i||(i=this),isNaN(o)&&(o=10);var c=this;a.fn=n,a.priority=o;for(var u=l.length-1;0<=u;u--)if(l[u].priority<=o)return l.splice(u+1,0,a),{removeListener:s};l.unshift(a)}return{removeListener:s}},once:function(){var t=Array.prototype.slice.call(arguments),e=t[1];return t[1]=function(t){return t.removeListener(),e.apply(this,arguments)},this.on.apply(this,t)},capture:function(){CKEDITOR.event.useCapture=1;var t=this.on.apply(this,arguments);return CKEDITOR.event.useCapture=0,t},fire:function(){var t=0,n=function(){t=1},i=0,r=function(){i=1};return function(o,a,s){var l=e(this)[o];o=t;var c=i;if(t=i=0,l&&(d=l.listeners).length)for(var u,d=d.slice(0),h=0;h<d.length;h++){if(l.errorProof)try{u=d[h].call(this,s,a,n,r)}catch(t){}else u=d[h].call(this,s,a,n,r);if(!1===u?i=1:void 0!==u&&(a=u),t||i)break}return a=!i&&(void 0===a||a),t=o,i=c,a}}(),fireOnce:function(t,n,i){return n=this.fire(t,n,i),delete e(this)[t],n},removeListener:function(t,n){var i=e(this)[t];if(i){var r=i.getListenerIndex(n);0<=r&&i.listeners.splice(r,1)}},removeAllListeners:function(){var t,n=e(this);for(t in n)delete n[t]},hasListeners:function(t){return(t=e(this)[t])&&0<t.listeners.length}}}()),CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]),CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(t,e){return t in{instanceReady:1,loaded:1}&&(this[t]=!0),CKEDITOR.event.prototype.fire.call(this,t,e,this)},CKEDITOR.editor.prototype.fireOnce=function(t,e){return t in{instanceReady:1,loaded:1}&&(this[t]=!0),CKEDITOR.event.prototype.fireOnce.call(this,t,e,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype)),CKEDITOR.env||(CKEDITOR.env=function(){var t=navigator.userAgent.toLowerCase(),e=t.match(/edge[ \/](\d+.?\d*)/),n=-1<t.indexOf("trident/");(n={ie:n=!(!e&&!n),edge:!!e,webkit:!n&&-1<t.indexOf(" applewebkit/"),air:-1<t.indexOf(" adobeair/"),mac:-1<t.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode&&(!document.documentMode||10>document.documentMode),mobile:-1<t.indexOf("mobile"),iOS:/(ipad|iphone|ipod)/.test(t),isCustomDomain:function(){if(!this.ie)return!1;var t=document.domain,e=window.location.hostname;return t!=e&&t!="["+e+"]"},secure:"https:"==location.protocol}).gecko="Gecko"==navigator.product&&!n.webkit&&!n.ie,n.webkit&&(-1<t.indexOf("chrome")?n.chrome=!0:n.safari=!0);var i=0;return n.ie&&(i=e?parseFloat(e[1]):n.quirks||!document.documentMode?parseFloat(t.match(/msie (\d+)/)[1]):document.documentMode,n.ie9Compat=9==i,n.ie8Compat=8==i,n.ie7Compat=7==i,n.ie6Compat=7>i||n.quirks),n.gecko&&(e=t.match(/rv:([\d\.]+)/))&&(i=1e4*(e=e[1].split("."))[0]+100*(e[1]||0)+1*(e[2]||0)),n.air&&(i=parseFloat(t.match(/ adobeair\/(\d+)/)[1])),n.webkit&&(i=parseFloat(t.match(/ applewebkit\/(\d+)/)[1])),n.version=i,n.isCompatible=!(n.ie&&7>i||n.gecko&&4e4>i||n.webkit&&534>i),n.hidpi=2<=window.devicePixelRatio,n.needsBrFiller=n.gecko||n.webkit||n.ie&&10<i,n.needsNbspFiller=n.ie&&11>i,n.cssClass="cke_browser_"+(n.ie?"ie":n.gecko?"gecko":n.webkit?"webkit":"unknown"),n.quirks&&(n.cssClass+=" cke_browser_quirks"),n.ie&&(n.cssClass+=" cke_browser_ie"+(n.quirks?"6 cke_browser_iequirks":n.version)),n.air&&(n.cssClass+=" cke_browser_air"),n.iOS&&(n.cssClass+=" cke_browser_ios"),n.hidpi&&(n.cssClass+=" cke_hidpi"),n}()),"unloaded"==CKEDITOR.status&&(CKEDITOR.event.implementOn(CKEDITOR),CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var t=document.createElement("script");t.type="text/javascript",t.src=CKEDITOR.basePath+"ckeditor.js",document.getElementsByTagName("head")[0].appendChild(t)}},CKEDITOR.loadFullCoreTimeout=0,CKEDITOR.add=function(t){(this._.pending||(this._.pending=[])).push(t)},CKEDITOR.domReady(function(){var t=CKEDITOR.loadFullCore,e=CKEDITOR.loadFullCoreTimeout;t&&(CKEDITOR.status="basic_ready",t&&t._load?t():e&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},1e3*e))}),CKEDITOR.status="basic_loaded"),CKEDITOR.VERBOSITY_WARN=1,CKEDITOR.VERBOSITY_ERROR=2,CKEDITOR.verbosity=CKEDITOR.VERBOSITY_WARN|CKEDITOR.VERBOSITY_ERROR,CKEDITOR.warn=function(t,e){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_WARN&&CKEDITOR.fire("log",{type:"warn",errorCode:t,additionalData:e})},CKEDITOR.error=function(t,e){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_ERROR&&CKEDITOR.fire("log",{type:"error",errorCode:t,additionalData:e})},CKEDITOR.on("log",function(t){if(window.console&&window.console.log){var e=console[t.data.type]?t.data.type:"log",n=t.data.errorCode;(t=t.data.additionalData)?console[e]("[CKEDITOR] Error code: "+n+".",t):console[e]("[CKEDITOR] Error code: "+n+"."),console[e]("[CKEDITOR] For more information about this error go to http://docs.ckeditor.com/#!/guide/dev_errors-section-"+n)}},null,null,999),CKEDITOR.dom={},i=[],r=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",o=/&/g,a=/>/g,s=/</g,l=/"/g,c=/&(lt|gt|amp|quot|nbsp|shy|#\d{1,5});/g,u={lt:"<",gt:">",amp:"&",quot:'"',nbsp:" ",shy:"­"},d=function(t,e){return"#"==e[0]?String.fromCharCode(parseInt(e.slice(1),10)):u[e]},CKEDITOR.on("reset",function(){i=[]}),CKEDITOR.tools={arrayCompare:function(t,e){if(!t&&!e)return!0;if(!t||!e||t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0},getIndex:function(t,e){for(var n=0;n<t.length;++n)if(e(t[n]))return n;return-1},clone:function(t){var e;if(t&&t instanceof Array){e=[];for(var n=0;n<t.length;n++)e[n]=CKEDITOR.tools.clone(t[n]);return e}if(null===t||"object"!=typeof t||t instanceof String||t instanceof Number||t instanceof Boolean||t instanceof Date||t instanceof RegExp||t.nodeType||t.window===t)return t;for(n in e=new t.constructor,t)e[n]=CKEDITOR.tools.clone(t[n]);return e},capitalize:function(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())},extend:function(t){var e,n,i=arguments.length;"boolean"==typeof(e=arguments[i-1])?i--:"boolean"==typeof(e=arguments[i-2])&&(n=arguments[i-1],i-=2);for(var r=1;r<i;r++){var o,a=arguments[r];for(o in a)!0!==e&&null!=t[o]||(!n||o in n)&&(t[o]=a[o])}return t},prototypedCopy:function(t){var e=function(){};return e.prototype=t,new e},copy:function(t){var e,n={};for(e in t)n[e]=t[e];return n},isArray:function(t){return"[object Array]"==Object.prototype.toString.call(t)},isEmpty:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},cssVendorPrefix:function(t,e,n){return n?r+t+":"+e+";"+t+":"+e:((n={})[t]=e,n[r+t]=e,n)},cssStyleToDomStyle:function(){var t=document.createElement("div").style,e=void 0!==t.cssFloat?"cssFloat":void 0!==t.styleFloat?"styleFloat":"float";return function(t){return"float"==t?e:t.replace(/-./g,function(t){return t.substr(1).toUpperCase()})}}(),buildStyleHtml:function(t){t=[].concat(t);for(var e,n=[],i=0;i<t.length;i++)(e=t[i])&&(/@import|[{}]/.test(e)?n.push("<style>"+e+"</style>"):n.push('<link type="text/css" rel=stylesheet href="'+e+'">'));return n.join("")},htmlEncode:function(t){return void 0===t||null===t?"":String(t).replace(o,"&amp;").replace(a,"&gt;").replace(s,"&lt;")},htmlDecode:function(t){return t.replace(c,d)},htmlEncodeAttr:function(t){return CKEDITOR.tools.htmlEncode(t).replace(l,"&quot;")},htmlDecodeAttr:function(t){return CKEDITOR.tools.htmlDecode(t)},transformPlainTextToHtml:function(t,e){var n=e==CKEDITOR.ENTER_BR,i=(i=this.htmlEncode(t.replace(/\r\n/g,"\n"))).replace(/\t/g,"&nbsp;&nbsp; &nbsp;"),r=e==CKEDITOR.ENTER_P?"p":"div";if(!n){var o=/\n{2}/g;if(o.test(i)){var a="<"+r+">",s="</"+r+">";i=a+i.replace(o,function(){return s+a})+s}}return i=i.replace(/\n/g,"<br>"),n||(i=i.replace(new RegExp("<br>(?=</"+r+">)"),function(t){return CKEDITOR.tools.repeat(t,2)})),(i=i.replace(/^ | $/g,"&nbsp;")).replace(/(>|\s) /g,function(t,e){return e+"&nbsp;"}).replace(/ (?=<)/g,"&nbsp;")},getNextNumber:function(){var t=0;return function(){return++t}}(),getNextId:function(){return"cke_"+this.getNextNumber()},getUniqueId:function(){for(var t="e",e=0;8>e;e++)t+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return t},override:function(t,e){var n=e(t);return n.prototype=t.prototype,n},setTimeout:function(t,e,n,i,r){return r||(r=window),n||(n=r),r.setTimeout(function(){i?t.apply(n,[].concat(i)):t.apply(n)},e||0)},trim:function(){var t=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(e){return e.replace(t,"")}}(),ltrim:function(){var t=/^[ \t\n\r]+/g;return function(e){return e.replace(t,"")}}(),rtrim:function(){var t=/[ \t\n\r]+$/g;return function(e){return e.replace(t,"")}}(),indexOf:function(t,e){if("function"==typeof e){for(var n=0,i=t.length;n<i;n++)if(e(t[n]))return n}else{if(t.indexOf)return t.indexOf(e);for(n=0,i=t.length;n<i;n++)if(t[n]===e)return n}return-1},search:function(t,e){var n=CKEDITOR.tools.indexOf(t,e);return 0<=n?t[n]:null},bind:function(t,e){return function(){return t.apply(e,arguments)}},createClass:function(t){var e=t.$,n=t.base,i=t.privates||t._,r=t.proto;if(t=t.statics,!e&&(e=function(){n&&this.base.apply(this,arguments)}),i){var o=e;e=function(){var t,e=this._||(this._={});for(t in i){var n=i[t];e[t]="function"==typeof n?CKEDITOR.tools.bind(n,this):n}o.apply(this,arguments)}}return n&&(e.prototype=this.prototypedCopy(n.prototype),e.prototype.constructor=e,e.base=n,e.baseProto=n.prototype,e.prototype.base=function(){this.base=n.prototype.base,n.apply(this,arguments),this.base=arguments.callee}),r&&this.extend(e.prototype,r,!0),t&&this.extend(e,t,!0),e},addFunction:function(t,e){return i.push(function(){return t.apply(e||this,arguments)})-1},removeFunction:function(t){i[t]=null},callFunction:function(t){var e=i[t];return e&&e.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var t,e=/^-?\d+\.?\d*px$/;return function(n){return t=CKEDITOR.tools.trim(n+"")+"px",e.test(t)?t:n||""}}(),convertToPx:function(){var t;return function(e){return t||(t=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',CKEDITOR.document),CKEDITOR.document.getBody().append(t)),/%$/.test(e)?e:(t.setStyle("width",e),t.$.clientWidth)}}(),repeat:function(t,e){return Array(e+1).join(t)},tryThese:function(){for(var t,e=0,n=arguments.length;e<n;e++){var i=arguments[e];try{t=i();break}catch(t){}}return t},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(t){return function(){var e=arguments,n=this;window.setTimeout(function(){t.apply(n,e)},0)}},normalizeCssText:function(t,e){var n,i=[],r=CKEDITOR.tools.parseCssText(t,!0,e);for(n in r)i.push(n+":"+r[n]);return i.sort(),i.length?i.join(";")+";":""},convertRgbToHex:function(t){return t.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(t,e,n,i){for(t=[e,n,i],e=0;3>e;e++)t[e]=("0"+parseInt(t[e],10).toString(16)).slice(-2);return"#"+t.join("")})},normalizeHex:function(t){return t.replace(/#(([0-9a-f]{3}){1,2})($|;|\s+)/gi,function(t,e,n,i){return 3==(t=e.toLowerCase()).length&&(t=[(t=t.split(""))[0],t[0],t[1],t[1],t[2],t[2]].join("")),"#"+t+i})},parseCssText:function(t,e,n){var i={};return n&&(t=new CKEDITOR.dom.element("span").setAttribute("style",t).getAttribute("style")||""),t&&(t=CKEDITOR.tools.normalizeHex(CKEDITOR.tools.convertRgbToHex(t))),t&&";"!=t?(t.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(t,n,r){e&&("font-family"==(n=n.toLowerCase())&&(r=r.replace(/\s*,\s*/g,",")),r=CKEDITOR.tools.trim(r)),i[n]=r}),i):i},writeCssText:function(t,e){var n,i=[];for(n in t)i.push(n+":"+t[n]);return e&&i.sort(),i.join("; ")},objectCompare:function(t,e,n){var i;if(!t&&!e)return!0;if(!t||!e)return!1;for(i in t)if(t[i]!=e[i])return!1;if(!n)for(i in e)if(t[i]!=e[i])return!1;return!0},objectKeys:function(t){var e,n=[];for(e in t)n.push(e);return n},convertArrayToObject:function(t,e){var n={};1==arguments.length&&(e=!0);for(var i=0,r=t.length;i<r;++i)n[t[i]]=e;return n},fixDomain:function(){for(var t;;)try{t=window.parent.document.domain;break}catch(e){if(!(t=t?t.replace(/.+?(?:\.|$)/,""):document.domain))break;document.domain=t}return!!t},eventsBuffer:function(t,e,n){function i(){o=(new Date).getTime(),r=!1,n?e.call(n):e()}var r,o=0;return{input:function(){if(!r){var e=(new Date).getTime()-o;e<t?r=setTimeout(i,t-e):i()}},reset:function(){r&&clearTimeout(r),r=o=0}}},enableHtml5Elements:function(t,e){for(var n,i="abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video".split(" "),r=i.length;r--;)n=t.createElement(i[r]),e&&t.appendChild(n)},checkIfAnyArrayItemMatches:function(t,e){for(var n=0,i=t.length;n<i;++n)if(t[n].match(e))return!0;return!1},checkIfAnyObjectPropertyMatches:function(t,e){for(var n in t)if(n.match(e))return!0;return!1},keystrokeToString:function(t,e){var n=16711680&e,i=65535&e,r=CKEDITOR.env.mac,o=[],a=[];return n&CKEDITOR.CTRL&&(o.push(r?"⌘":t[17]),a.push(r?t[224]:t[17])),n&CKEDITOR.ALT&&(o.push(r?"⌥":t[18]),a.push(t[18])),n&CKEDITOR.SHIFT&&(o.push(r?"⇧":t[16]),a.push(t[16])),i&&(t[i]?(o.push(t[i]),a.push(t[i])):(o.push(String.fromCharCode(i)),a.push(String.fromCharCode(i)))),{display:o.join("+"),aria:a.join("+")}},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==",getCookie:function(t){t=t.toLowerCase();for(var e,n=document.cookie.split(";"),i=0;i<n.length;i++)if(e=n[i].split("="),decodeURIComponent(CKEDITOR.tools.trim(e[0]).toLowerCase())===t)return decodeURIComponent(1<e.length?e[1]:"");return null},setCookie:function(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+";path=/"},getCsrfToken:function(){if(!(t=CKEDITOR.tools.getCookie("ckCsrfToken"))||40!=t.length){var t=[],e="";if(window.crypto&&window.crypto.getRandomValues)t=new Uint8Array(40),window.crypto.getRandomValues(t);else for(var n=0;40>n;n++)t.push(Math.floor(256*Math.random()));for(n=0;n<t.length;n++){var i="abcdefghijklmnopqrstuvwxyz0123456789".charAt(t[n]%36);e+=.5<Math.random()?i.toUpperCase():i}t=e,CKEDITOR.tools.setCookie("ckCsrfToken",t)}return t},escapeCss:function(t){return t?window.CSS&&CSS.escape?CSS.escape(t):isNaN(parseInt(t.charAt(0),10))?t:"\\3"+t.charAt(0)+" "+t.substring(1,t.length):""},style:{parse:{_colors:{aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},_rgbaRegExp:/rgba?\(\s*\d+%?\s*,\s*\d+%?\s*,\s*\d+%?\s*(?:,\s*[0-9.]+\s*)?\)/gi,_hslaRegExp:/hsla?\(\s*[0-9.]+\s*,\s*\d+%\s*,\s*\d+%\s*(?:,\s*[0-9.]+\s*)?\)/gi,background:function(t){var e,n=[];return(e=this._findColor(t)).length&&(n.color=e[0],CKEDITOR.tools.array.forEach(e,function(e){t=t.replace(e,"")})),(t=CKEDITOR.tools.trim(t))&&(n.unprocessed=t),n},margin:function(t){function e(t){n.top=i[t[0]],n.right=i[t[1]],n.bottom=i[t[2]],n.left=i[t[3]]}var n={},i=t.match(/(?:\-?[\.\d]+(?:%|\w*)|auto|inherit|initial|unset)/g)||["0px"];switch(i.length){case 1:e([0,0,0,0]);break;case 2:e([0,1,0,1]);break;case 3:e([0,1,2,1]);break;case 4:e([0,1,2,3])}return n},_findColor:function(t){var e=[],n=CKEDITOR.tools.array;return(e=(e=e.concat(t.match(this._rgbaRegExp)||[])).concat(t.match(this._hslaRegExp)||[])).concat(n.filter(t.split(/\s+/),function(t){return!!t.match(/^\#[a-f0-9]{3}(?:[a-f0-9]{3})?$/gi)||t.toLowerCase()in CKEDITOR.tools.style.parse._colors}))}}},array:{filter:function(t,e,n){var i=[];return this.forEach(t,function(r,o){e.call(n,r,o,t)&&i.push(r)}),i},forEach:function(t,e,n){var i,r=t.length;for(i=0;i<r;i++)e.call(n,t[i],i,t)},map:function(t,e,n){for(var i=[],r=0;r<t.length;r++)i.push(e.call(n,t[r],r,t));return i},reduce:function(t,e,n,i){for(var r=0;r<t.length;r++)n=e.call(i,n,t[r],r,t);return n}}},CKEDITOR.tools.array.indexOf=CKEDITOR.tools.indexOf,CKEDITOR.tools.array.isArray=CKEDITOR.tools.isArray,CKEDITOR.dtd=function(){var t=CKEDITOR.tools.extend,e=function(t,e){for(var n=CKEDITOR.tools.clone(t),i=1;i<arguments.length;i++)for(var r in arguments[i])delete n[r];return n},n={},i={},r={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},o={command:1,link:1,meta:1,noscript:1,script:1,style:1},a={},s={"#":1},l={center:1,dir:1,noframes:1};return t(n,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,var:1,video:1,wbr:1},s,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1}),t(i,r,n,l),t(e={a:e(n,{a:1,button:1}),abbr:n,address:i,area:a,article:i,aside:i,audio:t({source:1,track:1},i),b:n,base:a,bdi:n,bdo:n,blockquote:i,body:i,br:a,button:e(n,{a:1,button:1}),canvas:n,caption:i,cite:n,code:n,col:a,colgroup:{col:1},command:a,datalist:t({option:1},n),dd:i,del:n,details:t({summary:1},i),dfn:n,div:i,dl:{dt:1,dd:1},dt:i,em:n,embed:a,fieldset:t({legend:1},i),figcaption:i,figure:t({figcaption:1},i),footer:i,form:i,h1:n,h2:n,h3:n,h4:n,h5:n,h6:n,head:t({title:1,base:1},o),header:i,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:a,html:t({head:1,body:1},i,o),i:n,iframe:s,img:a,input:a,ins:n,kbd:n,keygen:a,label:n,legend:n,li:i,link:a,main:i,map:i,mark:n,menu:t({li:1},i),meta:a,meter:e(n,{meter:1}),nav:i,noscript:t({link:1,meta:1,style:1},n),object:t({param:1},n),ol:{li:1},optgroup:{option:1},option:s,output:n,p:n,param:a,pre:n,progress:e(n,{progress:1}),q:n,rp:n,rt:n,ruby:t({rp:1,rt:1},n),s:n,samp:n,script:s,section:i,select:{optgroup:1,option:1},small:n,source:a,span:n,strong:n,style:s,sub:n,summary:t({h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},n),sup:n,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:i,textarea:s,tfoot:{tr:1},th:i,thead:{tr:1},time:e(n,{time:1}),title:s,tr:{th:1,td:1},track:a,u:n,ul:{li:1},var:n,video:t({source:1,track:1},i),wbr:a,acronym:n,applet:t({param:1},i),basefont:a,big:n,center:i,dialog:a,dir:{li:1},font:n,isindex:a,noframes:i,strike:n,tt:n},{$block:t({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},r,l),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:n,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:t({body:1,head:1,html:1},e.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,var:1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}}),e}(),CKEDITOR.dom.event=function(t){this.$=t},CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var t=this.getKey();return(this.$.ctrlKey||this.$.metaKey)&&(t+=CKEDITOR.CTRL),this.$.shiftKey&&(t+=CKEDITOR.SHIFT),this.$.altKey&&(t+=CKEDITOR.ALT),t},preventDefault:function(t){var e=this.$;e.preventDefault?e.preventDefault():e.returnValue=!1,t&&this.stopPropagation()},stopPropagation:function(){var t=this.$;t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},getTarget:function(){var t=this.$.target||this.$.srcElement;return t?new CKEDITOR.dom.node(t):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var t=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(t.documentElement.scrollLeft||t.body.scrollLeft),y:this.$.pageY||this.$.clientY+(t.documentElement.scrollTop||t.body.scrollTop)}}},CKEDITOR.CTRL=1114112,CKEDITOR.SHIFT=2228224,CKEDITOR.ALT=4456448,CKEDITOR.EVENT_PHASE_CAPTURING=1,CKEDITOR.EVENT_PHASE_AT_TARGET=2,CKEDITOR.EVENT_PHASE_BUBBLING=3,CKEDITOR.dom.domObject=function(t){t&&(this.$=t)},CKEDITOR.dom.domObject.prototype={getPrivate:function(){var t;return(t=this.getCustomData("_"))||this.setCustomData("_",t={}),t},on:function(t){var e=this.getCustomData("_cke_nativeListeners");return e||(e={},this.setCustomData("_cke_nativeListeners",e)),e[t]||(e=e[t]=function(t,e){return function(n){"undefined"!=typeof CKEDITOR&&t.fire(e,new CKEDITOR.dom.event(n))}}(this,t),this.$.addEventListener?this.$.addEventListener(t,e,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+t,e)),CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(t){if(CKEDITOR.event.prototype.removeListener.apply(this,arguments),!this.hasListeners(t)){var e=this.getCustomData("_cke_nativeListeners"),n=e&&e[t];n&&(this.$.removeEventListener?this.$.removeEventListener(t,n,!1):this.$.detachEvent&&this.$.detachEvent("on"+t,n),delete e[t])}},removeAllListeners:function(){var t,e=this.getCustomData("_cke_nativeListeners");for(t in e){var n=e[t];this.$.detachEvent?this.$.detachEvent("on"+t,n):this.$.removeEventListener&&this.$.removeEventListener(t,n,!1),delete e[t]}CKEDITOR.event.prototype.removeAllListeners.call(this)}},function(t){var e={};CKEDITOR.on("reset",function(){e={}}),t.equals=function(t){try{return t&&t.$===this.$}catch(t){return!1}},t.setCustomData=function(t,n){var i=this.getUniqueId();return(e[i]||(e[i]={}))[t]=n,this},t.getCustomData=function(t){var n=this.$["data-cke-expando"];return(n=n&&e[n])&&t in n?n[t]:null},t.removeCustomData=function(t){var n,i,r;return(n=(n=this.$["data-cke-expando"])&&e[n])&&(i=n[t],r=t in n,delete n[t]),r?i:null},t.clearCustomData=function(){this.removeAllListeners();var t=this.$["data-cke-expando"];t&&delete e[t]},t.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())},CKEDITOR.event.implementOn(t)}(CKEDITOR.dom.domObject.prototype),CKEDITOR.dom.node=function(t){return t?new CKEDITOR.dom[t.nodeType==CKEDITOR.NODE_DOCUMENT?"document":t.nodeType==CKEDITOR.NODE_ELEMENT?"element":t.nodeType==CKEDITOR.NODE_TEXT?"text":t.nodeType==CKEDITOR.NODE_COMMENT?"comment":t.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](t):this},CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject,CKEDITOR.NODE_ELEMENT=1,CKEDITOR.NODE_DOCUMENT=9,CKEDITOR.NODE_TEXT=3,CKEDITOR.NODE_COMMENT=8,CKEDITOR.NODE_DOCUMENT_FRAGMENT=11,CKEDITOR.POSITION_IDENTICAL=0,CKEDITOR.POSITION_DISCONNECTED=1,CKEDITOR.POSITION_FOLLOWING=2,CKEDITOR.POSITION_PRECEDING=4,CKEDITOR.POSITION_IS_CONTAINED=8,CKEDITOR.POSITION_CONTAINS=16,CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(t,e){return t.append(this,e),t},clone:function(t,e){var n=this.$.cloneNode(t);return function n(i){if(i["data-cke-expando"]&&(i["data-cke-expando"]=!1),(i.nodeType==CKEDITOR.NODE_ELEMENT||i.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(e||i.nodeType!=CKEDITOR.NODE_ELEMENT||i.removeAttribute("id",!1),t)){i=i.childNodes;for(var r=0;r<i.length;r++)n(i[r])}}(n),n=new CKEDITOR.dom.node(n),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(this.type==CKEDITOR.NODE_ELEMENT||this.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&function e(n){if(n.type==CKEDITOR.NODE_ELEMENT||n.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(n.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var i=n.getName();":"==i[0]&&n.renameNode(i.substring(1))}if(t)for(i=0;i<n.getChildCount();i++)e(n.getChild(i))}}(n),n},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(t){return t.$.parentNode.insertBefore(this.$,t.$.nextSibling),t},insertBefore:function(t){return t.$.parentNode.insertBefore(this.$,t.$),t},insertBeforeMe:function(t){return this.$.parentNode.insertBefore(t.$,this.$),t},getAddress:function(t){for(var e=[],n=this.getDocument().$.documentElement,i=this.$;i&&i!=n;){var r=i.parentNode;r&&e.unshift(this.getIndex.call({$:i},t)),i=r}return e},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(t){function e(t,i){var r=i?t.nextSibling:t.previousSibling;return r&&r.nodeType==CKEDITOR.NODE_TEXT?n(r)?e(r,i):r:null}function n(t){return!t.nodeValue||t.nodeValue==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE}var i,r=this.$,o=-1;if(!this.$.parentNode||t&&r.nodeType==CKEDITOR.NODE_TEXT&&n(r)&&!e(r)&&!e(r,!0))return-1;do{t&&r!=this.$&&r.nodeType==CKEDITOR.NODE_TEXT&&(i||n(r))||(o++,i=r.nodeType==CKEDITOR.NODE_TEXT)}while(r=r.previousSibling);return o},getNextSourceNode:function(t,e,n){if(n&&!n.call){var i=n;n=function(t){return!t.equals(i)}}var r;if(!(t=!t&&this.getFirst&&this.getFirst())){if(this.type==CKEDITOR.NODE_ELEMENT&&n&&!1===n(this,!0))return null;t=this.getNext()}for(;!t&&(r=(r||this).getParent());){if(n&&!1===n(r,!0))return null;t=r.getNext()}return!t||n&&!1===n(t)?null:e&&e!=t.type?t.getNextSourceNode(!1,e,n):t},getPreviousSourceNode:function(t,e,n){if(n&&!n.call){var i=n;n=function(t){return!t.equals(i)}}var r;if(!(t=!t&&this.getLast&&this.getLast())){if(this.type==CKEDITOR.NODE_ELEMENT&&n&&!1===n(this,!0))return null;t=this.getPrevious()}for(;!t&&(r=(r||this).getParent());){if(n&&!1===n(r,!0))return null;t=r.getPrevious()}return!t||n&&!1===n(t)?null:e&&t.type!=e?t.getPreviousSourceNode(!1,e,n):t},getPrevious:function(t){var e,n=this.$;do{e=(n=n.previousSibling)&&10!=n.nodeType&&new CKEDITOR.dom.node(n)}while(e&&t&&!t(e));return e},getNext:function(t){var e,n=this.$;do{e=(n=n.nextSibling)&&new CKEDITOR.dom.node(n)}while(e&&t&&!t(e));return e},getParent:function(t){var e=this.$.parentNode;return e&&(e.nodeType==CKEDITOR.NODE_ELEMENT||t&&e.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(e):null},getParents:function(t){var e=this,n=[];do{n[t?"push":"unshift"](e)}while(e=e.getParent());return n},getCommonAncestor:function(t){if(t.equals(this))return this;if(t.contains&&t.contains(this))return t;var e=this.contains?this:this.getParent();do{if(e.contains(t))return e}while(e=e.getParent());return null},getPosition:function(t){var e=this.$,n=t.$;if(e.compareDocumentPosition)return e.compareDocumentPosition(n);if(e==n)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&t.type==CKEDITOR.NODE_ELEMENT){if(e.contains){if(e.contains(n))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(n.contains(e))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in e)return 0>e.sourceIndex||0>n.sourceIndex?CKEDITOR.POSITION_DISCONNECTED:e.sourceIndex<n.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}e=this.getAddress(),t=t.getAddress(),n=Math.min(e.length,t.length);for(var i=0;i<n;i++)if(e[i]!=t[i])return e[i]<t[i]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;return e.length<t.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(t,e){var n,i,r=this.$;for(e||(r=r.parentNode),"function"==typeof t?(i=!0,n=t):(i=!1,n=function(e){return e="string"==typeof e.nodeName?e.nodeName.toLowerCase():"","string"==typeof t?e==t:e in t});r;){if(n(i?new CKEDITOR.dom.node(r):r))return new CKEDITOR.dom.node(r);try{r=r.parentNode}catch(t){r=null}}return null},hasAscendant:function(t,e){var n=this.$;for(e||(n=n.parentNode);n;){if(n.nodeName&&n.nodeName.toLowerCase()==t)return!0;n=n.parentNode}return!1},move:function(t,e){t.append(this.remove(),e)},remove:function(t){var e=this.$,n=e.parentNode;if(n){if(t)for(;t=e.firstChild;)n.insertBefore(e.removeChild(t),e);n.removeChild(e)}return this},replace:function(t){this.insertBefore(t),t.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var t;this.getFirst&&(t=this.getFirst());){if(t.type==CKEDITOR.NODE_TEXT){var e=CKEDITOR.tools.ltrim(t.getText()),n=t.getLength();if(!e){t.remove();continue}e.length<n&&(t.split(n-e.length),this.$.removeChild(this.$.firstChild))}break}},rtrim:function(){for(var t;this.getLast&&(t=this.getLast());){if(t.type==CKEDITOR.NODE_TEXT){var e=CKEDITOR.tools.rtrim(t.getText()),n=t.getLength();if(!e){t.remove();continue}e.length<n&&(t.split(e.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild))}break}CKEDITOR.env.needsBrFiller&&(t=this.$.lastChild)&&1==t.type&&"br"==t.nodeName.toLowerCase()&&t.parentNode.removeChild(t)},isReadOnly:function(t){var e=this;if(this.type!=CKEDITOR.NODE_ELEMENT&&(e=this.getParent()),CKEDITOR.env.edge&&e&&e.is("textarea","input")&&(t=!0),!t&&e&&void 0!==e.$.isContentEditable)return!(e.$.isContentEditable||e.data("cke-editable"));for(;e;){if(e.data("cke-editable"))return!1;if(e.hasAttribute("contenteditable"))return"false"==e.getAttribute("contenteditable");e=e.getParent()}return!0}}),CKEDITOR.dom.window=function(t){CKEDITOR.dom.domObject.call(this,t)},CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var t=this.$.document,e="CSS1Compat"==t.compatMode;return{width:(e?t.documentElement.clientWidth:t.body.clientWidth)||0,height:(e?t.documentElement.clientHeight:t.body.clientHeight)||0}},getScrollPosition:function(){var t=this.$;return"pageXOffset"in t?{x:t.pageXOffset||0,y:t.pageYOffset||0}:{x:(t=t.document).documentElement.scrollLeft||t.body.scrollLeft||0,y:t.documentElement.scrollTop||t.body.scrollTop||0}},getFrame:function(){var t=this.$.frameElement;return t?new CKEDITOR.dom.element.get(t):null}}),CKEDITOR.dom.document=function(t){CKEDITOR.dom.domObject.call(this,t)},CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(t){if(this.$.createStyleSheet)this.$.createStyleSheet(t);else{var e=new CKEDITOR.dom.element("link");e.setAttributes({rel:"stylesheet",type:"text/css",href:t}),this.getHead().append(e)}},appendStyleText:function(t){if(this.$.createStyleSheet){var e=this.$.createStyleSheet("");e.cssText=t}else{var n=new CKEDITOR.dom.element("style",this);n.append(new CKEDITOR.dom.text(t,this)),this.getHead().append(n)}return e||n.$.sheet},createElement:function(t,e){var n=new CKEDITOR.dom.element(t,this);return e&&(e.attributes&&n.setAttributes(e.attributes),e.styles&&n.setStyles(e.styles)),n},createText:function(t){return new CKEDITOR.dom.text(t,this)},focus:function(){this.getWindow().focus()},getActive:function(){var t;try{t=this.$.activeElement}catch(t){return null}return new CKEDITOR.dom.element(t)},getById:function(t){return(t=this.$.getElementById(t))?new CKEDITOR.dom.element(t):null},getByAddress:function(t,e){for(var n=this.$.documentElement,i=0;n&&i<t.length;i++){var r=t[i];if(e)for(var o=-1,a=0;a<n.childNodes.length;a++){var s=n.childNodes[a];if((!0!==e||3!=s.nodeType||!s.previousSibling||3!=s.previousSibling.nodeType)&&++o==r){n=s;break}}else n=n.childNodes[r]}return n?new CKEDITOR.dom.node(n):null},getElementsByTag:function(t,e){return CKEDITOR.env.ie&&8>=document.documentMode||!e||(t=e+":"+t),new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(t))},getHead:function(){var t=this.$.getElementsByTagName("head")[0];return t?new CKEDITOR.dom.element(t):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(t){this.$.open("text/html","replace"),CKEDITOR.env.ie&&(t=t.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$&\n<script data-cke-temp="1">('+CKEDITOR.tools.fixDomain+")();<\/script>")),this.$.write(t),this.$.close()},find:function(t){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(t))},findOne:function(t){return(t=this.$.querySelector(t))?new CKEDITOR.dom.element(t):null},_getHtml5ShivFrag:function(){var t=this.getCustomData("html5ShivFrag");return t||(t=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(t,!0),this.setCustomData("html5ShivFrag",t)),t}}),CKEDITOR.dom.nodeList=function(t){this.$=t},CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(t){return 0>t||t>=this.$.length?null:(t=this.$[t])?new CKEDITOR.dom.node(t):null}},CKEDITOR.dom.element=function(t,e){"string"==typeof t&&(t=(e?e.$:document).createElement(t)),CKEDITOR.dom.domObject.call(this,t)},CKEDITOR.dom.element.get=function(t){return(t="string"==typeof t?document.getElementById(t)||document.getElementsByName(t)[0]:t)&&(t.$?t:new CKEDITOR.dom.element(t))},CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node,CKEDITOR.dom.element.createFromHtml=function(t,e){var n=new CKEDITOR.dom.element("div",e);return n.setHtml(t),n.getFirst().remove()},CKEDITOR.dom.element.setMarker=function(t,e,n,i){var r=e.getCustomData("list_marker_id")||e.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),o=e.getCustomData("list_marker_names")||e.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");return t[r]=e,o[n]=1,e.setCustomData(n,i)},CKEDITOR.dom.element.clearAllMarkers=function(t){for(var e in t)CKEDITOR.dom.element.clearMarkers(t,t[e],1)},CKEDITOR.dom.element.clearMarkers=function(t,e,n){var i,r=e.getCustomData("list_marker_names"),o=e.getCustomData("list_marker_id");for(i in r)e.removeCustomData(i);e.removeCustomData("list_marker_names"),n&&(e.removeCustomData("list_marker_id"),delete t[o])},function(){function t(t,e){return-1<(" "+t+" ").replace(o," ").indexOf(" "+e+" ")}function e(t){var e=!0;return t.$.id||(t.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),e=!1),function(){e||t.removeAttribute("id")}}function n(t,e){var n=CKEDITOR.tools.escapeCss(t.$.id);return"#"+n+" "+e.split(/,\s*/).join(", #"+n+" ")}function i(t){for(var e=0,n=0,i=a[t].length;n<i;n++)e+=parseFloat(this.getComputedStyle(a[t][n])||0,10)||0;return e}var r=void 0!==(r=document.createElement("_").classList)&&null!==String(r.add).match(/\[Native code\]/gi),o=/[\n\t\r]/g;CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:r?function(t){return this.$.classList.add(t),this}:function(e){var n=this.$.className;return n&&(t(n,e)||(n+=" "+e)),this.$.className=n||e,this},removeClass:r?function(t){var e=this.$;return e.classList.remove(t),e.className||e.removeAttribute("class"),this}:function(e){var n=this.getAttribute("class");return n&&t(n,e)&&((n=n.replace(new RegExp("(?:^|\\s+)"+e+"(?=\\s|$)"),"").replace(/^\s+/,""))?this.setAttribute("class",n):this.removeAttribute("class")),this},hasClass:function(e){return t(this.$.className,e)},append:function(t,e){return"string"==typeof t&&(t=this.getDocument().createElement(t)),e?this.$.insertBefore(t.$,this.$.firstChild):this.$.appendChild(t.$),t},appendHtml:function(t){if(this.$.childNodes.length){var e=new CKEDITOR.dom.element("div",this.getDocument());e.setHtml(t),e.moveChildren(this)}else this.setHtml(t)},appendText:function(t){null!=this.$.text&&CKEDITOR.env.ie&&9>CKEDITOR.env.version?this.$.text+=t:this.append(new CKEDITOR.dom.text(t))},appendBogus:function(t){if(t||CKEDITOR.env.needsBrFiller){for(t=this.getLast();t&&t.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(t.getText());)t=t.getPrevious();t&&t.is&&t.is("br")||(t=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&t.setAttribute("type","_moz"),this.append(t))}},breakParent:function(t,e){var n=new CKEDITOR.dom.range(this.getDocument());n.setStartAfter(this),n.setEndAfter(t);var i,r=n.extractContents(!1,e||!1);if(n.insertNode(this.remove()),CKEDITOR.env.ie&&!CKEDITOR.env.edge){for(n=new CKEDITOR.dom.element("div");i=r.getFirst();)i.$.style.backgroundColor&&(i.$.style.backgroundColor=i.$.style.backgroundColor),n.append(i);n.insertAfter(this),n.remove(!0)}else r.insertAfterNode(this)},contains:document.compareDocumentPosition?function(t){return!!(16&this.$.compareDocumentPosition(t.$))}:function(t){var e=this.$;return t.type!=CKEDITOR.NODE_ELEMENT?e.contains(t.getParent().$):e!=t.$&&e.contains(t.$)},focus:function(){function t(){try{this.$.focus()}catch(t){}}return function(e){e?CKEDITOR.tools.setTimeout(t,100,this):t.call(this)}}(),getHtml:function(){var t=this.$.innerHTML;return CKEDITOR.env.ie?t.replace(/<\?[^>]*>/g,""):t},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var t=this.$.ownerDocument.createElement("div");return t.appendChild(this.$.cloneNode(!0)),t.innerHTML},getClientRect:function(){var t=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());return!t.width&&(t.width=t.right-t.left),!t.height&&(t.height=t.bottom-t.top),t},setHtml:CKEDITOR.env.ie&&9>CKEDITOR.env.version?function(t){try{var e=this.$;if(this.getParent())return e.innerHTML=t;var n=this.getDocument()._getHtml5ShivFrag();return n.appendChild(e),e.innerHTML=t,n.removeChild(e),t}catch(n){for(this.$.innerHTML="",(e=new CKEDITOR.dom.element("body",this.getDocument())).$.innerHTML=t,e=e.getChildren();e.count();)this.append(e.getItem(0));return t}}:function(t){return this.$.innerHTML=t},setText:function(){var t=document.createElement("p");return t.innerHTML="x",t=t.textContent,function(e){this.$[t?"textContent":"innerText"]=e}}(),getAttribute:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(t){switch(t){case"class":t="className";break;case"http-equiv":t="httpEquiv";break;case"name":return this.$.name;case"tabindex":return 0!==(t=this.$.getAttribute(t,2))&&0===this.$.tabIndex&&(t=null),t;case"checked":return((t=this.$.attributes.getNamedItem(t)).specified?t.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[t];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(t,2)}:function(t){return this.$.getAttribute(t,2)},getAttributes:function(t){var e,n={},i=this.$.attributes;for(t=CKEDITOR.tools.isArray(t)?t:[],e=0;e<i.length;e++)-1===CKEDITOR.tools.indexOf(t,i[e].name)&&(n[i[e].name]=i[e].value);return n},getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:document.defaultView&&document.defaultView.getComputedStyle?function(t){var e=this.getWindow().$.getComputedStyle(this.$,null);return e?e.getPropertyValue(t):""}:function(t){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(t)]},getDtd:function(){var t=CKEDITOR.dtd[this.getName()];return this.getDtd=function(){return t},t},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:function(){var t=this.$.tabIndex;return 0!==t||CKEDITOR.dtd.$tabIndex[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)?t:-1},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var t=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&8>=document.documentMode){var e=this.$.scopeName;"HTML"!=e&&(t=e.toLowerCase()+":"+t)}return this.getName=function(){return t},this.getName()},getValue:function(){return this.$.value},getFirst:function(t){var e=this.$.firstChild;return(e=e&&new CKEDITOR.dom.node(e))&&t&&!t(e)&&(e=e.getNext(t)),e},getLast:function(t){var e=this.$.lastChild;return(e=e&&new CKEDITOR.dom.node(e))&&t&&!t(e)&&(e=e.getPrevious(t)),e},getStyle:function(t){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(t)]},is:function(){var t=this.getName();if("object"==typeof arguments[0])return!!arguments[0][t];for(var e=0;e<arguments.length;e++)if(arguments[e]==t)return!0;return!1},isEditable:function(t){var e=this.getName();return!(this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[e]||CKEDITOR.dtd.$empty[e]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount()||!1!==t&&(!(t=CKEDITOR.dtd[e]||CKEDITOR.dtd.span)||!t["#"]))},isIdentical:function(t){var e=this.clone(0,1);if(t=t.clone(0,1),e.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),t.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),e.$.isEqualNode)return e.$.style.cssText=CKEDITOR.tools.normalizeCssText(e.$.style.cssText),t.$.style.cssText=CKEDITOR.tools.normalizeCssText(t.$.style.cssText),e.$.isEqualNode(t.$);if(e=e.getOuterHtml(),t=t.getOuterHtml(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&this.is("a")){var n=this.getParent();n.type==CKEDITOR.NODE_ELEMENT&&((n=n.clone()).setHtml(e),e=n.getHtml(),n.setHtml(t),t=n.getHtml())}return e==t},isVisible:function(){var t,e,n=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility");return n&&CKEDITOR.env.webkit&&!(t=this.getWindow()).equals(CKEDITOR.document.getWindow())&&(e=t.$.frameElement)&&(n=new CKEDITOR.dom.element(e).isVisible()),!!n},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var t=this.getChildren(),e=0,n=t.count();e<n;e++){var i=t.getItem(e);if((i.type!=CKEDITOR.NODE_ELEMENT||!i.data("cke-bookmark"))&&(i.type==CKEDITOR.NODE_ELEMENT&&!i.isEmptyInlineRemoveable()||i.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(i.getText())))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var t=this.$.attributes,e=0;e<t.length;e++){var n=t[e];switch(n.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(n.specified)return!0}}return!1}:function(){var t=this.$.attributes,e=t.length,n={"data-cke-expando":1,_moz_dirty:1};return 0<e&&(2<e||!n[t[0].nodeName]||2==e&&!n[t[1].nodeName])},hasAttribute:function(){function t(t){var e=this.$.attributes.getNamedItem(t);if("input"==this.getName())switch(t){case"class":return 0<this.$.className.length;case"checked":return!!this.$.checked;case"value":return"checkbox"==(t=this.getAttribute("type"))||"radio"==t?"on"!=this.$.value:!!this.$.value}return!!e&&e.specified}return CKEDITOR.env.ie?8>CKEDITOR.env.version?function(e){return"name"==e?!!this.$.name:t.call(this,e)}:t:function(t){return!!this.$.attributes.getNamedItem(t)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(t,e){var n,i=this.$;if(i!=(t=t.$))if(e)for(;n=i.lastChild;)t.insertBefore(i.removeChild(n),t.firstChild);else for(;n=i.firstChild;)t.appendChild(i.removeChild(n))},mergeSiblings:function(){function t(t,e,n){if(e&&e.type==CKEDITOR.NODE_ELEMENT){for(var i=[];e.data("cke-bookmark")||e.isEmptyInlineRemoveable();)if(i.push(e),!(e=n?e.getNext():e.getPrevious())||e.type!=CKEDITOR.NODE_ELEMENT)return;if(t.isIdentical(e)){for(var r=n?t.getLast():t.getFirst();i.length;)i.shift().move(t,!n);e.moveChildren(t,!n),e.remove(),r&&r.type==CKEDITOR.NODE_ELEMENT&&r.mergeSiblings()}}}return function(e){(!1===e||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))&&(t(this,this.getNext(),!0),t(this,this.getPrevious()))}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var t=function(t,e){return this.$.setAttribute(t,e),this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(e,n){return"class"==e?this.$.className=n:"style"==e?this.$.style.cssText=n:"tabindex"==e?this.$.tabIndex=n:"checked"==e?this.$.checked=n:"contenteditable"==e?t.call(this,"contentEditable",n):t.apply(this,arguments),this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(e,n){if("src"==e&&n.match(/^http:\/\//))try{t.apply(this,arguments)}catch(t){}else t.apply(this,arguments);return this}:t}(),setAttributes:function(t){for(var e in t)this.setAttribute(e,t[e]);return this},setValue:function(t){return this.$.value=t,this},removeAttribute:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(t){"class"==t?t="className":"tabindex"==t?t="tabIndex":"contenteditable"==t&&(t="contentEditable"),this.$.removeAttribute(t)}:function(t){this.$.removeAttribute(t)},removeAttributes:function(t){if(CKEDITOR.tools.isArray(t))for(var e=0;e<t.length;e++)this.removeAttribute(t[e]);else for(e in t=t||this.getAttributes())t.hasOwnProperty(e)&&this.removeAttribute(e)},removeStyle:function(t){if((i=this.$.style).removeProperty||"border"!=t&&"margin"!=t&&"padding"!=t)i.removeProperty?i.removeProperty(t):i.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(t)),this.$.style.cssText||this.removeAttribute("style");else{var e,n=["top","left","right","bottom"];"border"==t&&(e=["color","style","width"]);for(var i=[],r=0;r<n.length;r++)if(e)for(var o=0;o<e.length;o++)i.push([t,n[r],e[o]].join("-"));else i.push([t,n[r]].join("-"));for(t=0;t<i.length;t++)this.removeStyle(i[t])}},setStyle:function(t,e){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(t)]=e,this},setStyles:function(t){for(var e in t)this.setStyle(e,t[e]);return this},setOpacity:function(t){CKEDITOR.env.ie&&9>CKEDITOR.env.version?(t=Math.round(100*t),this.setStyle("filter",100<=t?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+t+")")):this.setStyle("opacity",t)},unselectable:function(){if(this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none")),CKEDITOR.env.ie){this.setAttribute("unselectable","on");for(var t=this.getElementsByTag("*"),e=0,n=t.count();e<n;e++)t.getItem(e).setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var t=this;"html"!=t.getName();){if("static"!=t.getComputedStyle("position"))return t;t=t.getParent()}return null},getDocumentPosition:function(t){var e=0,n=0,i=this.getDocument(),r=i.getBody(),o="BackCompat"==i.$.compatMode;if(!document.documentElement.getBoundingClientRect||CKEDITOR.env.ie&&8===CKEDITOR.env.version)for(l=this,c=null;l&&"body"!=l.getName()&&"html"!=l.getName();){for(e+=l.$.offsetLeft-l.$.scrollLeft,n+=l.$.offsetTop-l.$.scrollTop,l.equals(this)||(e+=l.$.clientLeft||0,n+=l.$.clientTop||0);c&&!c.equals(l);)e-=c.$.scrollLeft,n-=c.$.scrollTop,c=c.getParent();c=l,l=(a=l.$.offsetParent)?new CKEDITOR.dom.element(a):null}else{var a=this.$.getBoundingClientRect(),s=i.$.documentElement,l=s.clientTop||r.$.clientTop||0,c=s.clientLeft||r.$.clientLeft||0,u=!0;CKEDITOR.env.ie&&(u=i.getDocumentElement().contains(this),i=i.getBody().contains(this),u=o&&i||!o&&u),u&&(CKEDITOR.env.webkit||CKEDITOR.env.ie&&12<=CKEDITOR.env.version?(e=r.$.scrollLeft||s.scrollLeft,n=r.$.scrollTop||s.scrollTop):(e=(n=o?r.$:s).scrollLeft,n=n.scrollTop),e=a.left+e-c,n=a.top+n-l)}return t&&(a=this.getWindow(),l=t.getWindow(),!a.equals(l)&&a.$.frameElement&&(e+=(t=new CKEDITOR.dom.element(a.$.frameElement).getDocumentPosition(t)).x,n+=t.y)),document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||o||(e+=this.$.clientLeft?1:0,n+=this.$.clientTop?1:0),{x:e,y:n}},scrollIntoView:function(t){var e=this.getParent();if(e)do{if((e.$.clientWidth&&e.$.clientWidth<e.$.scrollWidth||e.$.clientHeight&&e.$.clientHeight<e.$.scrollHeight)&&!e.is("body")&&this.scrollIntoParent(e,t,1),e.is("html")){var n=e.getWindow();try{var i=n.$.frameElement;i&&(e=new CKEDITOR.dom.element(i))}catch(t){}}}while(e=e.getParent())},scrollIntoParent:function(t,e,n){var i,r,o,a;function s(e,n){/body|html/.test(t.getName())?t.getWindow().$.scrollBy(e,n):(t.$.scrollLeft+=e,t.$.scrollTop+=n)}function l(t,e){var n={x:0,y:0};if(!t.is(u?"body":"html")){var i=t.$.getBoundingClientRect();n.x=i.left,n.y=i.top}return(i=t.getWindow()).equals(e)||(i=l(CKEDITOR.dom.element.get(i.$.frameElement),e),n.x+=i.x,n.y+=i.y),n}function c(t,e){return parseInt(t.getComputedStyle("margin-"+e)||0,10)||0}!t&&(t=this.getWindow());var u="BackCompat"==(o=t.getDocument()).$.compatMode;t instanceof CKEDITOR.dom.window&&(t=u?o.getBody():o.getDocumentElement()),CKEDITOR.env.webkit&&(o=this.getEditor(!1))&&(o._.previousScrollTop=null),r=l(this,o=t.getWindow());var d=l(t,o),h=this.$.offsetHeight;i=this.$.offsetWidth;var f=t.$.clientHeight,p=t.$.clientWidth;o=r.x-c(this,"left")-d.x||0,a=r.y-c(this,"top")-d.y||0,i=r.x+i+c(this,"right")-(d.x+p)||0,r=r.y+h+c(this,"bottom")-(d.y+f)||0,(0>a||0<r)&&s(0,!0===e?a:!1===e?r:0>a?a:r),n&&(0>o||0<i)&&s(0>o?o:i,0)},setState:function(t,e,n){switch(e=e||"cke",t){case CKEDITOR.TRISTATE_ON:this.addClass(e+"_on"),this.removeClass(e+"_off"),this.removeClass(e+"_disabled"),n&&this.setAttribute("aria-pressed",!0),n&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(e+"_disabled"),this.removeClass(e+"_off"),this.removeClass(e+"_on"),n&&this.setAttribute("aria-disabled",!0),n&&this.removeAttribute("aria-pressed");break;default:this.addClass(e+"_off"),this.removeClass(e+"_on"),this.removeClass(e+"_disabled"),n&&this.removeAttribute("aria-pressed"),n&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var t=this.$;try{t.contentWindow.document}catch(e){t.src=t.src}return t&&new CKEDITOR.dom.document(t.contentWindow.document)},copyAttributes:function(t,e){var n=this.$.attributes;e=e||{};for(var i=0;i<n.length;i++){var r,o=n[i],a=o.nodeName.toLowerCase();a in e||("checked"==a&&(r=this.getAttribute(a))?t.setAttribute(a,r):CKEDITOR.env.ie&&!this.hasAttribute(a)||(null===(r=this.getAttribute(a))&&(r=o.nodeValue),t.setAttribute(a,r)))}""!==this.$.style.cssText&&(t.$.style.cssText=this.$.style.cssText)},renameNode:function(t){if(this.getName()!=t){var e=this.getDocument();t=new CKEDITOR.dom.element(t,e),this.copyAttributes(t),this.moveChildren(t),this.getParent(!0)&&this.$.parentNode.replaceChild(t.$,this.$),t.$["data-cke-expando"]=this.$["data-cke-expando"],this.$=t.$,delete this.getName}},getChild:function(){function t(t,e){var n=t.childNodes;if(0<=e&&e<n.length)return n[e]}return function(e){var n=this.$;if(e.slice)for(e=e.slice();0<e.length&&n;)n=t(n,e.shift());else n=t(n,e);return n?new CKEDITOR.dom.node(n):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){function t(t){return t.type==CKEDITOR.NODE_ELEMENT&&t.hasClass("cke_enable_context_menu")}this.on("contextmenu",function(e){e.data.getTarget().getAscendant(t,!0)||e.data.preventDefault()})},getDirection:function(t){return t?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(t,e){return t="data-"+t,void 0===e?this.getAttribute(t):(!1===e?this.removeAttribute(t):this.setAttribute(t,e),null)},getEditor:function(t){var e,n,i,r=CKEDITOR.instances;for(e in t=t||void 0===t,r)if((n=r[e]).element.equals(this)&&n.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||!t&&(i=n.editable())&&(i.equals(this)||i.contains(this)))return n;return null},find:function(t){var i=e(this);return t=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(n(this,t))),i(),t},findOne:function(t){var i=e(this);return t=this.$.querySelector(n(this,t)),i(),t?new CKEDITOR.dom.element(t):null},forEach:function(t,e,n){if(!(n||e&&this.type!=e))var i=t(this);if(!1!==i){n=this.getChildren();for(var r=0;r<n.count();r++)(i=n.getItem(r)).type==CKEDITOR.NODE_ELEMENT?i.forEach(t,e):e&&i.type!=e||t(i)}}});var a={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(t,e,n){"number"==typeof e&&(!n||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(e-=i.call(this,t)),this.setStyle(t,e+"px"))},CKEDITOR.dom.element.prototype.getSize=function(t,e){var n=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(t)],this.$["client"+CKEDITOR.tools.capitalize(t)])||0;return e&&(n-=i.call(this,t)),n}}(),CKEDITOR.dom.documentFragment=function(t){t=t||CKEDITOR.document,this.$=t.type==CKEDITOR.NODE_DOCUMENT?t.$.createDocumentFragment():t},CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(t){(t=t.$).parentNode.insertBefore(this.$,t.nextSibling)},getHtml:function(){var t=new CKEDITOR.dom.element("div");return this.clone(1,1).appendTo(t),t.getHtml().replace(/\s*data-cke-expando=".*?"/g,"")}},!0,{append:1,appendBogus:1,clone:1,getFirst:1,getHtml:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),function(){function t(t,e){var n=this.range;if(this._.end)return null;if(!this._.start){if(this._.start=1,n.collapsed)return this.end(),null;n.optimize()}var i,r=n.startContainer;i=n.endContainer;var o,a=n.startOffset,s=n.endOffset,l=this.guard,c=this.type,u=t?"getPreviousSourceNode":"getNextSourceNode";if(!t&&!this._.guardLTR){var d=i.type==CKEDITOR.NODE_ELEMENT?i:i.getParent(),h=i.type==CKEDITOR.NODE_ELEMENT?i.getChild(s):i.getNext();this._.guardLTR=function(t,e){return!(e&&d.equals(t)||h&&t.equals(h)||t.type==CKEDITOR.NODE_ELEMENT&&e&&t.equals(n.root))}}if(t&&!this._.guardRTL){var f=r.type==CKEDITOR.NODE_ELEMENT?r:r.getParent(),p=r.type==CKEDITOR.NODE_ELEMENT?a?r.getChild(a-1):null:r.getPrevious();this._.guardRTL=function(t,e){return!(e&&f.equals(t)||p&&t.equals(p)||t.type==CKEDITOR.NODE_ELEMENT&&e&&t.equals(n.root))}}var g=t?this._.guardRTL:this._.guardLTR;for(o=l?function(t,e){return!1!==g(t,e)&&l(t,e)}:g,this.current?i=this.current[u](!1,c,o):(t?i.type==CKEDITOR.NODE_ELEMENT&&(i=0<s?i.getChild(s-1):!1===o(i,!0)?null:i.getPreviousSourceNode(!0,c,o)):(i=r).type==CKEDITOR.NODE_ELEMENT&&((i=i.getChild(a))||(i=!1===o(r,!0)?null:r.getNextSourceNode(!0,c,o))),i&&!1===o(i)&&(i=null));i&&!this._.end;){if(this.current=i,this.evaluator&&!1===this.evaluator(i)){if(e&&this.evaluator)return!1}else if(!e)return i;i=i[u](!1,c,o)}return this.end(),this.current=null}function e(e){for(var n,i=null;n=t.call(this,e);)i=n;return i}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(t){this.range=t,this._={}},proto:{end:function(){this._.end=1},next:function(){return t.call(this)},previous:function(){return t.call(this,1)},checkForward:function(){return!1!==t.call(this,0,1)},checkBackward:function(){return!1!==t.call(this,1,1)},lastForward:function(){return e.call(this)},lastBackward:function(){return e.call(this,1)},reset:function(){delete this.current,this._={}}}});var n={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},i={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(t){return!("none"!=this.getComputedStyle("float")||this.getComputedStyle("position")in i||!n[this.getComputedStyle("display")])||!!(this.is(CKEDITOR.dtd.$block)||t&&this.is(t))},CKEDITOR.dom.walker.blockBoundary=function(t){return function(e){return!(e.type==CKEDITOR.NODE_ELEMENT&&e.isBlockBoundary(t))}},CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})},CKEDITOR.dom.walker.bookmark=function(t,e){function n(t){return t&&t.getName&&"span"==t.getName()&&t.data("cke-bookmark")}return function(i){var r,o;return r=i&&i.type!=CKEDITOR.NODE_ELEMENT&&(o=i.getParent())&&n(o),r=t?r:r||n(i),!!(e^r)}},CKEDITOR.dom.walker.whitespaces=function(t){return function(e){var n;return e&&e.type==CKEDITOR.NODE_TEXT&&(n=!CKEDITOR.tools.trim(e.getText())||CKEDITOR.env.webkit&&e.getText()==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE),!!(t^n)}},CKEDITOR.dom.walker.invisible=function(t){var e=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.env.webkit?1:0;return function(i){return e(i)?i=1:(i.type==CKEDITOR.NODE_TEXT&&(i=i.getParent()),i=i.$.offsetWidth<=n),!!(t^i)}},CKEDITOR.dom.walker.nodeType=function(t,e){return function(n){return!!(e^n.type==t)}},CKEDITOR.dom.walker.bogus=function(t){function e(t){return!o(t)&&!a(t)}return function(n){var i=CKEDITOR.env.needsBrFiller?n.is&&n.is("br"):n.getText&&r.test(n.getText());return i&&(i=n.getParent(),n=n.getNext(e),i=i.isBlockBoundary()&&(!n||n.type==CKEDITOR.NODE_ELEMENT&&n.isBlockBoundary())),!!(t^i)}},CKEDITOR.dom.walker.temp=function(t){return function(e){return e.type!=CKEDITOR.NODE_ELEMENT&&(e=e.getParent()),e=e&&e.hasAttribute("data-cke-temp"),!!(t^e)}};var r=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,o=CKEDITOR.dom.walker.whitespaces(),a=CKEDITOR.dom.walker.bookmark(),s=CKEDITOR.dom.walker.temp(),l=function(t){return a(t)||o(t)||t.type==CKEDITOR.NODE_ELEMENT&&t.is(CKEDITOR.dtd.$inline)&&!t.is(CKEDITOR.dtd.$empty)};CKEDITOR.dom.walker.ignored=function(t){return function(e){return e=o(e)||a(e)||s(e),!!(t^e)}};var c=CKEDITOR.dom.walker.ignored();CKEDITOR.dom.walker.empty=function(t){return function(e){for(var n=0,i=e.getChildCount();n<i;++n)if(!c(e.getChild(n)))return!!t;return!t}};var u=CKEDITOR.dom.walker.empty(),d=CKEDITOR.dom.walker.validEmptyBlockContainers=CKEDITOR.tools.extend(function(t){var e,n={};for(e in t)CKEDITOR.dtd[e]["#"]&&(n[e]=1);return n}(CKEDITOR.dtd.$block),{caption:1,td:1,th:1});CKEDITOR.dom.walker.editable=function(t){return function(e){return e=!c(e)&&!!(e.type==CKEDITOR.NODE_TEXT||e.type==CKEDITOR.NODE_ELEMENT&&(e.is(CKEDITOR.dtd.$inline)||e.is("hr")||"false"==e.getAttribute("contenteditable")||!CKEDITOR.env.needsBrFiller&&e.is(d)&&u(e))),!!(t^e)}},CKEDITOR.dom.element.prototype.getBogus=function(){var t=this;do{t=t.getPreviousSourceNode()}while(l(t));return!(!t||!(CKEDITOR.env.needsBrFiller?t.is&&t.is("br"):t.getText&&r.test(t.getText())))&&t}}(),CKEDITOR.dom.range=function(t){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null,this.collapsed=!0;var e=t instanceof CKEDITOR.dom.document;this.document=e?t:t.getDocument(),this.root=e?t.getBody():t},function(){function t(t){t.collapsed=t.startContainer&&t.endContainer&&t.startContainer.equals(t.endContainer)&&t.startOffset==t.endOffset}function e(t,e,n,i,r){function o(t,e,n,i){var o=n?t.getPrevious():t.getNext();return i&&a?o:(l||i?e.append(t.clone(!0,r),n):(t.remove(),s&&e.append(t)),o)}t.optimizeBookmark();var a=0===e,s=1==e,l=2==e;e=l||s;var c,u,d,h,f,p,g=t.startContainer,m=t.endContainer,v=t.startOffset,y=t.endOffset;if(l&&m.type==CKEDITOR.NODE_TEXT&&g.equals(m))g=t.document.createText(g.substring(v,y)),n.append(g);else{m.type==CKEDITOR.NODE_TEXT?l?p=!0:m=m.split(y):0<m.getChildCount()?y>=m.getChildCount()?(m=m.getChild(y-1),u=!0):m=m.getChild(y):h=u=!0,g.type==CKEDITOR.NODE_TEXT?l?f=!0:g.split(v):0<g.getChildCount()?0===v?(g=g.getChild(v),c=!0):g=g.getChild(v-1):d=c=!0;for(var E,b,C,T=g.getParents(),w=m.getParents(),I=function(){var t,e,n,i=Math.min(T.length,w.length);for(t=0;t<i;t++)if(e=T[t],n=w[t],!e.equals(n))return t;return t-1}(),O=T.length-1,D=w.length-1,_=n,k=-1,R=I;R<=O;R++){for(C=(b=T[R]).getNext(),R!=O||b.equals(w[R])&&O<D?e&&(E=_.append(b.clone(0,r))):c?o(b,_,!1,d):f&&_.append(t.document.createText(b.substring(v)));C;){if(C.equals(w[R])){k=R;break}C=o(C,_)}_=E}for(_=n,R=I;R<=D;R++)if(C=(n=w[R]).getPrevious(),n.equals(T[R]))e&&(_=_.getChild(0));else{if(R!=D||n.equals(T[R])&&D<O?e&&(E=_.append(n.clone(0,r))):u?o(n,_,!1,h):p&&_.append(t.document.createText(n.substring(0,y))),R>k)for(;C;)C=o(C,_,!0);_=E}l||function(){var e=I-1,n=d&&h&&!g.equals(m);e<O-1||e<D-1||n?(n?t.moveToPosition(m,CKEDITOR.POSITION_BEFORE_START):D==e+1&&u?t.moveToPosition(w[e],CKEDITOR.POSITION_BEFORE_END):t.moveToPosition(w[e+1],CKEDITOR.POSITION_BEFORE_START),i&&(e=T[e+1])&&e.type==CKEDITOR.NODE_ELEMENT&&((n=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',t.document)).insertAfter(e),e.mergeSiblings(!1),t.moveToBookmark({startNode:n}))):t.collapse(!0)}()}}function n(){var t=!1,e=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(!0),i=CKEDITOR.dom.walker.bogus();return function(o){return!(!n(o)&&!e(o))||(i(o)&&!t?t=!0:!(o.type==CKEDITOR.NODE_TEXT&&(o.hasAscendant("pre")||CKEDITOR.tools.trim(o.getText()).length)||o.type==CKEDITOR.NODE_ELEMENT&&!o.is(r)))}}function i(t){return function(){var e;return this[t?"getPreviousNode":"getNextNode"](function(t){return!e&&l(t)&&(e=t),s(t)&&!(o(t)&&t.equals(e))})}}var r={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,var:1},o=CKEDITOR.dom.walker.bogus(),a=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,s=CKEDITOR.dom.walker.editable(),l=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var t=new CKEDITOR.dom.range(this.root);return t._setStartContainer(this.startContainer),t.startOffset=this.startOffset,t._setEndContainer(this.endContainer),t.endOffset=this.endOffset,t.collapsed=this.collapsed,t},collapse:function(t){t?(this._setEndContainer(this.startContainer),this.endOffset=this.startOffset):(this._setStartContainer(this.endContainer),this.startOffset=this.endOffset),this.collapsed=!0},cloneContents:function(t){var n=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||e(this,2,n,!1,void 0===t||t),n},deleteContents:function(t){this.collapsed||e(this,0,null,t)},extractContents:function(t,n){var i=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||e(this,1,i,t,void 0===n||n),i},createBookmark:function(t){var e,n,i,r,o=this.collapsed;return(e=this.document.createElement("span")).data("cke-bookmark",1),e.setStyle("display","none"),e.setHtml("&nbsp;"),t&&(i="cke_bm_"+CKEDITOR.tools.getNextNumber(),e.setAttribute("id",i+(o?"C":"S"))),o||((n=e.clone()).setHtml("&nbsp;"),t&&n.setAttribute("id",i+"E"),(r=this.clone()).collapse(),r.insertNode(n)),(r=this.clone()).collapse(!0),r.insertNode(e),n?(this.setStartAfter(e),this.setEndBefore(n)):this.moveToPosition(e,CKEDITOR.POSITION_AFTER_END),{startNode:t?i+(o?"C":"S"):e,endNode:t?i+"E":n,serializable:t,collapsed:o}},createBookmark2:function(){function t(t){var e,i=t.container,r=t.offset,o=r;if((e=(e=i).type!=CKEDITOR.NODE_ELEMENT||0===o||o==e.getChildCount()?0:e.getChild(o-1).type==CKEDITOR.NODE_TEXT&&e.getChild(o).type==CKEDITOR.NODE_TEXT)&&(r=(i=i.getChild(r-1)).getLength()),i.type==CKEDITOR.NODE_ELEMENT&&0<r){t:{for(e=i;r--;)if(0<=(o=e.getChild(r).getIndex(!0))){r=o;break t}r=-1}r+=1}if(i.type==CKEDITOR.NODE_TEXT){for(e=i,o=0;(e=e.getPrevious())&&e.type==CKEDITOR.NODE_TEXT;)o+=e.getText().replace(CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE,"").length;e=o,i.getText()?r+=e:(o=i.getPrevious(n),e?(r=e,i=o?o.getNext():i.getParent().getFirst()):(i=i.getParent(),r=o?o.getIndex(!0)+1:0))}t.container=i,t.offset=r}function e(t,e){var n=e.getCustomData("cke-fillingChar");if(n){var i=t.container;n.equals(i)&&(t.offset-=CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE.length,0>=t.offset&&(t.offset=i.getIndex(),t.container=i.getParent()))}}var n=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0);return function(n){var i=this.collapsed,r={container:this.startContainer,offset:this.startOffset},o={container:this.endContainer,offset:this.endOffset};return n&&(t(r),e(r,this.root),i||(t(o),e(o,this.root))),{start:r.container.getAddress(n),end:i?null:o.container.getAddress(n),startOffset:r.offset,endOffset:o.offset,normalized:n,collapsed:i,is2:!0}}}(),moveToBookmark:function(t){if(t.is2){var e=this.document.getByAddress(t.start,t.normalized),n=t.startOffset,i=t.end&&this.document.getByAddress(t.end,t.normalized);t=t.endOffset,this.setStart(e,n),i?this.setEnd(i,t):this.collapse(!0)}else e=(n=t.serializable)?this.document.getById(t.startNode):t.startNode,t=n?this.document.getById(t.endNode):t.endNode,this.setStartBefore(e),e.remove(),t?(this.setEndBefore(t),t.remove()):this.collapse(!0)},getBoundaryNodes:function(){var t,e=this.startContainer,n=this.endContainer,i=this.startOffset,r=this.endOffset;if(e.type==CKEDITOR.NODE_ELEMENT)if((t=e.getChildCount())>i)e=e.getChild(i);else if(1>t)e=e.getPreviousSourceNode();else{for(e=e.$;e.lastChild;)e=e.lastChild;e=(e=new CKEDITOR.dom.node(e)).getNextSourceNode()||e}if(n.type==CKEDITOR.NODE_ELEMENT)if((t=n.getChildCount())>r)n=n.getChild(r).getPreviousSourceNode(!0);else if(1>t)n=n.getPreviousSourceNode();else{for(n=n.$;n.lastChild;)n=n.lastChild;n=new CKEDITOR.dom.node(n)}return e.getPosition(n)&CKEDITOR.POSITION_FOLLOWING&&(e=n),{startNode:e,endNode:n}},getCommonAncestor:function(t,e){var n=this.startContainer,i=this.endContainer;return n=n.equals(i)?t&&n.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?n.getChild(this.startOffset):n:n.getCommonAncestor(i),e&&!n.is?n.getParent():n},optimize:function(){var t=this.startContainer,e=this.startOffset;t.type!=CKEDITOR.NODE_ELEMENT&&(e?e>=t.getLength()&&this.setStartAfter(t):this.setStartBefore(t)),t=this.endContainer,e=this.endOffset,t.type!=CKEDITOR.NODE_ELEMENT&&(e?e>=t.getLength()&&this.setEndAfter(t):this.setEndBefore(t))},optimizeBookmark:function(){var t=this.startContainer,e=this.endContainer;t.is&&t.is("span")&&t.data("cke-bookmark")&&this.setStartAt(t,CKEDITOR.POSITION_BEFORE_START),e&&e.is&&e.is("span")&&e.data("cke-bookmark")&&this.setEndAt(e,CKEDITOR.POSITION_AFTER_END)},trim:function(t,e){var n=this.startContainer,i=this.startOffset,r=this.collapsed;if((!t||r)&&n&&n.type==CKEDITOR.NODE_TEXT){if(i)if(i>=n.getLength())i=n.getIndex()+1,n=n.getParent();else{var o=n.split(i);i=n.getIndex()+1,n=n.getParent(),this.startContainer.equals(this.endContainer)?this.setEnd(o,this.endOffset-this.startOffset):n.equals(this.endContainer)&&(this.endOffset+=1)}else i=n.getIndex(),n=n.getParent();if(this.setStart(n,i),r)return void this.collapse(!0)}n=this.endContainer,i=this.endOffset,e||r||!n||n.type!=CKEDITOR.NODE_TEXT||(i?(i>=n.getLength()||n.split(i),i=n.getIndex()+1):i=n.getIndex(),n=n.getParent(),this.setEnd(n,i))},enlarge:function(t,e){function n(t){return t&&t.type==CKEDITOR.NODE_ELEMENT&&t.hasAttribute("contenteditable")?null:t}var i=new RegExp(/[^\s\ufeff]/);switch(t){case CKEDITOR.ENLARGE_INLINE:var r=1;case CKEDITOR.ENLARGE_ELEMENT:var o=function(t,e){var n,r;for((n=new CKEDITOR.dom.range(p)).setStart(t,e),n.setEndAt(p,CKEDITOR.POSITION_BEFORE_END),(n=new CKEDITOR.dom.walker(n)).guard=function(t){return!(t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary())};r=n.next();){if(r.type!=CKEDITOR.NODE_TEXT)return!1;if(h=r!=t?r.getText():r.substring(e),i.test(h))return!1}return!0};if(this.collapsed)break;var a,s,l,c,u,d,h,f=this.getCommonAncestor(),p=this.root,g=!1;d=this.startContainer;var m=this.startOffset;for(d.type==CKEDITOR.NODE_TEXT?(m&&(g=!!(d=!CKEDITOR.tools.trim(d.substring(0,m)).length&&d)),d&&((c=d.getPrevious())||(l=d.getParent()))):(m&&(c=d.getChild(m-1)||d.getLast()),c||(l=d)),l=n(l);l||c;){if(l&&!c){if(!u&&l.equals(f)&&(u=!0),r?l.isBlockBoundary():!p.contains(l))break;g&&"inline"==l.getComputedStyle("display")||(g=!1,u?a=l:this.setStartBefore(l)),c=l.getPrevious()}for(;c;)if(d=!1,c.type==CKEDITOR.NODE_COMMENT)c=c.getPrevious();else{if(c.type==CKEDITOR.NODE_TEXT)h=c.getText(),i.test(h)&&(c=null),d=/[\s\ufeff]$/.test(h);else if((c.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||e&&c.is("br"))&&!c.data("cke-bookmark"))if(g&&CKEDITOR.dtd.$removeEmpty[c.getName()]){if(h=c.getText(),i.test(h))c=null;else{m=c.$.getElementsByTagName("*");for(var v,y=0;v=m[y++];)if(!CKEDITOR.dtd.$removeEmpty[v.nodeName.toLowerCase()]){c=null;break}}c&&(d=!!h.length)}else c=null;if(d&&(g?u?a=l:l&&this.setStartBefore(l):g=!0),c){if(d=c.getPrevious(),!l&&!d){l=c,c=null;break}c=d}else l=null}l&&(l=n(l.getParent()))}for(d=this.endContainer,m=this.endOffset,l=c=null,u=g=!1,d.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(d.substring(m)).length?g=!0:(g=!d.getLength(),m==d.getLength()?(c=d.getNext())||(l=d.getParent()):o(d,m)&&(l=d.getParent())):(c=d.getChild(m))||(l=d);l||c;){if(l&&!c){if(!u&&l.equals(f)&&(u=!0),r?l.isBlockBoundary():!p.contains(l))break;g&&"inline"==l.getComputedStyle("display")||(g=!1,u?s=l:l&&this.setEndAfter(l)),c=l.getNext()}for(;c;){if(d=!1,c.type==CKEDITOR.NODE_TEXT)h=c.getText(),o(c,0)||(c=null),d=/^[\s\ufeff]/.test(h);else if(c.type==CKEDITOR.NODE_ELEMENT){if((0<c.$.offsetWidth||e&&c.is("br"))&&!c.data("cke-bookmark"))if(g&&CKEDITOR.dtd.$removeEmpty[c.getName()]){if(h=c.getText(),i.test(h))c=null;else for(m=c.$.getElementsByTagName("*"),y=0;v=m[y++];)if(!CKEDITOR.dtd.$removeEmpty[v.nodeName.toLowerCase()]){c=null;break}c&&(d=!!h.length)}else c=null}else d=1;if(d&&g&&(u?s=l:this.setEndAfter(l)),c){if(d=c.getNext(),!l&&!d){l=c,c=null;break}c=d}else l=null}l&&(l=n(l.getParent()))}a&&s&&(f=a.contains(s)?s:a,this.setStartBefore(f),this.setEndAfter(f));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:l=new CKEDITOR.dom.range(this.root),p=this.root,l.setStartAt(p,CKEDITOR.POSITION_AFTER_START),l.setEnd(this.startContainer,this.startOffset),l=new CKEDITOR.dom.walker(l);var E,b,C=CKEDITOR.dom.walker.blockBoundary(t==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),T=null,w=function(t){if(t.type==CKEDITOR.NODE_ELEMENT&&"false"==t.getAttribute("contenteditable"))if(T){if(T.equals(t))return void(T=null)}else T=t;else if(T)return;var e=C(t);return e||(E=t),e};if(r=function(t){var e=w(t);return!e&&t.is&&t.is("br")&&(b=t),e},l.guard=w,l=l.lastBackward(),E=E||p,this.setStartAt(E,!E.is("br")&&(!l&&this.checkStartOfBlock()||l&&E.contains(l))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END),t==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){l=this.clone(),l=new CKEDITOR.dom.walker(l);var I=CKEDITOR.dom.walker.whitespaces(),O=CKEDITOR.dom.walker.bookmark();if(l.evaluator=function(t){return!I(t)&&!O(t)},(l=l.previous())&&l.type==CKEDITOR.NODE_ELEMENT&&l.is("br"))break}(l=this.clone()).collapse(),l.setEndAt(p,CKEDITOR.POSITION_BEFORE_END),(l=new CKEDITOR.dom.walker(l)).guard=t==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?r:w,E=T=b=null,l=l.lastForward(),E=E||p,this.setEndAt(E,!l&&this.checkEndOfBlock()||l&&E.contains(l)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START),b&&this.setEndAfter(b)}},shrink:function(t,e,n){if(!this.collapsed){t=t||CKEDITOR.SHRINK_TEXT;var i=this.clone(),r=this.startContainer,o=this.endContainer,a=this.startOffset,s=this.endOffset,l=1,c=1;r&&r.type==CKEDITOR.NODE_TEXT&&(a?a>=r.getLength()?i.setStartAfter(r):(i.setStartBefore(r),l=0):i.setStartBefore(r)),o&&o.type==CKEDITOR.NODE_TEXT&&(s?s>=o.getLength()?i.setEndAfter(o):(i.setEndAfter(o),c=0):i.setEndBefore(o)),i=new CKEDITOR.dom.walker(i);var u,d=CKEDITOR.dom.walker.bookmark();return i.evaluator=function(e){return e.type==(t==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)},i.guard=function(e,i){return!!d(e)||!(t==CKEDITOR.SHRINK_ELEMENT&&e.type==CKEDITOR.NODE_TEXT||i&&e.equals(u)||!1===n&&e.type==CKEDITOR.NODE_ELEMENT&&e.isBlockBoundary()||e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("contenteditable"))&&(i||e.type!=CKEDITOR.NODE_ELEMENT||(u=e),!0)},l&&(r=i[t==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(r,e?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START),c&&(i.reset(),(i=i[t==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(i,e?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END)),!(!l&&!c)}},insertNode:function(t){this.optimizeBookmark(),this.trim(!1,!0);var e=this.startContainer,n=e.getChild(this.startOffset);n?t.insertBefore(n):e.append(t),t.getParent()&&t.getParent().equals(this.endContainer)&&this.endOffset++,this.setStartBefore(t)},moveToPosition:function(t,e){this.setStartAt(t,e),this.collapse(!0)},moveToRange:function(t){this.setStart(t.startContainer,t.startOffset),this.setEnd(t.endContainer,t.endOffset)},selectNodeContents:function(t){this.setStart(t,0),this.setEnd(t,t.type==CKEDITOR.NODE_TEXT?t.getLength():t.getChildCount())},setStart:function(e,n){e.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[e.getName()]&&(n=e.getIndex(),e=e.getParent()),this._setStartContainer(e),this.startOffset=n,this.endContainer||(this._setEndContainer(e),this.endOffset=n),t(this)},setEnd:function(e,n){e.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[e.getName()]&&(n=e.getIndex()+1,e=e.getParent()),this._setEndContainer(e),this.endOffset=n,this.startContainer||(this._setStartContainer(e),this.startOffset=n),t(this)},setStartAfter:function(t){this.setStart(t.getParent(),t.getIndex()+1)},setStartBefore:function(t){this.setStart(t.getParent(),t.getIndex())},setEndAfter:function(t){this.setEnd(t.getParent(),t.getIndex()+1)},setEndBefore:function(t){this.setEnd(t.getParent(),t.getIndex())},setStartAt:function(e,n){switch(n){case CKEDITOR.POSITION_AFTER_START:this.setStart(e,0);break;case CKEDITOR.POSITION_BEFORE_END:e.type==CKEDITOR.NODE_TEXT?this.setStart(e,e.getLength()):this.setStart(e,e.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(e);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(e)}t(this)},setEndAt:function(e,n){switch(n){case CKEDITOR.POSITION_AFTER_START:this.setEnd(e,0);break;case CKEDITOR.POSITION_BEFORE_END:e.type==CKEDITOR.NODE_TEXT?this.setEnd(e,e.getLength()):this.setEnd(e,e.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(e);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(e)}t(this)},fixBlock:function(t,e){var n=this.createBookmark(),i=this.document.createElement(e);this.collapse(t),this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),this.extractContents().appendTo(i),i.trim(),this.insertNode(i);var r=i.getBogus();return r&&r.remove(),i.appendBogus(),this.moveToBookmark(n),i},splitBlock:function(t,e){var n=new CKEDITOR.dom.elementPath(this.startContainer,this.root),i=new CKEDITOR.dom.elementPath(this.endContainer,this.root),r=n.block,o=i.block,a=null;return n.blockLimit.equals(i.blockLimit)?("br"!=t&&(r||(r=this.fixBlock(!0,t),o=new CKEDITOR.dom.elementPath(this.endContainer,this.root).block),o||(o=this.fixBlock(!1,t))),n=r&&this.checkStartOfBlock(),i=o&&this.checkEndOfBlock(),this.deleteContents(),r&&r.equals(o)&&(i?(a=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(o,CKEDITOR.POSITION_AFTER_END),o=null):n?(a=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(r,CKEDITOR.POSITION_BEFORE_START),r=null):(o=this.splitElement(r,e||!1),r.is("ul","ol")||r.appendBogus())),{previousBlock:r,nextBlock:o,wasStartOfBlock:n,wasEndOfBlock:i,elementPath:a}):null},splitElement:function(t,e){if(!this.collapsed)return null;this.setEndAt(t,CKEDITOR.POSITION_BEFORE_END);var n=this.extractContents(!1,e||!1),i=t.clone(!1,e||!1);return n.appendTo(i),i.insertAfter(t),this.moveToPosition(t,CKEDITOR.POSITION_AFTER_END),i},removeEmptyBlocksAtEnd:function(){function t(t){return function(i){return!(e(i)||n(i)||i.type==CKEDITOR.NODE_ELEMENT&&i.isEmptyInlineRemoveable()||t.is("table")&&i.is("caption"))}}var e=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(!1);return function(e){for(var n,i=this.createBookmark(),r=this[e?"endPath":"startPath"](),o=r.block||r.blockLimit;o&&!o.equals(r.root)&&!o.getFirst(t(o));)n=o.getParent(),this[e?"setEndAt":"setStartAt"](o,CKEDITOR.POSITION_AFTER_END),o.remove(1),o=n;this.moveToBookmark(i)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(t,e){var n=e==CKEDITOR.START,i=this.clone();return i.collapse(n),i[n?"setStartAt":"setEndAt"](t,n?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),(i=new CKEDITOR.dom.walker(i)).evaluator=function(t){var e=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(1);return function(i){return!(!n(i)&&!e(i))||!t&&o(i)||i.type==CKEDITOR.NODE_ELEMENT&&i.is(CKEDITOR.dtd.$removeEmpty)}}(n),i[n?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var t=this.startContainer,e=this.startOffset;return CKEDITOR.env.ie&&e&&t.type==CKEDITOR.NODE_TEXT&&(t=CKEDITOR.tools.ltrim(t.substring(0,e)),a.test(t)&&this.trim(0,1)),this.trim(),t=new CKEDITOR.dom.elementPath(this.startContainer,this.root),(e=this.clone()).collapse(!0),e.setStartAt(t.block||t.blockLimit,CKEDITOR.POSITION_AFTER_START),(t=new CKEDITOR.dom.walker(e)).evaluator=n(),t.checkBackward()},checkEndOfBlock:function(){var t=this.endContainer,e=this.endOffset;return CKEDITOR.env.ie&&t.type==CKEDITOR.NODE_TEXT&&(t=CKEDITOR.tools.rtrim(t.substring(e)),a.test(t)&&this.trim(1,0)),this.trim(),t=new CKEDITOR.dom.elementPath(this.endContainer,this.root),(e=this.clone()).collapse(!1),e.setEndAt(t.block||t.blockLimit,CKEDITOR.POSITION_BEFORE_END),(t=new CKEDITOR.dom.walker(e)).evaluator=n(),t.checkForward()},getPreviousNode:function(t,e,n){var i=this.clone();return i.collapse(1),i.setStartAt(n||this.root,CKEDITOR.POSITION_AFTER_START),(n=new CKEDITOR.dom.walker(i)).evaluator=t,n.guard=e,n.previous()},getNextNode:function(t,e,n){var i=this.clone();return i.collapse(),i.setEndAt(n||this.root,CKEDITOR.POSITION_BEFORE_END),(n=new CKEDITOR.dom.walker(i)).evaluator=t,n.guard=e,n.next()},checkReadOnly:function(){function t(t,e){for(;t;){if(t.type==CKEDITOR.NODE_ELEMENT){if("false"==t.getAttribute("contentEditable")&&!t.data("cke-editable"))return 0;if(t.is("html")||"true"==t.getAttribute("contentEditable")&&(t.contains(e)||t.equals(e)))break}t=t.getParent()}return 1}return function(){var e=this.startContainer,n=this.endContainer;return!(t(e,n)&&t(n,e))}}(),moveToElementEditablePosition:function(t,e){if(t.type==CKEDITOR.NODE_ELEMENT&&!t.isEditable(!1))return this.moveToPosition(t,e?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var n=0;t;){if(t.type==CKEDITOR.NODE_TEXT){e&&this.endContainer&&this.checkEndOfBlock()&&a.test(t.getText())?this.moveToPosition(t,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(t,e?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),n=1;break}if(t.type==CKEDITOR.NODE_ELEMENT)if(t.isEditable())this.moveToPosition(t,e?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),n=1;else if(e&&t.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(t,CKEDITOR.POSITION_BEFORE_START);else if("false"==t.getAttribute("contenteditable")&&t.is(CKEDITOR.dtd.$block))return this.setStartBefore(t),this.setEndAfter(t),!0;var i=t,r=n,o=void 0;i.type==CKEDITOR.NODE_ELEMENT&&i.isEditable(!1)&&(o=i[e?"getLast":"getFirst"](l)),r||o||(o=i[e?"getPrevious":"getNext"](l)),t=o}return!!n},moveToClosestEditablePosition:function(t,e){var n,i,r,o=0,a=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];return t?(n=new CKEDITOR.dom.range(this.root)).moveToPosition(t,a[e?0:1]):n=this.clone(),t&&!t.is(CKEDITOR.dtd.$block)?o=1:(i=n[e?"getNextEditableNode":"getPreviousEditableNode"]())&&(o=1,(r=i.type==CKEDITOR.NODE_ELEMENT)&&i.is(CKEDITOR.dtd.$block)&&"false"==i.getAttribute("contenteditable")?(n.setStartAt(i,CKEDITOR.POSITION_BEFORE_START),n.setEndAt(i,CKEDITOR.POSITION_AFTER_END)):!CKEDITOR.env.needsBrFiller&&r&&i.is(CKEDITOR.dom.walker.validEmptyBlockContainers)?(n.setEnd(i,0),n.collapse()):n.moveToPosition(i,a[e?1:0])),o&&this.moveToRange(n),!!o},moveToElementEditStart:function(t){return this.moveToElementEditablePosition(t)},moveToElementEditEnd:function(t){return this.moveToElementEditablePosition(t,!0)},getEnclosedNode:function(){if((t=this.clone()).optimize(),t.startContainer.type!=CKEDITOR.NODE_ELEMENT||t.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var t=new CKEDITOR.dom.walker(t),e=CKEDITOR.dom.walker.bookmark(!1,!0),n=CKEDITOR.dom.walker.whitespaces(!0);t.evaluator=function(t){return n(t)&&e(t)};var i=t.next();return t.reset(),i&&i.equals(t.previous())?i:null},getTouchedStartNode:function(){var t=this.startContainer;return this.collapsed||t.type!=CKEDITOR.NODE_ELEMENT?t:t.getChild(this.startOffset)||t},getTouchedEndNode:function(){var t=this.endContainer;return this.collapsed||t.type!=CKEDITOR.NODE_ELEMENT?t:t.getChild(this.endOffset-1)||t},getNextEditableNode:i(),getPreviousEditableNode:i(1),scrollIntoView:function(){var t,e,n,i=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",this.document),r=this.clone();r.optimize(),(n=r.startContainer.type==CKEDITOR.NODE_TEXT)?(e=r.startContainer.getText(),t=r.startContainer.split(r.startOffset),i.insertAfter(r.startContainer)):r.insertNode(i),i.scrollIntoView(),n&&(r.startContainer.setText(e),t.remove()),i.remove()},_setStartContainer:function(t){this.startContainer=t},_setEndContainer:function(t){this.endContainer=t},_find:function(t,e){var n,i,r,o,a=this.getCommonAncestor(),s=this.getBoundaryNodes(),l=[];if(a&&a.find)for(i=a.find(t),n=0;n<i.count();n++)a=i.getItem(n),(e||!a.isReadOnly())&&(r=a.getPosition(s.startNode)&CKEDITOR.POSITION_FOLLOWING||s.startNode.equals(a),o=a.getPosition(s.endNode)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IS_CONTAINED,r&&o&&l.push(a));return l}}}(),CKEDITOR.POSITION_AFTER_START=1,CKEDITOR.POSITION_BEFORE_END=2,CKEDITOR.POSITION_BEFORE_START=3,CKEDITOR.POSITION_AFTER_END=4,CKEDITOR.ENLARGE_ELEMENT=1,CKEDITOR.ENLARGE_BLOCK_CONTENTS=2,CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3,CKEDITOR.ENLARGE_INLINE=4,CKEDITOR.START=1,CKEDITOR.END=2,CKEDITOR.SHRINK_ELEMENT=1,CKEDITOR.SHRINK_TEXT=2,function(){function t(t){1>arguments.length||(this.range=t,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function e(t,n,i,r){t:{null==r&&(r=function(t){var e=[];return i.forEach(function(t){if("true"==t.getAttribute("contenteditable"))return e.push(t),!1},CKEDITOR.NODE_ELEMENT,!0),e}());for(var o;o=r.shift();)if(o.getDtd().p){r={element:o,remaining:r};break t}r=null}return r?(o=CKEDITOR.filter.instances[r.element.data("cke-filter")])&&!o.check(n)?e(t,n,i,r.remaining):((n=new CKEDITOR.dom.range(r.element)).selectNodeContents(r.element),(n=n.createIterator()).enlargeBr=t.enlargeBr,n.enforceRealBlocks=t.enforceRealBlocks,n.activeFilter=n.filter=o,t._.nestedEditable={element:r.element,container:i,remaining:r.remaining,iterator:n},1):0}function n(t,e,n){return!!e&&((t=t.clone()).collapse(!n),t.checkBoundaryOfElement(e,n?CKEDITOR.START:CKEDITOR.END))}var i=/^[\r\n\t ]+$/,r=CKEDITOR.dom.walker.bookmark(!1,!0),o=CKEDITOR.dom.walker.whitespaces(!0),a=function(t){return r(t)&&o(t)},s={dd:1,dt:1,li:1};t.prototype={getNextParagraph:function(t){var o,l,c,u,d;if(t=t||"p",this._.nestedEditable){if(o=this._.nestedEditable.iterator.getNextParagraph(t))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,o;if(this.activeFilter=this.filter,e(this,t,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(t);this._.nestedEditable=null}if(!this.range.root.getDtd()[t])return null;if(!this._.started){var h=this.range.clone();l=h.startPath();var f=h.endPath(),p=!h.collapsed&&n(h,l.block),g=!h.collapsed&&n(h,f.block,1);h.shrink(CKEDITOR.SHRINK_ELEMENT,!0),p&&h.setStartAt(l.block,CKEDITOR.POSITION_BEFORE_END),g&&h.setEndAt(f.block,CKEDITOR.POSITION_AFTER_START),l=h.endContainer.hasAscendant("pre",!0)||h.startContainer.hasAscendant("pre",!0),h.enlarge(this.forceBrBreak&&!l||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS),h.collapsed||(l=new CKEDITOR.dom.walker(h.clone()),f=CKEDITOR.dom.walker.bookmark(!0,!0),l.evaluator=f,this._.nextNode=l.next(),(l=new CKEDITOR.dom.walker(h.clone())).evaluator=f,l=l.previous(),this._.lastNode=l.getNextSourceNode(!0,null,h.root),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&((f=this.range.clone()).moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),f.checkEndOfBlock()&&(f=new CKEDITOR.dom.elementPath(f.endContainer,f.root),this._.lastNode=(f.block||f.blockLimit).getNextSourceNode(!0))),this._.lastNode&&h.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=h.document.createText(""),this._.lastNode.insertAfter(l)),h=null),this._.started=1,l=h}for(f=this._.nextNode,h=this._.lastNode,this._.nextNode=null;f;){p=0,g=f.hasAscendant("pre");var m=f.type!=CKEDITOR.NODE_ELEMENT,v=0;if(m)f.type==CKEDITOR.NODE_TEXT&&i.test(f.getText())&&(m=0);else{var y=f.getName();if(CKEDITOR.dtd.$block[y]&&"false"==f.getAttribute("contenteditable")){e(this,t,o=f);break}if(f.isBlockBoundary(this.forceBrBreak&&!g&&{br:1})){if("br"==y)m=1;else if(!l&&!f.getChildCount()&&"hr"!=y){o=f,c=f.equals(h);break}l&&(l.setEndAt(f,CKEDITOR.POSITION_BEFORE_START),"br"!=y&&(this._.nextNode=f)),p=1}else{if(f.getFirst()){l||(l=this.range.clone()).setStartAt(f,CKEDITOR.POSITION_BEFORE_START),f=f.getFirst();continue}m=1}}if(m&&!l&&(l=this.range.clone()).setStartAt(f,CKEDITOR.POSITION_BEFORE_START),c=(!p||m)&&f.equals(h),l&&!p)for(;!f.getNext(a)&&!c;){if((y=f.getParent()).isBlockBoundary(this.forceBrBreak&&!g&&{br:1})){p=1,m=0,c||y.equals(h),l.setEndAt(y,CKEDITOR.POSITION_BEFORE_END);break}m=1,c=(f=y).equals(h),v=1}if(m&&l.setEndAt(f,CKEDITOR.POSITION_AFTER_END),(c=!(f=this._getNextSourceNode(f,v,h)))||p&&l)break}if(!o){if(!l)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;f=(o=new CKEDITOR.dom.elementPath(l.startContainer,l.root)).blockLimit,p={div:1,th:1,td:1},!(o=o.block)&&f&&!this.enforceRealBlocks&&p[f.getName()]&&l.checkStartOfBlock()&&l.checkEndOfBlock()&&!f.equals(l.root)?o=f:!o||this.enforceRealBlocks&&o.is(s)?(o=this.range.document.createElement(t),l.extractContents().appendTo(o),o.trim(),l.insertNode(o),u=d=!0):"li"!=o.getName()?l.checkStartOfBlock()&&l.checkEndOfBlock()||(o=o.clone(!1),l.extractContents().appendTo(o),o.trim(),u=!(d=l.splitBlock()).wasStartOfBlock,d=!d.wasEndOfBlock,l.insertNode(o)):c||(this._.nextNode=o.equals(h)?null:this._getNextSourceNode(l.getBoundaryNodes().endNode,1,h))}return u&&(u=o.getPrevious())&&u.type==CKEDITOR.NODE_ELEMENT&&("br"==u.getName()?u.remove():u.getLast()&&"br"==u.getLast().$.nodeName.toLowerCase()&&u.getLast().remove()),d&&(u=o.getLast())&&u.type==CKEDITOR.NODE_ELEMENT&&"br"==u.getName()&&(!CKEDITOR.env.needsBrFiller||u.getPrevious(r)||u.getNext(r))&&u.remove(),this._.nextNode||(this._.nextNode=c||o.equals(h)||!h?null:this._getNextSourceNode(o,1,h)),o},_getNextSourceNode:function(t,e,n){function i(t){return!(t.equals(n)||t.equals(o))}var o=this.range.root;for(t=t.getNextSourceNode(e,null,i);!r(t);)t=t.getNextSourceNode(e,null,i);return t}},CKEDITOR.dom.range.prototype.createIterator=function(){return new t(this)}}(),CKEDITOR.command=function(t,e){var n;this.uiItems=[],this.exec=function(n){return!(this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed())&&(this.editorFocus&&t.focus(),!1===this.fire("exec")||!1!==e.exec.call(this,t,n))},this.refresh=function(t,n){return!(this.readOnly||!t.readOnly)||(this.context&&!n.isContextFor(this.context)||!this.checkAllowed(!0)?(this.disable(),!0):(this.startDisabled||this.enable(),this.modes&&!this.modes[t.mode]&&this.disable(),!1===this.fire("refresh",{editor:t,path:n})||e.refresh&&!1!==e.refresh.apply(this,arguments)))},this.checkAllowed=function(e){return e||"boolean"!=typeof n?n=t.activeFilter.checkFeature(this):n},CKEDITOR.tools.extend(this,e,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!e.context,state:CKEDITOR.TRISTATE_DISABLED}),CKEDITOR.event.call(this)},CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&void 0!==this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(t){return!(this.state==t||t!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed()||(this.previousState=this.state,this.state=t,this.fire("state"),0))},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.event.implementOn(CKEDITOR.command.prototype),CKEDITOR.ENTER_P=1,CKEDITOR.ENTER_BR=2,CKEDITOR.ENTER_DIV=3,CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,contentsCss:CKEDITOR.getUrl("contents.css"),extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1e4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]},function(){function t(t,e,n,i,r){var o,s,l;for(o in t=[],e){s="boolean"==typeof(s=e[o])?{}:"function"==typeof s?{match:s}:D(s),"$"!=o.charAt(0)&&(s.elements=o),n&&(s.featureName=n.toLowerCase());var c=s;c.elements=a(c.elements,/\s+/)||null,c.propertiesOnly=c.propertiesOnly||!0===c.elements;var u=/\s*,\s*/,d=void 0;for(d in x){c[d]=a(c[d],u)||null;var h=c,f=S[d],p=a(c[S[d]],u),g=c[d],v=[],y=!0,E=void 0;for(E in p?y=!1:p={},g)"!"==E.charAt(0)&&(E=E.slice(1),v.push(E),p[E]=!0,y=!1);for(;E=v.pop();)g[E]=g["!"+E],delete g["!"+E];h[f]=!y&&p||null}c.match=c.match||null,i.push(s),t.push(s)}for(e=r.elements,r=r.generic,n=0,i=t.length;n<i;++n){for(u in s=!0===(o=D(t[n])).classes||!0===o.styles||!0===o.attributes,c=o,d=f=u=void 0,x)c[u]=m(c[u]);for(d in h=!0,S){for(g in p=[],g=void 0,f=c[u=S[d]])-1<g.indexOf("*")?p.push(new RegExp("^"+g.replace(/\*/g,".*")+"$")):p.push(g);(f=p).length&&(c[u]=f,h=!1)}if(c.nothingRequired=h,c.noProperties=!(c.attributes||c.classes||c.styles),!0===o.elements||null===o.elements)r[s?"unshift":"push"](o);else for(l in c=o.elements,delete o.elements,c)e[l]?e[l][s?"unshift":"push"](o):e[l]=[o]}}function e(t,e,i,r){if((!t.match||t.match(e))&&(r||s(t,e))&&(t.propertiesOnly||(i.valid=!0),i.allAttributes||(i.allAttributes=n(t.attributes,e.attributes,i.validAttributes)),i.allStyles||(i.allStyles=n(t.styles,e.styles,i.validStyles)),!i.allClasses)){if(t=t.classes,e=e.classes,r=i.validClasses,t)if(!0===t)t=!0;else{for(var o,a=0,l=e.length;a<l;++a)r[o=e[a]]||(r[o]=t(o));t=!1}else t=!1;i.allClasses=t}}function n(t,e,n){if(!t)return!1;if(!0===t)return!0;for(var i in e)n[i]||(n[i]=t(i));return!1}function i(t,e,n){if(!t.match||t.match(e)){if(t.noProperties)return!1;if(n.hadInvalidAttribute=r(t.attributes,e.attributes)||n.hadInvalidAttribute,n.hadInvalidStyle=r(t.styles,e.styles)||n.hadInvalidStyle,t=t.classes,e=e.classes,t){for(var i=!1,o=!0===t,a=e.length;a--;)(o||t(e[a]))&&(e.splice(a,1),i=!0);t=i}else t=!1;n.hadInvalidClass=t||n.hadInvalidClass}}function r(t,e){if(!t)return!1;var n,i=!1,r=!0===t;for(n in e)(r||t(n))&&(delete e[n],i=!0);return i}function o(t,e,n){return!(t.disabled||t.customConfig&&!n||!e||(t._.cachedChecks={},0))}function a(t,e){if(!t)return!1;if(!0===t)return t;if("string"==typeof t)return"*"==(t=_(t))||CKEDITOR.tools.convertArrayToObject(t.split(e));if(CKEDITOR.tools.isArray(t))return!!t.length&&CKEDITOR.tools.convertArrayToObject(t);var n,i={},r=0;for(n in t)i[n]=t[n],r++;return!!r&&i}function s(t,e){if(t.nothingRequired)return!0;var n,i,r,o;if(r=t.requiredClasses)for(o=e.classes,n=0;n<r.length;++n)if("string"==typeof(i=r[n])){if(-1==CKEDITOR.tools.indexOf(o,i))return!1}else if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(o,i))return!1;return l(e.styles,t.requiredStyles)&&l(e.attributes,t.requiredAttributes)}function l(t,e){if(!e)return!0;for(var n,i=0;i<e.length;++i)if("string"==typeof(n=e[i])){if(!(n in t))return!1}else if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(t,n))return!1;return!0}function c(t){if(!t)return{};t=t.split(/\s*,\s*/).sort();for(var e={};t.length;)e[t.shift()]="cke-test";return e}function u(t){var e,n,i,r,o={},a=1;for(t=_(t);e=t.match(K);)(n=e[2])?(i=d(n,"styles"),r=d(n,"attrs"),n=d(n,"classes")):i=r=n=null,o["$"+a++]={elements:e[1],classes:n,styles:i,attributes:r},t=t.slice(e[0].length);return o}function d(t,e){var n=t.match($[e]);return n?_(n[1]):null}function h(t){var e=t.styleBackup=t.attributes.style,n=t.classBackup=t.attributes.class;t.styles||(t.styles=CKEDITOR.tools.parseCssText(e||"",1)),t.classes||(t.classes=n?n.split(/\s+/):[])}function f(t,n,r,o){var a,s=0;if(o.toHtml&&(n.name=n.name.replace(A,"$1")),o.doCallbacks&&t.elementCallbacks){t:{for(var l,c=0,u=(a=t.elementCallbacks).length;c<u;++c)if(l=a[c](n)){a=l;break t}a=void 0}if(a)return a}if(o.doTransform&&(a=t._.transformations[n.name])){for(h(n),c=0;c<a.length;++c)b(t,n,a[c]);p(n)}if(o.doFilter){t:{c=n.name,t=(u=t._).allowedRules.elements[c],a=u.allowedRules.generic,c=u.disallowedRules.elements[c],u=u.disallowedRules.generic,l=o.skipRequired;var d,f,m={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1};if(t||a){if(h(n),c)for(d=0,f=c.length;d<f;++d)if(!1===i(c[d],n,m)){t=null;break t}if(u)for(d=0,f=u.length;d<f;++d)i(u[d],n,m);if(t)for(d=0,f=t.length;d<f;++d)e(t[d],n,m,l);if(a)for(d=0,f=a.length;d<f;++d)e(a[d],n,m,l);t=m}else t=null}if(!t||!t.valid)return r.push(n),1;f=t.validAttributes;var v=t.validStyles;a=t.validClasses,c=n.attributes;var y=n.styles;u=n.classes,l=n.classBackup;var E,C,T=n.styleBackup,w=[],I=(m=[],/^data-cke-/);if(d=!1,delete c.style,delete c.class,delete n.classBackup,delete n.styleBackup,!t.allAttributes)for(E in c)f[E]||I.test(E)&&(E==(C=E.replace(/^data-cke-saved-/,""))||f[C])||(delete c[E],d=!0);if(!t.allStyles||t.hadInvalidStyle){for(E in y)t.allStyles||v[E]?w.push(E+":"+y[E]):d=!0;w.length&&(c.style=w.sort().join("; "))}else T&&(c.style=T);if(!t.allClasses||t.hadInvalidClass){for(E=0;E<u.length;++E)(t.allClasses||a[u[E]])&&m.push(u[E]);m.length&&(c.class=m.sort().join(" ")),l&&m.length<l.split(/\s+/).length&&(d=!0)}else l&&(c.class=l);if(d&&(s=1),!o.skipFinalValidation&&!g(n))return r.push(n),1}return o.toHtml&&(n.name=n.name.replace(N,"cke:$1")),s}function p(t){var e,n=t.attributes;delete n.style,delete n.class,(e=CKEDITOR.tools.writeCssText(t.styles,!0))&&(n.style=e),t.classes.length&&(n.class=t.classes.sort().join(" "))}function g(t){switch(t.name){case"a":if(!(t.children.length||t.attributes.name||t.attributes.id))return!1;break;case"img":if(!t.attributes.src)return!1}return!0}function m(t){if(!t)return!1;if(!0===t)return!0;var e=function(t){var e,n=[];for(e in t)-1<e.indexOf("*")&&n.push(e.replace(/\*/g,".*"));return n.length?new RegExp("^(?:"+n.join("|")+")$"):null}(t);return function(n){return n in t||e&&n.match(e)}}function v(){return new CKEDITOR.htmlParser.element("br")}function y(t){return t.type==CKEDITOR.NODE_ELEMENT&&("br"==t.name||O.$block[t.name])}function E(t,e,n){var i=t.name;if(O.$empty[i]||!t.children.length)"hr"==i&&"br"==e?t.replaceWith(v()):(t.parent&&n.push({check:"it",el:t.parent}),t.remove());else if(O.$block[i]||"tr"==i)if("br"==e)t.previous&&!y(t.previous)&&(e=v()).insertBefore(t),t.next&&!y(t.next)&&(e=v()).insertAfter(t),t.replaceWithChildren();else{var r;i=t.children;t:{r=O[e];for(var o,a=0,s=i.length;a<s;++a)if((o=i[a]).type==CKEDITOR.NODE_ELEMENT&&!r[o.name]){r=!1;break t}r=!0}if(r)t.name=e,t.attributes={},n.push({check:"parent-down",el:t});else{var l,c;for(a=(r=t.parent).type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==r.name,s=i.length;0<s;)o=i[--s],a&&(o.type==CKEDITOR.NODE_TEXT||o.type==CKEDITOR.NODE_ELEMENT&&O.$inline[o.name])?(l||((l=new CKEDITOR.htmlParser.element(e)).insertAfter(t),n.push({check:"parent-down",el:l})),l.add(o,0)):(l=null,c=O[r.name]||O.span,o.insertAfter(t),r.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||o.type!=CKEDITOR.NODE_ELEMENT||c[o.name]||n.push({check:"el-up",el:o}));t.remove()}}else i in{style:1,script:1}?t.remove():(t.parent&&n.push({check:"it",el:t.parent}),t.replaceWithChildren())}function b(t,e,n){var i,r;for(i=0;i<n.length;++i)if(!((r=n[i]).check&&!t.check(r.check,!1)||r.left&&!r.left(e))){r.right(e,R);break}}function C(t,e){var n,i,r,o,a=e.getDefinition(),s=a.attributes,l=a.styles;if(t.name!=a.element)return!1;for(n in s)if("class"==n){for(a=s[n].split(/\s+/),r=t.classes.join("|");o=a.pop();)if(-1==r.indexOf(o))return!1}else if(t.attributes[n]!=s[n])return!1;for(i in l)if(t.styles[i]!=l[i])return!1;return!0}function T(t,e){var n,i;return"string"==typeof t?n=t:t instanceof CKEDITOR.style?i=t:(n=t[0],i=t[1]),[{element:n,left:i,right:function(t,n){n.transform(t,e)}}]}function w(t){return function(e){return C(e,t)}}function I(t){return function(e,n){n[t](e)}}var O=CKEDITOR.dtd,D=CKEDITOR.tools.copy,_=CKEDITOR.tools.trim,k=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2,CKEDITOR.filter=function(t){if(this.allowedContent=[],this.disallowedContent=[],this.elementCallbacks=null,this.disabled=!1,this.editor=null,this.id=CKEDITOR.tools.getNextNumber(),this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{}},CKEDITOR.filter.instances[this.id]=this,t instanceof CKEDITOR.editor){t=this.editor=t,this.customConfig=!0;var e=t.config.allowedContent;!0===e?this.disabled=!0:(e||(this.customConfig=!1),this.allow(e,"config",1),this.allow(t.config.extraAllowedContent,"extra",1),this.allow(k[t.enterMode]+" "+k[t.shiftEnterMode],"default",1),this.disallow(t.config.disallowedContent))}else this.customConfig=!1,this.allow(t,"default",1)},CKEDITOR.filter.instances={},CKEDITOR.filter.prototype={allow:function(e,n,i){if(!o(this,e,i))return!1;var r,a;if("string"==typeof e)e=u(e);else if(e instanceof CKEDITOR.style){if(e.toAllowedContentRules)return this.allow(e.toAllowedContentRules(this.editor),n,i);r=e.getDefinition(),e={},i=r.attributes,e[r.element]=r={styles:r.styles,requiredStyles:r.styles&&CKEDITOR.tools.objectKeys(r.styles)},i&&(i=D(i),r.classes=i.class?i.class.split(/\s+/):null,r.requiredClasses=r.classes,delete i.class,r.attributes=i,r.requiredAttributes=i&&CKEDITOR.tools.objectKeys(i))}else if(CKEDITOR.tools.isArray(e)){for(r=0;r<e.length;++r)a=this.allow(e[r],n,i);return a}return t(this,e,n,this.allowedContent,this._.allowedRules),!0},applyTo:function(t,e,n,i){if(this.disabled)return!1;var r,o,a,s=this,l=[],c=this.editor&&this.editor.config.protectedSource,u=!1,d={doFilter:!n,doTransform:!0,doCallbacks:!0,toHtml:e};for(t.forEach(function(t){if(t.type==CKEDITOR.NODE_ELEMENT){if("off"==t.attributes["data-cke-filter"])return!1;if(!e||"span"!=t.name||!~CKEDITOR.tools.objectKeys(t.attributes).join("|").indexOf("data-cke-"))if(1&(r=f(s,t,l,d)))u=!0;else if(2&r)return!1}else if(t.type==CKEDITOR.NODE_COMMENT&&t.value.match(/^\{cke_protected\}(?!\{C\})/)){var n;t:{var i,o,a,h=decodeURIComponent(t.value.replace(/^\{cke_protected\}/,""));if(n=[],c)for(o=0;o<c.length;++o)if((a=h.match(c[o]))&&a[0].length==h.length){n=!0;break t}1==(h=CKEDITOR.htmlParser.fragment.fromHtml(h)).children.length&&(i=h.children[0]).type==CKEDITOR.NODE_ELEMENT&&f(s,i,n,d),n=!n.length}n||l.push(t)}},null,!0),l.length&&(u=!0),t=[],i=k[i||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];n=l.pop();)n.type==CKEDITOR.NODE_ELEMENT?E(n,i,t):n.remove();for(;o=t.pop();)if((n=o.el).parent)switch(a=O[n.parent.name]||O.span,o.check){case"it":O.$removeEmpty[n.name]&&!n.children.length?E(n,i,t):g(n)||E(n,i,t);break;case"el-up":n.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||a[n.name]||E(n,i,t);break;case"parent-down":n.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||a[n.name]||E(n.parent,i,t)}return u},checkFeature:function(t){return!(!this.disabled&&t)||(t.toFeature&&(t=t.toFeature(this.editor)),!t.requiredContent||this.check(t.requiredContent))},disable:function(){this.disabled=!0},disallow:function(e){return!!o(this,e,!0)&&("string"==typeof e&&(e=u(e)),t(this,e,null,this.disallowedContent,this._.disallowedRules),!0)},addContentForms:function(t){if(!this.disabled&&t){var e,n,i,r=[];for(e=0;e<t.length&&!i;++e)("string"==typeof(n=t[e])||n instanceof CKEDITOR.style)&&this.check(n)&&(i=n);if(i){for(e=0;e<t.length;++e)r.push(T(t[e],i));this.addTransformations(r)}}},addElementCallback:function(t){this.elementCallbacks||(this.elementCallbacks=[]),this.elementCallbacks.push(t)},addFeature:function(t){return!(!this.disabled&&t)||(t.toFeature&&(t=t.toFeature(this.editor)),this.allow(t.allowedContent,t.name),this.addTransformations(t.contentTransformations),this.addContentForms(t.contentForms),!t.requiredContent||!this.customConfig&&!this.disallowedContent.length||this.check(t.requiredContent))},addTransformations:function(t){var e,n;if(!this.disabled&&t){var i,r=this._.transformations;for(i=0;i<t.length;++i){e=t[i];var o=void 0,a=void 0,s=void 0,l=void 0,c=void 0,u=void 0;for(n=[],a=0;a<e.length;++a)"string"==typeof(s=e[a])?(l=(s=s.split(/\s*:\s*/))[0],c=null,u=s[1]):(l=s.check,c=s.left,u=s.right),o||(o=(o=s).element?o.element:l?l.match(/^([a-z0-9]+)/i)[0]:o.left.getDefinition().element),c instanceof CKEDITOR.style&&(c=w(c)),n.push({check:l==o?null:l,left:c,right:"string"==typeof u?I(u):u});r[e=o]||(r[e]=[]),r[e].push(n)}}},check:function(t,e,n){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(t)){for(var i=t.length;i--;)if(this.check(t[i],e,n))return!0;return!1}var r,o;if("string"==typeof t){if((o=t+"<"+(!1===e?"0":"1")+(n?"1":"0")+">")in this._.cachedChecks)return this._.cachedChecks[o];r=(i=u(t).$1).styles;var a=i.classes;i.name=i.elements,i.classes=a=a?a.split(/\s*,\s*/):[],i.styles=c(r),i.attributes=c(i.attributes),i.children=[],a.length&&(i.attributes.class=a.join(" ")),r&&(i.attributes.style=CKEDITOR.tools.writeCssText(i.styles)),r=i}else r=(i=t.getDefinition()).styles,a=i.attributes||{},r&&!CKEDITOR.tools.isEmpty(r)?(r=D(r),a.style=CKEDITOR.tools.writeCssText(r,!0)):r={},r={name:i.element,attributes:a,classes:a.class?a.class.split(/\s+/):[],styles:r,children:[]};a=CKEDITOR.tools.clone(r);var s,l=[];if(!1!==e&&(s=this._.transformations[r.name])){for(i=0;i<s.length;++i)b(this,r,s[i]);p(r)}return f(this,a,l,{doFilter:!0,doTransform:!1!==e,skipRequired:!n,skipFinalValidation:!n}),e=!(0<l.length||!CKEDITOR.tools.objectCompare(r.attributes,a.attributes,!0)),"string"==typeof t&&(this._.cachedChecks[o]=e),e},getAllowedEnterMode:function(){var t=["p","div","br"],e={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(n,i){var r,o=t.slice();if(this.check(k[n]))return n;for(i||(o=o.reverse());r=o.pop();)if(this.check(r))return e[r];return CKEDITOR.ENTER_BR}}(),destroy:function(){delete CKEDITOR.filter.instances[this.id],delete this._,delete this.allowedContent,delete this.disallowedContent}};var R,x={styles:1,attributes:1,classes:1},S={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},K=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,$={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},A=/^cke:(object|embed|param)$/,N=/^(object|embed|param)$/;R=CKEDITOR.filter.transformationsTools={sizeToStyle:function(t){this.lengthToStyle(t,"width"),this.lengthToStyle(t,"height")},sizeToAttribute:function(t){this.lengthToAttribute(t,"width"),this.lengthToAttribute(t,"height")},lengthToStyle:function(t,e,n){if(!((n=n||e)in t.styles)){var i=t.attributes[e];i&&(/^\d+$/.test(i)&&(i+="px"),t.styles[n]=i)}delete t.attributes[e]},lengthToAttribute:function(t,e,n){if(!((n=n||e)in t.attributes)){var i=t.styles[e],r=i&&i.match(/^(\d+)(?:\.\d*)?px$/);r?t.attributes[n]=r[1]:"cke-test"==i&&(t.attributes[n]="cke-test")}delete t.styles[e]},alignmentToStyle:function(t){if(!("float"in t.styles)){var e=t.attributes.align;"left"!=e&&"right"!=e||(t.styles.float=e)}delete t.attributes.align},alignmentToAttribute:function(t){if(!("align"in t.attributes)){var e=t.styles.float;"left"!=e&&"right"!=e||(t.attributes.align=e)}delete t.styles.float},splitBorderShorthand:function(t){function e(e){t.styles["border-top-width"]=n[e[0]],t.styles["border-right-width"]=n[e[1]],t.styles["border-bottom-width"]=n[e[2]],t.styles["border-left-width"]=n[e[3]]}if(t.styles.border){var n=t.styles.border.match(/([\.\d]+\w+)/g)||["0px"];switch(n.length){case 1:t.styles["border-width"]=n[0];break;case 2:e([0,1,0,1]);break;case 3:e([0,1,2,1]);break;case 4:e([0,1,2,3])}t.styles["border-style"]=t.styles["border-style"]||(t.styles.border.match(/(none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset|initial|inherit)/)||[])[0],t.styles["border-style"]||delete t.styles["border-style"],delete t.styles.border}},listTypeToStyle:function(t){if(t.attributes.type)switch(t.attributes.type){case"a":t.styles["list-style-type"]="lower-alpha";break;case"A":t.styles["list-style-type"]="upper-alpha";break;case"i":t.styles["list-style-type"]="lower-roman";break;case"I":t.styles["list-style-type"]="upper-roman";break;case"1":t.styles["list-style-type"]="decimal";break;default:t.styles["list-style-type"]=t.attributes.type}},splitMarginShorthand:function(t){function e(e){t.styles["margin-top"]=n[e[0]],t.styles["margin-right"]=n[e[1]],t.styles["margin-bottom"]=n[e[2]],t.styles["margin-left"]=n[e[3]]}if(t.styles.margin){var n=t.styles.margin.match(/(\-?[\.\d]+\w+)/g)||["0px"];switch(n.length){case 1:t.styles.margin=n[0];break;case 2:e([0,1,0,1]);break;case 3:e([0,1,2,1]);break;case 4:e([0,1,2,3])}delete t.styles.margin}},matchesStyle:C,transform:function(t,e){if("string"==typeof e)t.name=e;else{var n,i,r,o,a=e.getDefinition(),s=a.styles,l=a.attributes;for(n in t.name=a.element,l)if("class"==n)for(a=t.classes.join("|"),r=l[n].split(/\s+/);o=r.pop();)-1==a.indexOf(o)&&t.classes.push(o);else t.attributes[n]=l[n];for(i in s)t.styles[i]=s[i]}}}}(),CKEDITOR.focusManager=function(t){return t.focusManager?t.focusManager:(this.hasFocus=!1,this.currentActive=null,this._={editor:t},this)},CKEDITOR.focusManager._={blurDelay:200},CKEDITOR.focusManager.prototype={focus:function(t){this._.timer&&clearTimeout(this._.timer),t&&(this.currentActive=t),this.hasFocus||this._.locked||((t=CKEDITOR.currentInstance)&&t.focusManager.blur(1),this.hasFocus=!0,(t=this._.editor.container)&&t.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(t){function e(){var t=this._.editor;this.hasFocus&&(this.hasFocus=!1,CKEDITOR.env.chrome&&t.editable().isInline()&&t.window.$.getSelection().removeAllRanges(),(t=this._.editor.container)&&t.removeClass("cke_focus"),this._.editor.fire("blur"))}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var n=CKEDITOR.focusManager._.blurDelay;t||!n?e.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer,e.call(this)},n,this)}},add:function(t,e){if(!(n=t.getCustomData("focusmanager"))||n!=this){n&&n.remove(t);var n="focus",i="blur";e&&(CKEDITOR.env.ie?(n="focusin",i="focusout"):CKEDITOR.event.useCapture=1);var r={blur:function(){t.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(t)}};t.on(n,r.focus,this),t.on(i,r.blur,this),e&&(CKEDITOR.event.useCapture=0),t.setCustomData("focusmanager",this),t.setCustomData("focusmanager_handlers",r)}},remove:function(t){t.removeCustomData("focusmanager");var e=t.removeCustomData("focusmanager_handlers");t.removeListener("blur",e.blur),t.removeListener("focus",e.focus)}},CKEDITOR.keystrokeHandler=function(t){return t.keystrokeHandler?t.keystrokeHandler:(this.keystrokes={},this.blockedKeystrokes={},this._={editor:t},this)},function(){var t,e=function(e){var n=(e=e.data).getKeystroke(),i=this.keystrokes[n],r=this._.editor;return(t=!1===r.fire("key",{keyCode:n,domEvent:e}))||(i&&(t=!1!==r.execCommand(i,{from:"keystrokeHandler"})),t||(t=!!this.blockedKeystrokes[n])),t&&e.preventDefault(!0),!t},n=function(e){t&&(t=!1,e.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(t){t.on("keydown",e,this),CKEDITOR.env.gecko&&CKEDITOR.env.mac&&t.on("keypress",n,this)}}}(),CKEDITOR.lang={languages:{af:1,ar:1,az:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,oc:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(t,e,n){t&&CKEDITOR.lang.languages[t]||(t=this.detect(e,t));var i=this;e=function(){i[t].dir=i.rtl[t]?"rtl":"ltr",n(t,i[t])},this[t]?e():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+t+".js"),e,this)},detect:function(t,e){var n=this.languages,i=(r=(e=e||navigator.userLanguage||navigator.language||t).toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/))[1],r=r[2];return n[i+"-"+r]?i=i+"-"+r:n[i]||(i=null),CKEDITOR.lang.detect=i?function(){return i}:function(t){return t},i||t}},CKEDITOR.scriptLoader=function(){var t={},e={};return{load:function(n,i,r,o){var a="string"==typeof n;a&&(n=[n]),r||(r=CKEDITOR);var s=n.length,l=[],c=[],u=function(t){i&&(a?i.call(r,t):i.call(r,l,c))};if(0===s)u(!0);else{var d=function(t,e){(e?l:c).push(t),0>=--s&&(o&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),u(e))},h=function(n,i){t[n]=1;var r=e[n];delete e[n];for(var o=0;o<r.length;o++)r[o](n,i)},f=function(n){if(t[n])d(n,!0);else{var r=e[n]||(e[n]=[]);if(r.push(d),!(1<r.length)){var o=new CKEDITOR.dom.element("script");o.setAttributes({type:"text/javascript",src:n}),i&&(CKEDITOR.env.ie&&(8>=CKEDITOR.env.version||CKEDITOR.env.ie9Compat)?o.$.onreadystatechange=function(){"loaded"!=o.$.readyState&&"complete"!=o.$.readyState||(o.$.onreadystatechange=null,h(n,!0))}:(o.$.onload=function(){setTimeout(function(){h(n,!0)},0)},o.$.onerror=function(){h(n,!1)})),o.appendTo(CKEDITOR.document.getHead())}}};o&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var p=0;p<s;p++)f(n[p])}},queue:function(){function t(){var t;(t=e[0])&&this.load(t.scriptUrl,t.callback,CKEDITOR,0)}var e=[];return function(n,i){var r=this;e.push({scriptUrl:n,callback:function(){i&&i.apply(this,arguments),e.shift(),t.call(r)}}),1==e.length&&t.call(this)}}()}}(),CKEDITOR.resourceManager=function(t,e){this.basePath=t,this.fileName=e,this.registered={},this.loaded={},this.externals={},this._={waitingList:{}}},CKEDITOR.resourceManager.prototype={add:function(t,e){if(this.registered[t])throw Error('[CKEDITOR.resourceManager.add] The resource name "'+t+'" is already registered.');var n=this.registered[t]=e||{};return n.name=t,n.path=this.getPath(t),CKEDITOR.fire(t+CKEDITOR.tools.capitalize(this.fileName)+"Ready",n),this.get(t)},get:function(t){return this.registered[t]||null},getPath:function(t){var e=this.externals[t];return CKEDITOR.getUrl(e&&e.dir||this.basePath+t+"/")},getFilePath:function(t){var e=this.externals[t];return CKEDITOR.getUrl(this.getPath(t)+(e?e.file:this.fileName+".js"))},addExternal:function(t,e,n){t=t.split(",");for(var i=0;i<t.length;i++){var r=t[i];n||(e=e.replace(/[^\/]+$/,function(t){return n=t,""})),this.externals[r]={dir:e,file:n||this.fileName+".js"}}},load:function(t,e,n){CKEDITOR.tools.isArray(t)||(t=t?[t]:[]);for(var i=this.loaded,r=this.registered,o=[],a={},s={},l=0;l<t.length;l++){var c=t[l];if(c)if(i[c]||r[c])s[c]=this.get(c);else{var u=this.getFilePath(c);o.push(u),u in a||(a[u]=[]),a[u].push(c)}}CKEDITOR.scriptLoader.load(o,function(t,r){if(r.length)throw Error('[CKEDITOR.resourceManager.load] Resource name "'+a[r[0]].join(",")+'" was not found at "'+r[0]+'".');for(var o=0;o<t.length;o++)for(var l=a[t[o]],c=0;c<l.length;c++){var u=l[c];s[u]=this.get(u),i[u]=1}e.call(n,s)},this)}},CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin"),CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(t){var e={};return function(n,i,r){var o={},a=function(n){t.call(this,n,function(t){CKEDITOR.tools.extend(o,t);var n,s=[];for(n in t){var l=t[n],c=l&&l.requires;if(!e[n]){if(l.icons)for(var u=l.icons.split(","),d=u.length;d--;)CKEDITOR.skin.addIcon(u[d],l.path+"icons/"+(CKEDITOR.env.hidpi&&l.hidpi?"hidpi/":"")+u[d]+".png");e[n]=1}if(c)for(c.split&&(c=c.split(",")),l=0;l<c.length;l++)o[c[l]]||s.push(c[l])}if(s.length)a.call(this,s);else{for(n in o)(l=o[n]).onLoad&&!l.onLoad._called&&(!1===l.onLoad()&&delete o[n],l.onLoad._called=1);i&&i.call(r||window,o)}},this)};a.call(this,n)}}),CKEDITOR.plugins.setLang=function(t,e,n){var i=this.get(t);t=i.langEntries||(i.langEntries={}),(i=i.lang||(i.lang=[])).split&&(i=i.split(",")),-1==CKEDITOR.tools.indexOf(i,e)&&i.push(e),t[e]=n},CKEDITOR.ui=function(t){return t.ui?t.ui:(this.items={},this.instances={},this.editor=t,this._={handlers:{}},this)},CKEDITOR.ui.prototype={add:function(t,e,n){n.name=t.toLowerCase();var i=this.items[t]={type:e,command:n.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(i,n)},get:function(t){return this.instances[t]},create:function(t){var e=this.items[t],n=e&&this._.handlers[e.type],i=e&&e.command&&this.editor.getCommand(e.command);return n=n&&n.create.apply(this,e.args),this.instances[t]=n,i&&i.uiItems.push(n),n&&!n.type&&(n.type=e.type),n},addHandler:function(t,e){this._.handlers[t]=e},space:function(t){return CKEDITOR.document.getById(this.spaceId(t))},spaceId:function(t){return this.editor.id+"_"+t}},CKEDITOR.event.implementOn(CKEDITOR.ui),function(){function t(t,n,r){if(CKEDITOR.event.call(this),t=t&&CKEDITOR.tools.clone(t),void 0!==n){if(!(n instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!r)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&r==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!function(t,e){return e==CKEDITOR.ELEMENT_MODE_INLINE?t.is(CKEDITOR.dtd.$editable)||t.is("textarea"):e==CKEDITOR.ELEMENT_MODE_REPLACE?!t.is(CKEDITOR.dtd.$nonBodyContent):1}(n,r))throw Error('The specified element mode is not supported on element: "'+n.getName()+'".');this.element=n,this.elementMode=r,this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(n.getId()||n.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={},this.commands={},this.templates={},this.name=this.name||function(){do{var t="editor"+ ++o}while(CKEDITOR.instances[t]);return t}(),this.id=CKEDITOR.tools.getNextId(),this.status="unloaded",this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config),this.ui=new CKEDITOR.ui(this),this.focusManager=new CKEDITOR.focusManager(this),this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this),this.on("readOnly",e),this.on("selectionChange",function(t){i(this,t.data.path)}),this.on("activeFilterChange",function(){i(this,this.elementPath(),!0)}),this.on("mode",e),this.on("instanceReady",function(){this.config.startupFocus&&this.focus()}),CKEDITOR.fire("instanceCreated",null,this),CKEDITOR.add(this),CKEDITOR.tools.setTimeout(function(){"destroyed"!==this.status?function(t,e){t.on("customConfigLoaded",function(){if(e){if(e.on)for(var n in e.on)t.on(n,e.on[n]);CKEDITOR.tools.extend(t.config,e,!0),delete t.config.on}n=t.config,t.readOnly=!!n.readOnly||(t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?t.element.is("textarea")?t.element.hasAttribute("disabled")||t.element.hasAttribute("readonly"):t.element.isReadOnly():t.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(t.element.hasAttribute("disabled")||t.element.hasAttribute("readonly"))),t.blockless=t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&!(t.element.is("textarea")||CKEDITOR.dtd[t.element.getName()].p),t.tabIndex=n.tabIndex||t.element&&t.element.getAttribute("tabindex")||0,t.activeEnterMode=t.enterMode=t.blockless?CKEDITOR.ENTER_BR:n.enterMode,t.activeShiftEnterMode=t.shiftEnterMode=t.blockless?CKEDITOR.ENTER_BR:n.shiftEnterMode,n.skin&&(CKEDITOR.skinName=n.skin),t.fireOnce("configLoaded"),t.dataProcessor=new CKEDITOR.htmlDataProcessor(t),t.filter=t.activeFilter=new CKEDITOR.filter(t),function(t){CKEDITOR.skin.loadPart("editor",function(){!function(t){CKEDITOR.lang.load(t.config.language,t.config.defaultLanguage,function(e,n){var i=t.config.title;t.langCode=e,t.lang=CKEDITOR.tools.prototypedCopy(n),t.title="string"==typeof i||!1===i?i:[t.lang.editor,t.name].join(", "),t.config.contentsLangDirection||(t.config.contentsLangDirection=t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?t.element.getDirection(1):t.lang.dir),t.fire("langLoaded"),function(t){t.getStylesSet(function(e){t.once("loaded",function(){t.fire("stylesSet",{styles:e})},null,null,1),function(t){var e=t.config,n=e.plugins,i=e.extraPlugins,r=e.removePlugins;if(i){var o=new RegExp("(?:^|,)(?:"+i.replace(/\s*,\s*/g,"|")+")(?=,|$)","g");n=(n=n.replace(o,""))+","+i}if(r){var a=new RegExp("(?:^|,)(?:"+r.replace(/\s*,\s*/g,"|")+")(?=,|$)","g");n=n.replace(a,"")}CKEDITOR.env.air&&(n+=",adobeair"),CKEDITOR.plugins.load(n.split(","),function(n){var i=[],r=[],o=[];for(var s in t.plugins=n,n){var l,c=n[s],u=c.lang,d=null,h=c.requires;if(CKEDITOR.tools.isArray(h)&&(h=h.join(",")),h&&(l=h.match(a)))for(;h=l.pop();)CKEDITOR.error("editor-plugin-required",{plugin:h.replace(",",""),requiredBy:s});u&&!t.lang[s]&&(u.split&&(u=u.split(",")),d=0<=CKEDITOR.tools.indexOf(u,t.langCode)?t.langCode:(d=t.langCode.replace(/-.*/,""))!=t.langCode&&0<=CKEDITOR.tools.indexOf(u,d)?d:0<=CKEDITOR.tools.indexOf(u,"en")?"en":u[0],c.langEntries&&c.langEntries[d]?(t.lang[s]=c.langEntries[d],d=null):o.push(CKEDITOR.getUrl(c.path+"lang/"+d+".js"))),r.push(d),i.push(c)}CKEDITOR.scriptLoader.load(o,function(){for(var n=["beforeInit","init","afterInit"],o=0;o<n.length;o++)for(var a=0;a<i.length;a++){var s=i[a];0===o&&r[a]&&s.lang&&s.langEntries&&(t.lang[s.name]=s.langEntries[r[a]]),s[n[o]]&&s[n[o]](t)}for(t.fireOnce("pluginsLoaded"),e.keystrokes&&t.setKeystroke(t.config.keystrokes),a=0;a<t.config.blockedKeystrokes.length;a++)t.keystrokeHandler.blockedKeystrokes[t.config.blockedKeystrokes[a]]=1;t.status="loaded",t.fireOnce("loaded"),CKEDITOR.fire("instanceLoaded",null,t)})})}(t)})}(t)})}(t)})}(t)}),e&&null!=e.customConfig&&(t.config.customConfig=e.customConfig),function t(e){if(!(n=e.config.customConfig))return!1;var n=CKEDITOR.getUrl(n),i=a[n]||(a[n]={});return i.fn?(i.fn.call(e,e.config),CKEDITOR.getUrl(e.config.customConfig)!=n&&t(e)||e.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(n,function(){i.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){},t(e)}),!0}(t)||t.fireOnce("customConfigLoaded")}(this,t):CKEDITOR.warn("editor-incorrect-destroy")},0,this)}function e(){var t,e=this.commands;for(t in e)n(this,e[t])}function n(t,e){e[e.startDisabled?"disable":t.readOnly&&!e.readOnly?"disable":e.modes[t.mode]?"enable":"disable"]()}function i(t,e,n){if(e){var i,r,o=t.commands;for(r in o)i=o[r],(n||i.contextSensitive)&&i.refresh(t,e)}}function r(){var t=this.element;if(t&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var e=this.getData();return this.config.htmlEncodeOutput&&(e=CKEDITOR.tools.htmlEncode(e)),t.is("textarea")?t.setValue(e):t.setHtml(e),!0}return!1}t.prototype=CKEDITOR.editor.prototype,CKEDITOR.editor=t;var o=0,a={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function(t,e){e.name=t.toLowerCase();var i=new CKEDITOR.command(this,e);return this.mode&&n(this,i),this.commands[t]=i},_attachToForm:function(){function t(t){e.updateElement(),e._.required&&!n.getValue()&&!1===e.fire("required")&&t.data.preventDefault()}var e=this,n=e.element,i=new CKEDITOR.dom.element(n.$.form);n.is("textarea")&&i&&(i.on("submit",t),function(t){return!!(t&&t.call&&t.apply)}(i.$.submit)&&(i.$.submit=CKEDITOR.tools.override(i.$.submit,function(e){return function(){t(),e.apply?e.apply(this):e()}})),e.on("destroy",function(){i.removeListener("submit",t)}))},destroy:function(t){this.fire("beforeDestroy"),!t&&r.call(this),this.editable(null),this.filter&&(this.filter.destroy(),delete this.filter),delete this.activeFilter,this.status="destroyed",this.fire("destroy"),this.removeAllListeners(),CKEDITOR.remove(this),CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(t){if(!t){if(!(t=this.getSelection()))return null;t=t.getStartElement()}return t?new CKEDITOR.dom.elementPath(t,this.editable()):null},createRange:function(){var t=this.editable();return t?new CKEDITOR.dom.range(t):null},execCommand:function(t,e){var n=this.getCommand(t),i={name:t,commandData:e,command:n};return!(!n||n.state==CKEDITOR.TRISTATE_DISABLED||!1===this.fire("beforeCommandExec",i)||(i.returnValue=n.exec(i.commandData),n.async||!1===this.fire("afterCommandExec",i)))&&i.returnValue},getCommand:function(t){return this.commands[t]},getData:function(t){!t&&this.fire("beforeGetData");var e=this._.data;return"string"!=typeof e&&(e=(e=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?e.is("textarea")?e.getValue():e.getHtml():""),e={dataValue:e},!t&&this.fire("getData",e),e.dataValue},getSnapshot:function(){var t=this.fire("getSnapshot");return"string"!=typeof t&&(t=(t=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?t.is("textarea")?t.getValue():t.getHtml():""),t},loadSnapshot:function(t){this.fire("loadSnapshot",t)},setData:function(t,e,n){var i=!0,r=e;e&&"object"==typeof e&&(n=e.internal,r=e.callback,i=!e.noSnapshot),!n&&i&&this.fire("saveSnapshot"),!r&&n||this.once("dataReady",function(t){!n&&i&&this.fire("saveSnapshot"),r&&r.call(t.editor)}),t={dataValue:t},!n&&this.fire("setData",t),this._.data=t.dataValue,!n&&this.fire("afterSetData",t)},setReadOnly:function(t){t=null==t||t,this.readOnly!=t&&(this.readOnly=t,this.keystrokeHandler.blockedKeystrokes[8]=+t,this.editable().setReadOnly(t),this.fire("readOnly"))},insertHtml:function(t,e,n){this.fire("insertHtml",{dataValue:t,mode:e,range:n})},insertText:function(t){this.fire("insertText",t)},insertElement:function(t){this.fire("insertElement",t)},getSelectedHtml:function(t){var e=this.editable(),n=(n=this.getSelection())&&n.getRanges();if(!e||!n||0===n.length)return null;for(var i,r,o,a=new CKEDITOR.dom.documentFragment,s=0;s<n.length;s++){var l=n[s],c=l.startContainer;c.getName&&"tr"==c.getName()?(i||((i=c.getAscendant("table").clone()).append(c.getAscendant("tbody").clone()),a.append(i),i=i.findOne("tbody")),r&&r.equals(c)||(r=c,o=c.clone(),i.append(o)),o.append(l.cloneContents())):a.append(l.cloneContents())}return e=i?a:e.getHtmlFromRange(n[0]),t?e.getHtml():e},extractSelectedHtml:function(t,e){var n=this.editable(),i=this.getSelection().getRanges();return n&&0!==i.length?(i=i[0],n=n.extractHtmlFromRange(i,e),e||this.getSelection().selectRanges([i]),t?n.getHtml():n):null},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return r.call(this)},setKeystroke:function(){for(var t,e,n=this.keystrokeHandler.keystrokes,i=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],r=i.length;r--;)t=i[r],e=0,CKEDITOR.tools.isArray(t)&&(e=t[1],t=t[0]),e?n[t]=e:delete n[t]},getCommandKeystroke:function(t){var e,n=t.name,i=this.keystrokeHandler.keystrokes;if(t.fakeKeystroke)return t.fakeKeystroke;for(e in i)if(i.hasOwnProperty(e)&&i[e]==n)return e;return null},addFeature:function(t){return this.filter.addFeature(t)},setActiveFilter:function(t){t||(t=this.filter),this.activeFilter!==t&&(this.activeFilter=t,this.fire("activeFilterChange"),t===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(t.getAllowedEnterMode(this.enterMode),t.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(t,e){t=t?this.blockless?CKEDITOR.ENTER_BR:t:this.enterMode,e=e?this.blockless?CKEDITOR.ENTER_BR:e:this.shiftEnterMode,this.activeEnterMode==t&&this.activeShiftEnterMode==e||(this.activeEnterMode=t,this.activeShiftEnterMode=e,this.fire("activeEnterModeChange"))},showNotification:function(t){alert(t)}})}(),CKEDITOR.ELEMENT_MODE_NONE=0,CKEDITOR.ELEMENT_MODE_REPLACE=1,CKEDITOR.ELEMENT_MODE_APPENDTO=2,CKEDITOR.ELEMENT_MODE_INLINE=3,CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}},function(){var t=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,e={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(n){for(var i,r,o,a=0;i=this._.htmlPartsRegex.exec(n);)if((r=i.index)>a&&(a=n.substring(a,r),o?o.push(a):this.onText(a)),a=this._.htmlPartsRegex.lastIndex,!(r=i[1])||(r=r.toLowerCase(),o&&CKEDITOR.dtd.$cdata[r]&&(this.onCDATA(o.join("")),o=null),o))if(o)o.push(i[0]);else if(r=i[3]){if(r=r.toLowerCase(),!/="/.test(r)){var s,l={},c=i[4];if(i=!!i[5],c)for(;s=t.exec(c);){var u=s[1].toLowerCase();s=s[2]||s[3]||s[4]||"",l[u]=!s&&e[u]?u:CKEDITOR.tools.htmlDecodeAttr(s)}this.onTagOpen(r,l,i),!o&&CKEDITOR.dtd.$cdata[r]&&(o=[])}}else(r=i[2])&&this.onComment(r);else this.onTagClose(r);n.length>a&&this.onText(n.substring(a,n.length))}}}(),CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(t){this._.output.push("<",t)},openTagClose:function(t,e){e?this._.output.push(" />"):this._.output.push(">")},attribute:function(t,e){"string"==typeof e&&(e=CKEDITOR.tools.htmlEncodeAttr(e)),this._.output.push(" ",t,'="',e,'"')},closeTag:function(t){this._.output.push("</",t,">")},text:function(t){this._.output.push(t)},comment:function(t){this._.output.push("\x3c!--",t,"--\x3e")},write:function(t){this._.output.push(t)},reset:function(){this._.output=[],this._.indent=!1},getHtml:function(t){var e=this._.output.join("");return t&&this.reset(),e}}}),CKEDITOR.htmlParser.node=function(){},CKEDITOR.htmlParser.node.prototype={remove:function(){var t=this.parent.children,e=CKEDITOR.tools.indexOf(t,this),n=this.previous,i=this.next;n&&(n.next=i),i&&(i.previous=n),t.splice(e,1),this.parent=null},replaceWith:function(t){var e=this.parent.children,n=CKEDITOR.tools.indexOf(e,this),i=t.previous=this.previous,r=t.next=this.next;i&&(i.next=t),r&&(r.previous=t),e[n]=t,t.parent=this.parent,this.parent=null},insertAfter:function(t){var e=t.parent.children,n=CKEDITOR.tools.indexOf(e,t),i=t.next;e.splice(n+1,0,this),this.next=t.next,this.previous=t,t.next=this,i&&(i.previous=this),this.parent=t.parent},insertBefore:function(t){var e=t.parent.children,n=CKEDITOR.tools.indexOf(e,t);e.splice(n,0,this),this.next=t,(this.previous=t.previous)&&(t.previous.next=this),t.previous=this,this.parent=t.parent},getAscendant:function(t){for(var e="function"==typeof t?t:"string"==typeof t?function(e){return e.name==t}:function(e){return e.name in t},n=this.parent;n&&n.type==CKEDITOR.NODE_ELEMENT;){if(e(n))return n;n=n.parent}return null},wrapWith:function(t){return this.replaceWith(t),t.add(this),t},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(t){return t||{}}},CKEDITOR.htmlParser.comment=function(t){this.value=t,this._={isBlockLike:!1}},CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(t,e){var n=this.value;return(n=t.onComment(e,n,this))?"string"!=typeof n?(this.replaceWith(n),!1):(this.value=n,!0):(this.remove(),!1)},writeHtml:function(t,e){e&&this.filter(e),t.comment(this.value)}}),CKEDITOR.htmlParser.text=function(t){this.value=t,this._={isBlockLike:!1}},CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(t,e){if(!(this.value=t.onText(e,this.value,this)))return this.remove(),!1},writeHtml:function(t,e){e&&this.filter(e),t.text(this.value)}}),CKEDITOR.htmlParser.cdata=function(t){this.value=t},CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(t){t.write(this.value)}}),CKEDITOR.htmlParser.fragment=function(){this.children=[],this.parent=null,this._={isBlockLike:!0,hasInlineStarted:!1}},function(){function t(t){return!t.attributes["data-cke-survive"]&&("a"==t.name&&t.attributes.href||CKEDITOR.dtd.$removeEmpty[t.name])}var e=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),n={ol:1,ul:1},i=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),r={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=function(o,a,s){function l(t){var e;if(0<m.length)for(var n=0;n<m.length;n++){var i=m[n],r=i.name,o=CKEDITOR.dtd[r],a=y.name&&CKEDITOR.dtd[y.name];a&&!a[r]||t&&o&&!o[t]&&CKEDITOR.dtd[t]?r==y.name&&(d(y,y.parent,1),n--):(e||(c(),e=1),(i=i.clone()).parent=y,y=i,m.splice(n,1),n--)}}function c(){for(;v.length;)d(v.shift(),y)}function u(t){if(t._.isBlockLike&&"pre"!=t.name&&"textarea"!=t.name){var e,n=t.children.length,i=t.children[n-1];i&&i.type==CKEDITOR.NODE_TEXT&&((e=CKEDITOR.tools.rtrim(i.value))?i.value=e:t.children.length=n-1)}}function d(e,n,i){n=n||y||g;var r=y;void 0===e.previous&&(h(n,e)&&(y=n,p.onTagOpen(s,{}),e.returnPoint=n=y),u(e),t(e)&&!e.children.length||n.add(e),"pre"==e.name&&(b=!1),"textarea"==e.name&&(E=!1)),e.returnPoint?(y=e.returnPoint,delete e.returnPoint):y=i?n:r}function h(t,e){var n,i;if((t==g||"body"==t.name)&&s&&(!t.name||CKEDITOR.dtd[t.name][s]))return(n=e.attributes&&(i=e.attributes["data-cke-real-element-type"])?i:e.name)&&n in CKEDITOR.dtd.$inline&&!(n in CKEDITOR.dtd.head)&&!e.isOrphan||e.type==CKEDITOR.NODE_TEXT}function f(t,e){return(t in CKEDITOR.dtd.$listItem||t in CKEDITOR.dtd.$tableContent)&&(t==e||"dt"==t&&"dd"==e||"dd"==t&&"dt"==e)}var p=new CKEDITOR.htmlParser,g=a instanceof CKEDITOR.htmlParser.element?a:"string"==typeof a?new CKEDITOR.htmlParser.element(a):new CKEDITOR.htmlParser.fragment,m=[],v=[],y=g,E="textarea"==g.name,b="pre"==g.name;for(p.onTagOpen=function(r,o,a,s){if((o=new CKEDITOR.htmlParser.element(r,o)).isUnknown&&a&&(o.isEmpty=!0),o.isOptionalClose=s,t(o))m.push(o);else{if("pre"==r)b=!0;else{if("br"==r&&b)return void y.add(new CKEDITOR.htmlParser.text("\n"));"textarea"==r&&(E=!0)}if("br"==r)v.push(o);else{for(;s=(a=y.name)?CKEDITOR.dtd[a]||(y._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):i,!(o.isUnknown||y.isUnknown||s[r]);)if(y.isOptionalClose)p.onTagClose(a);else if(r in n&&a in n)(a=(a=y.children)[a.length-1])&&"li"==a.name||d(a=new CKEDITOR.htmlParser.element("li"),y),!o.returnPoint&&(o.returnPoint=y),y=a;else if(r in CKEDITOR.dtd.$listItem&&!f(r,a))p.onTagOpen("li"==r?"ul":"dl",{},0,1);else if(a in e&&!f(r,a))!o.returnPoint&&(o.returnPoint=y),y=y.parent;else{if(a in CKEDITOR.dtd.$inline&&m.unshift(y),!y.parent){o.isOrphan=1;break}d(y,y.parent,1)}l(r),c(),o.parent=y,o.isEmpty?d(o):y=o}}},p.onTagClose=function(t){for(var e=m.length-1;0<=e;e--)if(t==m[e].name)return void m.splice(e,1);for(var n=[],i=[],r=y;r!=g&&r.name!=t;)r._.isBlockLike||i.unshift(r),n.push(r),r=r.returnPoint||r.parent;if(r!=g){for(e=0;e<n.length;e++){var o=n[e];d(o,o.parent)}y=r,r._.isBlockLike&&c(),d(r,r.parent),r==y&&(y=y.parent),m=m.concat(i)}"body"==t&&(s=!1)},p.onText=function(t){if(y._.hasInlineStarted&&!v.length||b||E||0!==(t=CKEDITOR.tools.ltrim(t)).length){var n=y.name,o=n?CKEDITOR.dtd[n]||(y._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):i;!E&&!o["#"]&&n in e?(p.onTagOpen(r[n]||""),p.onText(t)):(c(),l(),b||E||(t=t.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," ")),t=new CKEDITOR.htmlParser.text(t),h(y,t)&&this.onTagOpen(s,{},0,1),y.add(t))}},p.onCDATA=function(t){y.add(new CKEDITOR.htmlParser.cdata(t))},p.onComment=function(t){c(),l(),y.add(new CKEDITOR.htmlParser.comment(t))},p.parse(o),c();y!=g;)d(y,y.parent,1);return u(g),g},CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(t,e){isNaN(e)&&(e=this.children.length);var n=0<e?this.children[e-1]:null;if(n){if(t._.isBlockLike&&n.type==CKEDITOR.NODE_TEXT&&(n.value=CKEDITOR.tools.rtrim(n.value),0===n.value.length))return this.children.pop(),void this.add(t);n.next=t}t.previous=n,t.parent=this,this.children.splice(e,0,t),this._.hasInlineStarted||(this._.hasInlineStarted=t.type==CKEDITOR.NODE_TEXT||t.type==CKEDITOR.NODE_ELEMENT&&!t._.isBlockLike)},filter:function(t,e){e=this.getFilterContext(e),t.onRoot(e,this),this.filterChildren(t,!1,e)},filterChildren:function(t,e,n){if(this.childrenFilteredBy!=t.id)for(n=this.getFilterContext(n),e&&!this.parent&&t.onRoot(n,this),this.childrenFilteredBy=t.id,e=0;e<this.children.length;e++)!1===this.children[e].filter(t,n)&&e--},writeHtml:function(t,e){e&&this.filter(e),this.writeChildrenHtml(t)},writeChildrenHtml:function(t,e,n){var i=this.getFilterContext();for(n&&!this.parent&&e&&e.onRoot(i,this),e&&this.filterChildren(e,!1,i),e=0,i=(n=this.children).length;e<i;e++)n[e].writeHtml(t)},forEach:function(t,e,n){if(!(n||e&&this.type!=e))var i=t(this);if(!1!==i){n=this.children;for(var r=0;r<n.length;r++)(i=n[r]).type==CKEDITOR.NODE_ELEMENT?i.forEach(t,e):e&&i.type!=e||t(i)}},getFilterContext:function(t){return t||{}}}}(),function(){function t(){this.rules=[]}function e(e,n,i,r){var o,a;for(o in n)(a=e[o])||(a=e[o]=new t),a.add(n[o],i,r)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(e){this.id=CKEDITOR.tools.getNextNumber(),this.elementNameRules=new t,this.attributeNameRules=new t,this.elementsRules={},this.attributesRules={},this.textRules=new t,this.commentRules=new t,this.rootRules=new t,e&&this.addRules(e,10)},proto:{addRules:function(t,n){var i;"number"==typeof n?i=n:n&&"priority"in n&&(i=n.priority),"number"!=typeof i&&(i=10),"object"!=typeof n&&(n={}),t.elementNames&&this.elementNameRules.addMany(t.elementNames,i,n),t.attributeNames&&this.attributeNameRules.addMany(t.attributeNames,i,n),t.elements&&e(this.elementsRules,t.elements,i,n),t.attributes&&e(this.attributesRules,t.attributes,i,n),t.text&&this.textRules.add(t.text,i,n),t.comment&&this.commentRules.add(t.comment,i,n),t.root&&this.rootRules.add(t.root,i,n)},applyTo:function(t){t.filter(this)},onElementName:function(t,e){return this.elementNameRules.execOnName(t,e)},onAttributeName:function(t,e){return this.attributeNameRules.execOnName(t,e)},onText:function(t,e,n){return this.textRules.exec(t,e,n)},onComment:function(t,e,n){return this.commentRules.exec(t,e,n)},onRoot:function(t,e){return this.rootRules.exec(t,e)},onElement:function(t,e){for(var n,i=[this.elementsRules["^"],this.elementsRules[e.name],this.elementsRules.$],r=0;3>r;r++)if(n=i[r]){if(!1===(n=n.exec(t,e,this)))return null;if(n&&n!=e)return this.onNode(t,n);if(e.parent&&!e.name)break}return e},onNode:function(t,e){var n=e.type;return n==CKEDITOR.NODE_ELEMENT?this.onElement(t,e):n==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(t,e.value)):n==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(t,e.value)):null},onAttribute:function(t,e,n,i){return(n=this.attributesRules[n])?n.exec(t,i,e,this):i}}}),CKEDITOR.htmlParser.filterRulesGroup=t,t.prototype={add:function(t,e,n){this.rules.splice(this.findIndex(e),0,{value:t,priority:e,options:n})},addMany:function(t,e,n){for(var i=[this.findIndex(e),0],r=0,o=t.length;r<o;r++)i.push({value:t[r],priority:e,options:n});this.rules.splice.apply(this.rules,i)},findIndex:function(t){for(var e=this.rules,n=e.length-1;0<=n&&t<e[n].priority;)n--;return n+1},exec:function(t,e){var n,i,r,o,a=e instanceof CKEDITOR.htmlParser.node||e instanceof CKEDITOR.htmlParser.fragment,s=Array.prototype.slice.call(arguments,1),l=this.rules,c=l.length;for(o=0;o<c;o++)if(a&&(n=e.type,i=e.name),r=l[o],!(t.nonEditable&&!r.options.applyToAll||t.nestedEditable&&r.options.excludeNestedEditable)){if(!1===(r=r.value.apply(null,s))||a&&r&&(r.name!=i||r.type!=n))return r;null!=r&&(s[0]=e=r)}return e},execOnName:function(t,e){for(var n,i=0,r=this.rules,o=r.length;e&&i<o;i++)n=r[i],t.nonEditable&&!n.options.applyToAll||t.nestedEditable&&n.options.excludeNestedEditable||(e=e.replace(n.value[0],n.value[1]));return e}}}(),function(){function t(t,e){function s(t){return t||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text(" "):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function l(t,e){return function(r){if(r.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var a,l,u=[],d=n(r);if(d)for(c(d,1)&&u.push(d);d;)o(d)&&(a=i(d))&&c(a)&&((l=i(a))&&!o(l)?u.push(a):(s(f).insertAfter(a),a.remove())),d=d.previous;for(d=0;d<u.length;d++)u[d].remove();(u=!t||!1!==("function"==typeof e?e(r):e))&&(u=!(!f&&!CKEDITOR.env.needsBrFiller&&r.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||!f&&!CKEDITOR.env.needsBrFiller&&(7<document.documentMode||r.name in CKEDITOR.dtd.tr||r.name in CKEDITOR.dtd.$listItem)||(u=n(r))&&("form"!=r.name||"input"!=u.name))),u&&r.add(s(t))}}}function c(t,e){return!(f&&!CKEDITOR.env.needsBrFiller||t.type!=CKEDITOR.NODE_ELEMENT||"br"!=t.name||t.attributes["data-cke-eol"])||!!(t.type==CKEDITOR.NODE_TEXT&&(n=t.value.match(h))&&(n.index&&(new CKEDITOR.htmlParser.text(t.value.substring(0,n.index)).insertBefore(t),t.value=n[0]),!CKEDITOR.env.needsBrFiller&&f&&(!e||t.parent.name in g)||!f&&((n=t.previous)&&"br"==n.name||!n||o(n))));var n}var u,d={elements:{}},f="html"==e,g=CKEDITOR.tools.extend({},m);for(u in g)"#"in p[u]||delete g[u];for(u in g)d.elements[u]=l(f,t.config.fillEmptyBlocks);return d.root=l(f,!1),d.elements.br=function(t){return function(e){if(e.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var n=e.attributes;if("data-cke-bogus"in n||"data-cke-eol"in n)delete n["data-cke-bogus"];else{for(n=e.next;n&&r(n);)n=n.next;var l=i(e);!n&&o(e.parent)?a(e.parent,s(t)):o(n)&&l&&!o(l)&&s(t).insertBefore(n)}}}}(f),d}function e(t,e){return t!=CKEDITOR.ENTER_BR&&!1!==e&&(t==CKEDITOR.ENTER_DIV?"div":"p")}function n(t){for(t=t.children[t.children.length-1];t&&r(t);)t=t.previous;return t}function i(t){for(t=t.previous;t&&r(t);)t=t.previous;return t}function r(t){return t.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(t.value)||t.type==CKEDITOR.NODE_ELEMENT&&t.attributes["data-cke-bookmark"]}function o(t){return t&&(t.type==CKEDITOR.NODE_ELEMENT&&t.name in m||t.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function a(t,e){var n=t.children[t.children.length-1];t.children.push(e),e.parent=t,n&&(n.next=e,e.previous=n)}function s(t){"false"!=(t=t.attributes).contenteditable&&(t["data-cke-editable"]=t.contenteditable?"true":1),t.contenteditable="false"}function l(t){switch((t=t.attributes)["data-cke-editable"]){case"true":t.contenteditable="true";break;case"1":delete t.contenteditable}}function c(t,e){return t.replace(e,function(t,e,n){return 0===t.indexOf("<textarea")&&(t=e+u(n).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>"),"<cke:encoded>"+encodeURIComponent(t)+"</cke:encoded>"})}function u(t){return t.replace(/\x3c!--\{cke_protected\}\{C\}([\s\S]+?)--\x3e/g,function(t,e){return decodeURIComponent(e)})}function d(t,e){var n=e._.dataStore;return t.replace(/\x3c!--\{cke_protected\}([\s\S]+?)--\x3e/g,function(t,e){return decodeURIComponent(e)}).replace(/\{cke_protected_(\d+)\}/g,function(t,e){return n&&n[e]||""})}CKEDITOR.htmlDataProcessor=function(n){var i,r,o=this;this.editor=n,this.dataFilter=i=new CKEDITOR.htmlParser.filter,this.htmlFilter=r=new CKEDITOR.htmlParser.filter,this.writer=new CKEDITOR.htmlParser.basicWriter,i.addRules(v),i.addRules(y,{applyToAll:!0}),i.addRules(t(n,"data"),{applyToAll:!0}),r.addRules(E),r.addRules(b,{applyToAll:!0}),r.addRules(t(n,"html"),{applyToAll:!0}),n.on("toHtml",function(t){var i,r,o=(o=(o=(o=(o=c(o=function(t){return t.replace(C,function(t,e,n){return"<"+e+n.replace(T,function(t,e){return w.test(e)&&-1==n.indexOf("data-cke-saved-"+e)?" data-cke-saved-"+t+" data-cke-"+CKEDITOR.rnd+"-"+t:t})+">"})}(o=c(o=function(t,e){var n=[],i=e.config.protectedSource,r=e._.dataStore||(e._.dataStore={id:1}),o=/<\!--\{cke_temp(comment)?\}(\d*?)--\x3e/g;i=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(i),t=t.replace(/\x3c!--[\s\S]*?--\x3e/g,function(t){return"\x3c!--{cke_tempcomment}"+(n.push(t)-1)+"--\x3e"});for(var a=0;a<i.length;a++)t=t.replace(i[a],function(t){return t=t.replace(o,function(t,e,i){return n[i]}),/cke_temp(comment)?/.test(t)?t:"\x3c!--{cke_temp}"+(n.push(t)-1)+"--\x3e"});return(t=(t=t.replace(o,function(t,e,i){return"\x3c!--"+f+(e?"{C}":"")+encodeURIComponent(n[i]).replace(/--/g,"%2D%2D")+"--\x3e"})).replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,function(t){return t.replace(/\x3c!--\{cke_protected\}([^>]*)--\x3e/g,function(t,e){return r[r.id]=decodeURIComponent(e),"{cke_protected_"+r.id+++"}"})})).replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,function(t,n,i,r){return"<"+n+i+">"+d(u(r),e)+"</"+n+">"})}(o=(t=t.data).dataValue,n),O)),I)).replace(_,"$1cke:$2")).replace(R,"<cke:$1$2></cke:$1>")).replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2")).replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2");i=t.context||n.editable().getName(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&"pre"==i&&(i="div",o="<pre>"+o+"</pre>",r=1),(i=n.document.createElement(i)).setHtml("a"+o),o=(o=i.getHtml().substr(1)).replace(new RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),""),r&&(o=o.replace(/^<pre>|<\/pre>$/gi,"")),o=u(o=(o=o.replace(k,"$1$2")).replace(D,function(t,e){return decodeURIComponent(e)})),i=!1!==t.fixForBody&&e(t.enterMode,n.config.autoParagraph),o=CKEDITOR.htmlParser.fragment.fromHtml(o,t.context,i),i&&!(r=o).children.length&&CKEDITOR.dtd[r.name][i]&&(i=new CKEDITOR.htmlParser.element(i),r.add(i)),t.dataValue=o},null,null,5),n.on("toHtml",function(t){t.data.filter.applyTo(t.data.dataValue,!0,t.data.dontFilter,t.data.enterMode)&&n.fire("dataFiltered")},null,null,6),n.on("toHtml",function(t){t.data.dataValue.filterChildren(o.dataFilter,!0)},null,null,10),n.on("toHtml",function(t){var e=(t=t.data).dataValue,n=new CKEDITOR.htmlParser.basicWriter;e.writeChildrenHtml(n),e=n.getHtml(!0),t.dataValue=e.replace(/\x3c!--(?!{cke_protected})[\s\S]+?--\x3e/g,function(t){return"\x3c!--"+f+"{C}"+encodeURIComponent(t).replace(/--/g,"%2D%2D")+"--\x3e"})},null,null,15),n.on("toDataFormat",function(t){var i=t.data.dataValue;t.data.enterMode!=CKEDITOR.ENTER_BR&&(i=i.replace(/^<br *\/?>/i,"")),t.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(i,t.data.context,e(t.data.enterMode,n.config.autoParagraph))},null,null,5),n.on("toDataFormat",function(t){t.data.dataValue.filterChildren(o.htmlFilter,!0)},null,null,10),n.on("toDataFormat",function(t){t.data.filter.applyTo(t.data.dataValue,!1,!0)},null,null,11),n.on("toDataFormat",function(t){var e=t.data.dataValue,i=o.writer;i.reset(),e.writeChildrenHtml(i),e=d(e=u(e=i.getHtml(!0)),n),t.data.dataValue=e},null,null,15)},CKEDITOR.htmlDataProcessor.prototype={toHtml:function(t,e,n,i){var r,o,a,s,l=this.editor;return e&&"object"==typeof e?(r=e.context,n=e.fixForBody,i=e.dontFilter,o=e.filter,a=e.enterMode,s=e.protectedWhitespaces):r=e,r||null===r||(r=l.editable().getName()),l.fire("toHtml",{dataValue:t,context:r,fixForBody:n,dontFilter:i,filter:o||l.filter,enterMode:a||l.enterMode,protectedWhitespaces:s}).dataValue},toDataFormat:function(t,e){var n,i,r;return e&&(n=e.context,i=e.filter,r=e.enterMode),n||null===n||(n=this.editor.editable().getName()),this.editor.fire("toDataFormat",{dataValue:t,filter:i||this.editor.filter,context:n,enterMode:r||this.editor.enterMode}).dataValue}};var h=/(?:&nbsp;|\xa0)$/,f="{cke_protected}",p=CKEDITOR.dtd,g="caption colgroup col thead tfoot tbody".split(" "),m=CKEDITOR.tools.extend({},p.$blockLimit,p.$block),v={elements:{input:s,textarea:s}},y={attributeNames:[[/^on/,"data-cke-pa-on"],[/^data-cke-expando$/,""]]},E={elements:{embed:function(t){if((n=t.parent)&&"object"==n.name){var e=n.attributes.width,n=n.attributes.height;e&&(t.attributes.width=e),n&&(t.attributes.height=n)}},a:function(t){var e=t.attributes;if(!(t.children.length||e.name||e.id||t.attributes["data-cke-saved-name"]))return!1}}},b={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(t){var e=t.attributes;if(e){if(e["data-cke-temp"])return!1;for(var n=["name","href","src"],i=0;i<n.length;i++)"data-cke-saved-"+n[i]in e&&delete e[n[i]]}return t},table:function(t){t.children.slice(0).sort(function(t,e){var n,i;return t.type==CKEDITOR.NODE_ELEMENT&&e.type==t.type&&(n=CKEDITOR.tools.indexOf(g,t.name),i=CKEDITOR.tools.indexOf(g,e.name)),-1<n&&-1<i&&n!=i||(n=t.parent?t.getIndex():-1,i=e.parent?e.getIndex():-1),n>i?1:-1})},param:function(t){return t.children=[],t.isEmpty=!0,t},span:function(t){"Apple-style-span"==t.attributes.class&&delete t.name},html:function(t){delete t.attributes.contenteditable,delete t.attributes.class},body:function(t){delete t.attributes.spellcheck,delete t.attributes.contenteditable},style:function(t){var e=t.children[0];e&&e.value&&(e.value=CKEDITOR.tools.trim(e.value)),t.attributes.type||(t.attributes.type="text/css")},title:function(t){var e=t.children[0];!e&&a(t,e=new CKEDITOR.htmlParser.text),e.value=t.attributes["data-cke-title"]||""},input:l,textarea:l},attributes:{class:function(t){return CKEDITOR.tools.ltrim(t.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(b.attributes.style=function(t){return t.replace(/(^|;)([^\:]+)/g,function(t){return t.toLowerCase()})});var C=/<(a|area|img|input|source)\b([^>]*)>/gi,T=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,w=/^(href|src|name)$/i,I=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,O=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,D=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,_=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,k=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,R=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi}(),CKEDITOR.htmlParser.element=function(t,e){this.name=t,this.attributes=e||{},this.children=[];var n=t||"",i=n.match(/^cke:(.*)/);i&&(n=i[1]),n=!!(CKEDITOR.dtd.$nonBodyContent[n]||CKEDITOR.dtd.$block[n]||CKEDITOR.dtd.$listItem[n]||CKEDITOR.dtd.$tableContent[n]||CKEDITOR.dtd.$nonEditable[n]||"br"==n),this.isEmpty=!!CKEDITOR.dtd.$empty[t],this.isUnknown=!CKEDITOR.dtd[t],this._={isBlockLike:n,hasInlineStarted:this.isEmpty||!n}},CKEDITOR.htmlParser.cssStyle=function(t){var e={};return((t instanceof CKEDITOR.htmlParser.element?t.attributes.style:t)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(t,n,i){"font-family"==n&&(i=i.replace(/["']/g,"")),e[n.toLowerCase()]=i}),{rules:e,populate:function(t){var e=this.toString();e&&(t instanceof CKEDITOR.dom.element?t.setAttribute("style",e):t instanceof CKEDITOR.htmlParser.element?t.attributes.style=e:t.style=e)},toString:function(){var t,n=[];for(t in e)e[t]&&n.push(t,":",e[t],";");return n.join("")}}},function(){var t=function(t,e){return(t=t[0])<(e=e[0])?-1:t>e?1:0},e=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:e.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(t,e){var n,i,r,o,a=this;if((e=a.getFilterContext(e)).off)return!0;for(a.parent||t.onRoot(e,a);;){if(n=a.name,!(i=t.onElementName(e,n)))return this.remove(),!1;if(a.name=i,!(a=t.onElement(e,a)))return this.remove(),!1;if(a!==this)return this.replaceWith(a),!1;if(a.name==n)break;if(a.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(a),!1;if(!a.name)return this.replaceWithChildren(),!1}for(r in n=a.attributes){for(i=n[r];;){if(!(o=t.onAttributeName(e,r))){delete n[r];break}if(o==r)break;delete n[r],r=o}o&&(!1===(i=t.onAttribute(e,a,o,i))?delete n[o]:n[o]=i)}return a.isEmpty||this.filterChildren(t,!1,e),!0},filterChildren:e.filterChildren,writeHtml:function(e,n){n&&this.filter(n);var i,r,o=this.name,a=[],s=this.attributes;for(i in e.openTag(o,s),s)a.push([i,s[i]]);for(e.sortAttributes&&a.sort(t),i=0,r=a.length;i<r;i++)s=a[i],e.attribute(s[0],s[1]);e.openTagClose(o,this.isEmpty),this.writeChildrenHtml(e),this.isEmpty||e.closeTag(o)},writeChildrenHtml:e.writeChildrenHtml,replaceWithChildren:function(){for(var t=this.children,e=t.length;e;)t[--e].insertAfter(this);this.remove()},forEach:e.forEach,getFirst:function(t){if(!t)return this.children.length?this.children[0]:null;"function"!=typeof t&&(t=function(t){return function(e){return e.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof t?e.name==t:e.name in t)}}(t));for(var e=0,n=this.children.length;e<n;++e)if(t(this.children[e]))return this.children[e];return null},getHtml:function(){var t=new CKEDITOR.htmlParser.basicWriter;return this.writeChildrenHtml(t),t.getHtml()},setHtml:function(t){for(var e=0,n=(t=this.children=CKEDITOR.htmlParser.fragment.fromHtml(t).children).length;e<n;++e)t[e].parent=this},getOuterHtml:function(){var t=new CKEDITOR.htmlParser.basicWriter;return this.writeHtml(t),t.getHtml()},split:function(t){for(var e=this.children.splice(t,this.children.length-t),n=this.clone(),i=0;i<e.length;++i)e[i].parent=n;return n.children=e,e[0]&&(e[0].previous=null),0<t&&(this.children[t-1].next=null),this.parent.add(n,this.getIndex()+1),n},find:function(t,e){void 0===e&&(e=!1);var n,i=[];for(n=0;n<this.children.length;n++){var r=this.children[n];"function"==typeof t&&t(r)?i.push(r):"string"==typeof t&&r.name===t&&i.push(r),e&&r.find&&(i=i.concat(r.find(t,e)))}return i},addClass:function(t){if(!this.hasClass(t)){var e=this.attributes.class||"";this.attributes.class=e+(e?" ":"")+t}},removeClass:function(t){var e=this.attributes.class;e&&((e=CKEDITOR.tools.trim(e.replace(new RegExp("(?:\\s+|^)"+t+"(?:\\s+|$)")," ")))?this.attributes.class=e:delete this.attributes.class)},hasClass:function(t){var e=this.attributes.class;return!!e&&new RegExp("(?:^|\\s)"+t+"(?=\\s|$)").test(e)},getFilterContext:function(t){var e=[];if(t||(t={off:!1,nonEditable:!1,nestedEditable:!1}),t.off||"off"!=this.attributes["data-cke-processor"]||e.push("off",!0),t.nonEditable||"false"!=this.attributes.contenteditable?t.nonEditable&&!t.nestedEditable&&"true"==this.attributes.contenteditable&&e.push("nestedEditable",!0):e.push("nonEditable",!0),e.length){t=CKEDITOR.tools.copy(t);for(var n=0;n<e.length;n+=2)t[e[n]]=e[n+1]}return t}},!0)}(),function(){var t={},e=/{([^}]+)}/g,n=/([\\'])/g,i=/\n/g,r=/\r/g;CKEDITOR.template=function(o){if(t[o])this.output=t[o];else{var a=o.replace(n,"\\$1").replace(i,"\\n").replace(r,"\\r").replace(e,function(t,e){return"',data['"+e+"']==undefined?'{"+e+"}':data['"+e+"'],'"});this.output=t[o]=Function("data","buffer","return buffer?buffer.push('"+a+"'):['"+a+"'].join('');")}}}(),delete CKEDITOR.loadFullCore,CKEDITOR.instances={},CKEDITOR.document=new CKEDITOR.dom.document(document),CKEDITOR.add=function(t){CKEDITOR.instances[t.name]=t,t.on("focus",function(){CKEDITOR.currentInstance!=t&&(CKEDITOR.currentInstance=t,CKEDITOR.fire("currentInstance"))}),t.on("blur",function(){CKEDITOR.currentInstance==t&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))}),CKEDITOR.fire("instance",null,t)},CKEDITOR.remove=function(t){delete CKEDITOR.instances[t.name]},function(){var t={};CKEDITOR.addTemplate=function(e,n){var i=t[e];return i||(i={name:e,source:n},CKEDITOR.fire("template",i),t[e]=new CKEDITOR.template(i.source))},CKEDITOR.getTemplate=function(e){return t[e]}}(),function(){var t=[];CKEDITOR.addCss=function(e){t.push(e)},CKEDITOR.getCss=function(){return t.join("\n")}}(),CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")}),CKEDITOR.TRISTATE_ON=1,CKEDITOR.TRISTATE_OFF=2,CKEDITOR.TRISTATE_DISABLED=0,CKEDITOR.inline=function(t,e){if(!CKEDITOR.env.isCompatible)return null;if((t=CKEDITOR.dom.element.get(t)).getEditor())throw'The editor instance "'+t.getEditor().name+'" is already attached to the provided element.';var n=new CKEDITOR.editor(e,t,CKEDITOR.ELEMENT_MODE_INLINE),i=t.is("textarea")?t:null;return i?(n.setData(i.getValue(),null,!0),(t=CKEDITOR.dom.element.createFromHtml('<div contenteditable="'+!!n.readOnly+'" class="cke_textarea_inline">'+i.getValue()+"</div>",CKEDITOR.document)).insertAfter(i),i.hide(),i.$.form&&n._attachToForm()):n.setData(t.getHtml(),null,!0),n.on("loaded",function(){n.fire("uiReady"),n.editable(t),n.container=t,n.ui.contentsElement=t,n.setData(n.getData(1)),n.resetDirty(),n.fire("contentDom"),n.mode="wysiwyg",n.fire("mode"),n.status="ready",n.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,n)},null,null,1e4),n.on("destroy",function(){i&&(n.container.clearCustomData(),n.container.remove(),i.show()),n.element.clearCustomData(),delete n.element}),n},CKEDITOR.inlineAll=function(){var t,e,n;for(n in CKEDITOR.dtd.$editable)for(var i=CKEDITOR.document.getElementsByTag(n),r=0,o=i.count();r<o;r++)"true"==(t=i.getItem(r)).getAttribute("contenteditable")&&(e={element:t,config:{}},!1!==CKEDITOR.fire("inline",e)&&CKEDITOR.inline(t,e.config))},CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()}),CKEDITOR.replaceClass="ckeditor",function(){function t(t,n,i,r){if(!CKEDITOR.env.isCompatible)return null;if((t=CKEDITOR.dom.element.get(t)).getEditor())throw'The editor instance "'+t.getEditor().name+'" is already attached to the provided element.';var o=new CKEDITOR.editor(n,t,r);return r==CKEDITOR.ELEMENT_MODE_REPLACE&&(t.setStyle("visibility","hidden"),o._.required=t.hasAttribute("required"),t.removeAttribute("required")),i&&o.setData(i,null,!0),o.on("loaded",function(){!function(t){var e=t.name,n=t.element,i=t.elementMode,r=t.fire("uiSpace",{space:"top",html:""}).html,o=t.fire("uiSpace",{space:"bottom",html:""}).html,a=new CKEDITOR.template('<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir="{langDir}" lang="{langCode}" role="application"'+(t.title?' aria-labelledby="cke_{name}_arialbl"':"")+">"+(t.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':"")+'<{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>');e=CKEDITOR.dom.element.createFromHtml(a.output({id:t.id,name:e,langDir:t.lang.dir,langCode:t.langCode,voiceLabel:t.title,topHtml:r?'<span id="'+t.ui.spaceId("top")+'" class="cke_top cke_reset_all" role="presentation" style="height:auto">'+r+"</span>":"",contentId:t.ui.spaceId("contents"),bottomHtml:o?'<span id="'+t.ui.spaceId("bottom")+'" class="cke_bottom cke_reset_all" role="presentation">'+o+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"}));i==CKEDITOR.ELEMENT_MODE_REPLACE?(n.hide(),e.insertAfter(n)):n.append(e),t.container=e,t.ui.contentsElement=t.ui.space("contents"),r&&t.ui.space("top").unselectable(),o&&t.ui.space("bottom").unselectable(),n=t.config.width,i=t.config.height,n&&e.setStyle("width",CKEDITOR.tools.cssLength(n)),i&&t.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(i)),e.disableContextMenu(),CKEDITOR.env.webkit&&e.on("focus",function(){t.focus()}),t.fireOnce("uiReady")}(o),r==CKEDITOR.ELEMENT_MODE_REPLACE&&o.config.autoUpdateElement&&t.$.form&&o._attachToForm(),o.setMode(o.config.startupMode,function(){o.resetDirty(),o.status="ready",o.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,o)})}),o.on("destroy",e),o}function e(){var t=this.container,e=this.element;t&&(t.clearCustomData(),t.remove()),e&&(e.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(e.show(),this._.required&&e.setAttribute("required","required")),delete this.element)}CKEDITOR.replace=function(e,n){return t(e,n,null,CKEDITOR.ELEMENT_MODE_REPLACE)},CKEDITOR.appendTo=function(e,n,i){return t(e,n,i,CKEDITOR.ELEMENT_MODE_APPENDTO)},CKEDITOR.replaceAll=function(){for(var t=document.getElementsByTagName("textarea"),e=0;e<t.length;e++){var n=null,i=t[e];if(i.name||i.id){if("string"==typeof arguments[0]){if(!new RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(i.className))continue}else if("function"==typeof arguments[0]&&(n={},!1===arguments[0](i,n)))continue;this.replace(i,n)}}},CKEDITOR.editor.prototype.addMode=function(t,e){(this._.modes||(this._.modes={}))[t]=e},CKEDITOR.editor.prototype.setMode=function(t,e){var n=this,i=this._.modes;if(t!=n.mode&&i&&i[t]){if(n.fire("beforeSetMode",t),n.mode){var r,o=n.checkDirty(),a=(i=n._.previousModeData,0);n.fire("beforeModeUnload"),n.editable(0),n._.previousMode=n.mode,n._.previousModeData=r=n.getData(1),"source"==n.mode&&i==r&&(n.fire("lockSnapshot",{forceUpdate:!0}),a=1),n.ui.space("contents").setHtml(""),n.mode=""}else n._.previousModeData=n.getData(1);this._.modes[t](function(){n.mode=t,void 0!==o&&!o&&n.resetDirty(),a?n.fire("unlockSnapshot"):"wysiwyg"==t&&n.fire("saveSnapshot"),setTimeout(function(){n.fire("mode"),e&&e.call(n)},0)})}},CKEDITOR.editor.prototype.resize=function(t,e,n,i){var r=this.container,o=this.ui.space("contents"),a=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement;(i=i?this.container.getFirst(function(t){return t.type==CKEDITOR.NODE_ELEMENT&&t.hasClass("cke_inner")}):r).setSize("width",t,!0),a&&(a.style.width="1%");var s=(i.$.offsetHeight||0)-(o.$.clientHeight||0);r=Math.max(e-(n?0:s),0),e=n?e+s:e,o.setStyle("height",r+"px"),a&&(a.style.width="100%"),this.fire("resize",{outerHeight:e,contentsHeight:r,outerWidth:t||i.getSize("width")})},CKEDITOR.editor.prototype.getResizable=function(t){return t?this.ui.space("contents"):this.container},CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})}(),CKEDITOR.config.startupMode="wysiwyg",function(){function t(t){var e,i=t.editor,o=t.data.path,a=o.blockLimit,s=t.data.selection,l=s.getRanges()[0];(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)&&(s=function(t,e){if(s.isFake)return 0;var i=e.block||e.blockLimit,r=i&&i.getLast(n);return!i||!i.isBlockBoundary()||r&&r.type==CKEDITOR.NODE_ELEMENT&&r.isBlockBoundary()||i.is("pre")||i.getBogus()?void 0:i}(0,o))&&(s.appendBogus(),e=CKEDITOR.env.ie),r(i,o.block,a)&&l.collapsed&&!l.getCommonAncestor().isReadOnly()&&((o=l.clone()).enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),(a=new CKEDITOR.dom.walker(o)).guard=function(t){return!n(t)||t.type==CKEDITOR.NODE_COMMENT||t.isReadOnly()},!a.checkForward()||o.checkStartOfBlock()&&o.checkEndOfBlock())&&(i=l.fixBlock(!0,i.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(i=i.getFirst(n))&&i.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(i.getText()).match(/^(?:&nbsp;|\xa0)$/)&&i.remove(),e=1,t.cancel()),e&&l.select()}function e(t){var e=t.data.getTarget();e.is("input")&&("submit"!=(e=e.getAttribute("type"))&&"reset"!=e||t.data.preventDefault())}function n(t){return l(t)&&c(t)}function i(t){function e(t){return function(e,r){if(r&&e.type==CKEDITOR.NODE_ELEMENT&&e.is(o)&&(i=e),!(r||!n(e)||t&&d(e)))return!1}}var i,r=t.getRanges()[0];t=t.root;var o={table:1,ul:1,ol:1,dl:1};if(r.startPath().contains(o)){var a=r.clone();if(a.collapse(1),a.setStartAt(t,CKEDITOR.POSITION_AFTER_START),(t=new CKEDITOR.dom.walker(a)).guard=e(),t.checkBackward(),i)return(a=r.clone()).collapse(),a.setEndAt(i,CKEDITOR.POSITION_AFTER_END),(t=new CKEDITOR.dom.walker(a)).guard=e(!0),i=!1,t.checkForward(),i}return null}function r(t,e,n){return!1!==t.config.autoParagraph&&t.activeEnterMode!=CKEDITOR.ENTER_BR&&(t.editable().equals(n)&&!e||e&&"true"==e.getAttribute("contenteditable"))}function o(t){return t.activeEnterMode!=CKEDITOR.ENTER_BR&&!1!==t.config.autoParagraph&&(t.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p")}function a(t){var e=t.editor;e.getSelection().scrollIntoView(),setTimeout(function(){e.fire("saveSnapshot")},0)}function s(t,e,n){var i=t.getCommonAncestor(e);for(e=t=n?e:t;(t=t.getParent())&&!i.equals(t)&&1==t.getChildCount();)e=t;e.remove()}var l,c,u,d,h,f,p,g,m,v;CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(t,e){this.base(e.$||e),this.editor=t,this.status="unloaded",this.hasFocus=!1,this.setup()},proto:{focus:function(){var t;if(CKEDITOR.env.webkit&&!this.hasFocus&&(t=this.editor._.previousActive||this.getDocument().getActive(),this.contains(t)))t.focus();else{CKEDITOR.env.edge&&14<CKEDITOR.env.version&&!this.hasFocus&&this.getDocument().equals(CKEDITOR.document)&&(this.editor._.previousScrollTop=this.$.scrollTop);try{!CKEDITOR.env.ie||CKEDITOR.env.edge&&14<CKEDITOR.env.version||!this.getDocument().equals(CKEDITOR.document)?this.$.focus():this.$.setActive()}catch(t){if(!CKEDITOR.env.ie)throw t}CKEDITOR.env.safari&&!this.isInline()&&((t=CKEDITOR.document.getActive()).equals(this.getWindow().getFrame())||this.getWindow().focus())}},on:function(t,e){var n=Array.prototype.slice.call(arguments,0);return CKEDITOR.env.ie&&/^focus|blur$/.exec(t)&&(t="focus"==t?"focusin":"focusout",e=function(t,e){return function(n){var i=n.data.$.toElement||n.data.$.fromElement||n.data.$.relatedTarget;(i=i&&i.nodeType==CKEDITOR.NODE_ELEMENT?new CKEDITOR.dom.element(i):null)&&(e.equals(i)||e.contains(i))||t.call(this,n)}}(e,this),n[0]=t,n[1]=e),CKEDITOR.dom.element.prototype.on.apply(this,n)},attachListener:function(t){!this._.listeners&&(this._.listeners=[]);var e=Array.prototype.slice.call(arguments,1);return e=t.on.apply(t,e),this._.listeners.push(e),e},clearListeners:function(){var t=this._.listeners;try{for(;t.length;)t.pop().removeListener()}catch(t){}},restoreAttrs:function(){var t,e,n=this._.attrChanges;for(e in n)n.hasOwnProperty(e)&&(null!==(t=n[e])?this.setAttribute(e,t):this.removeAttribute(e))},attachClass:function(t){var e=this.getCustomData("classes");this.hasClass(t)||(!e&&(e=[]),e.push(t),this.setCustomData("classes",e),this.addClass(t))},changeAttr:function(t,e){var n=this.getAttribute(t);e!==n&&(!this._.attrChanges&&(this._.attrChanges={}),t in this._.attrChanges||(this._.attrChanges[t]=n),this.setAttribute(t,e))},insertText:function(t){this.editor.focus(),this.insertHtml(this.transformPlainTextToHtml(t),"text")},transformPlainTextToHtml:function(t){var e=this.editor.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:this.editor.activeEnterMode;return CKEDITOR.tools.transformPlainTextToHtml(t,e)},insertHtml:function(t,e,n){var i=this.editor;i.focus(),i.fire("saveSnapshot"),n||(n=i.getSelection().getRanges()[0]),f(this,e||"html",t,n),n.select(),a(this),this.editor.fire("afterInsertHtml",{})},insertHtmlIntoRange:function(t,e,n){f(this,n||"html",t,e),this.editor.fire("afterInsertHtml",{intoRange:e})},insertElement:function(t,e){(r=this.editor).focus(),r.fire("saveSnapshot");var i=r.activeEnterMode,r=r.getSelection(),o=t.getName();o=CKEDITOR.dtd.$block[o],e||(e=r.getRanges()[0]),this.insertElementIntoRange(t,e)&&(e.moveToPosition(t,CKEDITOR.POSITION_AFTER_END),o&&((o=t.getNext(function(t){return n(t)&&!d(t)}))&&o.type==CKEDITOR.NODE_ELEMENT&&o.is(CKEDITOR.dtd.$block)?o.getDtd()["#"]?e.moveToElementEditStart(o):e.moveToElementEditEnd(t):o||i==CKEDITOR.ENTER_BR||(o=e.fixBlock(!0,i==CKEDITOR.ENTER_DIV?"div":"p"),e.moveToElementEditStart(o)))),r.selectRanges([e]),a(this)},insertElementIntoSelection:function(t){this.insertElement(t)},insertElementIntoRange:function(t,e){var n,i,r=this.editor,o=r.config.enterMode,a=t.getName(),s=CKEDITOR.dtd.$block[a];if(e.checkReadOnly())return!1;if(e.deleteContents(1),e.startContainer.type==CKEDITOR.NODE_ELEMENT&&(e.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})?p(e):e.startContainer.is(CKEDITOR.dtd.$list)&&g(e)),s)for(;(n=e.getCommonAncestor(0,1))&&(i=CKEDITOR.dtd[n.getName()])&&(!i||!i[a]);)n.getName()in CKEDITOR.dtd.span?e.splitElement(n):e.checkStartOfBlock()&&e.checkEndOfBlock()?(e.setStartBefore(n),e.collapse(!0),n.remove()):e.splitBlock(o==CKEDITOR.ENTER_DIV?"div":"p",r.editable());return e.insertNode(t),!0},setData:function(t,e){e||(t=this.editor.dataProcessor.toHtml(t)),this.setHtml(t),this.fixInitialSelection(),"unloaded"==this.status&&(this.status="ready"),this.editor.fire("dataReady")},getData:function(t){var e=this.getHtml();return t||(e=this.editor.dataProcessor.toDataFormat(e)),e},setReadOnly:function(t){this.setAttribute("contenteditable",!t)},detach:function(){this.removeClass("cke_editable"),this.status="detached";var t=this.editor;this._.detach(),delete t.document,delete t.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},fixInitialSelection:function(){function t(){var t,n=e.getDocument().$,i=n.getSelection();t:if(i.anchorNode&&i.anchorNode==e.$)t=!0;else{if(CKEDITOR.env.webkit&&(t=e.getDocument().getActive())&&t.equals(e)&&!i.anchorNode){t=!0;break t}t=void 0}t&&((t=new CKEDITOR.dom.range(e)).moveToElementEditStart(e),(n=n.createRange()).setStart(t.startContainer.$,t.startOffset),n.collapse(!0),i.removeAllRanges(),i.addRange(n))}var e=this;CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.quirks)?this.hasFocus&&(this.focus(),function(){var t=e.getDocument().$,n=t.selection,i=e.getDocument().getActive();"None"==n.type&&i.equals(e)&&(n=new CKEDITOR.dom.range(e),t=t.body.createTextRange(),n.moveToElementEditStart(e),(n=n.startContainer).type!=CKEDITOR.NODE_ELEMENT&&(n=n.getParent()),t.moveToElementText(n.$),t.collapse(!0),t.select())}()):this.hasFocus?(this.focus(),t()):this.once("focus",function(){t()},null,null,-999)},getHtmlFromRange:function(t){return t.collapsed?new CKEDITOR.dom.documentFragment(t.document):(t={doc:this.getDocument(),range:t.clone()},m.eol.detect(t,this),m.bogus.exclude(t),m.cell.shrink(t),t.fragment=t.range.cloneContents(),m.tree.rebuild(t,this),m.eol.fix(t,this),new CKEDITOR.dom.documentFragment(t.fragment.$))},extractHtmlFromRange:function(t,e){var n=v,i={range:t,doc:t.document},r=this.getHtmlFromRange(t);if(t.collapsed)return t.optimize(),r;if(t.enlarge(CKEDITOR.ENLARGE_INLINE,1),n.table.detectPurge(i),i.bookmark=t.createBookmark(),delete i.range,(a=this.editor.createRange()).moveToPosition(i.bookmark.startNode,CKEDITOR.POSITION_BEFORE_START),i.targetBookmark=a.createBookmark(),n.list.detectMerge(i,this),n.table.detectRanges(i,this),n.block.detectMerge(i,this),i.tableContentsRanges?(n.table.deleteRanges(i),t.moveToBookmark(i.bookmark),i.range=t):(t.moveToBookmark(i.bookmark),i.range=t,t.extractContents(n.detectExtractMerge(i))),t.moveToBookmark(i.targetBookmark),t.optimize(),n.fixUneditableRangePosition(t),n.list.merge(i,this),n.table.purge(i,this),n.block.merge(i,this),e){if(n=t.startPath(),i=t.checkStartOfBlock()&&t.checkEndOfBlock()&&n.block&&!t.root.equals(n.block)){t:{var o,a=0;if(i=n.block.getElementsByTag("span"))for(;o=i.getItem(a++);)if(!c(o)){i=!0;break t}i=!1}i=!i}i&&(t.moveToPosition(n.block,CKEDITOR.POSITION_BEFORE_START),n.block.remove())}else n.autoParagraph(this.editor,t),u(t.startContainer)&&t.startContainer.appendBogus();return t.startContainer.mergeSiblings(),r},setup:function(){var t=this.editor;if(this.attachListener(t,"beforeGetData",function(){var e=this.getData();this.is("textarea")||!1!==t.config.ignoreEmptyParagraph&&(e=e.replace(h,function(t,e){return e})),t.setData(e,null,1)},this),this.attachListener(t,"getSnapshot",function(t){t.data=this.getData(1)},this),this.attachListener(t,"afterSetData",function(){this.setData(t.getData(1))},this),this.attachListener(t,"loadSnapshot",function(t){this.setData(t.data,1)},this),this.attachListener(t,"beforeFocus",function(){var e=t.getSelection();(e=e&&e.getNative())&&"Control"==e.type||this.focus()},this),this.attachListener(t,"insertHtml",function(t){this.insertHtml(t.data.dataValue,t.data.mode,t.data.range)},this),this.attachListener(t,"insertElement",function(t){this.insertElement(t.data)},this),this.attachListener(t,"insertText",function(t){this.insertText(t.data)},this),this.setReadOnly(t.readOnly),this.attachClass("cke_editable"),t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?this.attachClass("cke_editable_inline"):t.elementMode!=CKEDITOR.ELEMENT_MODE_REPLACE&&t.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||this.attachClass("cke_editable_themed"),this.attachClass("cke_contents_"+t.config.contentsLangDirection),t.keystrokeHandler.blockedKeystrokes[8]=+t.readOnly,t.keystrokeHandler.attach(this),this.on("blur",function(){this.hasFocus=!1},null,null,-1),this.on("focus",function(){this.hasFocus=!0},null,null,-1),CKEDITOR.env.webkit&&this.on("scroll",function(){t._.previousScrollTop=t.editable().$.scrollTop},null,null,-1),CKEDITOR.env.edge&&14<CKEDITOR.env.version){var r=function(){var e=t.editable();null!=t._.previousScrollTop&&e.getDocument().equals(CKEDITOR.document)&&(e.$.scrollTop=t._.previousScrollTop,t._.previousScrollTop=null,this.removeListener("scroll",r))};this.on("scroll",r)}if(t.focusManager.add(this),this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,t.once("contentDom",function(){t.focusManager.focus(this)},this)),this.isInline()&&this.changeAttr("tabindex",t.tabIndex),!this.is("textarea")){t.document=this.getDocument(),t.window=this.getWindow();var o=t.document;this.changeAttr("spellcheck",!t.config.disableNativeSpellChecker);var a=t.config.contentsLangDirection;this.getDirection(1)!=a&&this.changeAttr("dir",a);var c=CKEDITOR.getCss();if(c){var u=(a=o.getHead()).getCustomData("stylesheet");u?c!=u.getText()&&(CKEDITOR.env.ie&&9>CKEDITOR.env.version?u.$.styleSheet.cssText=c:u.setText(c)):(c=o.appendStyleText(c),c=new CKEDITOR.dom.element(c.ownerNode||c.owningElement),a.setCustomData("stylesheet",c),c.data("cke-temp",1))}a=o.getCustomData("stylesheet_ref")||0,o.setCustomData("stylesheet_ref",a+1),this.setCustomData("cke_includeReadonly",!t.config.disableReadonlyStyling),this.attachListener(this,"click",function(t){t=t.data;var e=new CKEDITOR.dom.elementPath(t.getTarget(),this).contains("a");e&&2!=t.$.button&&e.isReadOnly()&&t.preventDefault()});var d={8:1,46:1};this.attachListener(t,"key",function(e){if(t.readOnly)return!0;var n;if((h=e.data.domEvent.getKey())in d){var r,o,a,s,c=(e=t.getSelection()).getRanges()[0],u=c.startPath(),h=8==h;CKEDITOR.env.ie&&11>CKEDITOR.env.version&&(r=e.getSelectedElement())||(r=i(e))?(t.fire("saveSnapshot"),c.moveToPosition(r,CKEDITOR.POSITION_BEFORE_START),r.remove(),c.select(),t.fire("saveSnapshot"),n=1):c.collapsed&&((o=u.block)&&(s=o[h?"getPrevious":"getNext"](l))&&s.type==CKEDITOR.NODE_ELEMENT&&s.is("table")&&c[h?"checkStartOfBlock":"checkEndOfBlock"]()?(t.fire("saveSnapshot"),c[h?"checkEndOfBlock":"checkStartOfBlock"]()&&o.remove(),c["moveToElementEdit"+(h?"End":"Start")](s),c.select(),t.fire("saveSnapshot"),n=1):u.blockLimit&&u.blockLimit.is("td")&&(a=u.blockLimit.getAscendant("table"))&&c.checkBoundaryOfElement(a,h?CKEDITOR.START:CKEDITOR.END)&&(s=a[h?"getPrevious":"getNext"](l))?(t.fire("saveSnapshot"),c["moveToElementEdit"+(h?"End":"Start")](s),c.checkStartOfBlock()&&c.checkEndOfBlock()?s.remove():c.select(),t.fire("saveSnapshot"),n=1):(a=u.contains(["td","th","caption"]))&&c.checkBoundaryOfElement(a,h?CKEDITOR.START:CKEDITOR.END)&&(n=1))}return!n}),t.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",function(e){e.data.getKeystroke()in d&&!this.getFirst(n)&&(this.appendBogus(),(e=t.createRange()).moveToPosition(this,CKEDITOR.POSITION_AFTER_START),e.select())}),this.attachListener(this,"dblclick",function(e){if(t.readOnly)return!1;e={element:e.data.getTarget()},t.fire("doubleclick",e)}),CKEDITOR.env.ie&&this.attachListener(this,"click",e),CKEDITOR.env.ie&&!CKEDITOR.env.edge||this.attachListener(this,"mousedown",function(e){var n=e.data.getTarget();n.is("img","hr","input","textarea","select")&&!n.isReadOnly()&&(t.getSelection().selectElement(n),n.is("input","textarea","select")&&e.data.preventDefault())}),CKEDITOR.env.edge&&this.attachListener(this,"mouseup",function(e){(e=e.data.getTarget())&&e.is("img")&&t.getSelection().selectElement(e)}),CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(e){if(2==e.data.$.button&&!(e=e.data.getTarget()).getOuterHtml().replace(h,"")){var n=t.createRange();n.moveToElementEditStart(e),n.select(!0)}}),CKEDITOR.env.webkit&&(this.attachListener(this,"click",function(t){t.data.getTarget().is("input","select")&&t.data.preventDefault()}),this.attachListener(this,"mouseup",function(t){t.data.getTarget().is("input","textarea")&&t.data.preventDefault()})),CKEDITOR.env.webkit&&this.attachListener(t,"key",function(e){if(t.readOnly)return!0;if((e=e.data.domEvent.getKey())in d){var n=8==e,i=t.getSelection().getRanges()[0];if(e=i.startPath(),i.collapsed)t:{var r=e.block;if(r&&i[n?"checkStartOfBlock":"checkEndOfBlock"]()&&i.moveToClosestEditablePosition(r,!n)&&i.collapsed){if(i.startContainer.type==CKEDITOR.NODE_ELEMENT){var o=i.startContainer.getChild(i.startOffset-(n?1:0));if(o&&o.type==CKEDITOR.NODE_ELEMENT&&o.is("hr")){t.fire("saveSnapshot"),o.remove(),e=!0;break t}}var a;!(i=i.startPath().block)||i&&i.contains(r)?e=void 0:(t.fire("saveSnapshot"),(a=(n?i:r).getBogus())&&a.remove(),o=(a=t.getSelection()).createBookmarks(),(n?r:i).moveChildren(n?i:r,!1),e.lastElement.mergeSiblings(),s(r,i,!n),a.selectBookmarks(o),e=!0)}else e=!1}else n=i,a=e.block,i=n.endPath().block,a&&i&&!a.equals(i)?(t.fire("saveSnapshot"),(r=a.getBogus())&&r.remove(),n.enlarge(CKEDITOR.ENLARGE_INLINE),n.deleteContents(),i.getParent()&&(i.moveChildren(a,!1),e.lastElement.mergeSiblings(),s(a,i,!0)),(n=t.getSelection().getRanges()[0]).collapse(1),n.optimize(),""===n.startContainer.getHtml()&&n.startContainer.appendBogus(),n.select(),e=!0):e=!1;if(!e)return;return t.getSelection().scrollIntoView(),t.fire("saveSnapshot"),!1}},this,null,100)}}},_:{detach:function(){var t;if(this.editor.setData(this.editor.getData(),0,1),this.clearListeners(),this.restoreAttrs(),t=this.removeCustomData("classes"))for(;t.length;)this.removeClass(t.pop());if(!this.is("textarea")){var e=(t=this.getDocument()).getHead();if(e.getCustomData("stylesheet")){var n=t.getCustomData("stylesheet_ref");--n?t.setCustomData("stylesheet_ref",n):(t.removeCustomData("stylesheet_ref"),e.removeCustomData("stylesheet").remove())}}this.editor.fire("contentDomUnload"),delete this.editor}}}),CKEDITOR.editor.prototype.editable=function(t){var e=this._.editable;return e&&t?0:(arguments.length&&(e=this._.editable=t?t instanceof CKEDITOR.editable?t:new CKEDITOR.editable(this,t):(e&&e.detach(),null)),e)},CKEDITOR.on("instanceLoaded",function(e){var n=e.editor;n.on("insertElement",function(t){(t=t.data).type==CKEDITOR.NODE_ELEMENT&&(t.is("input")||t.is("textarea"))&&("false"!=t.getAttribute("contentEditable")&&t.data("cke-editable",t.hasAttribute("contenteditable")?"true":"1"),t.setAttribute("contentEditable",!1))}),n.on("selectionChange",function(e){if(!n.readOnly){var i=n.getSelection();i&&!i.isLocked&&(i=n.checkDirty(),n.fire("lockSnapshot"),t(e),n.fire("unlockSnapshot"),!i&&n.resetDirty())}})}),CKEDITOR.on("instanceCreated",function(t){var e=t.editor;e.on("mode",function(){var t=e.editable();if(t&&t.isInline()){var n=e.title;if(t.changeAttr("role","textbox"),t.changeAttr("aria-label",n),n&&t.changeAttr("title",n),(r=e.fire("ariaEditorHelpLabel",{}).label)&&(n=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents"))){var i=CKEDITOR.tools.getNextId(),r=CKEDITOR.dom.element.createFromHtml('<span id="'+i+'" class="cke_voice_label">'+r+"</span>");n.append(r),t.changeAttr("aria-describedby",i)}}})}),CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}"),l=CKEDITOR.dom.walker.whitespaces(!0),c=CKEDITOR.dom.walker.bookmark(!1,!0),u=CKEDITOR.dom.walker.empty(),d=CKEDITOR.dom.walker.bogus(),h=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,f=function(){function t(t){return t.type==CKEDITOR.NODE_ELEMENT}function e(n,i){var r,o=[],a=n.getChildren(),s=a.count(),c=0,u=l[i],d=!n.is(l.$inline)||n.is("br");for(d&&o.push(" ");c<s;c++)t(r=a.getItem(c))&&!r.is(u)?o=o.concat(e(r,i)):o.push(r);return d&&o.push(" "),o}function i(e){return t(e.startContainer)&&e.startContainer.getChild(e.startOffset-1)}function a(e){return e&&t(e)&&(e.is(l.$removeEmpty)||e.is("a")&&!e.isBlockBoundary())}function s(e,n,i,r){var o,a,l=e.clone();l.setEndAt(n,CKEDITOR.POSITION_BEFORE_END),(o=new CKEDITOR.dom.walker(l).next())&&t(o)&&c[o.getName()]&&(a=o.getPrevious())&&t(a)&&!a.getParent().equals(e.startContainer)&&i.contains(a)&&r.contains(o)&&o.isIdentical(a)&&(o.moveChildren(a),o.remove(),s(e,n,i,r))}var l=CKEDITOR.dtd,c={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},u={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},d=CKEDITOR.tools.extend({},l.$inline);return delete d.br,function(c,h,f,p){var g=c.editor,m=!1;if("unfiltered_html"==h&&(h="html",m=!0),!p.checkReadOnly()){var v,y,E;if(h=(c={type:h,dontFilter:m,editable:c,editor:g,range:p,blockLimit:x=new CKEDITOR.dom.elementPath(p.startContainer,p.root).blockLimit||p.root,mergeCandidates:[],zombies:[]}).range,p=c.mergeCandidates,"text"==c.type&&h.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(v=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",h.document),h.insertNode(v),h.setStartAfter(v)),m=new CKEDITOR.dom.elementPath(h.startContainer),c.endPath=x=new CKEDITOR.dom.elementPath(h.endContainer),!h.collapsed){g=x.block||x.blockLimit;var b=h.getCommonAncestor();g&&!g.equals(b)&&!g.contains(b)&&h.checkEndOfBlock()&&c.zombies.push(g),h.deleteContents()}for(;(y=i(h))&&t(y)&&y.isBlockBoundary()&&m.contains(y);)h.moveToPosition(y,CKEDITOR.POSITION_BEFORE_END);for(s(h,c.blockLimit,m,x),v&&(h.setEndBefore(v),h.collapse(),v.remove()),(g=(v=h.startPath()).contains(a,!1,1))&&(h.splitElement(g),c.inlineStylesRoot=g,c.inlineStylesPeak=v.lastElement),(g=(v=h.createBookmark()).startNode.getPrevious(n))&&t(g)&&a(g)&&p.push(g),(g=v.startNode.getNext(n))&&t(g)&&a(g)&&p.push(g),g=v.startNode;(g=g.getParent())&&a(g);)p.push(g);if(h.moveToBookmark(v),v=f){if(v=c.range,"text"==c.type&&c.inlineStylesRoot){for(h=(y=c.inlineStylesPeak).getDocument().createText("{cke-peak}"),p=c.inlineStylesRoot.getParent();!y.equals(p);)h=h.appendTo(y.clone()),y=y.getParent();f=h.getOuterHtml().split("{cke-peak}").join(f)}if(y=c.blockLimit.getName(),/^\s+|\s+$/.test(f)&&"span"in CKEDITOR.dtd[y]&&(f=(k='<span data-cke-marker="1">&nbsp;</span>')+f+k),f=c.editor.dataProcessor.toHtml(f,{context:null,fixForBody:!1,protectedWhitespaces:!!k,dontFilter:c.dontFilter,filter:c.editor.activeFilter,enterMode:c.editor.activeEnterMode}),(y=v.document.createElement("body")).setHtml(f),k&&(y.getFirst().remove(),y.getLast().remove()),(k=v.startPath().block)&&(1!=k.getChildCount()||!k.getBogus()))t:{var C;if(1==y.getChildCount()&&t(C=y.getFirst())&&C.is(u)&&!C.hasAttribute("contenteditable")){for(v=0,p=(k=C.getElementsByTag("*")).count();v<p;v++)if(!(h=k.getItem(v)).is(d))break t;C.moveChildren(C.getParent(1)),C.remove()}}c.dataWrapper=y,v=f}if(v){var T;v=(C=c.range).document,y=c.blockLimit,p=0;var w,I,O,D,_,k=[];f=g=0,h=C.startContainer;var R,x=(m=c.endPath.elements[0]).getPosition(h);for(b=!(!m.getCommonAncestor(h)||x==CKEDITOR.POSITION_IDENTICAL||x&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED),function(e,n){function i(e,n){if(n.isBlock&&n.isElement&&!n.node.is("br")&&t(e)&&e.is("br"))return e.remove(),1}var r=n.endContainer.getChild(n.endOffset),o=n.endContainer.getChild(n.endOffset-1);r&&i(r,e[e.length-1]),o&&i(o,e[0])&&(n.setEnd(n.endContainer,n.endOffset-1),n.collapse())}(h=function e(n,i){var r,o,a,s,c=[],u=i.range.startContainer;r=i.range.startPath(),u=l[u.getName()];for(var d=0,h=n.getChildren(),f=h.count(),p=-1,g=-1,m=0,v=r.contains(l.$list);d<f;++d)t(r=h.getItem(d))?(a=r.getName(),v&&a in CKEDITOR.dtd.$list?c=c.concat(e(r,i)):(s=!!u[a],"br"!=a||!r.data("cke-eol")||d&&d!=f-1||(m=(o=d?c[d-1].node:h.getItem(d+1))&&(!t(o)||!o.is("br")),o=o&&t(o)&&l.$block[o.getName()]),-1!=p||s||(p=d),s||(g=d),c.push({isElement:1,isLineBreak:m,isBlock:r.isBlockBoundary(),hasBlockSibling:o,node:r,name:a,allowed:s}),o=m=0)):c.push({isElement:0,node:r,allowed:1});return-1<p&&(c[p].firstNotAllowed=1),-1<g&&(c[g].lastNotAllowed=1),c}(c.dataWrapper,c),C);p<h.length;p++){if(T=(x=h[p]).isLineBreak){T=C,D=y;var S=void 0,K=void 0;x.hasBlockSibling?T=1:(S=T.startContainer.getAscendant(l.$block,1))&&S.is({div:1,p:1})?(K=S.getPosition(D))==CKEDITOR.POSITION_IDENTICAL||K==CKEDITOR.POSITION_CONTAINS?T=0:(D=T.splitElement(S),T.moveToPosition(D,CKEDITOR.POSITION_AFTER_START),T=1):T=0}if(T)f=0<p;else{if(T=C.startPath(),!x.isBlock&&r(c.editor,T.block,T.blockLimit)&&(O=o(c.editor))&&((O=v.createElement(O)).appendBogus(),C.insertNode(O),CKEDITOR.env.needsBrFiller&&(w=O.getBogus())&&w.remove(),C.moveToPosition(O,CKEDITOR.POSITION_BEFORE_END)),(T=C.startPath().block)&&!T.equals(I)&&((w=T.getBogus())&&(w.remove(),k.push(T)),I=T),x.firstNotAllowed&&(g=1),g&&x.isElement){for(T=C.startContainer,D=null;T&&!l[T.getName()][x.name];){if(T.equals(y)){T=null;break}D=T,T=T.getParent()}if(T)D&&(_=C.splitElement(D),c.zombies.push(_),c.zombies.push(D));else{D=y.getName(),R=!p,T=p==h.length-1,S=[],K=(D=e(x.node,D)).length;for(var $=0,A=void 0,N=0,P=-1;$<K;$++)" "==(A=D[$])?(N||R&&!$||(S.push(new CKEDITOR.dom.text(" ")),P=S.length),N=1):(S.push(A),N=0);T&&P==S.length&&S.pop(),R=S}}if(R){for(;T=R.pop();)C.insertNode(T);R=0}else C.insertNode(x.node);x.lastNotAllowed&&p<h.length-1&&((_=b?m:_)&&C.setEndAt(_,CKEDITOR.POSITION_AFTER_START),g=0),C.collapse()}}(w=1==h.length&&(w=h[0]).isElement&&"false"==w.node.getAttribute("contenteditable"))&&(f=!0,T=h[0].node,C.setStartAt(T,CKEDITOR.POSITION_BEFORE_START),C.setEndAt(T,CKEDITOR.POSITION_AFTER_END)),c.dontMoveCaret=f,c.bogusNeededBlocks=k}for(w=c.range,_=c.bogusNeededBlocks,R=w.createBookmark();I=c.zombies.pop();)I.getParent()&&((O=w.clone()).moveToElementEditStart(I),O.removeEmptyBlocksAtEnd());if(_)for(;I=_.pop();)CKEDITOR.env.needsBrFiller?I.appendBogus():I.append(w.document.createText(" "));for(;I=c.mergeCandidates.pop();)I.mergeSiblings();if(w.moveToBookmark(R),!c.dontMoveCaret){for(I=i(w);I&&t(I)&&!I.is(l.$empty);){if(I.isBlockBoundary())w.moveToPosition(I,CKEDITOR.POSITION_BEFORE_END);else{if(a(I)&&I.getHtml().match(/(\s|&nbsp;)$/g)){E=null;break}(E=w.clone()).moveToPosition(I,CKEDITOR.POSITION_BEFORE_END)}I=I.getLast(n)}E&&w.moveToRange(E)}}}}(),p=function(){function t(t){return(t=new CKEDITOR.dom.walker(t)).guard=function(t,e){return!e&&(t.type==CKEDITOR.NODE_ELEMENT?t.is(CKEDITOR.dtd.$tableContent):void 0)},t.evaluator=function(t){return t.type==CKEDITOR.NODE_ELEMENT},t}function e(t,e,n){return e=t.getDocument().createElement(e),t.append(e,n),e}function n(t){for(var e,n=t.count();0<n--;)e=t.getItem(n),CKEDITOR.tools.trim(e.getHtml())||(e.appendBogus(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&e.getChildCount()&&e.getFirst().remove())}return function(i){var r=i.startContainer,o=r.getAscendant("table",1),a=!1;n(o.getElementsByTag("td")),n(o.getElementsByTag("th")),(o=i.clone()).setStart(r,0),(o=t(o).lastBackward())||((o=i.clone()).setEndAt(r,CKEDITOR.POSITION_BEFORE_END),o=t(o).lastForward(),a=!0),o||(o=r),o.is("table")?(i.setStartAt(o,CKEDITOR.POSITION_BEFORE_START),i.collapse(!0),o.remove()):(o.is({tbody:1,thead:1,tfoot:1})&&(o=e(o,"tr",a)),o.is("tr")&&(o=e(o,o.getParent().is("thead")?"th":"td",a)),(r=o.getBogus())&&r.remove(),i.moveToPosition(o,a?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}(),g=function(){function t(t){return(t=new CKEDITOR.dom.walker(t)).guard=function(t,e){return!e&&(t.type==CKEDITOR.NODE_ELEMENT?t.is(CKEDITOR.dtd.$list)||t.is(CKEDITOR.dtd.$listItem):void 0)},t.evaluator=function(t){return t.type==CKEDITOR.NODE_ELEMENT&&t.is(CKEDITOR.dtd.$listItem)},t}return function(e){var n,i=e.startContainer,r=!1;(n=e.clone()).setStart(i,0),(n=t(n).lastBackward())||((n=e.clone()).setEndAt(i,CKEDITOR.POSITION_BEFORE_END),n=t(n).lastForward(),r=!0),n||(n=i),n.is(CKEDITOR.dtd.$list)?(e.setStartAt(n,CKEDITOR.POSITION_BEFORE_START),e.collapse(!0),n.remove()):((i=n.getBogus())&&i.remove(),e.moveToPosition(n,r?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),e.select())}}(),m={eol:{detect:function(t,e){var n=t.range,i=n.clone(),r=n.clone(),o=new CKEDITOR.dom.elementPath(n.startContainer,e),a=new CKEDITOR.dom.elementPath(n.endContainer,e);i.collapse(1),r.collapse(),o.block&&i.checkBoundaryOfElement(o.block,CKEDITOR.END)&&(n.setStartAfter(o.block),t.prependEolBr=1),a.block&&r.checkBoundaryOfElement(a.block,CKEDITOR.START)&&(n.setEndBefore(a.block),t.appendEolBr=1)},fix:function(t,e){var n,i=e.getDocument();t.appendEolBr&&(n=this.createEolBr(i),t.fragment.append(n)),!t.prependEolBr||n&&!n.getPrevious()||t.fragment.append(this.createEolBr(i),1)},createEolBr:function(t){return t.createElement("br",{attributes:{"data-cke-eol":1}})}},bogus:{exclude:function(t){var e,n=(e=t.range.getBoundaryNodes()).startNode;!(e=e.endNode)||!d(e)||n&&n.equals(e)||t.range.setEndBefore(e)}},tree:{rebuild:function(t,e){var n,i=(a=t.range).getCommonAncestor(),r=new CKEDITOR.dom.elementPath(i,e),o=new CKEDITOR.dom.elementPath(a.startContainer,e),a=new CKEDITOR.dom.elementPath(a.endContainer,e);if(i.type==CKEDITOR.NODE_TEXT&&(i=i.getParent()),r.blockLimit.is({tr:1,table:1})){var s=r.contains("table").getParent();n=function(t){return!t.equals(s)}}else if(r.block&&r.block.is(CKEDITOR.dtd.$listItem)&&(o=o.contains(CKEDITOR.dtd.$list),a=a.contains(CKEDITOR.dtd.$list),!o.equals(a))){var l=r.contains(CKEDITOR.dtd.$list).getParent();n=function(t){return!t.equals(l)}}n||(n=function(t){return!t.equals(r.block)&&!t.equals(r.blockLimit)}),this.rebuildFragment(t,e,i,n)},rebuildFragment:function(t,e,n,i){for(var r;n&&!n.equals(e)&&i(n);)r=n.clone(0,1),t.fragment.appendTo(r),t.fragment=r,n=n.getParent()}},cell:{shrink:function(t){var e=(t=t.range).startContainer,n=t.endContainer,i=t.startOffset,r=t.endOffset;e.type==CKEDITOR.NODE_ELEMENT&&e.equals(n)&&e.is("tr")&&++i==r&&t.shrink(CKEDITOR.SHRINK_TEXT)}}},v=function(){function t(t,e){var n=t.getParent();n.is(CKEDITOR.dtd.$inline)&&t[e?"insertBefore":"insertAfter"](n)}function e(e,n,i){t(n),t(i,1);for(var r;r=i.getNext();)r.insertAfter(n),n=r;u(e)&&e.remove()}function n(t,e){var n=new CKEDITOR.dom.range(t);return n.setStartAfter(e.startNode),n.setEndBefore(e.endNode),n}return{list:{detectMerge:function(t,e){var i=n(e,t.bookmark),r=i.startPath(),o=i.endPath(),a=r.contains(CKEDITOR.dtd.$list),s=o.contains(CKEDITOR.dtd.$list);t.mergeList=a&&s&&a.getParent().equals(s.getParent())&&!a.equals(s),t.mergeListItems=r.block&&o.block&&r.block.is(CKEDITOR.dtd.$listItem)&&o.block.is(CKEDITOR.dtd.$listItem),(t.mergeList||t.mergeListItems)&&((i=i.clone()).setStartBefore(t.bookmark.startNode),i.setEndAfter(t.bookmark.endNode),t.mergeListBookmark=i.createBookmark())},merge:function(t,n){if(t.mergeListBookmark){var i=t.mergeListBookmark.startNode,r=t.mergeListBookmark.endNode,o=new CKEDITOR.dom.elementPath(i,n),a=new CKEDITOR.dom.elementPath(r,n);if(t.mergeList){var s=o.contains(CKEDITOR.dtd.$list),l=a.contains(CKEDITOR.dtd.$list);s.equals(l)||(l.moveChildren(s),l.remove())}t.mergeListItems&&(o=o.contains(CKEDITOR.dtd.$listItem),a=a.contains(CKEDITOR.dtd.$listItem),o.equals(a)||e(a,i,r)),i.remove(),r.remove()}}},block:{detectMerge:function(t,e){if(!t.tableContentsRanges&&!t.mergeListBookmark){var n=new CKEDITOR.dom.range(e);n.setStartBefore(t.bookmark.startNode),n.setEndAfter(t.bookmark.endNode),t.mergeBlockBookmark=n.createBookmark()}},merge:function(t,n){if(t.mergeBlockBookmark&&!t.purgeTableBookmark){var i=t.mergeBlockBookmark.startNode,r=t.mergeBlockBookmark.endNode,o=new CKEDITOR.dom.elementPath(i,n),a=new CKEDITOR.dom.elementPath(r,n);o=o.block,a=a.block,o&&a&&!o.equals(a)&&e(a,i,r),i.remove(),r.remove()}}},table:function(){function t(t){var n,r=[],o=new CKEDITOR.dom.walker(t),a=t.startPath().contains(i),s=t.endPath().contains(i),l={};return o.guard=function(o,c){if(o.type==CKEDITOR.NODE_ELEMENT){var u="visited_"+(c?"out":"in");if(o.getCustomData(u))return;CKEDITOR.dom.element.setMarker(l,o,u,1)}c&&a&&o.equals(a)?((n=t.clone()).setEndAt(a,CKEDITOR.POSITION_BEFORE_END),r.push(n)):!c&&s&&o.equals(s)?((n=t.clone()).setStartAt(s,CKEDITOR.POSITION_AFTER_START),r.push(n)):((u=!c)&&(u=o.type==CKEDITOR.NODE_ELEMENT&&o.is(i)&&(!a||e(o,a))&&(!s||e(o,s))),u&&((n=t.clone()).selectNodeContents(o),r.push(n)))},o.lastForward(),CKEDITOR.dom.element.clearAllMarkers(l),r}function e(t,e){var n=CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED,i=t.getPosition(e);return i!==CKEDITOR.POSITION_IDENTICAL&&0==(i&n)}var i={td:1,th:1,caption:1};return{detectPurge:function(t){var e=t.range;(r=e.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT);var n=0;if((r=new CKEDITOR.dom.walker(r)).evaluator=function(t){t.type==CKEDITOR.NODE_ELEMENT&&t.is(i)&&++n},r.checkForward(),1<n){var r=e.startPath().contains("table"),o=e.endPath().contains("table");r&&o&&e.checkBoundaryOfElement(r,CKEDITOR.START)&&e.checkBoundaryOfElement(o,CKEDITOR.END)&&((e=t.range.clone()).setStartBefore(r),e.setEndAfter(o),t.purgeTableBookmark=e.createBookmark())}},detectRanges:function(r,o){var a,s,l=n(o,r.bookmark),c=l.clone(),u=l.getCommonAncestor();u.is(CKEDITOR.dtd.$tableContent)&&!u.is(i)&&(u=u.getAscendant("table",!0)),s=u,u=new CKEDITOR.dom.elementPath(l.startContainer,s),s=new CKEDITOR.dom.elementPath(l.endContainer,s),u=u.contains("table"),s=s.contains("table"),(u||s)&&(u&&s&&e(u,s)?(r.tableSurroundingRange=c,c.setStartAt(u,CKEDITOR.POSITION_AFTER_END),c.setEndAt(s,CKEDITOR.POSITION_BEFORE_START),(c=l.clone()).setEndAt(u,CKEDITOR.POSITION_AFTER_END),(a=l.clone()).setStartAt(s,CKEDITOR.POSITION_BEFORE_START),a=t(c).concat(t(a))):u?s||(r.tableSurroundingRange=c,c.setStartAt(u,CKEDITOR.POSITION_AFTER_END),l.setEndAt(u,CKEDITOR.POSITION_AFTER_END)):(r.tableSurroundingRange=c,c.setEndAt(s,CKEDITOR.POSITION_BEFORE_START),l.setStartAt(s,CKEDITOR.POSITION_AFTER_START)),r.tableContentsRanges=a||t(l))},deleteRanges:function(t){for(var e;e=t.tableContentsRanges.pop();)e.extractContents(),u(e.startContainer)&&e.startContainer.appendBogus();t.tableSurroundingRange&&t.tableSurroundingRange.extractContents()},purge:function(t){if(t.purgeTableBookmark){var e=t.doc,n=t.range.clone();(e=e.createElement("p")).insertBefore(t.purgeTableBookmark.startNode),n.moveToBookmark(t.purgeTableBookmark),n.deleteContents(),t.range.moveToPosition(e,CKEDITOR.POSITION_AFTER_START)}}}}(),detectExtractMerge:function(t){return!(t.range.startPath().contains(CKEDITOR.dtd.$listItem)&&t.range.endPath().contains(CKEDITOR.dtd.$listItem))},fixUneditableRangePosition:function(t){t.startContainer.getDtd()["#"]||t.moveToClosestEditablePosition(null,!0)},autoParagraph:function(t,e){var n,i=e.startPath();r(t,i.block,i.blockLimit)&&(n=o(t))&&((n=e.document.createElement(n)).appendBogus(),e.insertNode(n),e.moveToPosition(n,CKEDITOR.POSITION_AFTER_START))}}}()}(),function(){function t(){var t,e=this._.fakeSelection;if(e&&((t=this.getSelection(1))&&t.isHidden()||(e.reset(),e=0)),(e||(e=t||this.getSelection(1))&&e.getType()!=CKEDITOR.SELECTION_NONE)&&(this.fire("selectionCheck",e),!(t=this.elementPath()).compare(this._.selectionPreviousPath))){var n=this._.selectionPreviousPath&&this._.selectionPreviousPath.blockLimit.equals(t.blockLimit);CKEDITOR.env.webkit&&!n&&(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=t,this.fire("selectionChange",{selection:e,path:t})}}function e(){c=!0,l||(n.call(this),l=CKEDITOR.tools.setTimeout(n,200,this))}function n(){l=null,c&&(CKEDITOR.tools.setTimeout(t,0,this),c=!1)}function i(t){return!(!p(t)&&(t.type!=CKEDITOR.NODE_ELEMENT||t.is(CKEDITOR.dtd.$empty)))}function r(t){function e(e,n){return!(!e||e.type==CKEDITOR.NODE_TEXT)&&t.clone()["moveToElementEdit"+(n?"End":"Start")](e)}if(!(t.root instanceof CKEDITOR.editable))return!1;var n=t.startContainer,r=t.getPreviousNode(i,null,n),o=t.getNextNode(i,null,n);return!(!e(r)&&!e(o,1)&&(r||o||n.type==CKEDITOR.NODE_ELEMENT&&n.isBlockBoundary()&&n.getBogus()))}function o(t){a(t,!1);var e=t.getDocument().createText(h);return t.setCustomData("cke-fillingChar",e),e}function a(t,e){var n=t&&t.removeCustomData("cke-fillingChar");if(n){if(!1!==e){var i=t.getDocument().getSelection().getNative(),r=i&&"None"!=i.type&&i.getRangeAt(0),o=h.length;if(n.getLength()>o&&r&&r.intersectsNode(n.$)){var a=[{node:i.anchorNode,offset:i.anchorOffset},{node:i.focusNode,offset:i.focusOffset}];i.anchorNode==n.$&&i.anchorOffset>o&&(a[0].offset-=o),i.focusNode==n.$&&i.focusOffset>o&&(a[1].offset-=o)}}n.setText(s(n.getText(),1)),a&&(i=(n=t.getDocument().$).getSelection(),(n=n.createRange()).setStart(a[0].node,a[0].offset),n.collapse(!0),i.removeAllRanges(),i.addRange(n),i.extend(a[1].node,a[1].offset))}}function s(t,e){return e?t.replace(f,function(t,e){return e?" ":""}):t.replace(h,"")}var l,c,u="function"!=typeof window.getSelection,d=1,h=CKEDITOR.tools.repeat("​",7),f=new RegExp(h+"( )?","g"),p=CKEDITOR.dom.walker.invisible(1),g=function(){function t(t){return function(e){var n=e.editor.createRange();return n.moveToClosestEditablePosition(e.selected,t)&&e.editor.getSelection().selectRanges([n]),!1}}function e(t){return function(e){var n,i=e.editor,r=i.createRange();return(n=r.moveToClosestEditablePosition(e.selected,t))||(n=r.moveToClosestEditablePosition(e.selected,!t)),n&&i.getSelection().selectRanges([r]),i.fire("saveSnapshot"),e.selected.remove(),n||(r.moveToElementEditablePosition(i.editable()),i.getSelection().selectRanges([r])),i.fire("saveSnapshot"),!1}}var n=t(),i=t(1);return{37:n,38:n,39:i,40:i,8:e(),46:e(1)}}();CKEDITOR.on("instanceCreated",function(n){function i(){var t=r.getSelection();t&&t.removeAllRanges()}var r=n.editor;r.on("contentDom",function(){function n(){(s=new CKEDITOR.dom.selection(r.getSelection())).lock()}function i(){p.removeListener("mouseup",i),v.removeListener("mouseup",i);var t=CKEDITOR.document.$.selection,e=t.createRange();"None"!=t.type&&e.parentElement().ownerDocument==f.$&&e.select()}var o,s,l,c,d,h,f=r.document,p=CKEDITOR.document,g=r.editable(),m=f.getBody(),v=f.getDocumentElement(),y=g.isInline();CKEDITOR.env.gecko&&g.attachListener(g,"focus",function(t){t.removeListener(),0!==o&&(t=r.getSelection().getNative())&&t.isCollapsed&&t.anchorNode==g.$&&((t=r.createRange()).moveToElementEditStart(g),t.select())},null,null,-2),g.attachListener(g,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){o&&CKEDITOR.env.webkit&&(o=r._.previousActive&&r._.previousActive.equals(f.getActive()))&&null!=r._.previousScrollTop&&r._.previousScrollTop!=g.$.scrollTop&&(g.$.scrollTop=r._.previousScrollTop),r.unlockSelection(o),o=0},null,null,-1),g.attachListener(g,"mousedown",function(){o=0}),(CKEDITOR.env.ie||y)&&(u?g.attachListener(g,"beforedeactivate",n,null,null,-1):g.attachListener(r,"selectionCheck",n,null,null,-1),g.attachListener(g,CKEDITOR.env.webkit?"DOMFocusOut":"blur",function(){r.lockSelection(s),o=1},null,null,-1),g.attachListener(g,"mousedown",function(){o=0})),CKEDITOR.env.ie&&!y&&(g.attachListener(g,"mousedown",function(t){2==t.data.$.button&&((t=r.document.getSelection())&&t.getType()!=CKEDITOR.SELECTION_NONE||(l=r.window.getScrollPosition()))}),g.attachListener(g,"mouseup",function(t){2==t.data.$.button&&l&&(r.document.$.documentElement.scrollLeft=l.x,r.document.$.documentElement.scrollTop=l.y),l=null}),"BackCompat"!=f.$.compatMode)&&((CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&v.on("mousedown",function(t){function e(t){if(t=t.data.$,d){var e=m.$.createTextRange();try{e.moveToPoint(t.clientX,t.clientY)}catch(t){}d.setEndPoint(0>h.compareEndPoints("StartToStart",e)?"EndToEnd":"StartToStart",e),d.select()}}function n(){v.removeListener("mousemove",e),p.removeListener("mouseup",n),v.removeListener("mouseup",n),d.select()}if((t=t.data).getTarget().is("html")&&t.$.y<v.$.clientHeight&&t.$.x<v.$.clientWidth){d=m.$.createTextRange();try{d.moveToPoint(t.$.clientX,t.$.clientY)}catch(t){}h=d.duplicate(),v.on("mousemove",e),p.on("mouseup",n),v.on("mouseup",n)}}),7<CKEDITOR.env.version&&11>CKEDITOR.env.version&&v.on("mousedown",function(t){t.data.getTarget().is("html")&&(p.on("mouseup",i),v.on("mouseup",i))})),g.attachListener(g,"selectionchange",t,r),g.attachListener(g,"keyup",e,r),g.attachListener(g,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){r.forceNextSelectionCheck(),r.selectionChange(1)}),y&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)?(g.attachListener(g,"mousedown",function(){c=1}),g.attachListener(f.getDocumentElement(),"mouseup",function(){c&&e.call(r),c=0})):g.attachListener(CKEDITOR.env.ie?g:f.getDocumentElement(),"mouseup",e,r),CKEDITOR.env.webkit&&g.attachListener(f,"keydown",function(t){switch(t.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:a(g)}},null,null,-1),g.attachListener(g,"keydown",function(t){var e={37:1,39:1,8:1,46:1};return function(n){var i=n.data.getKeystroke();if(e[i]){var r=t.getSelection().getRanges(),o=r[0];1==r.length&&o.collapsed&&(i=o[38>i?"getPreviousEditableNode":"getNextEditableNode"]())&&i.type==CKEDITOR.NODE_ELEMENT&&"false"==i.getAttribute("contenteditable")&&(t.getSelection().fake(i),n.data.preventDefault(),n.cancel())}}}(r),null,null,-1)}),r.on("setData",function(){r.unlockSelection(),CKEDITOR.env.webkit&&i()}),r.on("contentDomUnload",function(){r.unlockSelection()}),CKEDITOR.env.ie9Compat&&r.on("beforeDestroy",i,null,null,9),r.on("dataReady",function(){delete r._.fakeSelection,delete r._.hiddenSelectionContainer,r.selectionChange(1)}),r.on("loadSnapshot",function(){var t=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),e=r.editable().getLast(t);e&&e.hasAttribute("data-cke-hidden-sel")&&(e.remove(),CKEDITOR.env.gecko&&(t=r.editable().getFirst(t))&&t.is("br")&&t.getAttribute("_moz_editor_bogus_node")&&t.remove())},null,null,100),r.on("key",function(t){if("wysiwyg"==r.mode){var e=r.getSelection();if(e.isFake){var n=g[t.data.keyCode];if(n)return n({editor:r,selected:e.getSelectedElement(),selection:e,keyEvent:t})}}})}),CKEDITOR.env.webkit&&CKEDITOR.on("instanceReady",function(t){var e=t.editor;e.on("selectionChange",function(){var t=e.editable(),n=t.getCustomData("cke-fillingChar");n&&(n.getCustomData("ready")?a(t):n.setCustomData("ready",1))},null,null,-1),e.on("beforeSetMode",function(){a(e.editable())},null,null,-1),e.on("getSnapshot",function(t){t.data&&(t.data=s(t.data))},e,null,20),e.on("toDataFormat",function(t){t.data.dataValue=s(t.data.dataValue)},null,null,0)}),CKEDITOR.editor.prototype.selectionChange=function(n){(n?t:e).call(this)},CKEDITOR.editor.prototype.getSelection=function(t){return!this._.savedSelection&&!this._.fakeSelection||t?(t=this.editable())&&"wysiwyg"==this.mode?new CKEDITOR.dom.selection(t):null:this._.savedSelection||this._.fakeSelection},CKEDITOR.editor.prototype.lockSelection=function(t){return(t=t||this.getSelection(1)).getType()!=CKEDITOR.SELECTION_NONE&&(!t.isLocked&&t.lock(),this._.savedSelection=t,!0)},CKEDITOR.editor.prototype.unlockSelection=function(t){var e=this._.savedSelection;return!!e&&(e.unlock(t),delete this._.savedSelection,!0)},CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath},CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)},CKEDITOR.dom.range.prototype.select=function(){var t=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);return t.selectRanges([this]),t},CKEDITOR.SELECTION_NONE=1,CKEDITOR.SELECTION_TEXT=2,CKEDITOR.SELECTION_ELEMENT=3,CKEDITOR.dom.selection=function(t){if(t instanceof CKEDITOR.dom.selection){var e=t;t=t.root}var n,i,r=t instanceof CKEDITOR.dom.element;if(this.rev=e?e.rev:d++,this.document=t instanceof CKEDITOR.dom.document?t:t.getDocument(),this.root=r?t:this.document.getBody(),this.isLocked=0,this._={cache:{}},e)return CKEDITOR.tools.extend(this._.cache,e._.cache),this.isFake=e.isFake,this.isLocked=e.isLocked,this;if(t=this.getNative())if(t.getRangeAt)n=(i=t.rangeCount&&t.getRangeAt(0))&&new CKEDITOR.dom.node(i.commonAncestorContainer);else{try{i=t.createRange()}catch(t){}n=i&&CKEDITOR.dom.element.get(i.item&&i.item(0)||i.parentElement())}return(!n||n.type!=CKEDITOR.NODE_ELEMENT&&n.type!=CKEDITOR.NODE_TEXT||!this.root.equals(n)&&!this.root.contains(n))&&(this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList),this};var m={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.tools.extend(CKEDITOR.dom.selection,{_removeFillingCharSequenceString:s,_createFillingCharSequenceNode:o,FILLING_CHAR_SEQUENCE:h}),CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=u?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:u?function(){var t=this._.cache;if(t.type)return t.type;var e=CKEDITOR.SELECTION_NONE;try{var n=this.getNative(),i=n.type;"Text"==i&&(e=CKEDITOR.SELECTION_TEXT),"Control"==i&&(e=CKEDITOR.SELECTION_ELEMENT),n.createRange().parentElement()&&(e=CKEDITOR.SELECTION_TEXT)}catch(t){}return t.type=e}:function(){var t=this._.cache;if(t.type)return t.type;var e=CKEDITOR.SELECTION_TEXT;if((n=this.getNative())&&n.rangeCount){if(1==n.rangeCount){var n,i=(n=n.getRangeAt(0)).startContainer;i==n.endContainer&&1==i.nodeType&&1==n.endOffset-n.startOffset&&m[i.childNodes[n.startOffset].nodeName.toLowerCase()]&&(e=CKEDITOR.SELECTION_ELEMENT)}}else e=CKEDITOR.SELECTION_NONE;return t.type=e},getRanges:function(){var t=u?function(){function t(t){return new CKEDITOR.dom.node(t).getIndex()}var e=function(e,n){(e=e.duplicate()).collapse(n);var i=e.parentElement();if(!i.hasChildNodes())return{container:i,offset:0};for(var r,o,a,s,l=i.children,c=e.duplicate(),u=0,d=l.length-1,h=-1;u<=d;)if(r=l[h=Math.floor((u+d)/2)],c.moveToElementText(r),0<(a=c.compareEndPoints("StartToStart",e)))d=h-1;else{if(!(0>a))return{container:i,offset:t(r)};u=h+1}if(-1==h||h==l.length-1&&0>a){if(c.moveToElementText(i),c.setEndPoint("StartToStart",e),c=c.text.replace(/(\r\n|\r)/g,"\n").length,l=i.childNodes,!c)return(r=l[l.length-1]).nodeType!=CKEDITOR.NODE_TEXT?{container:i,offset:l.length}:{container:r,offset:r.nodeValue.length};for(i=l.length;0<c&&0<i;)(o=l[--i]).nodeType==CKEDITOR.NODE_TEXT&&(s=o,c-=o.nodeValue.length);return{container:s,offset:-c}}if(c.collapse(0<a),c.setEndPoint(0<a?"StartToStart":"EndToStart",e),!(c=c.text.replace(/(\r\n|\r)/g,"\n").length))return{container:i,offset:t(r)+(0<a?0:1)};for(;0<c;)try{(o=r[0<a?"previousSibling":"nextSibling"]).nodeType==CKEDITOR.NODE_TEXT&&(c-=o.nodeValue.length,s=o),r=o}catch(e){return{container:i,offset:t(r)}}return{container:s,offset:0<a?-c:s.nodeValue.length+c}};return function(){var t=(s=this.getNative())&&s.createRange(),n=this.getType();if(!s)return[];if(n==CKEDITOR.SELECTION_TEXT)return s=new CKEDITOR.dom.range(this.root),n=e(t,!0),s.setStart(new CKEDITOR.dom.node(n.container),n.offset),n=e(t),s.setEnd(new CKEDITOR.dom.node(n.container),n.offset),s.endContainer.getPosition(s.startContainer)&CKEDITOR.POSITION_PRECEDING&&s.endOffset<=s.startContainer.getIndex()&&s.collapse(),[s];if(n==CKEDITOR.SELECTION_ELEMENT){n=[];for(var i=0;i<t.length;i++){for(var r=t.item(i),o=r.parentNode,a=0,s=new CKEDITOR.dom.range(this.root);a<o.childNodes.length&&o.childNodes[a]!=r;a++);s.setStart(new CKEDITOR.dom.node(o),a),s.setEnd(new CKEDITOR.dom.node(o),a+1),n.push(s)}return n}return[]}}():function(){var t,e=[],n=this.getNative();if(!n)return e;for(var i=0;i<n.rangeCount;i++){var r=n.getRangeAt(i);(t=new CKEDITOR.dom.range(this.root)).setStart(new CKEDITOR.dom.node(r.startContainer),r.startOffset),t.setEnd(new CKEDITOR.dom.node(r.endContainer),r.endOffset),e.push(t)}return e};return function(e){var n=this._.cache,i=n.ranges;return i||(n.ranges=i=new CKEDITOR.dom.rangeList(t.call(this))),e?function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.getCommonAncestor().isReadOnly()&&t.splice(e,1),!n.collapsed){if(n.startContainer.isReadOnly())for(var i,r=n.startContainer;r&&!((i=r.type==CKEDITOR.NODE_ELEMENT)&&r.is("body")||!r.isReadOnly());)i&&"false"==r.getAttribute("contentEditable")&&n.setStartAfter(r),r=r.getParent();r=n.startContainer,i=n.endContainer;var o=n.startOffset,a=n.endOffset,s=n.clone();r&&r.type==CKEDITOR.NODE_TEXT&&(o>=r.getLength()?s.setStartAfter(r):s.setStartBefore(r)),i&&i.type==CKEDITOR.NODE_TEXT&&(a?s.setEndAfter(i):s.setEndBefore(i)),(r=new CKEDITOR.dom.walker(s)).evaluator=function(i){if(i.type==CKEDITOR.NODE_ELEMENT&&i.isReadOnly()){var r=n.clone();return n.setEndBefore(i),n.collapsed&&t.splice(e--,1),i.getPosition(s.endContainer)&CKEDITOR.POSITION_CONTAINS||(r.setStartAfter(i),r.collapsed||t.splice(e+1,0,r)),!0}return!1},r.next()}}return t}(new CKEDITOR.dom.rangeList(i.slice())):i}}(),getStartElement:function(){var t,e=this._.cache;if(void 0!==e.startElement)return e.startElement;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var n=this.getRanges()[0];if(n){if(n.collapsed)(t=n.startContainer).type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent());else{for(n.optimize();t=n.startContainer,n.startOffset==(t.getChildCount?t.getChildCount():t.getLength())&&!t.isBlockBoundary();)n.setStartAfter(t);if((t=n.startContainer).type!=CKEDITOR.NODE_ELEMENT)return t.getParent();if((t=t.getChild(n.startOffset))&&t.type==CKEDITOR.NODE_ELEMENT)for(n=t.getFirst();n&&n.type==CKEDITOR.NODE_ELEMENT;)t=n,n=n.getFirst();else t=n.startContainer}t=t.$}}return e.startElement=t?new CKEDITOR.dom.element(t):null},getSelectedElement:function(){var t=this._.cache;if(void 0!==t.selectedElement)return t.selectedElement;var e=this,n=CKEDITOR.tools.tryThese(function(){return e.getNative().createRange().item(0)},function(){for(var t,n,i=e.getRanges()[0].clone(),r=2;r&&!((t=i.getEnclosedNode())&&t.type==CKEDITOR.NODE_ELEMENT&&m[t.getName()]&&(n=t));r--)i.shrink(CKEDITOR.SHRINK_ELEMENT);return n&&n.$});return t.selectedElement=n?new CKEDITOR.dom.element(n):null},getSelectedText:function(){var t=this._.cache;if(void 0!==t.selectedText)return t.selectedText;var e=this.getNative();return e=u?"Control"==e.type?"":e.createRange().text:e.toString(),t.selectedText=e},lock:function(){this.getRanges(),this.getStartElement(),this.getSelectedElement(),this.getSelectedText(),this._.cache.nativeSel=null,this.isLocked=1},unlock:function(t){if(this.isLocked){if(t)var e=this.getSelectedElement(),n=!e&&this.getRanges(),i=this.isFake;this.isLocked=0,this.reset(),t&&(t=e||n[0]&&n[0].getCommonAncestor())&&t.getAscendant("body",1)&&(i?this.fake(e):e?this.selectElement(e):this.selectRanges(n))}},reset:function(){this._.cache={},this.isFake=0;var t=this.root.editor;if(t&&t._.fakeSelection)if(this.rev==t._.fakeSelection.rev){delete t._.fakeSelection;var e=t._.hiddenSelectionContainer;if(e){var n=t.checkDirty();t.fire("lockSnapshot"),e.remove(),t.fire("unlockSnapshot"),!n&&t.resetDirty()}delete t._.hiddenSelectionContainer}else CKEDITOR.warn("selection-fake-reset");this.rev=d++},selectElement:function(t){var e=new CKEDITOR.dom.range(this.root);e.setStartBefore(t),e.setEndAfter(t),this.selectRanges([e])},selectRanges:function(t){var e=(e=this.root.editor)&&e._.hiddenSelectionContainer;if(this.reset(),e){e=this.root;for(var n,i=0;i<t.length;++i)(n=t[i]).endContainer.equals(e)&&(n.endOffset=Math.min(n.endOffset,e.getChildCount()))}if(t.length)if(this.isLocked){var s=CKEDITOR.document.getActive();this.unlock(),this.selectRanges(t),this.lock(),s&&!s.equals(this.root)&&s.focus()}else{var l,c,d;if(1==t.length&&!(d=t[0]).collapsed&&(l=d.getEnclosedNode())&&l.type==CKEDITOR.NODE_ELEMENT&&((d=d.clone()).shrink(CKEDITOR.SHRINK_ELEMENT,!0),(c=d.getEnclosedNode())&&c.type==CKEDITOR.NODE_ELEMENT&&(l=c),"false"==l.getAttribute("contenteditable"))||(l=void 0),l)this.fake(l);else{if(u){var h,f,p;if(d=CKEDITOR.dom.walker.whitespaces(!0),c=/\ufeff|\u00a0/,e={table:1,tbody:1,tr:1},1<t.length&&(l=t[t.length-1],t[0].setEnd(l.endContainer,l.endOffset)),t=(l=t[0]).collapsed,(n=l.getEnclosedNode())&&n.type==CKEDITOR.NODE_ELEMENT&&n.getName()in m&&(!n.is("a")||!n.getText()))try{return(p=n.$.createControlRange()).addElement(n.$),void p.select()}catch(t){}(l.startContainer.type==CKEDITOR.NODE_ELEMENT&&l.startContainer.getName()in e||l.endContainer.type==CKEDITOR.NODE_ELEMENT&&l.endContainer.getName()in e)&&(l.shrink(CKEDITOR.NODE_ELEMENT,!0),t=l.collapsed),e=(p=l.createBookmark()).startNode,t||(s=p.endNode),(p=l.document.$.body.createTextRange()).moveToElementText(e.$),p.moveStart("character",1),s?((c=l.document.$.body.createTextRange()).moveToElementText(s.$),p.setEndPoint("EndToEnd",c),p.moveEnd("character",-1)):(h=e.getNext(d),f=e.hasAscendant("pre"),h=!(h&&h.getText&&h.getText().match(c))&&(f||!e.hasPrevious()||e.getPrevious().is&&e.getPrevious().is("br")),(f=l.document.createElement("span")).setHtml("&#65279;"),f.insertBefore(e),h&&l.document.createText("\ufeff").insertBefore(e)),l.setStartBefore(e),e.remove(),t?(h?(p.moveStart("character",-1),p.select(),l.document.$.selection.clear()):p.select(),l.moveToPosition(f,CKEDITOR.POSITION_BEFORE_START),f.remove()):(l.setEndBefore(s),s.remove(),p.select())}else{if(!(s=this.getNative()))return;for(this.removeAllRanges(),p=0;p<t.length;p++)if(p<t.length-1&&(h=t[p],f=t[p+1],(c=h.clone()).setStart(h.endContainer,h.endOffset),c.setEnd(f.startContainer,f.startOffset),!c.collapsed&&(c.shrink(CKEDITOR.NODE_ELEMENT,!0),l=c.getCommonAncestor(),c=c.getEnclosedNode(),l.isReadOnly()||c&&c.isReadOnly())))f.setStart(h.startContainer,h.startOffset),t.splice(p--,1);else{l=t[p],f=this.document.$.createRange(),l.collapsed&&CKEDITOR.env.webkit&&r(l)&&(c=o(this.root),l.insertNode(c),(h=c.getNext())&&!c.getPrevious()&&h.type==CKEDITOR.NODE_ELEMENT&&"br"==h.getName()?(a(this.root),l.moveToPosition(h,CKEDITOR.POSITION_BEFORE_START)):l.moveToPosition(c,CKEDITOR.POSITION_AFTER_END)),f.setStart(l.startContainer.$,l.startOffset);try{f.setEnd(l.endContainer.$,l.endOffset)}catch(t){if(!(0<=t.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")))throw t;l.collapse(1),f.setEnd(l.endContainer.$,l.endOffset)}s.addRange(f)}}this.reset(),this.root.fire("selectionchange")}}},fake:function(t,e){var n=this.root.editor;void 0===e&&t.hasAttribute("aria-label")&&(e=t.getAttribute("aria-label")),this.reset(),function(t,e){var n=CKEDITOR.dom.element.createFromHtml('<div data-cke-hidden-sel="1" data-cke-temp="1" style="'+(CKEDITOR.env.ie&&14>CKEDITOR.env.version?"display:none":"position:fixed;top:0;left:-1000px")+'">'+(e||"&nbsp;")+"</div>",t.document);t.fire("lockSnapshot"),t.editable().append(n);var i=t.getSelection(1),r=t.createRange(),o=i.root.on("selectionchange",function(t){t.cancel()},null,null,0);r.setStartAt(n,CKEDITOR.POSITION_AFTER_START),r.setEndAt(n,CKEDITOR.POSITION_BEFORE_END),i.selectRanges([r]),o.removeListener(),t.fire("unlockSnapshot"),t._.hiddenSelectionContainer=n}(n,e);var i=this._.cache,r=new CKEDITOR.dom.range(this.root);r.setStartBefore(t),r.setEndAfter(t),i.ranges=new CKEDITOR.dom.rangeList(r),i.selectedElement=i.startElement=t,i.type=CKEDITOR.SELECTION_ELEMENT,i.selectedText=i.nativeSel=null,this.isFake=1,this.rev=d++,n._.fakeSelection=this,this.root.fire("selectionchange")},isHidden:function(){var t=this.getCommonAncestor();return t&&t.type==CKEDITOR.NODE_TEXT&&(t=t.getParent()),!(!t||!t.data("cke-hidden-sel"))},createBookmarks:function(t){return t=this.getRanges().createBookmarks(t),this.isFake&&(t.isFake=1),t},createBookmarks2:function(t){return t=this.getRanges().createBookmarks2(t),this.isFake&&(t.isFake=1),t},selectBookmarks:function(t){for(var e,n=[],i=0;i<t.length;i++){var r=new CKEDITOR.dom.range(this.root);r.moveToBookmark(t[i]),n.push(r)}return t.isFake&&((e=n[0].getEnclosedNode())&&e.type==CKEDITOR.NODE_ELEMENT||(CKEDITOR.warn("selection-not-fake"),t.isFake=0)),t.isFake?this.fake(e):this.selectRanges(n),this},getCommonAncestor:function(){var t=this.getRanges();return t.length?t[0].startContainer.getCommonAncestor(t[t.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var t=this.getNative();try{t&&t[u?"empty":"removeAllRanges"]()}catch(t){}this.reset()}}}}(),CKEDITOR.STYLE_BLOCK=1,CKEDITOR.STYLE_INLINE=2,CKEDITOR.STYLE_OBJECT=3,function(){function t(t,e){for(var n,i;(t=t.getParent())&&!t.equals(e);)if(t.getAttribute("data-nostyle"))n=t;else if(!i){var r=t.getAttribute("contentEditable");"false"==r?n=t:"true"==r&&(i=1)}return n}function e(t,e,n,i){return(t.getPosition(e)|i)==i&&(!n.childRule||n.childRule(t))}function n(i){var o=i.document;if(i.collapsed)o=g(this,o),i.insertNode(o),i.moveToPosition(o,CKEDITOR.POSITION_BEFORE_END);else{var a,s=this.element,l=this._.definition,c=(y=l.ignoreReadonly)||l.includeReadonly;null==c&&(c=i.root.getCustomData("cke_includeReadonly"));var u=CKEDITOR.dtd[s];u||(a=!0,u=CKEDITOR.dtd.span),i.enlarge(CKEDITOR.ENLARGE_INLINE,1),i.trim();var d,f=i.createBookmark(),p=f.startNode,m=f.endNode,v=p;if(!y){var y=t(p,E=i.getCommonAncestor()),E=t(m,E);y&&(v=y.getNextSourceNode(!0)),E&&(m=E)}for(v.getPosition(m)==CKEDITOR.POSITION_FOLLOWING&&(v=0);v;){if(y=!1,v.equals(m))v=null,y=!0;else{E=(_=v.type==CKEDITOR.NODE_ELEMENT?v.getName():null)&&"false"==v.getAttribute("contentEditable");var b=_&&v.getAttribute("data-nostyle");if(_&&v.data("cke-bookmark")){v=v.getNextSourceNode(!0);continue}if(E&&c&&CKEDITOR.dtd.$block[_])for(var C=void 0,T=0,w=(A=($=r(w=v)).length)&&new CKEDITOR.dom.range(w.getDocument());T<A;++T){C=$[T];var I=CKEDITOR.filter.instances[C.data("cke-filter")];I&&!I.check(this)||(w.selectNodeContents(C),n.call(this,w))}if($=_?!u[_]||b?0:E&&!c?0:e(v,m,l,k):1){if($=l,A=s,T=a,!(C=v.getParent())||!(C.getDtd()||CKEDITOR.dtd.span)[A]&&!T||$.parentRule&&!$.parentRule(C))y=!0;else if(d||_&&CKEDITOR.dtd.$removeEmpty[_]&&(v.getPosition(m)|k)!=k||(d=i.clone()).setStartBefore(v),(_=v.type)==CKEDITOR.NODE_TEXT||E||_==CKEDITOR.NODE_ELEMENT&&!v.getChildCount()){for(var O,_=v;(y=!_.getNext(D))&&u[(O=_.getParent()).getName()]&&e(O,p,l,R);)_=O;d.setEndAfter(_)}}else y=!0;v=v.getNextSourceNode(b||E)}if(y&&d&&!d.collapsed){E=(y=g(this,o)).hasAttributes(),b=d.getCommonAncestor(),_={};for(var x,S,K,$={},A=(C={},{});y&&b;){if(b.getName()==s){for(x in l.attributes)!A[x]&&(K=b.getAttribute(S))&&(y.getAttribute(x)==K?$[x]=1:A[x]=1);for(S in l.styles)!C[S]&&(K=b.getStyle(S))&&(y.getStyle(S)==K?_[S]=1:C[S]=1)}b=b.getParent()}for(x in $)y.removeAttribute(x);for(S in _)y.removeStyle(S);E&&!y.hasAttributes()&&(y=null),y?(d.extractContents().appendTo(y),d.insertNode(y),h.call(this,y),y.mergeSiblings(),CKEDITOR.env.ie||y.$.normalize()):(y=new CKEDITOR.dom.element("span"),d.extractContents().appendTo(y),d.insertNode(y),h.call(this,y),y.remove(!0)),d=null}}i.moveToBookmark(f),i.shrink(CKEDITOR.SHRINK_TEXT),i.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function i(t){function e(){for(var t=new CKEDITOR.dom.elementPath(i.getParent()),e=new CKEDITOR.dom.elementPath(c.getParent()),n=null,r=null,o=0;o<t.elements.length;o++){var a=t.elements[o];if(a==t.block||a==t.blockLimit)break;u.checkElementRemovable(a,!0)&&(n=a)}for(o=0;o<e.elements.length&&(a=e.elements[o])!=e.block&&a!=e.blockLimit;o++)u.checkElementRemovable(a,!0)&&(r=a);r&&c.breakParent(r),n&&i.breakParent(n)}t.enlarge(CKEDITOR.ENLARGE_INLINE,1);var n=t.createBookmark(),i=n.startNode;if(t.collapsed){for(var r,o,a=new CKEDITOR.dom.elementPath(i.getParent(),t.root),s=0;s<a.elements.length&&(o=a.elements[s])&&o!=a.block&&o!=a.blockLimit;s++)if(this.checkElementRemovable(o)){var l;t.collapsed&&(t.checkBoundaryOfElement(o,CKEDITOR.END)||(l=t.checkBoundaryOfElement(o,CKEDITOR.START)))?(r=o).match=l?"start":"end":(o.mergeSiblings(),o.is(this.element)?d.call(this,o):f(o,y(this)[o.getName()]))}if(r){for(o=i,s=0;!(l=a.elements[s]).equals(r);s++)l.match||((l=l.clone()).append(o),o=l);o["start"==r.match?"insertBefore":"insertAfter"](r)}}else{var c=n.endNode,u=this;for(e(),a=i;!a.equals(c);)r=a.getNextSourceNode(),a.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(a)&&(a.getName()==this.element?d.call(this,a):f(a,y(this)[a.getName()]),r.type==CKEDITOR.NODE_ELEMENT&&r.contains(i)&&(e(),r=i.getNext())),a=r}t.moveToBookmark(n),t.shrink(CKEDITOR.NODE_ELEMENT,!0)}function r(t){var e=[];return t.forEach(function(t){if("true"==t.getAttribute("contenteditable"))return e.push(t),!1},CKEDITOR.NODE_ELEMENT,!0),e}function o(t){var e=t.getEnclosedNode()||t.getCommonAncestor(!1,!0);(t=new CKEDITOR.dom.elementPath(e,t.root).contains(this.element,1))&&!t.isReadOnly()&&m(t,this)}function a(t){var e=t.getCommonAncestor(!0,!0);if(t=new CKEDITOR.dom.elementPath(e,t.root).contains(this.element,1)){var n=(e=this._.definition).attributes;if(n)for(var i in n)t.removeAttribute(i,n[i]);if(e.styles)for(var r in e.styles)e.styles.hasOwnProperty(r)&&t.removeStyle(r)}}function s(t){var e=t.createBookmark(!0),n=t.createIterator();n.enforceRealBlocks=!0,this._.enterMode&&(n.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var i,r=t.document;i=n.getNextParagraph();)!i.isReadOnly()&&(!n.activeFilter||n.activeFilter.check(this))&&c(i,g(this,r,i));t.moveToBookmark(e)}function l(t){var e,n,i=t.createBookmark(1),r=t.createIterator();for(r.enforceRealBlocks=!0,r.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;e=r.getNextParagraph();)this.checkElementRemovable(e)&&(e.is("pre")?((n=this._.enterMode==CKEDITOR.ENTER_BR?null:t.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&e.copyAttributes(n),c(e,n)):d.call(this,e));t.moveToBookmark(i)}function c(t,e){(n=!e)&&(e=t.getDocument().createElement("div"),t.copyAttributes(e));var n,i,r=e&&e.is("pre"),o=t.is("pre"),a=!r&&o;if(r&&!o){if(o=e,(a=t.getBogus())&&a.remove(),a=(a=(a=(a=u(a=t.getHtml(),/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"")).replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1")).replace(/([ \t\n\r]+|&nbsp;)/g," ")).replace(/<br\b[^>]*>/gi,"\n"),CKEDITOR.env.ie){var s=t.getDocument().createElement("div");s.append(o),o.$.outerHTML="<pre>"+a+"</pre>",o.copyAttributes(s.getFirst()),o=s.getFirst().remove()}else o.setHtml(a);e=o}else a?e=function(t,e){var n;1<t.length&&(n=new CKEDITOR.dom.documentFragment(e.getDocument()));for(var i=0;i<t.length;i++){var r=(r=(r=u(r=u(r=u(r=(r=t[i]).replace(/(\r\n|\r)/g,"\n"),/^[ \t]*\n/,""),/\n$/,""),/^[ \t]+|[ \t]+$/g,function(t,e){return 1==t.length?"&nbsp;":e?" "+CKEDITOR.tools.repeat("&nbsp;",t.length-1):CKEDITOR.tools.repeat("&nbsp;",t.length-1)+" "})).replace(/\n/g,"<br>")).replace(/[ \t]{2,}/g,function(t){return CKEDITOR.tools.repeat("&nbsp;",t.length-1)+" "});if(n){var o=e.clone();o.setHtml(r),n.append(o)}else e.setHtml(r)}return n||e}(n?[t.getHtml()]:function(t){var e=[];return u(t.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(t,e,n){return e+"</pre>"+n+"<pre>"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(t,n){e.push(n)}),e}(t),e):t.moveChildren(e);e.replace(t),r?(i=(n=e).getPrevious(_))&&i.type==CKEDITOR.NODE_ELEMENT&&i.is("pre")&&(r=u(i.getHtml(),/\n$/,"")+"\n\n"+u(n.getHtml(),/^\n/,""),CKEDITOR.env.ie?n.$.outerHTML="<pre>"+r+"</pre>":n.setHtml(r),i.remove()):n&&p(e)}function u(t,e,n){var i="",r="";return t=t.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(t,e,n){return e&&(i=e),n&&(r=n),""}),i+t.replace(e,n)+r}function d(t,e){var n,i=(r=this._.definition).attributes,r=r.styles,o=y(this)[t.getName()],a=CKEDITOR.tools.isEmpty(i)&&CKEDITOR.tools.isEmpty(r);for(n in i)("class"!=n&&!this._.definition.fullMatch||t.getAttribute(n)==E(n,i[n]))&&(e&&"data-"==n.slice(0,5)||(a=t.hasAttribute(n),t.removeAttribute(n)));for(var s in r)this._.definition.fullMatch&&t.getStyle(s)!=E(s,r[s],!0)||(a=a||!!t.getStyle(s),t.removeStyle(s));f(t,o,T[t.getName()]),a&&(this._.definition.alwaysRemoveElement?p(t,1):!CKEDITOR.dtd.$block[t.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!t.hasAttributes()?p(t):t.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function h(t){for(var e,n=y(this),i=t.getElementsByTag(this.element),r=i.count();0<=--r;)(e=i.getItem(r)).isReadOnly()||d.call(this,e,!0);for(var o in n)if(o!=this.element)for(r=(i=t.getElementsByTag(o)).count()-1;0<=r;r--)(e=i.getItem(r)).isReadOnly()||f(e,n[o])}function f(t,e,n){if(e=e&&e.attributes)for(var i=0;i<e.length;i++){var r,o=e[i][0];if(r=t.getAttribute(o)){var a=e[i][1];(null===a||a.test&&a.test(r)||"string"==typeof a&&r==a)&&t.removeAttribute(o)}}n||p(t)}function p(t,e){if(!t.hasAttributes()||e)if(CKEDITOR.dtd.$block[t.getName()]){var n=t.getPrevious(_),i=t.getNext(_);!n||n.type!=CKEDITOR.NODE_TEXT&&n.isBlockBoundary({br:1})||t.append("br",1),!i||i.type!=CKEDITOR.NODE_TEXT&&i.isBlockBoundary({br:1})||t.append("br"),t.remove(!0)}else n=t.getFirst(),i=t.getLast(),t.remove(!0),n&&(n.type==CKEDITOR.NODE_ELEMENT&&n.mergeSiblings(),i&&!n.equals(i)&&i.type==CKEDITOR.NODE_ELEMENT&&i.mergeSiblings())}function g(t,e,n){var i;return"*"==(i=t.element)&&(i="span"),i=new CKEDITOR.dom.element(i,e),n&&n.copyAttributes(i),i=m(i,t),e.getCustomData("doc_processing_style")&&i.hasAttribute("id")?i.removeAttribute("id"):e.setCustomData("doc_processing_style",1),i}function m(t,e){var n=(i=e._.definition).attributes,i=CKEDITOR.style.getStyleText(i);if(n)for(var r in n)t.setAttribute(r,n[r]);return i&&t.setAttribute("style",i),t}function v(t,e){for(var n in t)t[n]=t[n].replace(O,function(t,n){return e[n]})}function y(t){if(t._.overrides)return t._.overrides;var e=t._.overrides={},n=t._.definition.overrides;if(n){CKEDITOR.tools.isArray(n)||(n=[n]);for(var i=0;i<n.length;i++){var r,o;if("string"==typeof(s=n[i])?r=s.toLowerCase():(r=s.element?s.element.toLowerCase():t.element,o=s.attributes),s=e[r]||(e[r]={}),o){var a,s=s.attributes=s.attributes||[];for(a in o)s.push([a.toLowerCase(),o[a]])}}}return e}function E(t,e,n){var i=new CKEDITOR.dom.element("span");return i[n?"setStyle":"setAttribute"](t,e),i[n?"getStyle":"getAttribute"](t)}function b(t,e){function n(t,e){return"font-family"==e.toLowerCase()?t.replace(/["']/g,""):t}for(var i in"string"==typeof t&&(t=CKEDITOR.tools.parseCssText(t)),"string"==typeof e&&(e=CKEDITOR.tools.parseCssText(e,!0)),t)if(!(i in e)||n(e[i],i)!=n(t[i],i)&&"inherit"!=t[i]&&"inherit"!=e[i])return!1;return!0}function C(t,e,n){var i=t.document,r=t.getRanges();e=e?this.removeFromRange:this.applyToRange;for(var o,a=r.createIterator();o=a.getNextRange();)e.call(this,o,n);t.selectRanges(r),i.removeCustomData("doc_processing_style")}var T={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},w={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},I=/\s*(?:;\s*|$)/,O=/#\((.+?)\)/g,D=CKEDITOR.dom.walker.bookmark(0,1),_=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(t,e){if("string"==typeof t.type)return new CKEDITOR.style.customHandlers[t.type](t);var n=t.attributes;n&&n.style&&(t.styles=CKEDITOR.tools.extend({},t.styles,CKEDITOR.tools.parseCssText(n.style)),delete n.style),e&&(v((t=CKEDITOR.tools.clone(t)).attributes,e),v(t.styles,e)),n=this.element=t.element?"string"==typeof t.element?t.element.toLowerCase():t.element:"*",this.type=t.type||(T[n]?CKEDITOR.STYLE_BLOCK:w[n]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE),"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT),this._={definition:t}},CKEDITOR.style.prototype={apply:function(t){if(t instanceof CKEDITOR.dom.document)return C.call(this,t.getSelection());if(this.checkApplicable(t.elementPath(),t)){var e=this._.enterMode;e||(this._.enterMode=t.activeEnterMode),C.call(this,t.getSelection(),0,t),this._.enterMode=e}},remove:function(t){if(t instanceof CKEDITOR.dom.document)return C.call(this,t.getSelection(),1);if(this.checkApplicable(t.elementPath(),t)){var e=this._.enterMode;e||(this._.enterMode=t.activeEnterMode),C.call(this,t.getSelection(),1,t),this._.enterMode=e}},applyToRange:function(t){return this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?n:this.type==CKEDITOR.STYLE_BLOCK?s:this.type==CKEDITOR.STYLE_OBJECT?o:null,this.applyToRange(t)},removeFromRange:function(t){return this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?i:this.type==CKEDITOR.STYLE_BLOCK?l:this.type==CKEDITOR.STYLE_OBJECT?a:null,this.removeFromRange(t)},applyToObject:function(t){m(t,this)},checkActive:function(t,e){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(t.block||t.blockLimit,!0,e);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var n,i=t.elements,r=0;r<i.length;r++)if(n=i[r],this.type!=CKEDITOR.STYLE_INLINE||n!=t.block&&n!=t.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var o=n.getName();if(!("string"==typeof this.element?o==this.element:o in this.element))continue}if(this.checkElementRemovable(n,!0,e))return!0}}return!1},checkApplicable:function(t,e,n){if(e&&e instanceof CKEDITOR.filter&&(n=e),n&&!n.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!t.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!t.blockLimit.getDtd()[this.element]}return!0},checkElementMatch:function(t,e){var n=this._.definition;if(!t||!n.ignoreReadonly&&t.isReadOnly())return!1;var i=t.getName();if("string"==typeof this.element?i==this.element:i in this.element){if(!e&&!t.hasAttributes())return!0;if(i=n._AC)n=i;else{i={};var r=0,o=n.attributes;if(o)for(var a in o)r++,i[a]=o[a];(a=CKEDITOR.style.getStyleText(n))&&(i.style||r++,i.style=a),i._length=r,n=n._AC=i}if(!n._length)return!0;for(var s in n)if("_length"!=s)if(i=t.getAttribute(s)||"","style"==s?b(n[s],i):n[s]==i){if(!e)return!0}else if(e)return!1;if(e)return!0}return!1},checkElementRemovable:function(t,e,n){if(this.checkElementMatch(t,e,n))return!0;if(e=y(this)[t.getName()]){var i;if(!(e=e.attributes))return!0;for(n=0;n<e.length;n++)if(i=e[n][0],i=t.getAttribute(i)){var r=e[n][1];if(null===r)return!0;if("string"==typeof r){if(i==r)return!0}else if(r.test(i))return!0}}return!1},buildPreview:function(t){var e=this._.definition,n=[],i=e.element;"bdo"==i&&(i="span"),n=["<",i];var r=e.attributes;if(r)for(var o in r)n.push(" ",o,'="',r[o],'"');return(r=CKEDITOR.style.getStyleText(e))&&n.push(' style="',r,'"'),n.push(">",t||e.name,"</",i,">"),n.join("")},getDefinition:function(){return this._.definition}},CKEDITOR.style.getStyleText=function(t){if(e=t._ST)return e;var e=t.styles,n=t.attributes&&t.attributes.style||"",i="";for(var r in n.length&&(n=n.replace(I,";")),e){var o=e[r],a=(r+":"+o).replace(I,";");"inherit"==o?i+=a:n+=a}return n.length&&(n=CKEDITOR.tools.normalizeCssText(n,!0)),t._ST=n+i},CKEDITOR.style.customHandlers={},CKEDITOR.style.addCustomHandler=function(t){var e=function(t){this._={definition:t},this.setup&&this.setup(t)};return e.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},t,!0),this.customHandlers[t.type]=e};var k=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,R=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED}(),CKEDITOR.styleCommand=function(t,e){this.requiredContent=this.allowedContent=this.style=t,CKEDITOR.tools.extend(this,e,!0)},CKEDITOR.styleCommand.prototype.exec=function(t){t.focus(),this.state==CKEDITOR.TRISTATE_OFF?t.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&t.removeStyle(this.style)},CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet"),CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet),CKEDITOR.loadStylesSet=function(t,e,n){CKEDITOR.stylesSet.addExternal(t,e,""),CKEDITOR.stylesSet.load(t,n)},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(t,e){var n=this._.styleStateChangeCallbacks;n||(n=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(t){for(var e=0;e<n.length;e++){var i=n[e],r=i.style.checkActive(t.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;i.fn.call(this,r)}})),n.push({style:t,fn:e})},applyStyle:function(t){t.apply(this)},removeStyle:function(t){t.remove(this)},getStylesSet:function(t){if(this._.stylesDefinitions)t(this._.stylesDefinitions);else{var e=this;if(!1===(n=e.config.stylesCombo_stylesSet||e.config.stylesSet))t(null);else if(n instanceof Array)e._.stylesDefinitions=n,t(n);else{n||(n="default");var n,i=(n=n.split(":"))[0];CKEDITOR.stylesSet.addExternal(i,n[1]?n.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),""),CKEDITOR.stylesSet.load(i,function(n){e._.stylesDefinitions=n[i],t(e._.stylesDefinitions)})}}}}),CKEDITOR.dom.comment=function(t,e){"string"==typeof t&&(t=(e?e.$:document).createComment(t)),CKEDITOR.dom.domObject.call(this,t)},CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"\x3c!--"+this.$.nodeValue+"--\x3e"}}),function(){var t,e={},n={};for(t in CKEDITOR.dtd.$blockLimit)t in CKEDITOR.dtd.$list||(e[t]=1);for(t in CKEDITOR.dtd.$block)t in CKEDITOR.dtd.$blockLimit||t in CKEDITOR.dtd.$empty||(n[t]=1);CKEDITOR.dom.elementPath=function(t,i){var r,o=null,a=null,s=[],l=t;i=i||t.getDocument().getBody();do{if(l.type==CKEDITOR.NODE_ELEMENT){if(s.push(l),!this.lastElement&&(this.lastElement=l,l.is(CKEDITOR.dtd.$object)||"false"==l.getAttribute("contenteditable")))continue;if(l.equals(i))break;if(!a&&(r=l.getName(),"true"==l.getAttribute("contenteditable")?a=l:!o&&n[r]&&(o=l),e[r])){if(r=!o&&"div"==r){t:{for(var c=0,u=(r=l.getChildren()).count();c<u;c++){var d=r.getItem(c);if(d.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[d.getName()]){r=!0;break t}}r=!1}r=!r}r?o=l:a=l}}}while(l=l.getParent());a||(a=i),this.block=o,this.blockLimit=a,this.root=i,this.elements=s}}(),CKEDITOR.dom.elementPath.prototype={compare:function(t){var e=this.elements;if(!(t=t&&t.elements)||e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].equals(t[n]))return!1;return!0},contains:function(t,e,n){var i;"string"==typeof t&&(i=function(e){return e.getName()==t}),t instanceof CKEDITOR.dom.element?i=function(e){return e.equals(t)}:CKEDITOR.tools.isArray(t)?i=function(e){return-1<CKEDITOR.tools.indexOf(t,e.getName())}:"function"==typeof t?i=t:"object"==typeof t&&(i=function(e){return e.getName()in t});var r=this.elements,o=r.length;for(e&&o--,n&&(r=Array.prototype.slice.call(r,0)).reverse(),e=0;e<o;e++)if(i(r[e]))return r[e];return null},isContextFor:function(t){return!(t in CKEDITOR.dtd.$block&&!(this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit).getDtd()[t])},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}},CKEDITOR.dom.text=function(t,e){"string"==typeof t&&(t=(e?e.$:document).createTextNode(t)),this.$=t},CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(t){this.$.nodeValue=t},split:function(t){var e=this.$.parentNode,n=e.childNodes.length,i=this.getLength(),r=this.getDocument(),o=new CKEDITOR.dom.text(this.$.splitText(t),r);return e.childNodes.length==n&&(t>=i?(o=r.createText("")).insertAfter(this):((t=r.createText("")).insertAfter(o),t.remove())),o},substring:function(t,e){return"number"!=typeof e?this.$.nodeValue.substr(t):this.$.nodeValue.substring(t,e)}}),function(){function t(t,e,n){var i=t.serializable,r=e[n?"endContainer":"startContainer"],o=n?"endOffset":"startOffset",a=i?e.document.getById(t.startNode):t.startNode;return t=i?e.document.getById(t.endNode):t.endNode,r.equals(a.getPrevious())?(e.startOffset=e.startOffset-r.getLength()-t.getPrevious().getLength(),r=t.getNext()):r.equals(t.getPrevious())&&(e.startOffset-=r.getLength(),r=t.getNext()),r.equals(a.getParent())&&e[o]++,r.equals(t.getParent())&&e[o]++,e[n?"endContainer":"startContainer"]=r,e}CKEDITOR.dom.rangeList=function(t){return t instanceof CKEDITOR.dom.rangeList?t:(t?t instanceof CKEDITOR.dom.range&&(t=[t]):t=[],CKEDITOR.tools.extend(t,e))};var e={createIterator:function(){var t,e=this,n=CKEDITOR.dom.walker.bookmark(),i=[];return{getNextRange:function(r){var o=e[t=void 0===t?0:t+1];if(o&&1<e.length){if(!t)for(var a=e.length-1;0<=a;a--)i.unshift(e[a].createBookmark(!0));if(r)for(var s=0;e[t+s+1];){var l=o.document;for(r=0,a=l.getById(i[s].endNode),l=l.getById(i[s+1].startNode);;){if(a=a.getNextSourceNode(!1),l.equals(a))r=1;else if(n(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.isBlockBoundary())continue;break}if(!r)break;s++}for(o.moveToBookmark(i.shift());s--;)(a=e[++t]).moveToBookmark(i.shift()),o.setEnd(a.endContainer,a.endOffset)}return o}}},createBookmarks:function(e){for(var n,i=[],r=0;r<this.length;r++){i.push(n=this[r].createBookmark(e,!0));for(var o=r+1;o<this.length;o++)this[o]=t(n,this[o]),this[o]=t(n,this[o],!0)}return i},createBookmarks2:function(t){for(var e=[],n=0;n<this.length;n++)e.push(this[n].createBookmark2(t));return e},moveToBookmarks:function(t){for(var e=0;e<this.length;e++)this[e].moveToBookmark(t[e])}}}(),function(){function t(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function e(e){var n=CKEDITOR.skin["ua_"+e],i=CKEDITOR.env;if(n){n=n.split(",").sort(function(t,e){return t>e?-1:1});for(var r,o=0;o<n.length;o++)if(r=n[o],i.ie&&(r.replace(/^ie/,"")==i.version||i.quirks&&"iequirks"==r)&&(r="ie"),i[r]){e+="_"+n[o];break}}return CKEDITOR.getUrl(t()+e+".css")}function n(t,n){o[t]||(CKEDITOR.document.appendStyleSheet(e(t)),o[t]=1),n&&n()}function i(t){var e=t.getById(a);return e||((e=t.getHead().append("style")).setAttribute("id",a),e.setAttribute("type","text/css")),e}function r(t,e,n){var i,r,o;if(CKEDITOR.env.webkit)for(e=e.split("}").slice(0,-1),r=0;r<e.length;r++)e[r]=e[r].split("{");for(var a=0;a<t.length;a++)if(CKEDITOR.env.webkit)for(r=0;r<e.length;r++){for(o=e[r][1],i=0;i<n.length;i++)o=o.replace(n[i][0],n[i][1]);t[a].$.sheet.addRule(e[r][0],o)}else{for(o=e,i=0;i<n.length;i++)o=o.replace(n[i][0],n[i][1]);CKEDITOR.env.ie&&11>CKEDITOR.env.version?t[a].$.styleSheet.cssText+=o:t[a].$.innerHTML+=o}}var o={};CKEDITOR.skin={path:t,loadPart:function(e,i){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(t()+"skin.js"),function(){n(e,i)}):n(e,i)},getPath:function(t){return CKEDITOR.getUrl(e(t))},icons:{},addIcon:function(t,e,n,i){t=t.toLowerCase(),this.icons[t]||(this.icons[t]={path:e,offset:n||0,bgsize:i||"16px"})},getIconStyle:function(t,e,n,i,r){var o;return t&&(t=t.toLowerCase(),e&&(o=this.icons[t+"-rtl"]),o||(o=this.icons[t])),t=n||o&&o.path||"",i=i||o&&o.offset,r=r||o&&o.bgsize||"16px",t&&(t=t.replace(/'/g,"\\'")),t&&"background-image:url('"+CKEDITOR.getUrl(t)+"');background-position:0 "+i+"px;background-size:"+r+";"}},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(t){var e=i(CKEDITOR.document);return(this.setUiColor=function(t){this.uiColor=t;var n=CKEDITOR.skin.chameleon,i="",o="";"function"==typeof n&&(i=n(this,"editor"),o=n(this,"panel")),r([e],i,t=[[l,t]]),r(s,o,t)}).call(this,t)}});var a="cke_ui_color",s=[],l=/\$color/g;CKEDITOR.on("instanceLoaded",function(t){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var e=t.editor;t=function(t){if(!(t=(t.data[0]||t.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument()).getById("cke_ui_color")){t=i(t),s.push(t);var n=e.getUiColor();n&&r([t],CKEDITOR.skin.chameleon(e,"panel"),[[l,n]])}},e.on("panelShow",t),e.on("menuShow",t),e.config.uiColor&&e.setUiColor(e.config.uiColor)}})}(),function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var t=CKEDITOR.dom.element.createFromHtml('<div style="width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"></div>',CKEDITOR.document);t.appendTo(CKEDITOR.document.getHead());try{var e=t.getComputedStyle("border-top-color"),n=t.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!e||e!=n)}catch(t){CKEDITOR.env.hc=!1}t.remove()}if(CKEDITOR.env.hc&&(CKEDITOR.env.cssClass+=" cke_hc"),CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}"),CKEDITOR.status="loaded",CKEDITOR.fireOnce("loaded"),t=CKEDITOR._.pending)for(delete CKEDITOR._.pending,e=0;e<t.length;e++)CKEDITOR.editor.prototype.constructor.apply(t[e][0],t[e][1]),CKEDITOR.add(t[e][0])}(),CKEDITOR.skin.name="moono-lisa",CKEDITOR.skin.ua_editor="ie,iequirks,ie8,gecko",CKEDITOR.skin.ua_dialog="ie,iequirks,ie8",CKEDITOR.skin.chameleon=function(){var t=function(t,e){for(var n=t.match(/[^#]./g),i=0;3>i;i++){var r,o=i;r=parseInt(n[i],16),r=("0"+(0>e?0|r*(1+e):0|r+(255-r)*e).toString(16)).slice(-2),n[o]=r}return"#"+n.join("")},e={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_bottom [background-color:{defaultBackground};border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [background-color:{defaultBackground};outline-color:{defaultBorder};] {id} .cke_dialog_tab [background-color:{dialogTab};border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [background-color:{lightBackground};] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} a.cke_button_off:hover,{id} a.cke_button_off:focus,{id} a.cke_button_off:active [background-color:{darkBackground};border-color:{toolbarElementsBorder};] {id} .cke_button_on [background-color:{ckeButtonOn};border-color:{toolbarElementsBorder};] {id} .cke_toolbar_separator,{id} .cke_toolgroup a.cke_button:last-child:after,{id} .cke_toolgroup a.cke_button.cke_button_disabled:hover:last-child:after [background-color: {toolbarElementsBorder};border-color: {toolbarElementsBorder};] {id} a.cke_combo_button:hover,{id} a.cke_combo_button:focus,{id} .cke_combo_on a.cke_combo_button [border-color:{toolbarElementsBorder};background-color:{darkBackground};] {id} .cke_combo:after [border-color:{toolbarElementsBorder};] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover,{id} a.cke_path_item:focus,{id} a.cke_path_item:active [background-color:{darkBackground};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [background-color:{lightBackground};border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover,.cke_menubutton:focus,.cke_menubutton:active [background-color:{menubuttonHover};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menubutton_disabled:hover .cke_menubutton_icon,.cke_menubutton_disabled:focus .cke_menubutton_icon,.cke_menubutton_disabled:active .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};return function(n,i){var r=t(n.uiColor,.4);return r={id:"."+n.id,defaultBorder:t(r,-.2),toolbarElementsBorder:t(r,-.25),defaultBackground:r,lightBackground:t(r,.8),darkBackground:t(r,-.15),ckeButtonOn:t(r,.4),ckeResizer:t(r,-.4),ckeColorauto:t(r,.8),dialogBody:t(r,.7),dialogTab:t(r,.65),dialogTabSelected:"#FFF",dialogTabSelectedBorder:"#FFF",elementsPathColor:t(r,-.6),menubuttonHover:t(r,.1),menubuttonIcon:t(r,.5),menubuttonIconHover:t(r,.3)},e[i].output(r).replace(/\[/g,"{").replace(/\]/g,"}")}}(),CKEDITOR.plugins.add("dialogui",{onLoad:function(){var t=function(t){this._||(this._={}),this._.default=this._.initValue=t.default||"",this._.required=t.required||!1;for(var e=[this._],n=1;n<arguments.length;n++)e.push(arguments[n]);return e.push(!0),CKEDITOR.tools.extend.apply(CKEDITOR.tools,e),this._},e={build:function(t,e,n){return new CKEDITOR.ui.dialog.textInput(t,e,n)}},n={build:function(t,e,n){return new CKEDITOR.ui.dialog[e.type](t,e,n)}},i={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(t){this.setValue(this.getInitValue(),t)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._.default},getInitValue:function(){return this._.initValue}},r=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(t,e){this._.domOnChangeRegistered||(t.on("load",function(){this.getInputElement().on("change",function(){t.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",e)}},!0),o=/^on([A-Z]\w+)/,a=function(t){for(var e in t)(o.test(e)||"title"==e||"type"==e)&&delete t[e];return t},s=function(t){(t=t.data.getKeystroke())==CKEDITOR.SHIFT+CKEDITOR.ALT+36?this.setDirectionMarker("ltr"):t==CKEDITOR.SHIFT+CKEDITOR.ALT+35&&this.setDirectionMarker("rtl")};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(e,n,i,r){if(!(4>arguments.length)){var o=t.call(this,n);o.labelId=CKEDITOR.tools.getNextId()+"_label",this._.children=[];var a={role:n.role||"presentation"};n.includeLabel&&(a["aria-labelledby"]=o.labelId),CKEDITOR.ui.dialog.uiElement.call(this,e,n,i,"div",null,a,function(){var t=[],i=n.required?" cke_required":"";return"horizontal"!=n.labelLayout?t.push('<label class="cke_dialog_ui_labeled_label'+i+'" ',' id="'+o.labelId+'"',o.inputId?' for="'+o.inputId+'"':"",(n.labelStyle?' style="'+n.labelStyle+'"':"")+">",n.label,"</label>",'<div class="cke_dialog_ui_labeled_content"',n.controlStyle?' style="'+n.controlStyle+'"':"",' role="presentation">',r.call(this,e,n),"</div>"):(i={type:"hbox",widths:n.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+i+'" id="'+o.labelId+'" for="'+o.inputId+'"'+(n.labelStyle?' style="'+n.labelStyle+'"':"")+">"+CKEDITOR.tools.htmlEncode(n.label)+"</label>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(n.controlStyle?' style="'+n.controlStyle+'"':"")+">"+r.call(this,e,n)+"</span>"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(e,i,t)),t.join("")})}},textInput:function(e,n,i){if(!(3>arguments.length)){t.call(this,n);var r=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",o={class:"cke_dialog_ui_input_"+n.type,id:r,type:n.type};n.validate&&(this.validate=n.validate),n.maxLength&&(o.maxlength=n.maxLength),n.size&&(o.size=n.size),n.inputStyle&&(o.style=n.inputStyle);var a=this,l=!1;e.on("load",function(){a.getInputElement().on("keydown",function(t){13==t.data.getKeystroke()&&(l=!0)}),a.getInputElement().on("keyup",function(t){13==t.data.getKeystroke()&&l&&(e.getButton("ok")&&setTimeout(function(){e.getButton("ok").click()},0),l=!1),a.bidi&&s.call(a,t)},null,null,1e3)}),CKEDITOR.ui.dialog.labeledElement.call(this,e,n,i,function(){var t=['<div class="cke_dialog_ui_input_',n.type,'" role="presentation"'];for(var e in n.width&&t.push('style="width:'+n.width+'" '),t.push("><input "),o["aria-labelledby"]=this._.labelId,this._.required&&(o["aria-required"]=this._.required),o)t.push(e+'="'+o[e]+'" ');return t.push(" /></div>"),t.join("")})}},textarea:function(e,n,i){if(!(3>arguments.length)){t.call(this,n);var r=this,o=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",a={};n.validate&&(this.validate=n.validate),a.rows=n.rows||5,a.cols=n.cols||20,a.class="cke_dialog_ui_input_textarea "+(n.class||""),void 0!==n.inputStyle&&(a.style=n.inputStyle),n.dir&&(a.dir=n.dir),r.bidi&&e.on("load",function(){r.getInputElement().on("keyup",s)},r),CKEDITOR.ui.dialog.labeledElement.call(this,e,n,i,function(){a["aria-labelledby"]=this._.labelId,this._.required&&(a["aria-required"]=this._.required);var t,e=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea id="',o,'" '];for(t in a)e.push(t+'="'+CKEDITOR.tools.htmlEncode(a[t])+'" ');return e.push(">",CKEDITOR.tools.htmlEncode(r._.default),"</textarea></div>"),e.join("")})}},checkbox:function(e,n,i){if(!(3>arguments.length)){var r=t.call(this,n,{default:!!n.default});n.validate&&(this.validate=n.validate),CKEDITOR.ui.dialog.uiElement.call(this,e,n,i,"span",null,null,function(){var t=CKEDITOR.tools.extend({},n,{id:n.id?n.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),i=[],o=CKEDITOR.tools.getNextId()+"_label",s={class:"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":o};return a(t),n.default&&(s.checked="checked"),void 0!==t.inputStyle&&(t.style=t.inputStyle),r.checkbox=new CKEDITOR.ui.dialog.uiElement(e,t,i,"input",null,s),i.push(' <label id="',o,'" for="',s.id,'"'+(n.labelStyle?' style="'+n.labelStyle+'"':"")+">",CKEDITOR.tools.htmlEncode(n.label),"</label>"),i.join("")})}},radio:function(e,n,i){if(!(3>arguments.length)){t.call(this,n),this._.default||(this._.default=this._.initValue=n.items[0][1]),n.validate&&(this.validate=n.validate);var r=[],o=this;n.role="radiogroup",n.includeLabel=!0,CKEDITOR.ui.dialog.labeledElement.call(this,e,n,i,function(){for(var t=[],i=[],s=(n.id?n.id:CKEDITOR.tools.getNextId())+"_radio",l=0;l<n.items.length;l++){var c=n.items[l],u=void 0!==c[2]?c[2]:c[0],d=void 0!==c[1]?c[1]:c[0],h=(f=CKEDITOR.tools.getNextId()+"_radio_input")+"_label",f=CKEDITOR.tools.extend({},n,{id:f,title:null,type:null},!0),p=(u=CKEDITOR.tools.extend({},f,{title:u},!0),{type:"radio",class:"cke_dialog_ui_radio_input",name:s,value:d,"aria-labelledby":h}),g=[];o._.default==d&&(p.checked="checked"),a(f),a(u),void 0!==f.inputStyle&&(f.style=f.inputStyle),f.keyboardFocusable=!0,r.push(new CKEDITOR.ui.dialog.uiElement(e,f,g,"input",null,p)),g.push(" "),new CKEDITOR.ui.dialog.uiElement(e,u,g,"label",null,{id:h,for:p.id},c[0]),t.push(g.join(""))}return new CKEDITOR.ui.dialog.hbox(e,r,t,i),i.join("")}),this._.children=r}},button:function(e,n,i){if(arguments.length){"function"==typeof n&&(n=n(e.getParentEditor())),t.call(this,n,{disabled:n.disabled||!1}),CKEDITOR.event.implementOn(this);var r=this;e.on("load",function(){var t=this.getElement();t.on("click",function(t){r.click(),t.data.preventDefault()}),t.on("keydown",function(t){t.data.getKeystroke()in{32:1}&&(r.click(),t.data.preventDefault())}),t.unselectable()},this);var o=CKEDITOR.tools.extend({},n);delete o.style;var a=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,e,o,i,"a",null,{style:n.style,href:"javascript:void(0)",title:n.label,hidefocus:"true",class:n.class,role:"button","aria-labelledby":a},'<span id="'+a+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(n.label)+"</span>")}},select:function(e,n,i){if(!(3>arguments.length)){var r=t.call(this,n);n.validate&&(this.validate=n.validate),r.inputId=CKEDITOR.tools.getNextId()+"_select",CKEDITOR.ui.dialog.labeledElement.call(this,e,n,i,function(){var t=CKEDITOR.tools.extend({},n,{id:n.id?n.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),i=[],o=[],s={id:r.inputId,class:"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};i.push('<div class="cke_dialog_ui_input_',n.type,'" role="presentation"'),n.width&&i.push('style="width:'+n.width+'" '),i.push(">"),void 0!==n.size&&(s.size=n.size),void 0!==n.multiple&&(s.multiple=n.multiple),a(t);for(var l,c=0;c<n.items.length&&(l=n.items[c]);c++)o.push('<option value="',CKEDITOR.tools.htmlEncode(void 0!==l[1]?l[1]:l[0]).replace(/"/g,"&quot;"),'" /> ',CKEDITOR.tools.htmlEncode(l[0]));return void 0!==t.inputStyle&&(t.style=t.inputStyle),r.select=new CKEDITOR.ui.dialog.uiElement(e,t,i,"select",null,s,o.join("")),i.push("</div>"),i.join("")})}},file:function(e,n,i){if(!(3>arguments.length)){void 0===n.default&&(n.default="");var r=CKEDITOR.tools.extend(t.call(this,n),{definition:n,buttons:[]});n.validate&&(this.validate=n.validate),e.on("load",function(){CKEDITOR.document.getById(r.frameId).getParent().addClass("cke_dialog_ui_input_file")}),CKEDITOR.ui.dialog.labeledElement.call(this,e,n,i,function(){r.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var t=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',r.frameId,'" title="',n.label,'" src="javascript:void('];return t.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0"),t.push(')"></iframe>'),t.join("")})}},fileButton:function(e,n,i){var r=this;if(!(3>arguments.length)){t.call(this,n),n.validate&&(this.validate=n.validate);var o=CKEDITOR.tools.extend({},n),a=o.onClick;o.className=(o.className?o.className+" ":"")+"cke_dialog_ui_button",o.onClick=function(t){var i=n.for;a&&!1===a.call(this,t)||(e.getContentElement(i[0],i[1]).submit(),this.disable())},e.on("load",function(){e.getContentElement(n.for[0],n.for[1])._.buttons.push(r)}),CKEDITOR.ui.dialog.button.call(this,e,o,i)}},html:function(){var t=/^\s*<[\w:]+\s+([^>]*)?>/,e=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,n=/\/$/;return function(i,r,o){if(!(3>arguments.length)){var a=[],s=r.html;"<"!=s.charAt(0)&&(s="<span>"+s+"</span>");var l=r.focus;if(l){var c=this.focus;this.focus=function(){("function"==typeof l?l:c).call(this),this.fire("focus")},r.isFocusable&&(this.isFocusable=this.isFocusable),this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,i,r,a,"span",null,null,""),a=a.join("").match(t),s=s.match(e)||["","",""],n.test(s[1])&&(s[1]=s[1].slice(0,-1),s[2]="/"+s[2]),o.push([s[1]," ",a[1]||"",s[2]].join(""))}}}(),fieldset:function(t,e,n,i,r){var o=r.label;this._={children:e},CKEDITOR.ui.dialog.uiElement.call(this,t,r,i,"fieldset",null,null,function(){var t=[];o&&t.push("<legend"+(r.labelStyle?' style="'+r.labelStyle+'"':"")+">"+o+"</legend>");for(var e=0;e<n.length;e++)t.push(n[e]);return t.join("")})}},!0),CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement,CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(t){var e=CKEDITOR.document.getById(this._.labelId);return 1>e.getChildCount()?new CKEDITOR.dom.text(t,CKEDITOR.document).appendTo(e):e.getChild(0).$.nodeValue=t,this},getLabel:function(){var t=CKEDITOR.document.getById(this._.labelId);return!t||1>t.getChildCount()?"":t.getChild(0).getText()},eventProcessors:r},!0),CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return!this._.disabled&&this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var t=this.getElement();t&&t.removeClass("cke_disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(t,e){this.on("click",function(){e.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var t=this.selectParentTab();setTimeout(function(){var e=t.getInputElement();e&&e.$.focus()},0)},select:function(){var t=this.selectParentTab();setTimeout(function(){var e=t.getInputElement();e&&(e.$.focus(),e.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(t){if(this.bidi){var e=t&&t.charAt(0);(e="‪"==e?"ltr":"‫"==e?"rtl":null)&&(t=t.slice(1)),this.setDirectionMarker(e)}return t||(t=""),CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},getValue:function(){var t=CKEDITOR.ui.dialog.uiElement.prototype.getValue.call(this);if(this.bidi&&t){var e=this.getDirectionMarker();e&&(t=("ltr"==e?"‪":"‫")+t)}return t},setDirectionMarker:function(t){var e=this.getInputElement();t?e.setAttributes({dir:t,"data-cke-dir-marker":t}):this.getDirectionMarker()&&e.removeAttributes(["dir","data-cke-dir-marker"])},getDirectionMarker:function(){return this.getInputElement().data("cke-dir-marker")},keyboardFocusable:!0},i,!0),CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput,CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(t,e,n){var i=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),r=this.getInputElement().$;return i.$.text=t,i.$.value=void 0===e||null===e?t:e,void 0===n||null===n?CKEDITOR.env.ie?r.add(i.$):r.add(i.$,null):r.add(i.$,n),this},remove:function(t){return this.getInputElement().$.remove(t),this},clear:function(){for(var t=this.getInputElement().$;0<t.length;)t.remove(0);return this},keyboardFocusable:!0},i,!0),CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(t,e){this.getInputElement().$.checked=t,!e&&this.fire("change",{value:t})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(t,e){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?r.onChange.apply(this,arguments):(t.on("load",function(){var t=this._.checkbox.getElement();t.on("propertychange",function(e){"checked"==(e=e.data.$).propertyName&&this.fire("change",{value:t.$.checked})},this)},this),this.on("change",e),null)}},keyboardFocusable:!0},i,!0),CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(t,e){for(var n,i=this._.children,r=0;r<i.length&&(n=i[r]);r++)n.getElement().$.checked=n.getValue()==t;!e&&this.fire("change",{value:t})},getValue:function(){for(var t=this._.children,e=0;e<t.length;e++)if(t[e].getElement().$.checked)return t[e].getValue();return null},accessKeyUp:function(){var t,e=this._.children;for(t=0;t<e.length;t++)if(e[t].getElement().$.checked)return void e[t].getElement().focus();e[0].getElement().focus()},eventProcessors:{onChange:function(t,e){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?r.onChange.apply(this,arguments):(t.on("load",function(){for(var t=this._.children,e=this,n=0;n<t.length;n++)t[n].getElement().on("propertychange",function(t){"checked"==(t=t.data.$).propertyName&&this.$.checked&&e.fire("change",{value:this.getAttribute("value")})})},this),this.on("change",e),null)}}},i,!0),CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,i,{getInputElement:function(){var t=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<t.$.forms.length?new CKEDITOR.dom.element(t.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(t){var e,n,i=/^on([A-Z]\w+)/,r=function(t,e,n,i){t.on("formLoaded",function(){t.getInputElement().on(n,i,t)})};for(n in t)(e=n.match(i))&&(this.eventProcessors[n]?this.eventProcessors[n].call(this,this._.dialog,t[n]):r(this,this._.dialog,e[1].toLowerCase(),t[n]));return this},reset:function(){function t(){n.$.open();var t="";i.size&&(t=i.size-(CKEDITOR.env.ie?7:0));var c=e.frameId+"_input";for(n.$.write(['<html dir="'+s+'" lang="'+l+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+s+'" lang="'+l+'" action="',CKEDITOR.tools.htmlEncode(i.action),'"><label id="',e.labelId,'" for="',c,'" style="display:none">',CKEDITOR.tools.htmlEncode(i.label),'</label><input style="width:100%" id="',c,'" aria-labelledby="',e.labelId,'" type="file" name="',CKEDITOR.tools.htmlEncode(i.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(0<t?t:""),'" /></form></body></html><script>',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+o+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+a+")}","<\/script>"].join("")),n.$.close(),t=0;t<r.length;t++)r[t].enable()}var e=this._,n=CKEDITOR.document.getById(e.frameId).getFrameDocument(),i=e.definition,r=e.buttons,o=this.formLoadedNumber,a=this.formUnloadNumber,s=e.dialog._.editor.lang.dir,l=e.dialog._.editor.langCode;o||(o=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),a=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(o),CKEDITOR.tools.removeFunction(a)})),CKEDITOR.env.gecko?setTimeout(t,500):t()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(t,e){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",e)}},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button,CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype),CKEDITOR.dialog.addUIElement("text",e),CKEDITOR.dialog.addUIElement("password",e),CKEDITOR.dialog.addUIElement("textarea",n),CKEDITOR.dialog.addUIElement("checkbox",n),CKEDITOR.dialog.addUIElement("radio",n),CKEDITOR.dialog.addUIElement("button",n),CKEDITOR.dialog.addUIElement("select",n),CKEDITOR.dialog.addUIElement("file",n),CKEDITOR.dialog.addUIElement("fileButton",n),CKEDITOR.dialog.addUIElement("html",n),CKEDITOR.dialog.addUIElement("fieldset",{build:function(t,e,n){for(var i,r=e.children,o=[],a=[],s=0;s<r.length&&(i=r[s]);s++){var l=[];o.push(l),a.push(CKEDITOR.dialog._.uiElementBuilders[i.type].build(t,i,l))}return new CKEDITOR.ui.dialog[e.type](t,a,o,n,e)}})}}),CKEDITOR.DIALOG_RESIZE_NONE=0,CKEDITOR.DIALOG_RESIZE_WIDTH=1,CKEDITOR.DIALOG_RESIZE_HEIGHT=2,CKEDITOR.DIALOG_RESIZE_BOTH=3,CKEDITOR.DIALOG_STATE_IDLE=1,CKEDITOR.DIALOG_STATE_BUSY=2,function(){function t(){for(var t=this._.tabIdList.length,e=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+t,n=e-1;n>e-t;n--)if(this._.tabs[this._.tabIdList[n%t]][0].$.offsetHeight)return this._.tabIdList[n%t];return null}function e(t,e){for(var n=t.$.getElementsByTagName("input"),i=0,r=n.length;i<r;i++){var o=new CKEDITOR.dom.element(n[i]);"text"==o.getAttribute("type").toLowerCase()&&(e?(o.setAttribute("value",o.getCustomData("fake_value")||""),o.removeCustomData("fake_value")):(o.setCustomData("fake_value",o.getAttribute("value")),o.setAttribute("value","")))}}function n(t){var e=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",d).output({id:CKEDITOR.tools.getNextNumber(),editorId:t.id,langDir:t.lang.dir,langCode:t.langCode,editorDialogClass:"cke_editor_"+t.name.replace(/\./g,"\\.")+"_dialog",closeTitle:t.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),n=e.getChild([0,0,0,0,0]),i=n.getChild(0),r=n.getChild(1);return t.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(n),!CKEDITOR.env.ie||CKEDITOR.env.quirks||CKEDITOR.env.edge||(t="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())",CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+t+'" tabIndex="-1"></iframe>').appendTo(n.getParent())),i.unselectable(),r.unselectable(),{element:e,parts:{dialog:e.getChild(0),title:i,close:r,tabs:n.getChild(2),contents:n.getChild([3,0,0,0]),footer:n.getChild([3,0,1,0])}}}function i(t,e,n){this.element=e,this.focusIndex=n,this.tabIndex=0,this.isFocusable=function(){return!e.getAttribute("disabled")&&e.isVisible()},this.focus=function(){t._.currentFocusIndex=this.focusIndex,this.element.focus()},e.on("keydown",function(t){t.data.getKeystroke()in{32:1,13:1}&&this.fire("click")}),e.on("focus",function(){this.fire("mouseover")}),e.on("blur",function(){this.fire("mouseout")})}function r(t,e){this._={dialog:t},CKEDITOR.tools.extend(this,e)}function o(t){function e(e){var n=t.getSize(),l=CKEDITOR.document.getWindow().getViewPaneSize(),c=e.data.$.screenX,u=e.data.$.screenY,d=c-i.x,h=u-i.y;i={x:c,y:u},r.x+=d,r.y+=h,t.move(r.x+s[3]<a?-s[3]:r.x-s[1]>l.width-n.width-a?l.width-n.width+("rtl"==o.lang.dir?0:s[1]):r.x,r.y+s[0]<a?-s[0]:r.y-s[2]>l.height-n.height-a?l.height-n.height+s[2]:r.y,1),e.data.preventDefault()}function n(){if(CKEDITOR.document.removeListener("mousemove",e),CKEDITOR.document.removeListener("mouseup",n),CKEDITOR.env.ie6Compat){var t=y.getChild(0).getFrameDocument();t.removeListener("mousemove",e),t.removeListener("mouseup",n)}}var i=null,r=null,o=t.getParentEditor(),a=o.config.dialog_magnetDistance,s=CKEDITOR.skin.margins||[0,0,0,0];void 0===a&&(a=20),t.parts.title.on("mousedown",function(o){if(i={x:o.data.$.screenX,y:o.data.$.screenY},CKEDITOR.document.on("mousemove",e),CKEDITOR.document.on("mouseup",n),r=t.getPosition(),CKEDITOR.env.ie6Compat){var a=y.getChild(0).getFrameDocument();a.on("mousemove",e),a.on("mouseup",n)}o.data.preventDefault()},t)}function a(t){function e(e){var n="rtl"==d.lang.dir,u=c.width,h=c.height,f=u+(e.data.$.screenX-l.x)*(n?-1:1)*(t._.moved?1:2),p=h+(e.data.$.screenY-l.y)*(t._.moved?1:2),g=t._.element.getFirst(),m=(g=n&&g.getComputedStyle("right"),t.getPosition());m.y+p>s.height&&(p=s.height-m.y),(n?g:m.x)+f>s.width&&(f=s.width-(n?g:m.x)),r!=CKEDITOR.DIALOG_RESIZE_WIDTH&&r!=CKEDITOR.DIALOG_RESIZE_BOTH||(u=Math.max(i.minWidth||0,f-o)),r!=CKEDITOR.DIALOG_RESIZE_HEIGHT&&r!=CKEDITOR.DIALOG_RESIZE_BOTH||(h=Math.max(i.minHeight||0,p-a)),t.resize(u,h),t._.moved||t.layout(),e.data.preventDefault()}function n(){if(CKEDITOR.document.removeListener("mouseup",n),CKEDITOR.document.removeListener("mousemove",e),u&&(u.remove(),u=null),CKEDITOR.env.ie6Compat){var t=y.getChild(0).getFrameDocument();t.removeListener("mouseup",n),t.removeListener("mousemove",e)}}var i=t.definition,r=i.resizable;if(r!=CKEDITOR.DIALOG_RESIZE_NONE){var o,a,s,l,c,u,d=t.getParentEditor(),h=CKEDITOR.tools.addFunction(function(i){c=t.getSize();var r=t.parts.contents;r.$.getElementsByTagName("iframe").length&&(u=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),r.append(u)),a=c.height-t.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks)),o=c.width-t.parts.contents.getSize("width",1),l={x:i.screenX,y:i.screenY},s=CKEDITOR.document.getWindow().getViewPaneSize(),CKEDITOR.document.on("mousemove",e),CKEDITOR.document.on("mouseup",n),CKEDITOR.env.ie6Compat&&((r=y.getChild(0).getFrameDocument()).on("mousemove",e),r.on("mouseup",n)),i.preventDefault&&i.preventDefault()});t.on("load",function(){var e="";r==CKEDITOR.DIALOG_RESIZE_WIDTH?e=" cke_resizer_horizontal":r==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(e=" cke_resizer_vertical"),e=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+e+" cke_resizer_"+d.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(d.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+h+', event )">'+("ltr"==d.lang.dir?"◢":"◣")+"</div>"),t.parts.footer.append(e,1)}),d.on("destroy",function(){CKEDITOR.tools.removeFunction(h)})}}function s(t){t.data.preventDefault(1)}function l(t){var e=CKEDITOR.document.getWindow(),n=t.config,i=CKEDITOR.skinName||t.config.skin,r=n.dialog_backgroundCoverColor||("moono-lisa"==i?"black":"white"),o=(i=n.dialog_backgroundCoverOpacity,n.baseFloatZIndex),a=(n=CKEDITOR.tools.genKey(r,i,o),E[n]);a?a.show():(o=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",o,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+r,'" class="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(r="<html><body style=\\'background-color:"+r+";\\'></body></html>",o.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),o.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+r+"' );document.close();")+"})())"),o.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')),o.push("</div>"),(a=CKEDITOR.dom.element.createFromHtml(o.join(""))).setOpacity(void 0!==i?i:.5),a.on("keydown",s),a.on("keypress",s),a.on("keyup",s),a.appendTo(CKEDITOR.document.getBody()),E[n]=a),t.focusManager.add(a),y=a;var l=function(){var t=e.getScrollPosition(),n=CKEDITOR.dialog._.currentTop;if(a.setStyles({left:t.x+"px",top:t.y+"px"}),n)do{t=n.getPosition(),n.move(t.x,t.y)}while(n=n._.parentDialog)};if(v=t=function(){var t=e.getViewPaneSize();a.setStyles({width:t.width+"px",height:t.height+"px"})},e.on("resize",t),t(),CKEDITOR.env.mac&&CKEDITOR.env.webkit||a.focus(),CKEDITOR.env.ie6Compat){var c=function(){l(),arguments.callee.prevScrollHandler.apply(this,arguments)};e.$.setTimeout(function(){c.prevScrollHandler=window.onscroll||function(){},window.onscroll=c},0),l()}}function c(t){y&&(t.focusManager.remove(y),t=CKEDITOR.document.getWindow(),y.hide(),t.removeListener("resize",v),CKEDITOR.env.ie6Compat&&t.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null},0),v=null)}var u=CKEDITOR.tools.cssLength,d='<div class="cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir="{langDir}" lang="{langCode}" role="dialog" aria-labelledby="cke_dialog_title_{id}"><table class="cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>';CKEDITOR.dialog=function(e,i){function r(t){var e=E._.focusList;if(t=t||0,!(1>e.length)){var n=E._.currentFocusIndex;E._.tabBarMode&&0>t&&(n=0);try{e[n].getInputElement().$.blur()}catch(t){}var i=n,r=1<E._.pageCount;do{if(i+=t,r&&!E._.tabBarMode&&(i==e.length||-1==i))return E._.tabBarMode=!0,E._.tabs[E._.currentTabId][0].focus(),void(E._.currentFocusIndex=-1);if((i=(i+e.length)%e.length)==n)break}while(t&&!e[i].isFocusable());e[i].focus(),"text"==e[i].type&&e[i].select()}}function s(n){if(E==CKEDITOR.dialog._.currentTop){var i=n.data.getKeystroke(),o="rtl"==e.lang.dir;if(c=u=0,9==i||i==CKEDITOR.SHIFT+9)r(i==CKEDITOR.SHIFT+9?-1:1),c=1;else if(i==CKEDITOR.ALT+121&&!E._.tabBarMode&&1<E.getPageCount())E._.tabBarMode=!0,E._.tabs[E._.currentTabId][0].focus(),E._.currentFocusIndex=-1,c=1;else if(-1!=CKEDITOR.tools.indexOf([37,38,39,40],i)&&E._.tabBarMode)i=-1!=CKEDITOR.tools.indexOf([o?39:37,38],i)?t.call(E):function(){for(var t=this._.tabIdList.length,e=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),n=e+1;n<e+t;n++)if(this._.tabs[this._.tabIdList[n%t]][0].$.offsetHeight)return this._.tabIdList[n%t];return null}.call(E),E.selectPage(i),E._.tabs[i][0].focus(),c=1;else if(13!=i&&32!=i||!E._.tabBarMode)if(13==i)(i=n.data.getTarget()).is("a","button","select","textarea")||i.is("input")&&"button"==i.$.type||((i=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(i.click,0,i),c=1),u=1;else{if(27!=i)return;(i=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(i.click,0,i):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),u=1}else this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,r(1),c=1;l(n)}}function l(t){c?t.data.preventDefault(1):u&&t.data.stopPropagation()}var c,u,d=CKEDITOR.dialog._.dialogDefinitions[i],f=CKEDITOR.tools.clone(h),p=e.config.dialog_buttonsOrder||"OS",g=e.lang.dir,v={};if(("OS"==p&&CKEDITOR.env.mac||"rtl"==p&&"ltr"==g||"ltr"==p&&"rtl"==g)&&f.buttons.reverse(),d=CKEDITOR.tools.extend(d(e),f),d=CKEDITOR.tools.clone(d),d=new m(this,d),f=n(e),this._={editor:e,element:f.element,name:i,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=f.parts,CKEDITOR.tools.setTimeout(function(){e.fire("ariaWidget",this.parts.contents)},0,this),(f={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"})["rtl"==g?"right":"left"]=0,this.parts.dialog.setStyles(f),CKEDITOR.event.call(this),this.definition=d=CKEDITOR.fire("dialogDefinition",{name:i,definition:d},e).definition,!("removeDialogTabs"in e._)&&e.config.removeDialogTabs){for(f=e.config.removeDialogTabs.split(";"),g=0;g<f.length;g++)if(2==(p=f[g].split(":")).length){var y=p[0];v[y]||(v[y]=[]),v[y].push(p[1])}e._.removeDialogTabs=v}if(e._.removeDialogTabs&&(v=e._.removeDialogTabs[i]))for(g=0;g<v.length;g++)d.removeContents(v[g]);d.onLoad&&this.on("load",d.onLoad),d.onShow&&this.on("show",d.onShow),d.onHide&&this.on("hide",d.onHide),d.onOk&&this.on("ok",function(t){e.fire("saveSnapshot"),setTimeout(function(){e.fire("saveSnapshot")},0),!1===d.onOk.call(this,t)&&(t.data.hide=!1)}),this.state=CKEDITOR.DIALOG_STATE_IDLE,d.onCancel&&this.on("cancel",function(t){!1===d.onCancel.call(this,t)&&(t.data.hide=!1)});var E=this,b=function(t){var e,n=E._.contents;for(e in n)for(var i in n[e])if(t.call(this,n[e][i]))return};this.on("ok",function(t){b(function(e){if(e.validate){var n=e.validate(this),i="string"==typeof n||!1===n;return i&&(t.data.hide=!1,t.stop()),function(t,e){var n=this.getInputElement();n&&(t?n.removeAttribute("aria-invalid"):n.setAttribute("aria-invalid",!0)),t||(this.select?this.select():this.focus()),e&&alert(e),this.fire("validated",{valid:t,msg:e})}.call(e,!i,"string"==typeof n?n:void 0),i}})},this,null,0),this.on("cancel",function(t){b(function(n){if(n.isChanged())return e.config.dialog_noConfirmCancel||confirm(e.lang.common.confirmCancel)||(t.data.hide=!1),!0})},this,null,0),this.parts.close.on("click",function(t){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),t.data.preventDefault()},this),this.changeFocus=r;var C=this._.element;for(e.focusManager.add(C,1),this.on("show",function(){C.on("keydown",s,this),CKEDITOR.env.gecko&&C.on("keypress",l,this)}),this.on("hide",function(){C.removeListener("keydown",s),CKEDITOR.env.gecko&&C.removeListener("keypress",l),b(function(t){(function(){var t=this.getInputElement();t&&t.removeAttribute("aria-invalid")}).apply(t)})}),this.on("iframeAdded",function(t){new CKEDITOR.dom.document(t.data.iframe.$.contentWindow.document).on("keydown",s,this,null,0)}),this.on("show",function(){!function(){var t=E._.focusList;t.sort(function(t,e){return t.tabIndex!=e.tabIndex?e.tabIndex-t.tabIndex:t.focusIndex-e.focusIndex});for(var e=t.length,n=0;n<e;n++)t[n].focusIndex=n}();var t=1<E._.pageCount;e.config.dialog_startupFocusTab&&t?(E._.tabBarMode=!0,E._.tabs[E._.currentTabId][0].focus(),E._.currentFocusIndex=-1):this._.hasFocus||(this._.currentFocusIndex=t?-1:this._.focusList.length-1,d.onFocus?(t=d.onFocus.call(this))&&t.focus():r(1))},this,null,4294967295),CKEDITOR.env.ie6Compat&&this.on("load",function(){var t=this.getElement(),e=t.getFirst();e.remove(),e.appendTo(t)},this),o(this),a(this),new CKEDITOR.dom.text(d.title,CKEDITOR.document).appendTo(this.parts.title),g=0;g<d.contents.length;g++)(v=d.contents[g])&&this.addPage(v);for(this.parts.tabs.on("click",function(t){var e=t.data.getTarget();e.hasClass("cke_dialog_tab")&&(e=e.$.id,this.selectPage(e.substring(4,e.lastIndexOf("_"))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,r(1)),t.data.preventDefault())},this),g=[],v=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:d.buttons},g).getChild(),this.parts.footer.setHtml(g.join("")),g=0;g<v.length;g++)this._.buttons[v[g].id]=v[g]},CKEDITOR.dialog.prototype={destroy:function(){this.hide(),this._.element.remove()},resize:function(t,e){this._.contentSize&&this._.contentSize.width==t&&this._.contentSize.height==e||(CKEDITOR.dialog.fire("resize",{dialog:this,width:t,height:e},this._.editor),this.fire("resize",{width:t,height:e},this._.editor),this.parts.contents.setStyles({width:t+"px",height:e+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:t,height:e})},getSize:function(){var t=this._.element.getFirst();return{width:t.$.offsetWidth||0,height:t.$.offsetHeight||0}},move:function(t,e,n){var i=this._.element.getFirst(),r="rtl"==this._.editor.lang.dir,o="fixed"==i.getComputedStyle("position");CKEDITOR.env.ie&&i.setStyle("zoom","100%"),o&&this._.position&&this._.position.x==t&&this._.position.y==e||(this._.position={x:t,y:e},o||(t+=(o=CKEDITOR.document.getWindow().getScrollPosition()).x,e+=o.y),r&&(o=this.getSize(),t=CKEDITOR.document.getWindow().getViewPaneSize().width-o.width-t),(e={top:(0<e?e:0)+"px"})[r?"right":"left"]=(0<t?t:0)+"px",i.setStyles(e),n&&(this._.moved=1))},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var t=this._.element,e=this.definition;for(var n in t.getParent()&&t.getParent().equals(CKEDITOR.document.getBody())?t.setStyle("display","block"):t.appendTo(CKEDITOR.document.getBody()),this.resize(this._.contentSize&&this._.contentSize.width||e.width||e.minWidth,this._.contentSize&&this._.contentSize.height||e.height||e.minHeight),this.reset(),this.selectPage(this.definition.contents[0].id),null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10),null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,l(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this),t.on("keydown",C),t.on("keyup",T),this._.hasFocus=!1,e.contents)if(e.contents[n]){t=e.contents[n];var i=this._.tabs[t.id],r=t.requiredContent,o=0;if(i){for(var a in this._.contents[t.id]){var s=this._.contents[t.id][a];"hbox"!=s.type&&"vbox"!=s.type&&s.getInputElement()&&(s.requiredContent&&!this._.editor.activeFilter.check(s.requiredContent)?s.disable():(s.enable(),o++))}!o||r&&!this._.editor.activeFilter.check(r)?i[0].addClass("cke_dialog_tab_disabled"):i[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout(function(){this.layout(),function(t){function e(){t.layout()}var n=CKEDITOR.document.getWindow();n.on("resize",e),t.on("hide",function(){n.removeListener("resize",e)})}(this),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),CKEDITOR.ui.fire("ready",this),this.fire("show",{}),this._.editor.fire("dialogShow",this),this._.parentDialog||this._.editor.focusManager.lock(),this.foreach(function(t){t.setInitValue&&t.setInitValue()})},100,this)},layout:function(){var t=this.parts.dialog,e=this.getSize(),n=CKEDITOR.document.getWindow().getViewPaneSize(),i=(n.width-e.width)/2,r=(n.height-e.height)/2;CKEDITOR.env.ie6Compat||(e.height+(0<r?r:0)>n.height||e.width+(0<i?i:0)>n.width?t.setStyle("position","absolute"):t.setStyle("position","fixed")),this.move(this._.moved?this._.position.x:i,this._.moved?this._.position.y:r)},foreach:function(t){for(var e in this._.contents)for(var n in this._.contents[e])t.call(this,this._.contents[e][n]);return this},reset:function(){var t=function(t){t.reset&&t.reset(1)};return function(){return this.foreach(t),this}}(),setupContent:function(){var t=arguments;this.foreach(function(e){e.setup&&e.setup.apply(e,t)})},commitContent:function(){var t=arguments;this.foreach(function(e){CKEDITOR.env.ie&&this._.currentFocusIndex==e.focusIndex&&e.getInputElement().$.blur(),e.commit&&e.commit.apply(e,t)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{}),this._.editor.fire("dialogHide",this),this.selectPage(this._.tabIdList[0]);var t=this._.element;for(t.setStyle("display","none"),this.parts.dialog.setStyle("visibility","hidden"),I(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var e=this._.parentDialog.getElement().getFirst();e.setStyle("z-index",parseInt(e.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else c(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null,t.removeListener("keydown",C),t.removeListener("keyup",T);var n=this._.editor;n.focus(),setTimeout(function(){n.focusManager.unlock(),CKEDITOR.env.iOS&&n.window.focus()},0)}delete this._.parentDialog,this.foreach(function(t){t.resetInitValue&&t.resetInitValue()}),this.setState(CKEDITOR.DIALOG_STATE_IDLE)}},addPage:function(t){if(!t.requiredContent||this._.editor.filter.check(t.requiredContent)){for(var e=[],n=t.label?' title="'+CKEDITOR.tools.htmlEncode(t.label)+'"':"",i=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:t.elements,expand:!!t.expand,padding:t.padding,style:t.style||"width: 100%;"},e),r=this._.contents[t.id]={},o=i.getChild(),a=0;i=o.shift();)i.notAllowed||"hbox"==i.type||"vbox"==i.type||a++,r[i.id]=i,"function"==typeof i.getChild&&o.push.apply(o,i.getChild());a||(t.hidden=!0),(e=CKEDITOR.dom.element.createFromHtml(e.join(""))).setAttribute("role","tabpanel"),i=CKEDITOR.env,r="cke_"+t.id+"_"+CKEDITOR.tools.getNextNumber(),n=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",n,t.hidden?' style="display:none"':"",' id="',r,'"',i.gecko&&!i.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',t.label,"</a>"].join("")),e.setAttribute("aria-labelledby",r),this._.tabs[t.id]=[n,e],this._.tabIdList.push(t.id),!t.hidden&&this._.pageCount++,this._.lastTab=n,this.updateStyle(),e.setAttribute("name",t.id),e.appendTo(this.parts.contents),n.unselectable(),this.parts.tabs.append(n),t.accessKey&&(w(this,this,"CTRL+"+t.accessKey,D,O),this._.accessKeyMap["CTRL+"+t.accessKey]=t.id)}},selectPage:function(t){if(this._.currentTabId!=t&&!this._.tabs[t][0].hasClass("cke_dialog_tab_disabled")&&!1!==this.fire("selectPage",{page:t,currentPage:this._.currentTabId})){for(var n in this._.tabs){var i=this._.tabs[n][0],r=this._.tabs[n][1];n!=t&&(i.removeClass("cke_dialog_tab_selected"),r.hide()),r.setAttribute("aria-hidden",n!=t)}var o=this._.tabs[t];o[0].addClass("cke_dialog_tab_selected"),CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(e(o[1]),o[1].show(),setTimeout(function(){e(o[1],1)},0)):o[1].show(),this._.currentTabId=t,this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,t)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(e){var n=this._.tabs[e]&&this._.tabs[e][0];n&&1!=this._.pageCount&&n.isVisible()&&(e==this._.currentTabId&&this.selectPage(t.call(this)),n.hide(),this._.pageCount--,this.updateStyle())},showPage:function(t){(t=this._.tabs[t]&&this._.tabs[t][0])&&(t.show(),this._.pageCount++,this.updateStyle())},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(t,e){var n=this._.contents[t];return n&&n[e]},getValueOf:function(t,e){return this.getContentElement(t,e).getValue()},setValueOf:function(t,e,n){return this.getContentElement(t,e).setValue(n)},getButton:function(t){return this._.buttons[t]},click:function(t){return this._.buttons[t].click()},disableButton:function(t){return this._.buttons[t].disable()},enableButton:function(t){return this._.buttons[t].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(t,e){if(void 0===e)e=this._.focusList.length,this._.focusList.push(new i(this,t,e));else{this._.focusList.splice(e,0,new i(this,t,e));for(var n=e+1;n<this._.focusList.length;n++)this._.focusList[n].focusIndex++}},setState:function(t){if(this.state!=t){if(this.state=t,t==CKEDITOR.DIALOG_STATE_BUSY){if(!this.parts.spinner){var e=this.getParentEditor().lang.dir,n={attributes:{class:"cke_dialog_spinner"},styles:{float:"rtl"==e?"right":"left"}};n.styles["margin-"+("rtl"==e?"left":"right")]="8px",this.parts.spinner=CKEDITOR.document.createElement("div",n),this.parts.spinner.setHtml("&#8987;"),this.parts.spinner.appendTo(this.parts.title,1)}this.parts.spinner.show(),this.getButton("ok").disable()}else t==CKEDITOR.DIALOG_STATE_IDLE&&(this.parts.spinner&&this.parts.spinner.hide(),this.getButton("ok").enable());this.fire("state",t)}}},CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(t,e){this._.dialogDefinitions[t]&&"function"!=typeof e||(this._.dialogDefinitions[t]=e)},exists:function(t){return!!this._.dialogDefinitions[t]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(t,e,n){return!((t=t.config.removeDialogTabs)&&t.match(new RegExp("(?:^|;)"+e+":"+n+"(?:$|;)","i")))},okButton:function(){var t=function(t,e){return e=e||{},CKEDITOR.tools.extend({id:"ok",type:"button",label:t.lang.common.ok,class:"cke_dialog_ui_button_ok",onClick:function(t){!1!==(t=t.data.dialog).fire("ok",{hide:!0}).hide&&t.hide()}},e,!0)};return t.type="button",t.override=function(e){return CKEDITOR.tools.extend(function(n){return t(n,e)},{type:"button"},!0)},t}(),cancelButton:function(){var t=function(t,e){return e=e||{},CKEDITOR.tools.extend({id:"cancel",type:"button",label:t.lang.common.cancel,class:"cke_dialog_ui_button_cancel",onClick:function(t){!1!==(t=t.data.dialog).fire("cancel",{hide:!0}).hide&&t.hide()}},e,!0)};return t.type="button",t.override=function(e){return CKEDITOR.tools.extend(function(n){return t(n,e)},{type:"button"},!0)},t}(),addUIElement:function(t,e){this._.uiElementBuilders[t]=e}}),CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},CKEDITOR.event.implementOn(CKEDITOR.dialog),CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var h={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},f=function(t,e,n){for(var i,r=0;i=t[r];r++)if(i.id==e||n&&i[n]&&(i=f(i[n],e,n)))return i;return null},p=function(t,e,n,i,r){if(n){for(var o,a=0;o=t[a];a++){if(o.id==n)return t.splice(a,0,e),e;if(i&&o[i]&&(o=p(o[i],e,n,i,!0)))return o}if(r)return null}return t.push(e),e},g=function(t,e,n){for(var i,r=0;i=t[r];r++){if(i.id==e)return t.splice(r,1);if(n&&i[n]&&(i=g(i[n],e,n)))return i}return null},m=function(t,e){this.dialog=t;for(var n,i=e.contents,o=0;n=i[o];o++)i[o]=n&&new r(t,n);CKEDITOR.tools.extend(this,e)};m.prototype={getContents:function(t){return f(this.contents,t)},getButton:function(t){return f(this.buttons,t)},addContents:function(t,e){return p(this.contents,t,e)},addButton:function(t,e){return p(this.buttons,t,e)},removeContents:function(t){g(this.contents,t)},removeButton:function(t){g(this.buttons,t)}},r.prototype={get:function(t){return f(this.elements,t,"children")},add:function(t,e){return p(this.elements,t,e,"children")},remove:function(t){g(this.elements,t,"children")}};var v,y,E={},b={},C=function(t){var e=t.data.$.ctrlKey||t.data.$.metaKey,n=t.data.$.altKey,i=t.data.$.shiftKey,r=String.fromCharCode(t.data.$.keyCode);(e=b[(e?"CTRL+":"")+(n?"ALT+":"")+(i?"SHIFT+":"")+r])&&e.length&&((e=e[e.length-1]).keydown&&e.keydown.call(e.uiElement,e.dialog,e.key),t.data.preventDefault())},T=function(t){var e=t.data.$.ctrlKey||t.data.$.metaKey,n=t.data.$.altKey,i=t.data.$.shiftKey,r=String.fromCharCode(t.data.$.keyCode);(e=b[(e?"CTRL+":"")+(n?"ALT+":"")+(i?"SHIFT+":"")+r])&&e.length&&(e=e[e.length-1]).keyup&&(e.keyup.call(e.uiElement,e.dialog,e.key),t.data.preventDefault())},w=function(t,e,n,i,r){(b[n]||(b[n]=[])).push({uiElement:t,dialog:e,key:n,keyup:r||t.accessKeyUp,keydown:i||t.accessKeyDown})},I=function(t){for(var e in b){for(var n=b[e],i=n.length-1;0<=i;i--)n[i].dialog!=t&&n[i].uiElement!=t||n.splice(i,1);0===n.length&&delete b[e]}},O=function(t,e){t._.accessKeyMap[e]&&t.selectPage(t._.accessKeyMap[e])},D=function(){};CKEDITOR.ui.dialog={uiElement:function(t,e,n,i,r,o,a){if(!(4>arguments.length)){var s=(i.call?i(e):i)||"div",l=["<",s," "],c=(r&&r.call?r(e):r)||{},u=(o&&o.call?o(e):o)||{},d=(a&&a.call?a.call(this,t,e):a)||"",h=this.domId=u.id||CKEDITOR.tools.getNextId()+"_uiElement";e.requiredContent&&!t.getParentEditor().filter.check(e.requiredContent)&&(c.display="none",this.notAllowed=!0),u.id=h;var f={};e.type&&(f["cke_dialog_ui_"+e.type]=1),e.className&&(f[e.className]=1),e.disabled&&(f.cke_disabled=1);var p=u.class&&u.class.split?u.class.split(" "):[];for(h=0;h<p.length;h++)p[h]&&(f[p[h]]=1);for(h in p=[],f)p.push(h);for(h in u.class=p.join(" "),e.title&&(u.title=e.title),f=(e.style||"").split(";"),e.align&&(p=e.align,c["margin-left"]="left"==p?0:"auto",c["margin-right"]="right"==p?0:"auto"),c)f.push(h+":"+c[h]);for(e.hidden&&f.push("display:none"),h=f.length-1;0<=h;h--)""===f[h]&&f.splice(h,1);for(h in 0<f.length&&(u.style=(u.style?u.style+"; ":"")+f.join("; ")),u)l.push(h+'="'+CKEDITOR.tools.htmlEncode(u[h])+'" ');l.push(">",d,"</",s,">"),n.push(l.join("")),(this._||(this._={})).dialog=t,"boolean"==typeof e.isChanged&&(this.isChanged=function(){return e.isChanged}),"function"==typeof e.isChanged&&(this.isChanged=e.isChanged),"function"==typeof e.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(t){return function(n){t.call(this,e.setValue.call(this,n))}})),"function"==typeof e.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(t){return function(){return e.getValue.call(this,t.call(this))}})),CKEDITOR.event.implementOn(this),this.registerEvents(e),this.accessKeyUp&&this.accessKeyDown&&e.accessKey&&w(this,t,"CTRL+"+e.accessKey);var g=this;t.on("load",function(){var e=g.getInputElement();if(e){var n=g.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?"cke_dialog_ui_focused":"";e.on("focus",function(){t._.tabBarMode=!1,t._.hasFocus=!0,g.fire("focus"),n&&this.addClass(n)}),e.on("blur",function(){g.fire("blur"),n&&this.removeClass(n)})}}),CKEDITOR.tools.extend(this,e),this.keyboardFocusable&&(this.tabIndex=e.tabIndex||0,this.focusIndex=t._.focusList.push(this)-1,this.on("focus",function(){t._.currentFocusIndex=g.focusIndex}))}},hbox:function(t,e,n,i,r){if(!(4>arguments.length)){this._||(this._={});var o,a=this._.children=e,s=r&&r.widths||null,l=r&&r.height||null,c={role:"presentation"};r&&r.align&&(c.align=r.align),CKEDITOR.ui.dialog.uiElement.call(this,t,r||{type:"hbox"},i,"table",{},c,function(){var t=['<tbody><tr class="cke_dialog_ui_hbox">'];for(o=0;o<n.length;o++){var e="cke_dialog_ui_hbox_child",i=[];0===o&&(e="cke_dialog_ui_hbox_first"),o==n.length-1&&(e="cke_dialog_ui_hbox_last"),t.push('<td class="',e,'" role="presentation" '),s?s[o]&&i.push("width:"+u(s[o])):i.push("width:"+Math.floor(100/n.length)+"%"),l&&i.push("height:"+u(l)),r&&void 0!==r.padding&&i.push("padding:"+u(r.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&a[o].align&&i.push("text-align:"+a[o].align),0<i.length&&t.push('style="'+i.join("; ")+'" '),t.push(">",n[o],"</td>")}return t.push("</tr></tbody>"),t.join("")})}},vbox:function(t,e,n,i,r){if(!(3>arguments.length)){this._||(this._={});var o=this._.children=e,a=r&&r.width||null,s=r&&r.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,t,r||{type:"vbox"},i,"div",null,{role:"presentation"},function(){var e=['<table role="presentation" cellspacing="0" border="0" '];e.push('style="'),r&&r.expand&&e.push("height:100%;"),e.push("width:"+u(a||"100%"),";"),CKEDITOR.env.webkit&&e.push("float:none;"),e.push('"'),e.push('align="',CKEDITOR.tools.htmlEncode(r&&r.align||("ltr"==t.getParentEditor().lang.dir?"left":"right")),'" '),e.push("><tbody>");for(var i=0;i<n.length;i++){var l=[];e.push('<tr><td role="presentation" '),a&&l.push("width:"+u(a||"100%")),s?l.push("height:"+u(s[i])):r&&r.expand&&l.push("height:"+Math.floor(100/n.length)+"%"),r&&void 0!==r.padding&&l.push("padding:"+u(r.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&o[i].align&&l.push("text-align:"+o[i].align),0<l.length&&e.push('style="',l.join("; "),'" '),e.push(' class="cke_dialog_ui_vbox_child">',n[i],"</td></tr>")}return e.push("</tbody></table>"),e.join("")})}}},CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(t,e){return this.getInputElement().setValue(t),!e&&this.fire("change",{value:t}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var t=this.getInputElement();(t=t.getParent())&&-1==t.$.className.search("cke_dialog_page_contents"););return t?(t=t.getAttribute("name"),this._.dialog._.currentTabId!=t&&this._.dialog.selectPage(t),this):this},focus:function(){return this.selectParentTab().getInputElement().focus(),this},registerEvents:function(t){var e,n,i=/^on([A-Z]\w+)/,r=function(t,e,n,i){e.on("load",function(){t.getInputElement().on(n,i,t)})};for(n in t)(e=n.match(i))&&(this.eventProcessors[n]?this.eventProcessors[n].call(this,this._.dialog,t[n]):r(this,this._.dialog,e[1].toLowerCase(),t[n]));return this},eventProcessors:{onLoad:function(t,e){t.on("load",e,this)},onShow:function(t,e){t.on("show",e,this)},onHide:function(t,e){t.on("hide",e,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var t=this.getElement();this.getInputElement().setAttribute("disabled","true"),t.addClass("cke_disabled")},enable:function(){var t=this.getElement();this.getInputElement().removeAttribute("disabled"),t.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return!(!this.isEnabled()||!this.isVisible())}},CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(t){return 1>arguments.length?this._.children.concat():(t.splice||(t=[t]),2>t.length?this._.children[t[0]]:this._.children[t[0]]&&this._.children[t[0]].getChild?this._.children[t[0]].getChild(t.slice(1,t.length)):null)}},!0),CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox,function(){var t={build:function(t,e,n){for(var i,r=e.children,o=[],a=[],s=0;s<r.length&&(i=r[s]);s++){var l=[];o.push(l),a.push(CKEDITOR.dialog._.uiElementBuilders[i.type].build(t,i,l))}return new CKEDITOR.ui.dialog[e.type](t,a,o,n,e)}};CKEDITOR.dialog.addUIElement("hbox",t),CKEDITOR.dialog.addUIElement("vbox",t)}(),CKEDITOR.dialogCommand=function(t,e){this.dialogName=t,CKEDITOR.tools.extend(this,e,!0)},CKEDITOR.dialogCommand.prototype={exec:function(t){t.openDialog(this.dialogName)},canUndo:!1,editorFocus:1},function(){var t=/^([a]|[^a])+$/,e=/^\d*$/,n=/^\d*(?:\.\d+)?$/,i=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,r=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,o=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1,CKEDITOR.VALIDATE_AND=2,CKEDITOR.dialog.validate={functions:function(){var t=arguments;return function(){var e,n,i=this&&this.getValue?this.getValue():t[0],r=CKEDITOR.VALIDATE_AND,o=[];for(n=0;n<t.length&&"function"==typeof t[n];n++)o.push(t[n]);n<t.length&&"string"==typeof t[n]&&(e=t[n],n++),n<t.length&&"number"==typeof t[n]&&(r=t[n]);var a=r==CKEDITOR.VALIDATE_AND;for(n=0;n<o.length;n++)a=r==CKEDITOR.VALIDATE_AND?a&&o[n](i):a||o[n](i);return!!a||e}},regex:function(t,e){return function(n){return n=this&&this.getValue?this.getValue():n,!!t.test(n)||e}},notEmpty:function(e){return this.regex(t,e)},integer:function(t){return this.regex(e,t)},number:function(t){return this.regex(n,t)},cssLength:function(t){return this.functions(function(t){return r.test(CKEDITOR.tools.trim(t))},t)},htmlLength:function(t){return this.functions(function(t){return i.test(CKEDITOR.tools.trim(t))},t)},inlineStyle:function(t){return this.functions(function(t){return o.test(CKEDITOR.tools.trim(t))},t)},equals:function(t,e){return this.functions(function(e){return e==t},e)},notEqual:function(t,e){return this.functions(function(e){return e!=t},e)}},CKEDITOR.on("instanceDestroyed",function(t){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var e;e=CKEDITOR.dialog._.currentTop;)e.hide();for(var n in E)E[n].remove();E={}}for(var i in t=t.editor._.storedDialogs)t[i].destroy()})}(),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(t,e){var n=null,i=CKEDITOR.dialog._.dialogDefinitions[t];if(null===CKEDITOR.dialog._.currentTop&&l(this),"function"==typeof i)n=(n=this._.storedDialogs||(this._.storedDialogs={}))[t]||(n[t]=new CKEDITOR.dialog(this,t)),e&&e.call(n,n),n.show();else{if("failed"==i)throw c(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+t+'" failed when loading definition.');"string"==typeof i&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(i),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[t]&&(CKEDITOR.dialog._.dialogDefinitions[t]="failed"),this.openDialog(t,e)},this,0,1)}return CKEDITOR.skin.loadPart("dialog"),n}})}(),CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(t){t.on("doubleclick",function(e){e.data.dialog&&t.openDialog(e.data.dialog)},null,null,999)}}),CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{af:1,ar:1,az:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,oc:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function(t){var e=this;t.addCommand("a11yHelp",{exec:function(){var n=t.langCode;n=e.availableLangs[n]?n:e.availableLangs[n.replace(/-.*/,"")]?n.replace(/-.*/,""):"en",CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(e.path+"dialogs/lang/"+n+".js"),function(){t.lang.a11yhelp=e.langEntries[n],t.openDialog("a11yHelp")})},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1}),t.setKeystroke(CKEDITOR.ALT+48,"a11yHelp"),CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js"),t.on("ariaEditorHelpLabel",function(e){e.data.label=t.lang.common.editorHelp})}}),CKEDITOR.plugins.add("about",{requires:"dialog",init:function(t){var e=t.addCommand("about",new CKEDITOR.dialogCommand("about"));e.modes={wysiwyg:1,source:1},e.canUndo=!1,e.readOnly=1,t.ui.addButton&&t.ui.addButton("About",{label:t.lang.about.title,command:"about",toolbar:"about"}),CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}}),CKEDITOR.plugins.add("basicstyles",{init:function(t){var e=0,n=function(n,r,o,a){if(a){a=new CKEDITOR.style(a);var s=i[o];s.unshift(a),t.attachStyleStateChange(a,function(e){!t.readOnly&&t.getCommand(o).setState(e)}),t.addCommand(o,new CKEDITOR.styleCommand(a,{contentForms:s})),t.ui.addButton&&t.ui.addButton(n,{label:r,command:o,toolbar:"basicstyles,"+(e+=10)})}},i={bold:["strong","b",["span",function(t){return"bold"==(t=t.styles["font-weight"])||700<=+t}]],italic:["em","i",["span",function(t){return"italic"==t.styles["font-style"]}]],underline:["u",["span",function(t){return"underline"==t.styles["text-decoration"]}]],strike:["s","strike",["span",function(t){return"line-through"==t.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},r=t.config,o=t.lang.basicstyles;n("Bold",o.bold,"bold",r.coreStyles_bold),n("Italic",o.italic,"italic",r.coreStyles_italic),n("Underline",o.underline,"underline",r.coreStyles_underline),n("Strike",o.strike,"strike",r.coreStyles_strike),n("Subscript",o.subscript,"subscript",r.coreStyles_subscript),n("Superscript",o.superscript,"superscript",r.coreStyles_superscript),t.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}}),CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"},CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"},CKEDITOR.config.coreStyles_underline={element:"u"},CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"},CKEDITOR.config.coreStyles_subscript={element:"sub"},CKEDITOR.config.coreStyles_superscript={element:"sup"},function(){var t={exec:function(t){var e=t.getCommand("blockquote").state,n=t.getSelection(),i=n&&n.getRanges()[0];if(i){var r=n.createBookmarks();if(CKEDITOR.env.ie){var o,a=r[0].startNode,s=r[0].endNode;if(a&&"blockquote"==a.getParent().getName())for(o=a;o=o.getNext();)if(o.type==CKEDITOR.NODE_ELEMENT&&o.isBlockBoundary()){a.move(o,!0);break}if(s&&"blockquote"==s.getParent().getName())for(o=s;o=o.getPrevious();)if(o.type==CKEDITOR.NODE_ELEMENT&&o.isBlockBoundary()){s.move(o);break}}if((l=i.createIterator()).enlargeBr=t.config.enterMode!=CKEDITOR.ENTER_BR,e==CKEDITOR.TRISTATE_OFF){for(a=[];e=l.getNextParagraph();)a.push(e);for(1>a.length&&(e=t.document.createElement(t.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),s=r.shift(),i.insertNode(e),e.append(new CKEDITOR.dom.text("\ufeff",t.document)),i.moveToBookmark(s),i.selectNodeContents(e),i.collapse(!0),s=i.createBookmark(),a.push(e),r.unshift(s)),o=a[0].getParent(),i=[],s=0;s<a.length;s++)e=a[s],o=o.getCommonAncestor(e.getParent());for(e={table:1,tbody:1,tr:1,ol:1,ul:1};e[o.getName()];)o=o.getParent();for(s=null;0<a.length;){for(e=a.shift();!e.getParent().equals(o);)e=e.getParent();e.equals(s)||i.push(e),s=e}for(;0<i.length;)if("blockquote"==(e=i.shift()).getName()){for(s=new CKEDITOR.dom.documentFragment(t.document);e.getFirst();)s.append(e.getFirst().remove()),a.push(s.getLast());s.replace(e)}else a.push(e);for((i=t.document.createElement("blockquote")).insertBefore(a[0]);0<a.length;)e=a.shift(),i.append(e)}else if(e==CKEDITOR.TRISTATE_ON){for(s=[],o={};e=l.getNextParagraph();){for(a=i=null;e.getParent();){if("blockquote"==e.getParent().getName()){i=e.getParent(),a=e;break}e=e.getParent()}i&&a&&!a.getCustomData("blockquote_moveout")&&(s.push(a),CKEDITOR.dom.element.setMarker(o,a,"blockquote_moveout",!0))}for(CKEDITOR.dom.element.clearAllMarkers(o),e=[],a=[],o={};0<s.length;)i=(l=s.shift()).getParent(),l.getPrevious()?l.getNext()?(l.breakParent(l.getParent()),a.push(l.getNext())):l.remove().insertAfter(i):l.remove().insertBefore(i),i.getCustomData("blockquote_processed")||(a.push(i),CKEDITOR.dom.element.setMarker(o,i,"blockquote_processed",!0)),e.push(l);for(CKEDITOR.dom.element.clearAllMarkers(o),s=a.length-1;0<=s;s--){i=a[s];t:{for(var l=0,c=(o=i).getChildCount(),u=void 0;l<c&&(u=o.getChild(l));l++)if(u.type==CKEDITOR.NODE_ELEMENT&&u.isBlockBoundary()){o=!1;break t}o=!0}o&&i.remove()}if(t.config.enterMode==CKEDITOR.ENTER_BR)for(i=!0;e.length;)if("div"==(l=e.shift()).getName()){for(s=new CKEDITOR.dom.documentFragment(t.document),!i||!l.getPrevious()||l.getPrevious().type==CKEDITOR.NODE_ELEMENT&&l.getPrevious().isBlockBoundary()||s.append(t.document.createElement("br")),i=l.getNext()&&!(l.getNext().type==CKEDITOR.NODE_ELEMENT&&l.getNext().isBlockBoundary());l.getFirst();)l.getFirst().remove().appendTo(s);i&&s.append(t.document.createElement("br")),s.replace(l),i=!1}}n.selectBookmarks(r),t.focus()}},refresh:function(t,e){this.setState(t.elementPath(e.block||e.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(e){e.blockless||(e.addCommand("blockquote",t),e.ui.addButton&&e.ui.addButton("Blockquote",{label:e.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})}(),function(){function t(t,e,n){return e.type||(e.type="auto"),!(n&&!1===t.fire("beforePaste",e)||!e.dataValue&&e.dataTransfer.isEmpty())&&(e.dataValue||(e.dataValue=""),CKEDITOR.env.gecko&&"drop"==e.method&&t.toolbox&&t.once("afterPaste",function(){t.toolbox.focus()}),t.fire("paste",e))}function e(e){function n(t){return{type:t,canUndo:"cut"==t,startDisabled:!0,fakeKeystroke:"cut"==t?CKEDITOR.CTRL+88:CKEDITOR.CTRL+67,exec:function(){var t;"cut"==this.type&&s();var n=this.type;if(CKEDITOR.env.ie)t=a(n);else try{t=e.document.$.execCommand(n,!1,null)}catch(e){t=!1}return t||e.showNotification(e.lang.clipboard[this.type+"Error"]),t}}}function i(){return{canUndo:!1,async:!0,fakeKeystroke:CKEDITOR.CTRL+86,exec:function(e,n){var i=this,r=function(n,r){n&&t(e,n,!!r),e.fire("afterCommandExec",{name:"paste",command:i,returnValue:!!n})};"string"==typeof n?r({dataValue:n,method:"paste",dataTransfer:h.initPasteDataTransfer()},1):e.getClipboardData(r)}}}function r(){p=1,setTimeout(function(){p=0},100)}function o(){f=1,setTimeout(function(){f=0},10)}function a(t){var n=e.document,i=n.getBody(),r=!1,o=function(){r=!0};return i.on(t,o),7<CKEDITOR.env.version?n.$.execCommand(t):n.$.selection.createRange().execCommand(t),i.removeListener(t,o),r}function s(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var t,n,i,r=e.getSelection();r.getType()==CKEDITOR.SELECTION_ELEMENT&&(t=r.getSelectedElement())&&(n=r.getRanges()[0],(i=e.document.createText("")).insertBefore(t),n.setStartBefore(i),n.setEndAfter(t),r.selectRanges([n]),setTimeout(function(){t.getParent()&&(i.remove(),r.selectElement(t))},0))}}function l(){if("paste"==h.mainPasteEvent)return e.fire("beforePaste",{type:"auto",method:"paste"}),!1;e.focus(),r();var t=e.focusManager;return t.lock(),e.editable().fire(h.mainPasteEvent)&&!a("paste")?(t.unlock(),!1):(t.unlock(),!0)}function c(n){var i={type:"auto",method:"paste",dataTransfer:h.initPasteDataTransfer(n)};i.dataTransfer.cacheData();var r=!1!==e.fire("beforePaste",i);r&&h.canClipboardApiBeTrusted(i.dataTransfer,e)?(n.data.preventDefault(),setTimeout(function(){t(e,i)},0)):function(t,n){var i,r=e.document,o=e.editable(),a=function(t){t.cancel()};if(!r.getById("cke_pastebin")){var s=e.getSelection(),l=s.createBookmarks();CKEDITOR.env.ie&&s.root.fire("selectionchange");var c=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!o.is("body")||CKEDITOR.env.ie?"div":"body",r);c.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var u=0;r=r.getWindow(),CKEDITOR.env.webkit?(o.append(c),c.addClass("cke_editable"),o.is("body")||(u=(u="static"!=o.getComputedStyle("position")?o:CKEDITOR.dom.element.get(o.$.offsetParent)).getDocumentPosition().y)):o.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(c),c.setStyles({position:"absolute",top:r.getScrollPosition().y-u+10+"px",width:"1px",height:Math.max(1,r.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0}),CKEDITOR.env.safari&&c.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text")),(u=c.getParent().isReadOnly())?(c.setOpacity(0),c.setAttribute("contenteditable",!0)):c.setStyle("ltr"==e.config.contentsLangDirection?"left":"right","-10000px"),e.on("selectionChange",a,null,null,0),(CKEDITOR.env.webkit||CKEDITOR.env.gecko)&&(i=o.once("blur",a,null,null,-100)),u&&c.focus(),(u=new CKEDITOR.dom.range(c)).selectNodeContents(c);var d=u.select();CKEDITOR.env.ie&&(i=o.once("blur",function(){e.lockSelection(d)}));var h=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){var t;CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=h),i&&i.removeListener(),CKEDITOR.env.ie&&o.focus(),s.selectBookmarks(l),c.remove(),CKEDITOR.env.webkit&&(t=c.getFirst())&&t.is&&t.hasClass("Apple-style-span")&&(c=t),e.removeListener("selectionChange",a),n(c.getHtml())},0)}}(0,function(n){i.dataValue=n.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/gi,""),r&&t(e,i)})}function u(){if("wysiwyg"==e.mode){var t=d("paste");e.getCommand("cut").setState(d("cut")),e.getCommand("copy").setState(d("copy")),e.getCommand("paste").setState(t),e.fire("pasteState",t)}}function d(t){if(g&&t in{paste:1,cut:1})return CKEDITOR.TRISTATE_DISABLED;if("paste"==t)return CKEDITOR.TRISTATE_OFF;var n=(t=e.getSelection()).getRanges();return t.getType()==CKEDITOR.SELECTION_NONE||1==n.length&&n[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF}var h=CKEDITOR.plugins.clipboard,f=0,p=0,g=0;e.on("key",function(t){if("wysiwyg"==e.mode)switch(t.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:t=e.editable(),r(),"paste"==h.mainPasteEvent&&t.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:e.fire("saveSnapshot"),setTimeout(function(){e.fire("saveSnapshot")},50)}}),e.on("contentDom",function(){var t,n=e.editable();if(CKEDITOR.plugins.clipboard.isCustomCopyCutSupported){var i=function(t){e.readOnly&&"cut"==t.name||h.initPasteDataTransfer(t,e),t.data.preventDefault()};n.on("copy",i),n.on("cut",i),n.on("cut",function(){e.readOnly||e.extractSelectedHtml()},null,null,999)}n.on(h.mainPasteEvent,function(t){"beforepaste"==h.mainPasteEvent&&f||c(t)}),"beforepaste"==h.mainPasteEvent&&(n.on("paste",function(t){p||(r(),t.data.preventDefault(),c(t),a("paste")||e.openDialog("paste"))}),n.on("contextmenu",o,null,null,0),n.on("beforepaste",function(t){!t.data||t.data.$.ctrlKey||t.data.$.shiftKey||o()},null,null,0)),n.on("beforecut",function(){!f&&s()}),n.attachListener(CKEDITOR.env.ie?n:e.document.getDocumentElement(),"mouseup",function(){t=setTimeout(function(){u()},0)}),e.on("destroy",function(){clearTimeout(t)}),n.on("keyup",u)}),e.on("selectionChange",function(t){g=t.data.selection.getRanges()[0].checkReadOnly(),u()}),e.contextMenu&&e.contextMenu.addListener(function(t,e){return g=e.getRanges()[0].checkReadOnly(),{cut:d("cut"),copy:d("copy"),paste:d("paste")}}),function(){function t(t,n,i,r,o){var a=e.lang.clipboard[n];e.addCommand(n,i),e.ui.addButton&&e.ui.addButton(t,{label:a,command:n,toolbar:"clipboard,"+r}),e.addMenuItems&&e.addMenuItem(n,{label:a,command:n,group:"clipboard",order:o})}t("Cut","cut",n("cut"),10,1),t("Copy","copy",n("copy"),20,4),t("Paste","paste",i(),30,8)}(),e.getClipboardData=function(t,n){function i(t){t.removeListener(),t.cancel(),n(t.data)}function r(t){t.removeListener(),t.cancel(),s=!0,n({type:a,dataValue:t.data.dataValue,dataTransfer:t.data.dataTransfer,method:"paste"})}var o=!1,a="auto",s=!1;n||(n=t,t=null),e.on("paste",i,null,null,0),e.on("beforePaste",function(t){t.removeListener(),o=!0,a=t.data.type},null,null,1e3),!1===l()&&(e.removeListener("paste",i),o&&e.fire("pasteDialog",function(){this.customTitle=t&&t.title})?(e.on("pasteDialogCommit",r),e.on("dialogHide",function(t){t.removeListener(),t.data.removeListener("pasteDialogCommit",r),setTimeout(function(){s||n(null)},10)})):n(null))}}function n(t,e,n){e=CKEDITOR.htmlParser.fragment.fromHtml(e);var i=new CKEDITOR.htmlParser.basicWriter;return n.applyTo(e,!0,!1,t.activeEnterMode),e.writeHtml(i),i.getHtml()}function i(t){t.data.preventDefault(),t.data.$.dataTransfer.dropEffect="none"}function r(e){var n=CKEDITOR.plugins.clipboard;e.on("contentDom",function(){function i(n,i,r){i.select(),t(e,{dataTransfer:r,method:"drop"},1),r.sourceEditor.fire("saveSnapshot"),r.sourceEditor.editable().extractHtmlFromRange(n),r.sourceEditor.getSelection().selectRanges([n]),r.sourceEditor.fire("saveSnapshot")}function r(i,r){i.select(),t(e,{dataTransfer:r,method:"drop"},1),n.resetDragDataTransfer()}function o(t,n,i){var r={$:t.data.$,target:t.data.getTarget()};n&&(r.dragRange=n),i&&(r.dropRange=i),!1===e.fire(t.name,r)&&t.data.preventDefault()}function a(t){return t.type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent()),t.getChildCount()}var s=e.editable(),l=CKEDITOR.plugins.clipboard.getDropTarget(e),c=e.ui.space("top"),u=e.ui.space("bottom");n.preventDefaultDropOnElement(c),n.preventDefaultDropOnElement(u),s.attachListener(l,"dragstart",o),s.attachListener(e,"dragstart",n.resetDragDataTransfer,n,null,1),s.attachListener(e,"dragstart",function(t){n.initDragDataTransfer(t,e)},null,null,2),s.attachListener(e,"dragstart",function(){var t=n.dragRange=e.getSelection().getRanges()[0];CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(n.dragStartContainerChildCount=t?a(t.startContainer):null,n.dragEndContainerChildCount=t?a(t.endContainer):null)},null,null,100),s.attachListener(l,"dragend",o),s.attachListener(e,"dragend",n.initDragDataTransfer,n,null,1),s.attachListener(e,"dragend",n.resetDragDataTransfer,n,null,100),s.attachListener(l,"dragover",function(t){var e=t.data.getTarget();e&&e.is&&e.is("html")?t.data.preventDefault():CKEDITOR.env.ie&&CKEDITOR.plugins.clipboard.isFileApiSupported&&t.data.$.dataTransfer.types.contains("Files")&&t.data.preventDefault()}),s.attachListener(l,"drop",function(t){if(!t.data.$.defaultPrevented&&(t.data.preventDefault(),!(i=t.data.getTarget()).isReadOnly()||i.type==CKEDITOR.NODE_ELEMENT&&i.is("html"))){var i=n.getRangeAtDropPosition(t,e),r=n.dragRange;i&&o(t,r,i)}},null,null,9999),s.attachListener(e,"drop",n.initDragDataTransfer,n,null,1),s.attachListener(e,"drop",function(t){if(t=t.data){var o=t.dropRange,a=t.dragRange,s=t.dataTransfer;s.getTransferType(e)==CKEDITOR.DATA_TRANSFER_INTERNAL?setTimeout(function(){n.internalDrop(a,o,s,e)},0):s.getTransferType(e)==CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?i(a,o,s):r(o,s)}},null,null,9999)})}CKEDITOR.plugins.add("clipboard",{requires:"dialog",init:function(t){var i,o=function(){var t={};return{get:function(e){return"plain-text"==e?t.plainText||(t.plainText=new CKEDITOR.filter("br")):"semantic-content"==e?((e=t.semanticContent)||((e=new CKEDITOR.filter).allow({$1:{elements:function(){var t,e={};for(t in CKEDITOR.dtd)"$"!=t.charAt(0)&&"div"!=t&&"span"!=t&&(e[t]=1);return e}(),attributes:!0,styles:!1,classes:!1}}),e=t.semanticContent=e),e):e?new CKEDITOR.filter(e):null}}}();if(t.config.forcePasteAsPlainText?i="plain-text":t.config.pasteFilter?i=t.config.pasteFilter:!CKEDITOR.env.webkit||"pasteFilter"in t.config||(i="semantic-content"),t.pasteFilter=o.get(i),e(t),r(t),CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js")),CKEDITOR.env.gecko){var a,s=["image/png","image/jpeg","image/gif"];t.on("paste",function(e){var n=e.data,i=n.dataTransfer;if(!n.dataValue&&"paste"==n.method&&i&&1==i.getFilesCount()&&a!=i.id&&(i=i.getFile(0),-1!=CKEDITOR.tools.indexOf(s,i.type))){var r=new FileReader;r.addEventListener("load",function(){e.data.dataValue='<img src="'+r.result+'" />',t.fire("paste",e.data)},!1),r.addEventListener("abort",function(){t.fire("paste",e.data)},!1),r.addEventListener("error",function(){t.fire("paste",e.data)},!1),r.readAsDataURL(i),a=n.dataTransfer.id,e.stop()}},null,null,1)}t.on("paste",function(e){if(e.data.dataTransfer||(e.data.dataTransfer=new CKEDITOR.plugins.clipboard.dataTransfer),!e.data.dataValue){var n=e.data.dataTransfer,i=n.getData("text/html");i?(e.data.dataValue=i,e.data.type="html"):(i=n.getData("text/plain"))&&(e.data.dataValue=t.editable().transformPlainTextToHtml(i),e.data.type="text")}},null,null,1),t.on("paste",function(t){var e=t.data.dataValue,n=CKEDITOR.dtd.$block;if(-1<e.indexOf("Apple-")&&(e=e.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=t.data.type&&(e=e.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(t,e){return e.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")})),-1<e.indexOf('<br class="Apple-interchange-newline">')&&(t.data.startsWithEOL=1,t.data.preSniffing="html",e=e.replace(/<br class="Apple-interchange-newline">/,"")),e=e.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1")),e.match(/^<[^<]+cke_(editable|contents)/i)){var i,r,o=new CKEDITOR.dom.element("div");for(o.setHtml(e);1==o.getChildCount()&&(i=o.getFirst())&&i.type==CKEDITOR.NODE_ELEMENT&&(i.hasClass("cke_editable")||i.hasClass("cke_contents"));)o=r=i;r&&(e=r.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?e=e.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(e,i){return i.toLowerCase()in n?(t.data.preSniffing="html","<"+i):e}):CKEDITOR.env.webkit?e=e.replace(/<\/(\w+)><div><br><\/div>$/,function(e,i){return i in n?(t.data.endsWithEOL=1,"</"+i+">"):e}):CKEDITOR.env.gecko&&(e=e.replace(/(\s)<br>$/,"$1")),t.data.dataValue=e},null,null,3),t.on("paste",function(e){var i,r=(e=e.data).type,a=e.dataValue,s=t.config.clipboard_defaultContentType||"html",l=e.dataTransfer.getTransferType(t);"htmlifiedtext"==(i="html"==r||"html"==e.preSniffing?"html":function(t){if(CKEDITOR.env.webkit){if(!t.match(/^[^<]*$/g)&&!t.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!t.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!t.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else{if(!CKEDITOR.env.gecko)return"html";if(!t.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}return"htmlifiedtext"}(a))&&(a=function(t,e){function n(t){return CKEDITOR.tools.repeat("</p><p>",~~(t/2))+(1==t%2?"<br>":"")}return(e=(e=e.replace(/\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>")).replace(/<\/?[A-Z]+>/g,function(t){return t.toLowerCase()})).match(/^[^<]$/)?e:(CKEDITOR.env.webkit&&-1<e.indexOf("<div>")&&((e=e.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>")).match(/<div>(<br>|)<\/div>/)&&(e="<p>"+e.replace(/(<div>(<br>|)<\/div>)+/g,function(t){return n(t.split("</div><div>").length+1)})+"</p>"),e=(e=e.replace(/<\/div><div>/g,"<br>")).replace(/<\/?div>/g,"")),CKEDITOR.env.gecko&&t.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(e=e.replace(/^<br><br>$/,"<br>")),-1<e.indexOf("<br><br>")&&(e="<p>"+e.replace(/(<br>){2,}/g,function(t){return n(t.length/4)})+"</p>")),function(t,e){return t.enterMode==CKEDITOR.ENTER_BR?e=e.replace(/(<\/p><p>)+/g,function(t){return CKEDITOR.tools.repeat("<br>",t.length/7*2)}).replace(/<\/?p>/g,""):t.enterMode==CKEDITOR.ENTER_DIV&&(e=e.replace(/<(\/)?p>/g,"<$1div>")),e}(t,e))}(t.config,a)),"text"==r&&"html"==i?a=n(t,a,o.get("plain-text")):l==CKEDITOR.DATA_TRANSFER_EXTERNAL&&t.pasteFilter&&!e.dontFilter&&(a=n(t,a,t.pasteFilter)),e.startsWithEOL&&(a='<br data-cke-eol="1">'+a),e.endsWithEOL&&(a+='<br data-cke-eol="1">'),"auto"==r&&(r="html"==i||"html"==s?"html":"text"),e.type=r,e.dataValue=a,delete e.preSniffing,delete e.startsWithEOL,delete e.endsWithEOL},null,null,6),t.on("paste",function(e){(e=e.data).dataValue&&(t.insertHtml(e.dataValue,e.type,e.range),setTimeout(function(){t.fire("afterPaste")},0))},null,null,1e3),t.on("pasteDialog",function(e){setTimeout(function(){t.openDialog("paste",e.data)},0)})}}),CKEDITOR.plugins.clipboard={isCustomCopyCutSupported:!CKEDITOR.env.ie&&!CKEDITOR.env.iOS,isCustomDataTypesSupported:!CKEDITOR.env.ie,isFileApiSupported:!CKEDITOR.env.ie||9<CKEDITOR.env.version,mainPasteEvent:CKEDITOR.env.ie&&!CKEDITOR.env.edge?"beforepaste":"paste",canClipboardApiBeTrusted:function(t,e){return!!(t.getTransferType(e)!=CKEDITOR.DATA_TRANSFER_EXTERNAL||CKEDITOR.env.chrome&&!t.isEmpty()||CKEDITOR.env.gecko&&(t.getData("text/html")||t.getFilesCount()))},getDropTarget:function(t){var e=t.editable();return CKEDITOR.env.ie&&9>CKEDITOR.env.version||e.isInline()?e:t.document},fixSplitNodesAfterDrop:function(t,e,n,i){function r(t,n,i){var r=t;if(r.type==CKEDITOR.NODE_TEXT&&(r=t.getParent()),r.equals(n)&&i!=n.getChildCount())return t=e.startContainer.getChild(e.startOffset-1),n=e.startContainer.getChild(e.startOffset),t&&t.type==CKEDITOR.NODE_TEXT&&n&&n.type==CKEDITOR.NODE_TEXT&&(i=t.getLength(),t.setText(t.getText()+n.getText()),n.remove(),e.setStart(t,i),e.collapse(!0)),!0}var o=e.startContainer;"number"==typeof i&&"number"==typeof n&&o.type==CKEDITOR.NODE_ELEMENT&&(r(t.startContainer,o,n)||r(t.endContainer,o,i))},isDropRangeAffectedByDragRange:function(t,e){var n=e.startContainer,i=e.endOffset;return!!(t.endContainer.equals(n)&&t.endOffset<=i||t.startContainer.getParent().equals(n)&&t.startContainer.getIndex()<i||t.endContainer.getParent().equals(n)&&t.endContainer.getIndex()<i)},internalDrop:function(e,n,i,r){var o,a,s=CKEDITOR.plugins.clipboard,l=r.editable();r.fire("saveSnapshot"),r.fire("lockSnapshot",{dontUpdate:1}),CKEDITOR.env.ie&&10>CKEDITOR.env.version&&this.fixSplitNodesAfterDrop(e,n,s.dragStartContainerChildCount,s.dragEndContainerChildCount),(a=this.isDropRangeAffectedByDragRange(e,n))||(o=e.createBookmark(!1)),s=n.clone().createBookmark(!1),a&&(o=e.createBookmark(!1)),e=o.startNode,n=o.endNode,a=s.startNode,n&&e.getPosition(a)&CKEDITOR.POSITION_PRECEDING&&n.getPosition(a)&CKEDITOR.POSITION_FOLLOWING&&a.insertBefore(e),(e=r.createRange()).moveToBookmark(o),l.extractHtmlFromRange(e,1),(n=r.createRange()).moveToBookmark(s),t(r,{dataTransfer:i,method:"drop",range:n},1),r.fire("unlockSnapshot")},getRangeAtDropPosition:function(t,e){var n=t.data.$,i=n.clientX,r=n.clientY,o=e.getSelection(!0).getRanges()[0],a=e.createRange();if(t.data.testRange)return t.data.testRange;if(document.caretRangeFromPoint)n=e.document.$.caretRangeFromPoint(i,r),a.setStart(CKEDITOR.dom.node(n.startContainer),n.startOffset),a.collapse(!0);else if(n.rangeParent)a.setStart(CKEDITOR.dom.node(n.rangeParent),n.rangeOffset),a.collapse(!0);else{if(CKEDITOR.env.ie&&8<CKEDITOR.env.version&&o&&e.editable().hasFocus)return o;if(!document.body.createTextRange)return null;e.focus(),n=e.document.getBody().$.createTextRange();try{for(var s=!1,l=0;20>l&&!s;l++){if(!s)try{n.moveToPoint(i,r-l),s=!0}catch(t){}if(!s)try{n.moveToPoint(i,r+l),s=!0}catch(t){}}if(s){var c="cke-temp-"+(new Date).getTime();n.pasteHTML('<span id="'+c+'">​</span>');var u=e.document.getById(c);a.moveToPosition(u,CKEDITOR.POSITION_BEFORE_START),u.remove()}else{var d=e.document.$.elementFromPoint(i,r),h=new CKEDITOR.dom.element(d);if(h.equals(e.editable())||"html"==h.getName())return o&&o.startContainer&&!o.startContainer.equals(e.editable())?o:null;i<h.getClientRect().left?a.setStartAt(h,CKEDITOR.POSITION_AFTER_START):a.setStartAt(h,CKEDITOR.POSITION_BEFORE_END),a.collapse(!0)}}catch(t){return null}}return a},initDragDataTransfer:function(t,e){var n=t.data.$?t.data.$.dataTransfer:null,i=new this.dataTransfer(n,e);n?this.dragData&&i.id==this.dragData.id?i=this.dragData:this.dragData=i:this.dragData?i=this.dragData:this.dragData=i,t.data.dataTransfer=i},resetDragDataTransfer:function(){this.dragData=null},initPasteDataTransfer:function(t,e){if(this.isCustomCopyCutSupported){if(t&&t.data&&t.data.$){var n=new this.dataTransfer(t.data.$.clipboardData,e);return this.copyCutData&&n.id==this.copyCutData.id?(n=this.copyCutData).$=t.data.$.clipboardData:this.copyCutData=n,n}return new this.dataTransfer(null,e)}return new this.dataTransfer(CKEDITOR.env.edge&&t&&t.data.$&&t.data.$.clipboardData||null,e)},preventDefaultDropOnElement:function(t){t&&t.on("dragover",i)}};var o=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?"cke/id":"Text";CKEDITOR.plugins.clipboard.dataTransfer=function(t,e){if(t&&(this.$=t),this._={metaRegExp:/^<meta.*?>/i,bodyRegExp:/<body(?:[\s\S]*?)>([\s\S]*)<\/body>/i,fragmentRegExp:/\x3c!--(?:Start|End)Fragment--\x3e/g,data:{},files:[],normalizeType:function(t){return"text"==(t=t.toLowerCase())||"text/plain"==t?"Text":"url"==t?"URL":t}},this.id=this.getData(o),this.id||(this.id="Text"==o?"":"cke-"+CKEDITOR.tools.getUniqueId()),"Text"!=o)try{this.$.setData(o,this.id)}catch(t){}e&&(this.sourceEditor=e,this.setData("text/html",e.getSelectedHtml(1)),"Text"==o||this.getData("text/plain")||this.setData("text/plain",e.getSelection().getSelectedText()))},CKEDITOR.DATA_TRANSFER_INTERNAL=1,CKEDITOR.DATA_TRANSFER_CROSS_EDITORS=2,CKEDITOR.DATA_TRANSFER_EXTERNAL=3,CKEDITOR.plugins.clipboard.dataTransfer.prototype={getData:function(t){t=this._.normalizeType(t);var e=this._.data[t];if(void 0===e||null===e||""===e)try{e=this.$.getData(t)}catch(t){}return void 0!==e&&null!==e&&""!==e||(e=""),"text/html"==t?(e=e.replace(this._.metaRegExp,""),(t=this._.bodyRegExp.exec(e))&&t.length&&(e=(e=t[1]).replace(this._.fragmentRegExp,""))):"Text"==t&&CKEDITOR.env.gecko&&this.getFilesCount()&&"file://"==e.substring(0,7)&&(e=""),e},setData:function(t,e){if(t=this._.normalizeType(t),this._.data[t]=e,CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"URL"==t||"Text"==t){"Text"==o&&"Text"==t&&(this.id=e);try{this.$.setData(t,e)}catch(t){}}},getTransferType:function(t){return this.sourceEditor?this.sourceEditor==t?CKEDITOR.DATA_TRANSFER_INTERNAL:CKEDITOR.DATA_TRANSFER_CROSS_EDITORS:CKEDITOR.DATA_TRANSFER_EXTERNAL},cacheData:function(){function t(t){t=i._.normalizeType(t);var e=i.getData(t);e&&(i._.data[t]=e)}if(this.$){var e,n,i=this;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(e=0;e<this.$.types.length;e++)t(this.$.types[e])}else t("Text"),t("URL");if(n=this._getImageFromClipboard(),this.$&&this.$.files||n){if(this._.files=[],this.$.files&&this.$.files.length)for(e=0;e<this.$.files.length;e++)this._.files.push(this.$.files[e]);0===this._.files.length&&n&&this._.files.push(n)}}},getFilesCount:function(){return this._.files.length?this._.files.length:this.$&&this.$.files&&this.$.files.length?this.$.files.length:this._getImageFromClipboard()?1:0},getFile:function(t){return this._.files.length?this._.files[t]:this.$&&this.$.files&&this.$.files.length?this.$.files[t]:0===t?this._getImageFromClipboard():void 0},isEmpty:function(){var t,e={};if(this.getFilesCount())return!1;for(t in this._.data)e[t]=1;if(this.$)if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(var n=0;n<this.$.types.length;n++)e[this.$.types[n]]=1}else e.Text=1,e.URL=1;for(t in"Text"!=o&&(e[o]=0),e)if(e[t]&&""!==this.getData(t))return!1;return!0},_getImageFromClipboard:function(){var t;if(this.$&&this.$.items&&this.$.items[0])try{if((t=this.$.items[0].getAsFile())&&t.type)return t}catch(t){}}}}(),function(){CKEDITOR.plugins.add("panel",{beforeInit:function(t){t.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}}),CKEDITOR.UI_PANEL="panel",CKEDITOR.ui.panel=function(t,e){e&&CKEDITOR.tools.extend(this,e),CKEDITOR.tools.extend(this,{className:"",css:[]}),this.id=CKEDITOR.tools.getNextId(),this.document=t,this.isFramed=this.forceIFrame||this.css.length,this._={blocks:{}}},CKEDITOR.ui.panel.handler={create:function(t){return new CKEDITOR.ui.panel(t)}};var t=CKEDITOR.addTemplate("panel",'<div lang="{langCode}" id="{id}" dir={dir} class="cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style="z-index:{z-index}" role="presentation">{frame}</div>'),e=CKEDITOR.addTemplate("panel-frame",'<iframe id="{id}" class="cke_panel_frame" role="presentation" frameborder="0" src="{src}"></iframe>'),n=CKEDITOR.addTemplate("panel-frame-inner",'<!DOCTYPE html><html class="cke_panel_container {env}" dir="{dir}" lang="{langCode}"><head>{css}</head><body class="cke_{dir}" style="margin:0;padding:0" onload="{onload}"></body></html>');CKEDITOR.ui.panel.prototype={render:function(i,r){this.getHolderElement=function(){if(!(e=this._.holder)){if(this.isFramed){var t=(e=this.document.getById(this.id+"_frame")).getParent(),e=e.getFrameDocument();CKEDITOR.env.iOS&&t.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"}),t=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0,this.onLoad&&this.onLoad()},this)),e.write(n.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+t+");"},o))),e.getWindow().$.CKEDITOR=CKEDITOR,e.on("keydown",function(t){var e=t.data.getKeystroke(),n=this.document.getById(this.id).getAttribute("dir");this._.onKeyDown&&!1===this._.onKeyDown(e)?t.data.preventDefault():(27==e||e==("rtl"==n?39:37))&&this.onEscape&&!1===this.onEscape(e)&&t.data.preventDefault()},this),(e=e.getBody()).unselectable(),CKEDITOR.env.air&&CKEDITOR.tools.callFunction(t)}else e=this.document.getById(this.id);this._.holder=e}return e};var o={editorId:i.id,id:this.id,langCode:i.langCode,dir:i.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":i.config.baseFloatZIndex+1};if(this.isFramed){var a=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";o.frame=e.output({id:this.id+"_frame",src:a})}return a=t.output(o),r&&r.push(a),a},addBlock:function(t,e){return e=this._.blocks[t]=e instanceof CKEDITOR.ui.panel.block?e:new CKEDITOR.ui.panel.block(this.getHolderElement(),e),this._.currentBlock||this.showBlock(t),e},getBlock:function(t){return this._.blocks[t]},showBlock:function(t){t=this._.blocks[t];var e=this._.currentBlock,n=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");return e&&e.hide(),this._.currentBlock=t,CKEDITOR.fire("ariaWidget",n),t._.focusIndex=-1,this._.onKeyDown=t.onKeyDown&&CKEDITOR.tools.bind(t.onKeyDown,t),t.show(),t},destroy:function(){this.element&&this.element.remove()}},CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(t,e){this.element=t.append(t.getDocument().createElement("div",{attributes:{tabindex:-1,class:"cke_panel_block"},styles:{display:"none"}})),e&&CKEDITOR.tools.extend(this,e),this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]}),this.keys={},this._.focusIndex=-1,this.element.disableContextMenu()},_:{markItem:function(t){-1!=t&&(t=this.element.getElementsByTag("a").getItem(this._.focusIndex=t),CKEDITOR.env.webkit&&t.getDocument().getWindow().focus(),t.focus(),this.onMark&&this.onMark(t))}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){this.onHide&&!0===this.onHide.call(this)||this.element.setStyle("display","none")},onKeyDown:function(t,e){switch(r=this.keys[t]){case"next":for(var n,i=this._.focusIndex,r=this.element.getElementsByTag("a");n=r.getItem(++i);)if(n.getAttribute("_cke_focus")&&n.$.offsetWidth){this._.focusIndex=i,n.focus();break}return!n&&!e&&(this._.focusIndex=-1,this.onKeyDown(t,1));case"prev":for(i=this._.focusIndex,r=this.element.getElementsByTag("a");0<i&&(n=r.getItem(--i));){if(n.getAttribute("_cke_focus")&&n.$.offsetWidth){this._.focusIndex=i,n.focus();break}n=null}return!n&&!e&&(this._.focusIndex=r.count(),this.onKeyDown(t,1));case"click":case"mouseup":return(n=0<=(i=this._.focusIndex)&&this.element.getElementsByTag("a").getItem(i))&&(n.$[r]?n.$[r]():n.$["on"+r]()),!1}return!0}}})}(),CKEDITOR.plugins.add("floatpanel",{requires:"panel"}),function(){function t(t,n,i,r,o){o=CKEDITOR.tools.genKey(n.getUniqueId(),i.getUniqueId(),t.lang.dir,t.uiColor||"",r.css||"",o||"");var a=e[o];return a||((a=e[o]=new CKEDITOR.ui.panel(n,r)).element=i.append(CKEDITOR.dom.element.createFromHtml(a.render(t),n)),a.element.setStyles({display:"none",position:"absolute"})),a}var e={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(e,n,i,r){function o(){c.hide()}i.forceIFrame=1,i.toolbarRelated&&e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(n=CKEDITOR.document.getById("cke_"+e.name));var a=n.getDocument(),s=(r=t(e,a,n,i,r||0)).element,l=s.getFirst(),c=this;s.disableContextMenu(),this.element=s,this._={editor:e,panel:r,parentElement:n,definition:i,document:a,iframe:l,children:[],dir:e.lang.dir,showBlockParams:null},e.on("mode",o),e.on("resize",o),a.getWindow().on("resize",function(){this.reposition()},this)},proto:{addBlock:function(t,e){return this._.panel.addBlock(t,e)},addListBlock:function(t,e){return this._.panel.addListBlock(t,e)},getBlock:function(t){return this._.panel.getBlock(t)},showBlock:function(t,e,n,i,r,o){var a=this._.panel,s=a.showBlock(t);this._.showBlockParams=[].slice.call(arguments),this.allowBlur(!1);var l=this._.editor.editable();this._.returnFocus=l.hasFocus?l:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement),this._.hideTimeout=0;var c=this.element,u=(l=this._.iframe,l=CKEDITOR.env.ie&&!CKEDITOR.env.edge?l:new CKEDITOR.dom.window(l.$.contentWindow),c.getDocument()),d=this._.parentElement.getPositionedAncestor(),h=e.getDocumentPosition(u),f=(u=d?d.getDocumentPosition(u):{x:0,y:0},"rtl"==this._.dir),p=h.x+(i||0)-u.x,g=h.y+(r||0)-u.y;!f||1!=n&&4!=n?f||2!=n&&3!=n||(p+=e.$.offsetWidth-1):p+=e.$.offsetWidth,3!=n&&4!=n||(g+=e.$.offsetHeight-1),this._.panel._.offsetParentId=e.getId(),c.setStyles({top:g+"px",left:0,display:""}),c.setOpacity(0),c.getFirst().removeStyle("width"),this._.editor.focusManager.add(l),this._.blurSet||(CKEDITOR.event.useCapture=!0,l.on("blur",function(t){function e(){delete this._.returnFocus,this.hide()}this.allowBlur()&&t.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(e,0,this)):e.call(this))},this),l.on("focus",function(){this._.focused=!0,this.hideChild(),this.allowBlur(!0)},this),CKEDITOR.env.iOS&&(l.on("touchstart",function(){clearTimeout(this._.hideTimeout)},this),l.on("touchend",function(){this._.hideTimeout=0,this.focus()},this)),CKEDITOR.event.useCapture=!1,this._.blurSet=1),a.onEscape=CKEDITOR.tools.bind(function(t){if(this.onEscape&&!1===this.onEscape(t))return!1},this),CKEDITOR.tools.setTimeout(function(){var t=CKEDITOR.tools.bind(function(){if((n=c).removeStyle("width"),s.autoSize){var t=s.element.getDocument();t=(CKEDITOR.env.webkit||CKEDITOR.env.edge?s.element:t.getBody()).$.scrollWidth,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<t&&(t+=(n.$.offsetWidth||0)-(n.$.clientWidth||0)+3),n.setStyle("width",t+10+"px"),t=s.element.$.scrollHeight,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<t&&(t+=(n.$.offsetHeight||0)-(n.$.clientHeight||0)+3),n.setStyle("height",t+"px"),a._.currentBlock.element.setStyle("display","none").removeStyle("display")}else n.removeStyle("height");f&&(p-=c.$.offsetWidth),c.setStyle("left",p+"px"),t=a.element.getWindow();var e,n=c.$.getBoundingClientRect(),i=(t=t.getViewPaneSize(),n.width||n.right-n.left),r=n.height||n.bottom-n.top,l=f?n.right:t.width-n.left,u=f?t.width-n.right:n.left;f?l<i&&(p=u>i?p+i:t.width>i?p-n.left:p-n.right+t.width):l<i&&(p=u>i?p-i:t.width>i?p-n.right+t.width:p-n.left),i=n.top,t.height-n.top<r&&(g=i>r?g-r:t.height>r?g-n.bottom+t.height:g-n.top),CKEDITOR.env.ie&&("html"==(t=n=new CKEDITOR.dom.element(c.$.offsetParent)).getName()&&(t=t.getDocument().getBody()),"rtl"==t.getComputedStyle("direction")&&(p=CKEDITOR.env.ie8Compat?p-2*c.getDocument().getDocumentElement().$.scrollLeft:p-(n.$.scrollWidth-n.$.clientWidth))),(e=(n=c.getFirst()).getCustomData("activePanel"))&&e.onHide&&e.onHide.call(this,1),n.setCustomData("activePanel",this),c.setStyles({top:g+"px",left:p+"px"}),c.setOpacity(1),o&&o()},this);a.isLoaded?t():a.onLoad=t,CKEDITOR.tools.setTimeout(function(){var t=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus(),s.element.focus(),CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=t),this.allowBlur(!0),this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this),this.visible=1,this.onShow&&this.onShow.call(this)},reposition:function(){var t=this._.showBlockParams;this.visible&&this._.showBlockParams&&(this.hide(),this.showBlock.apply(this,t))},focus:function(){if(CKEDITOR.env.webkit){var t=CKEDITOR.document.getActive();t&&!t.equals(this._.iframe)&&t.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var t=this._.iframe.getFrameDocument().getActive();t&&t.is("a")&&(this._.lastFocused=t)},hide:function(t){!this.visible||this.onHide&&!0===this.onHide.call(this)||(this.hideChild(),CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur(),this.element.setStyle("display","none"),this.visible=0,this.element.getFirst().removeCustomData("activePanel"),(t=t&&this._.returnFocus)&&(CKEDITOR.env.webkit&&t.type&&t.getWindow().$.focus(),t.focus()),delete this._.lastFocused,this._.showBlockParams=null,this._.editor.fire("panelHide",this))},allowBlur:function(t){var e=this._.panel;return void 0!==t&&(e.allowBlur=t),e.allowBlur},showAsChild:function(t,e,n,i,r,o){this._.activeChild==t&&t._.panel._.offsetParentId==n.getId()||(this.hideChild(),t.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=t,this._.focused=!1,t.showBlock(e,n,i,r,o),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){t.element.getChild(0).$.style.cssText+=""},100))},hideChild:function(t){var e=this._.activeChild;e&&(delete e.onHide,delete this._.activeChild,e.hide(),t&&this.focus())}}}),CKEDITOR.on("instanceDestroyed",function(){var t,n=CKEDITOR.tools.isEmpty(CKEDITOR.instances);for(t in e){var i=e[t];n?i.destroy():i.element.hide()}n&&(e={})})}(),CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(t){for(var e=t.config.menu_groups.split(","),n=t._.menuGroups={},i=t._.menuItems={},r=0;r<e.length;r++)n[e[r]]=r+1;t.addMenuGroup=function(t,e){n[t]=e||100},t.addMenuItem=function(t,e){n[e.group]&&(i[t]=new CKEDITOR.menuItem(this,t,e))},t.addMenuItems=function(t){for(var e in t)this.addMenuItem(e,t[e])},t.getMenuItem=function(t){return i[t]},t.removeMenuItem=function(t){delete i[t]}}}),function(){var t='<span class="cke_menuitem"><a id="{id}" class="cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href="{href}" title="{title}" tabindex="-1" _cke_focus=1 hidefocus="true" role="{role}" aria-label="{label}" aria-describedby="{id}_description" aria-haspopup="{hasPopup}" aria-disabled="{disabled}" {ariaChecked} draggable="false"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(t+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(t+=' onblur="this.style.cssText = this.style.cssText;" ondragstart="return false;"'),t=t+' onmouseover="CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout="CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},{index}); return false;">';var e=CKEDITOR.addTemplate("menuItem",t+'<span class="cke_menubutton_inner"><span class="cke_menubutton_icon"><span class="cke_button_icon cke_button__{iconName}_icon" style="{iconStyle}"></span></span><span class="cke_menubutton_label">{label}</span>{shortcutHtml}{arrowHtml}</span></a><span id="{id}_description" class="cke_voice_label" aria-hidden="false">{ariaShortcut}</span></span>'),n=CKEDITOR.addTemplate("menuArrow",'<span class="cke_menuarrow"><span>{label}</span></span>'),i=CKEDITOR.addTemplate("menuShortcut",'<span class="cke_menubutton_label cke_menubutton_shortcut">{shortcut}</span>');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(t,e){e=this._.definition=e||{},this.id=CKEDITOR.tools.getNextId(),this.editor=t,this.items=[],this._.listeners=[],this._.level=e.level||1;var n=CKEDITOR.tools.extend({},e.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),i=n.block.attributes=n.attributes||{};!i.role&&(i.role="menu"),this._.panelDefinition=n},_:{onShow:function(){var t=this.editor.getSelection(),e=t&&t.getStartElement(),n=this.editor.elementPath(),i=this._.listeners;this.removeAll();for(var r=0;r<i.length;r++){var o=i[r](e,t,n);if(o)for(var a in o){var s=this.editor.getMenuItem(a);!s||s.command&&!this.editor.getCommand(s.command).state||(s.state=o[a],this.add(s))}}},onClick:function(t){this.hide(),t.onClick?t.onClick():t.command&&this.editor.execCommand(t.command)},onEscape:function(t){var e=this.parent;return e?e._.panel.hideChild(1):27==t&&this.hide(1),!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(t){var e=this._.subMenu,n=this.items[t];if(n=n.getItems&&n.getItems()){for(var i in e?e.removeAll():((e=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0))).parent=this,e._.onClick=CKEDITOR.tools.bind(this._.onClick,this)),n){var r=this.editor.getMenuItem(i);r&&(r.state=n[i],e.add(r))}var o=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+String(t));setTimeout(function(){e.show(o,2)},0)}else this._.panel.hideChild(1)}},proto:{add:function(t){t.order||(t.order=this.items.length),this.items.push(t)},removeAll:function(){this.items=[]},show:function(t,e,n,i){if(this.parent||(this._.onShow(),this.items.length)){e=e||("rtl"==this.editor.lang.dir?2:1);var r=this.items,o=this.editor,a=this._.panel,s=this._.element;a||((a=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level)).onEscape=CKEDITOR.tools.bind(function(t){if(!1===this._.onEscape(t))return!1},this),a.onShow=function(){a._.panel.getHolderElement().getParent().addClass("cke").addClass("cke_reset_all")},a.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this),(s=a.addBlock(this.id,this._.panelDefinition.block)).autoSize=!0,(l=s.keys)[40]="next",l[9]="next",l[38]="prev",l[CKEDITOR.SHIFT+9]="prev",l["rtl"==o.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click",l[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(l[13]="mouseup"),(l=(s=this._.element=s.element).getDocument()).getBody().setStyle("overflow","hidden"),l.getElementsByTag("html").getItem(0).setStyle("overflow","hidden"),this._.itemOverFn=CKEDITOR.tools.addFunction(function(t){clearTimeout(this._.showSubTimeout),this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,o.config.menu_subMenuDelay||400,this,[t])},this),this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this),this._.itemClickFn=CKEDITOR.tools.addFunction(function(t){var e=this.items[t];e.state==CKEDITOR.TRISTATE_DISABLED?this.hide(1):e.getItems?this._.showSubMenu(t):this._.onClick(e)},this)),r.sort(function(t,e){return t.group<e.group?-1:t.group>e.group?1:t.order<e.order?-1:t.order>e.order?1:0});for(var l=['<div class="cke_menu'+((l=o.elementPath())&&l.direction()!=o.lang.dir?" cke_mixed_dir_content":"")+'" role="presentation">'],c=r.length,u=c&&r[0].group,d=0;d<c;d++){var h=r[d];u!=h.group&&(l.push('<div class="cke_menuseparator" role="separator"></div>'),u=h.group),h.render(this,d,l)}l.push("</div>"),s.setHtml(l.join("")),CKEDITOR.ui.fire("ready",this),this.parent?this.parent._.panel.showAsChild(a,this.id,t,e,n,i):a.showBlock(this.id,t,e,n,i),o.fire("menuShow",[a])}},addListener:function(t){this._.listeners.push(t)},hide:function(t){this._.onHide&&this._.onHide(),this._.panel&&this._.panel.hide(t)}}}),CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(t,e,n){CKEDITOR.tools.extend(this,n,{order:0,className:"cke_menubutton__"+e}),this.group=t._.menuGroups[this.group],this.editor=t,this.name=e},proto:{render:function(t,r,o){var a,s,l=t.id+String(r),c=void 0===this.state?CKEDITOR.TRISTATE_OFF:this.state,u="",d=this.editor,h=c==CKEDITOR.TRISTATE_ON?"on":c==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in{menuitemcheckbox:1,menuitemradio:1}&&(u=' aria-checked="'+(c==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var f=this.getItems,p="&#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",g=this.name;this.icon&&!/\./.test(this.icon)&&(g=this.icon),this.command&&(a=d.getCommand(this.command),(a=d.getCommandKeystroke(a))&&(s=CKEDITOR.tools.keystrokeToString(d.lang.common.keyboard,a))),t={id:l,name:this.name,iconName:g,label:this.label,cls:this.className||"",state:h,hasPopup:f?"true":"false",disabled:c==CKEDITOR.TRISTATE_DISABLED,title:this.label+(s?" ("+s.display+")":""),ariaShortcut:s?d.lang.common.keyboardShortcut+" "+s.aria:"",href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:t._.itemOverFn,moveOutFn:t._.itemOutFn,clickFn:t._.itemClickFn,index:r,iconStyle:CKEDITOR.skin.getIconStyle(g,"rtl"==this.editor.lang.dir,g==this.icon?null:this.icon,this.iconOffset),shortcutHtml:s?i.output({shortcut:s.display}):"",arrowHtml:f?n.output({label:p}):"",role:this.role?this.role:"menuitem",ariaChecked:u},e.output(t,o)}}})}(),CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(t){this.base.call(this,t,{panel:{className:"cke_menu_panel",attributes:{"aria-label":t.lang.contextmenu.options}}})},proto:{addTarget:function(t,e){if(t.on("contextmenu",function(t){t=t.data;var i=CKEDITOR.env.webkit?n:CKEDITOR.env.mac?t.$.metaKey:t.$.ctrlKey;if(!e||!i){t.preventDefault(),CKEDITOR.env.mac&&CKEDITOR.env.webkit&&(i=this.editor,(r=new CKEDITOR.dom.elementPath(t.getTarget(),i.editable()).contains(function(t){return t.hasAttribute("contenteditable")},!0))&&"false"==r.getAttribute("contenteditable")&&i.getSelection().fake(r));var r=t.getTarget().getDocument(),o=t.getTarget().getDocument().getDocumentElement(),a=(i=!r.equals(CKEDITOR.document),r=r.getWindow().getScrollPosition(),i?t.$.clientX:t.$.pageX||r.x+t.$.clientX),s=i?t.$.clientY:t.$.pageY||r.y+t.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(o,null,a,s)},CKEDITOR.env.ie?200:0,this)}},this),CKEDITOR.env.webkit){var n,i=function(){n=0};t.on("keydown",function(t){n=CKEDITOR.env.mac?t.data.$.metaKey:t.data.$.ctrlKey}),t.on("keyup",i),t.on("contextmenu",i)}},open:function(t,e,n,i){this.editor.focus(),t=t||CKEDITOR.document.getDocumentElement(),this.editor.selectionChange(1),this.show(t,e,n,i)}}})},beforeInit:function(t){var e=t.contextMenu=new CKEDITOR.plugins.contextMenu(t);t.on("contentDom",function(){e.addTarget(t.editable(),!1!==t.config.browserContextMenuOnCtrl)}),t.addCommand("contextMenu",{exec:function(){t.contextMenu.open(t.document.getBody())}}),t.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu"),t.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}}),function(){function t(t,n){function r(e){var n;(e=l.list[e]).equals(t.editable())||"true"==e.getAttribute("contenteditable")?((n=t.createRange()).selectNodeContents(e),n=n.select()):(n=t.getSelection()).selectElement(e),CKEDITOR.env.ie&&t.fire("selectionChange",{selection:n,path:new CKEDITOR.dom.elementPath(e)}),t.focus()}function o(){a&&a.setHtml('<span class="cke_path_empty">&nbsp;</span>'),delete l.list}var a,s=t.ui.spaceId("path"),l=t._.elementsPath,c=l.idBase;n.html+='<span id="'+s+'_label" class="cke_voice_label">'+t.lang.elementspath.eleLabel+'</span><span id="'+s+'" class="cke_path" role="group" aria-labelledby="'+s+'_label"><span class="cke_path_empty">&nbsp;</span></span>',t.on("uiReady",function(){var e=t.ui.space("path");e&&t.focusManager.add(e,1)}),l.onClick=r;var u=CKEDITOR.tools.addFunction(r),d=CKEDITOR.tools.addFunction(function(e,n){var i,o=l.idBase;switch(n=new CKEDITOR.dom.event(n),i="rtl"==t.lang.dir,n.getKeystroke()){case i?39:37:case 9:return(i=CKEDITOR.document.getById(o+(e+1)))||(i=CKEDITOR.document.getById(o+"0")),i.focus(),!1;case i?37:39:case CKEDITOR.SHIFT+9:return(i=CKEDITOR.document.getById(o+(e-1)))||(i=CKEDITOR.document.getById(o+(l.list.length-1))),i.focus(),!1;case 27:return t.focus(),!1;case 13:case 32:return r(e),!1}return!0});t.on("selectionChange",function(){for(var e,n=[],r=l.list=[],o=[],h=l.filters,f=!0,p=t.elementPath().elements,g=p.length;g--;){var m=p[g],v=0;e=m.data("cke-display-name")?m.data("cke-display-name"):m.data("cke-real-element-type")?m.data("cke-real-element-type"):m.getName(),(f=m.hasAttribute("contenteditable")?"true"==m.getAttribute("contenteditable"):f)||m.hasAttribute("contenteditable")||(v=1);for(var y=0;y<h.length;y++){var E=h[y](m,e);if(!1===E){v=1;break}e=E||e}v||(r.unshift(m),o.unshift(e))}for(r=r.length,h=0;h<r;h++)e=o[h],f=t.lang.elementspath.eleTitle.replace(/%1/,e),e=i.output({id:c+h,label:f,text:e,jsTitle:"javascript:void('"+e+"')",index:h,keyDownFn:d,clickFn:u}),n.unshift(e);a||(a=CKEDITOR.document.getById(s)),(o=a).setHtml(n.join("")+'<span class="cke_path_empty">&nbsp;</span>'),t.fire("elementsPathUpdate",{space:o})}),t.on("readOnly",o),t.on("contentDomUnload",o),t.addCommand("elementsPathFocus",e.toolbarFocus),t.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}var e={toolbarFocus:{editorFocus:!1,readOnly:1,exec:function(t){(t=CKEDITOR.document.getById(t._.elementsPath.idBase+"0"))&&t.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}}},n="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(n+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(n+=' onblur="this.style.cssText = this.style.cssText;"');var i=CKEDITOR.addTemplate("pathItem",'<a id="{id}" href="{jsTitle}" tabindex="-1" class="cke_path_item" title="{label}"'+n+' hidefocus="true"  onkeydown="return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick="CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role="button" aria-label="{label}">{text}</a>');CKEDITOR.plugins.add("elementspath",{init:function(e){e._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+"_",filters:[]},e.on("uiSpace",function(n){"bottom"==n.data.space&&t(e,n.data)})}})}(),function(){function t(t,i){var r,o;i.on("refresh",function(t){var i,r=[e];for(i in t.data.states)r.push(t.data.states[i]);this.setState(CKEDITOR.tools.search(r,n)?n:e)},i,null,100),i.on("exec",function(e){r=t.getSelection(),o=r.createBookmarks(1),e.data||(e.data={}),e.data.done=!1},i,null,0),i.on("exec",function(){t.forceNextSelectionCheck(),r.selectBookmarks(o)},i,null,100)}var e=CKEDITOR.TRISTATE_DISABLED,n=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(e){var n=CKEDITOR.plugins.indent.genericDefinition;t(e,e.addCommand("indent",new n(!0))),t(e,e.addCommand("outdent",new n)),e.ui.addButton&&(e.ui.addButton("Indent",{label:e.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),e.ui.addButton("Outdent",{label:e.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"})),e.on("dirChanged",function(t){var n=e.createRange(),i=t.data.node;n.setStartBefore(i),n.setEndAfter(i);for(var r,o=new CKEDITOR.dom.walker(n);r=o.next();)if(r.type==CKEDITOR.NODE_ELEMENT)if(!r.equals(i)&&r.getDirection())n.setStartAfter(r),o=new CKEDITOR.dom.walker(n);else{var a=e.config.indentClasses;if(a)for(var s="ltr"==t.data.dir?["_rtl",""]:["","_rtl"],l=0;l<a.length;l++)r.hasClass(a[l]+s[0])&&(r.removeClass(a[l]+s[0]),r.addClass(a[l]+s[1]));a=r.getStyle("margin-right"),s=r.getStyle("margin-left"),a?r.setStyle("margin-left",a):r.removeStyle("margin-left"),s?r.setStyle("margin-right",s):r.removeStyle("margin-right")}})}}),CKEDITOR.plugins.indent={genericDefinition:function(t){this.isIndent=!!t,this.startDisabled=!this.isIndent},specificDefinition:function(t,e,n){this.name=e,this.editor=t,this.jobs={},this.enterBr=t.config.enterMode==CKEDITOR.ENTER_BR,this.isIndent=!!n,this.relatedGlobal=n?"indent":"outdent",this.indentKey=n?9:CKEDITOR.SHIFT+9,this.database={}},registerCommands:function(t,e){t.on("pluginsLoaded",function(){for(var t in e)!function(t,e){var n,i=t.getCommand(e.relatedGlobal);for(n in e.jobs)i.on("exec",function(i){i.data.done||(t.fire("lockSnapshot"),e.execJob(t,n)&&(i.data.done=!0),t.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(e.database))},this,null,n),i.on("refresh",function(i){i.data.states||(i.data.states={}),i.data.states[e.name+"@"+n]=e.refreshJob(t,n,i.data.path)},this,null,n);t.addFeature(e)}(this,e[t])})}},CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}},CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(t,n){var i=this.jobs[n];if(i.state!=e)return i.exec.call(this,t)},refreshJob:function(t,n,i){return n=this.jobs[n],t.activeFilter.checkFeature(this)?n.state=n.refresh.call(this,t,i):n.state=e,n.state},getContext:function(t){return t.contains(this.context)}}}(),function(){function t(t){function i(e){for(var i=r.startContainer,l=r.endContainer;i&&!i.getParent().equals(e);)i=i.getParent();for(;l&&!l.getParent().equals(e);)l=l.getParent();if(!i||!l)return!1;for(var c=i,u=(i=[],!1);!u;)c.equals(l)&&(u=!0),i.push(c),c=c.getNext();if(1>i.length)return!1;for(c=e.getParents(!0),l=0;l<c.length;l++)if(c[l].getName&&s[c[l].getName()]){e=c[l];break}c=o.isIndent?1:-1,l=i[0],i=i[i.length-1];var d,h=(u=CKEDITOR.plugins.list.listToArray(e,a))[i.getCustomData("listarray_index")].indent;for(l=l.getCustomData("listarray_index");l<=i.getCustomData("listarray_index");l++)if(u[l].indent+=c,0<c){var f=u[l].parent;u[l].parent=new CKEDITOR.dom.element(f.getName(),f.getDocument())}for(l=i.getCustomData("listarray_index")+1;l<u.length&&u[l].indent>h;l++)u[l].indent+=c;if(i=CKEDITOR.plugins.list.arrayToList(u,a,null,t.config.enterMode,e.getDirection()),!o.isIndent&&(d=e.getParent())&&d.is("li")){var p,g=[];for(l=(c=i.listNode.getChildren()).count()-1;0<=l;l--)(p=c.getItem(l))&&p.is&&p.is("li")&&g.push(p)}if(i&&i.listNode.replace(e),g&&g.length)for(l=0;l<g.length;l++){for(p=e=g[l];(p=p.getNext())&&p.is&&p.getName()in s;)CKEDITOR.env.needsNbspFiller&&!e.getFirst(n)&&e.append(r.document.createText(" ")),e.append(p);e.insertAfter(d)}return i&&t.fire("contentDomInvalidated"),!0}for(var r,o=this,a=this.database,s=this.context,l=((l=t.getSelection())&&l.getRanges()).createIterator();r=l.getNextRange();){for(var c=r.getCommonAncestor();c&&(c.type!=CKEDITOR.NODE_ELEMENT||!s[c.getName()]);){if(t.editable().equals(c)){c=!1;break}c=c.getParent()}if(c||(c=r.startPath().contains(s))&&r.setEndAt(c,CKEDITOR.POSITION_BEFORE_END),!c){var u=r.getEnclosedNode();u&&u.type==CKEDITOR.NODE_ELEMENT&&u.getName()in s&&(r.setStartAt(u,CKEDITOR.POSITION_AFTER_START),r.setEndAt(u,CKEDITOR.POSITION_BEFORE_END),c=u)}if(c&&r.startContainer.type==CKEDITOR.NODE_ELEMENT&&r.startContainer.getName()in s&&((u=new CKEDITOR.dom.walker(r)).evaluator=e,r.startContainer=u.next()),c&&r.endContainer.type==CKEDITOR.NODE_ELEMENT&&r.endContainer.getName()in s&&((u=new CKEDITOR.dom.walker(r)).evaluator=e,r.endContainer=u.previous()),c)return i(c)}return 0}function e(t){return t.type==CKEDITOR.NODE_ELEMENT&&t.is("li")}function n(t){return i(t)&&r(t)}var i=CKEDITOR.dom.walker.whitespaces(!0),r=CKEDITOR.dom.walker.bookmark(!1,!0),o=CKEDITOR.TRISTATE_DISABLED,a=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(e){function n(e){i.specificDefinition.apply(this,arguments),this.requiredContent=["ul","ol"],e.on("key",function(t){if("wysiwyg"==e.mode&&t.data.keyCode==this.indentKey){var n=this.getContext(e.elementPath());!n||this.isIndent&&CKEDITOR.plugins.indentList.firstItemInPath(this.context,e.elementPath(),n)||(e.execCommand(this.relatedGlobal),t.cancel())}},this),this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(t,e){var n=this.getContext(e),i=CKEDITOR.plugins.indentList.firstItemInPath(this.context,e,n);return n&&this.isIndent&&!i?a:o}:function(t,e){return!this.getContext(e)||this.isIndent?o:a},exec:CKEDITOR.tools.bind(t,this)}}var i=CKEDITOR.plugins.indent;i.registerCommands(e,{indentlist:new n(e,"indentlist",!0),outdentlist:new n(e,"outdentlist")}),CKEDITOR.tools.extend(n.prototype,i.specificDefinition.prototype,{context:{ol:1,ul:1}})}}),CKEDITOR.plugins.indentList={},CKEDITOR.plugins.indentList.firstItemInPath=function(t,n,i){var r=n.contains(e);return i||(i=n.contains(t)),i&&r&&r.equals(i.getFirst(e))}}(),function(){function t(t,e,n){function i(n){!(l=u[n?"getFirst":"getLast"]())||l.is&&l.isBlockBoundary()||!(c=e.root[n?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||c.is&&c.isBlockBoundary({br:1})||t.document.createElement("br")[n?"insertBefore":"insertAfter"](l)}for(var r=CKEDITOR.plugins.list.listToArray(e.root,n),o=[],a=0;a<e.contents.length;a++){var s=e.contents[a];(s=s.getAscendant("li",!0))&&!s.getCustomData("list_item_processed")&&(o.push(s),CKEDITOR.dom.element.setMarker(n,s,"list_item_processed",!0))}for(s=null,a=0;a<o.length;a++)r[s=o[a].getCustomData("listarray_index")].indent=-1;for(a=s+1;a<r.length;a++)if(r[a].indent>r[a-1].indent+1){for(o=r[a-1].indent+1-r[a].indent,s=r[a].indent;r[a]&&r[a].indent>=s;)r[a].indent+=o,a++;a--}var l,c,u=CKEDITOR.plugins.list.arrayToList(r,n,null,t.config.enterMode,e.root.getAttribute("dir")).listNode;i(!0),i(),u.replace(e.root),t.fire("contentDomInvalidated")}function e(t,e){this.name=t,this.context=this.type=e,this.allowedContent=e+" li",this.requiredContent=e}function n(t,e,n,i){for(var r,o;r=t[i?"getLast":"getFirst"](f);)(o=r.getDirection(1))!==e.getDirection(1)&&r.setAttribute("dir",o),r.remove(),n?r[i?"insertBefore":"insertAfter"](n):e.append(r,i)}function i(t){function e(e){var i=t[e?"getPrevious":"getNext"](u);i&&i.type==CKEDITOR.NODE_ELEMENT&&i.is(t.getName())&&(n(t,i,null,!e),t.remove(),t=i)}e(),e(1)}function r(t){return t.type==CKEDITOR.NODE_ELEMENT&&(t.getName()in CKEDITOR.dtd.$block||t.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[t.getName()]["#"]}function o(t,e,r){t.fire("saveSnapshot"),r.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var o=r.extractContents();e.trim(!1,!0);var s=e.createBookmark(),l=(c=new CKEDITOR.dom.elementPath(e.startContainer)).block,c=c.lastElement.getAscendant("li",1)||l,h=(f=new CKEDITOR.dom.elementPath(r.startContainer)).contains(CKEDITOR.dtd.$listItem),f=f.contains(CKEDITOR.dtd.$list);for(l?(l=l.getBogus())&&l.remove():f&&(l=f.getPrevious(u))&&d(l)&&l.remove(),(l=o.getLast())&&l.type==CKEDITOR.NODE_ELEMENT&&l.is("br")&&l.remove(),(l=e.startContainer.getChild(e.startOffset))?o.insertBefore(l):e.startContainer.append(o),h&&(o=a(h))&&(c.contains(h)?(n(o,h.getParent(),h),o.remove()):c.append(o));r.checkStartOfBlock()&&r.checkEndOfBlock()&&(o=(f=r.startPath()).block);)o.is("li")&&(c=o.getParent(),o.equals(c.getLast(u))&&o.equals(c.getFirst(u))&&(o=c)),r.moveToPosition(o,CKEDITOR.POSITION_BEFORE_START),o.remove();r=r.clone(),o=t.editable(),r.setEndAt(o,CKEDITOR.POSITION_BEFORE_END),(r=new CKEDITOR.dom.walker(r)).evaluator=function(t){return u(t)&&!d(t)},(r=r.next())&&r.type==CKEDITOR.NODE_ELEMENT&&r.getName()in CKEDITOR.dtd.$list&&i(r),e.moveToBookmark(s),e.select(),t.fire("saveSnapshot")}function a(t){return(t=t.getLast(u))&&t.type==CKEDITOR.NODE_ELEMENT&&t.getName()in s?t:null}var s={ol:1,ul:1},l=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(),u=function(t){return!(l(t)||c(t))},d=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(t,e,n,i,r){if(!s[t.getName()])return[];i||(i=0),n||(n=[]);for(var o=0,a=t.getChildCount();o<a;o++){var l=t.getChild(o);if(l.type==CKEDITOR.NODE_ELEMENT&&l.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(l,e,n,i+1),"li"==l.$.nodeName.toLowerCase()){var c={parent:t,indent:i,element:l,contents:[]};r?c.grandparent=r:(c.grandparent=t.getParent(),c.grandparent&&"li"==c.grandparent.$.nodeName.toLowerCase()&&(c.grandparent=c.grandparent.getParent())),e&&CKEDITOR.dom.element.setMarker(e,l,"listarray_index",n.length),n.push(c);for(var u,d=0,h=l.getChildCount();d<h;d++)(u=l.getChild(d)).type==CKEDITOR.NODE_ELEMENT&&s[u.getName()]?CKEDITOR.plugins.list.listToArray(u,e,n,i+1,c.grandparent):c.contents.push(u)}}return n},arrayToList:function(t,e,n,i,r){if(n||(n=0),!t||t.length<n+1)return null;for(var o,a,l,d=t[n].parent.getDocument(),h=new CKEDITOR.dom.documentFragment(d),f=null,p=n,g=Math.max(t[n].indent,0),m=null,v=i==CKEDITOR.ENTER_P?"p":"div";;){var y=t[p];if(o=y.grandparent,a=y.element.getDirection(1),y.indent==g){for(f&&t[p].parent.getName()==f.getName()||(f=t[p].parent.clone(!1,1),r&&f.setAttribute("dir",r),h.append(f)),m=f.append(y.element.clone(0,1)),a!=f.getDirection(1)&&m.setAttribute("dir",a),o=0;o<y.contents.length;o++)m.append(y.contents[o].clone(1,1));p++}else if(y.indent==Math.max(g,0)+1)y=t[p-1].element.getDirection(1),p=CKEDITOR.plugins.list.arrayToList(t,null,p,i,y!=a?a:null),!m.getChildCount()&&CKEDITOR.env.needsNbspFiller&&7>=d.$.documentMode&&m.append(d.createText(" ")),m.append(p.listNode),p=p.nextIndex;else{if(-1!=y.indent||n||!o)return null;s[o.getName()]?(m=y.element.clone(!1,!0),a!=o.getDirection(1)&&m.setAttribute("dir",a)):m=new CKEDITOR.dom.documentFragment(d),f=o.getDirection(1)!=a;var E,b,C=y.element,T=C.getAttribute("class"),w=C.getAttribute("style"),I=m.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(i!=CKEDITOR.ENTER_BR||f||w||T),O=y.contents.length;for(o=0;o<O;o++)if(E=y.contents[o],c(E)&&1<O)I?b=E.clone(1,1):m.append(E.clone(1,1));else if(E.type==CKEDITOR.NODE_ELEMENT&&E.isBlockBoundary()){f&&!E.getDirection()&&E.setAttribute("dir",a),l=E;var D=C.getAttribute("style");D&&l.setAttribute("style",D.replace(/([^;])$/,"$1;")+(l.getAttribute("style")||"")),T&&E.addClass(T),l=null,b&&(m.append(b),b=null),m.append(E.clone(1,1))}else I?(l||(l=d.createElement(v),m.append(l),f&&l.setAttribute("dir",a)),w&&l.setAttribute("style",w),T&&l.setAttribute("class",T),b&&(l.append(b),b=null),l.append(E.clone(1,1))):m.append(E.clone(1,1));b&&((l||m).append(b),b=null),m.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&p!=t.length-1&&(CKEDITOR.env.needsBrFiller&&(a=m.getLast())&&a.type==CKEDITOR.NODE_ELEMENT&&a.is("br")&&a.remove(),(a=m.getLast(u))&&a.type==CKEDITOR.NODE_ELEMENT&&a.is(CKEDITOR.dtd.$block)||m.append(d.createElement("br"))),"div"!=(a=m.$.nodeName.toLowerCase())&&"p"!=a||m.appendBogus(),h.append(m),f=null,p++}if(l=null,t.length<=p||Math.max(t[p].indent,0)<g)break}if(e)for(t=h.getFirst();t;){if(t.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(e,t),t.getName()in CKEDITOR.dtd.$listItem&&(d=r=i=void 0,i=(n=t).getDirection()))){for(r=n.getParent();r&&!(d=r.getDirection());)r=r.getParent();i==d&&n.removeAttribute("dir")}t=t.getNextSourceNode()}return{listNode:h,nextIndex:p}}};var h=/^h[1-6]$/,f=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);e.prototype={exec:function(e){this.refresh(e,e.elementPath());var n=e.config,r=e.getSelection(),o=r&&r.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF)if((l=e.editable()).getFirst(u)){var a=1==o.length&&o[0];(n=a&&a.getEnclosedNode())&&n.is&&this.type==n.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else n.enterMode==CKEDITOR.ENTER_BR?l.appendBogus():o[0].fixBlock(1,n.enterMode==CKEDITOR.ENTER_P?"p":"div"),r.selectRanges(o);n=r.createBookmarks(!0);for(var l=[],c={},d=(o=o.createIterator(),0);(a=o.getNextRange())&&++d;){var f=(b=a.getBoundaryNodes()).startNode,p=b.endNode;for(f.type==CKEDITOR.NODE_ELEMENT&&"td"==f.getName()&&a.setStartAt(b.startNode,CKEDITOR.POSITION_AFTER_START),p.type==CKEDITOR.NODE_ELEMENT&&"td"==p.getName()&&a.setEndAt(b.endNode,CKEDITOR.POSITION_BEFORE_END),(a=a.createIterator()).forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;b=a.getNextParagraph();)if(!b.getCustomData("list_block")){CKEDITOR.dom.element.setMarker(c,b,"list_block",1),f=(m=e.elementPath(b)).elements,p=0;for(var g,m=m.blockLimit,v=f.length-1;0<=v&&(g=f[v]);v--)if(s[g.getName()]&&m.contains(g)){m.removeCustomData("list_group_object_"+d),(f=g.getCustomData("list_group_object"))?f.contents.push(b):(f={root:g,contents:[b]},l.push(f),CKEDITOR.dom.element.setMarker(c,g,"list_group_object",f)),p=1;break}p||((p=m).getCustomData("list_group_object_"+d)?p.getCustomData("list_group_object_"+d).contents.push(b):(f={root:p,contents:[b]},CKEDITOR.dom.element.setMarker(c,p,"list_group_object_"+d,f),l.push(f)))}}for(g=[];0<l.length;)if(f=l.shift(),this.state==CKEDITOR.TRISTATE_OFF)if(s[f.root.getName()]){for(o=e,d=f,f=c,a=g,p=CKEDITOR.plugins.list.listToArray(d.root,f),m=[],b=0;b<d.contents.length;b++)(v=(v=d.contents[b]).getAscendant("li",!0))&&!v.getCustomData("list_item_processed")&&(m.push(v),CKEDITOR.dom.element.setMarker(f,v,"list_item_processed",!0));v=d.root.getDocument();for(var y=void 0,E=void 0,b=0;b<m.length;b++){var C=m[b].getCustomData("listarray_index");(y=p[C].parent).is(this.type)||(E=v.createElement(this.type),y.copyAttributes(E,{start:1,type:1}),E.removeStyle("list-style-type"),p[C].parent=E)}for(f=CKEDITOR.plugins.list.arrayToList(p,f,null,o.config.enterMode),p=void 0,m=f.listNode.getChildCount(),b=0;b<m&&(p=f.listNode.getChild(b));b++)p.getName()==this.type&&a.push(p);f.listNode.replace(d.root),o.fire("contentDomInvalidated")}else{for(p=e,b=g,m=(a=f).contents,o=a.root.getDocument(),d=[],1==m.length&&m[0].equals(a.root)&&(f=o.createElement("div"),m[0].moveChildren&&m[0].moveChildren(f),m[0].append(f),m[0]=f),a=a.contents[0].getParent(),v=0;v<m.length;v++)a=a.getCommonAncestor(m[v].getParent());for(y=p.config.useComputedState,p=f=void 0,y=void 0===y||y,v=0;v<m.length;v++)for(E=m[v];C=E.getParent();){if(C.equals(a)){d.push(E),!p&&E.getDirection()&&(p=1),E=E.getDirection(y),null!==f&&(f=f&&f!=E?null:E);break}E=C}if(!(1>d.length)){for(m=d[d.length-1].getNext(),v=o.createElement(this.type),b.push(v),y=b=void 0;d.length;)b=d.shift(),y=o.createElement("li"),(E=b).is("pre")||h.test(E.getName())||"false"==E.getAttribute("contenteditable")?b.appendTo(y):(b.copyAttributes(y),f&&b.getDirection()&&(y.removeStyle("direction"),y.removeAttribute("dir")),b.moveChildren(y),b.remove()),y.appendTo(v);f&&p&&v.setAttribute("dir",f),m?v.insertBefore(m):v.appendTo(a)}}else this.state==CKEDITOR.TRISTATE_ON&&s[f.root.getName()]&&t.call(this,e,f,c);for(v=0;v<g.length;v++)i(g[v]);CKEDITOR.dom.element.clearAllMarkers(c),r.selectBookmarks(n),e.focus()},refresh:function(t,e){var n=e.contains(s,1),i=e.blockLimit||e.root;n&&i.contains(n)?this.setState(n.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(t){t.blockless||(t.addCommand("numberedlist",new e("numberedlist","ol")),t.addCommand("bulletedlist",new e("bulletedlist","ul")),t.ui.addButton&&(t.ui.addButton("NumberedList",{label:t.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),t.ui.addButton("BulletedList",{label:t.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),t.on("key",function(e){var n,i=e.data.domEvent.getKey();if("wysiwyg"==t.mode&&i in{8:1,46:1}){var l=t.getSelection().getRanges()[0],c=l&&l.startPath();if(l&&l.collapsed){var h,f=8==i,p=t.editable(),g=new CKEDITOR.dom.walker(l.clone());if(g.evaluator=function(t){return u(t)&&!d(t)},g.guard=function(t,e){return!(e&&t.type==CKEDITOR.NODE_ELEMENT&&t.is("table"))},i=l.clone(),f)if((h=c.contains(s))&&l.checkBoundaryOfElement(h,CKEDITOR.START)&&(h=h.getParent())&&h.is("li")&&(h=a(h))?(n=h,h=h.getPrevious(u),i.moveToPosition(h&&d(h)?h:n,CKEDITOR.POSITION_BEFORE_START)):(g.range.setStartAt(p,CKEDITOR.POSITION_AFTER_START),g.range.setEnd(l.startContainer,l.startOffset),(h=g.previous())&&h.type==CKEDITOR.NODE_ELEMENT&&(h.getName()in s||h.is("li"))&&(h.is("li")||(g.range.selectNodeContents(h),g.reset(),g.evaluator=r,h=g.previous()),n=h,i.moveToElementEditEnd(n),i.moveToPosition(i.endPath().block,CKEDITOR.POSITION_BEFORE_END))),n)o(t,i,l),e.cancel();else{var m=c.contains(s);m&&l.checkBoundaryOfElement(m,CKEDITOR.START)&&(n=m.getFirst(u),l.checkBoundaryOfElement(n,CKEDITOR.START)&&(h=m.getPrevious(u),a(n)?h&&(l.moveToElementEditEnd(h),l.select()):t.execCommand("outdent"),e.cancel()))}else if(n=c.contains("li")){if(g.range.setEndAt(p,CKEDITOR.POSITION_BEFORE_END),f=(p=n.getLast(u))&&r(p)?p:n,c=0,(h=g.next())&&h.type==CKEDITOR.NODE_ELEMENT&&h.getName()in s&&h.equals(p)?(c=1,h=g.next()):l.checkBoundaryOfElement(f,CKEDITOR.END)&&(c=2),c&&h){if((l=l.clone()).moveToElementEditStart(h),1==c&&(i.optimize(),!i.startContainer.equals(n))){for(n=i.startContainer;n.is(CKEDITOR.dtd.$inline);)m=n,n=n.getParent();m&&i.moveToPosition(m,CKEDITOR.POSITION_AFTER_END)}2==c&&(i.moveToPosition(i.endPath().block,CKEDITOR.POSITION_BEFORE_END),l.endPath().block&&l.moveToPosition(l.endPath().block,CKEDITOR.POSITION_AFTER_START)),o(t,i,l),e.cancel()}}else g.range.setEndAt(p,CKEDITOR.POSITION_BEFORE_END),(h=g.next())&&h.type==CKEDITOR.NODE_ELEMENT&&h.is(s)&&(h=h.getFirst(u),c.block&&l.checkStartOfBlock()&&l.checkEndOfBlock()?(c.block.remove(),l.moveToElementEditStart(h),l.select()):a(h)?(l.moveToElementEditStart(h),l.select()):((l=l.clone()).moveToElementEditStart(h),o(t,i,l)),e.cancel());setTimeout(function(){t.selectionChange(1)})}}}))}})}(),function(){function t(t,e,n){n=t.config.forceEnterMode||n,"wysiwyg"==t.mode&&(e||(e=t.activeEnterMode),t.elementPath().isContextFor("p")||(e=CKEDITOR.ENTER_BR,n=1),t.fire("saveSnapshot"),e==CKEDITOR.ENTER_BR?o(t,e,null,n):a(t,e,null,n),t.fire("saveSnapshot"))}function e(t){for(var e=(t=t.getSelection().getRanges(!0)).length-1;0<e;e--)t[e].deleteContents();return t[0]}CKEDITOR.plugins.add("enterkey",{init:function(e){e.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(e){t(e)}}),e.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(e){t(e,e.activeShiftEnterMode,1)}}),e.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var n=CKEDITOR.dom.walker.whitespaces(),i=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(t,r,a,l){if(a=a||e(t)){var c,u=(a=function(t){var e=t.startContainer.getAscendant(function(t){return t.type==CKEDITOR.NODE_ELEMENT&&"true"==t.getAttribute("contenteditable")},!0);return t.root.equals(e)?t:((e=new CKEDITOR.dom.range(e)).moveToRange(t),e)}(a)).document,d=a.checkStartOfBlock(),h=a.checkEndOfBlock(),f=t.elementPath(a.startContainer),p=f.block,g=r==CKEDITOR.ENTER_DIV?"div":"p";if(d&&h){if(p&&(p.is("li")||p.getParent().is("li"))){p.is("li")||(p=p.getParent()),c=(a=p.getParent()).getParent(),l=!p.hasPrevious();var m=!p.hasNext(),v=(g=t.getSelection()).createBookmarks(),y=(d=p.getDirection(1),h=p.getAttribute("class"),p.getAttribute("style")),E=c.getDirection(1)!=d;if(t=t.enterMode!=CKEDITOR.ENTER_BR||E||y||h,c.is("li"))l||m?(l&&m&&a.remove(),p[m?"insertAfter":"insertBefore"](c)):p.breakParent(c);else{if(t)f.block.is("li")?(c=u.createElement(r==CKEDITOR.ENTER_P?"p":"div"),E&&c.setAttribute("dir",d),y&&c.setAttribute("style",y),h&&c.setAttribute("class",h),p.moveChildren(c)):c=f.block,l||m?c[l?"insertBefore":"insertAfter"](a):(p.breakParent(a),c.insertAfter(a));else if(p.appendBogus(!0),l||m)for(;u=p[l?"getFirst":"getLast"]();)u[l?"insertBefore":"insertAfter"](a);else for(p.breakParent(a);u=p.getLast();)u.insertAfter(a);p.remove()}return void g.selectBookmarks(v)}if(p&&p.getParent().is("blockquote"))return p.breakParent(p.getParent()),p.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||p.getPrevious().remove(),p.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||p.getNext().remove(),a.moveToElementEditStart(p),void a.select()}else if(p&&p.is("pre")&&!h)return void o(t,r,a,l);if(d=a.splitBlock(g)){if(r=d.previousBlock,p=d.nextBlock,f=d.wasStartOfBlock,t=d.wasEndOfBlock,p?(v=p.getParent()).is("li")&&(p.breakParent(v),p.move(p.getNext(),1)):r&&(v=r.getParent())&&v.is("li")&&(r.breakParent(v),v=r.getNext(),a.moveToElementEditStart(v),r.move(r.getPrevious())),f||t){if(r?(r.is("li")||!s.test(r.getName())&&!r.is("pre"))&&(c=r.clone()):p&&(c=p.clone()),c?l&&!c.is("li")&&c.renameNode(g):v&&v.is("li")?c=v:(c=u.createElement(g),r&&(m=r.getDirection())&&c.setAttribute("dir",m)),u=d.elementPath)for(l=0,g=u.elements.length;l<g&&!(v=u.elements[l]).equals(u.block)&&!v.equals(u.blockLimit);l++)CKEDITOR.dtd.$removeEmpty[v.getName()]&&(v=v.clone(),c.moveChildren(v),c.append(v));c.appendBogus(),c.getParent()||a.insertNode(c),c.is("li")&&c.removeAttribute("value"),!CKEDITOR.env.ie||!f||t&&r.getChildCount()||(a.moveToElementEditStart(t?r:c),a.select()),a.moveToElementEditStart(f&&!t?p:c)}else p.is("li")&&((c=a.clone()).selectNodeContents(p),(c=new CKEDITOR.dom.walker(c)).evaluator=function(t){return!(i(t)||n(t)||t.type==CKEDITOR.NODE_ELEMENT&&t.getName()in CKEDITOR.dtd.$inline&&!(t.getName()in CKEDITOR.dtd.$empty))},(v=c.next())&&v.type==CKEDITOR.NODE_ELEMENT&&v.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?u.createElement("br"):u.createText(" ")).insertBefore(v)),p&&a.moveToElementEditStart(p);a.select(),a.scrollIntoView()}}},enterBr:function(t,n,i,r){if(i=i||e(t)){var o=i.document,l=i.checkEndOfBlock(),c=new CKEDITOR.dom.elementPath(t.getSelection().getStartElement()),u=c.block,d=u&&c.block.getName();r||"li"!=d?(!r&&l&&s.test(d)?(l=u.getDirection())?((o=o.createElement("div")).setAttribute("dir",l),o.insertAfter(u),i.setStart(o,0)):(o.createElement("br").insertAfter(u),CKEDITOR.env.gecko&&o.createText("").insertAfter(u),i.setStartAt(u.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(t="pre"==d&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?o.createText("\r"):o.createElement("br"),i.deleteContents(),i.insertNode(t),CKEDITOR.env.needsBrFiller?(o.createText("\ufeff").insertAfter(t),l&&(u||c.blockLimit).appendBogus(),t.getNext().$.nodeValue="",i.setStartAt(t.getNext(),CKEDITOR.POSITION_AFTER_START)):i.setStartAt(t,CKEDITOR.POSITION_AFTER_END)),i.collapse(!0),i.select(),i.scrollIntoView()):a(t,n,i,r)}}};var r=CKEDITOR.plugins.enterkey,o=r.enterBr,a=r.enterBlock,s=/^h[1-6]$/}(),function(){function t(t,e){var n={},i=[],r={nbsp:" ",shy:"­",gt:">",lt:"<",amp:"&",apos:"'",quot:'"'};if(t=t.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(t,o){var a=e?"&"+o+";":r[o];return n[a]=e?r[o]:"&"+o+";",i.push(a),""}),!e&&t){t=t.split(",");var o,a=document.createElement("div");for(a.innerHTML="&"+t.join(";&")+";",o=a.innerHTML,a=null,a=0;a<o.length;a++){var s=o.charAt(a);n[s]="&"+t[a]+";",i.push(s)}}return n.regex=i.join(e?"|":""),n}CKEDITOR.plugins.add("entities",{afterInit:function(e){function n(t){return l[t]}function i(t){return"force"!=r.entities_processNumerical&&a[t]?a[t]:"&#"+t.charCodeAt(0)+";"}var r=e.config;if(e=(e=e.dataProcessor)&&e.htmlFilter){var o=[];!1!==r.basicEntities&&o.push("nbsp,gt,lt,amp"),r.entities&&(o.length&&o.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),r.entities_latin&&o.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),r.entities_greek&&o.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),r.entities_additional&&o.push(r.entities_additional));var a=t(o.join(",")),s=a.regex?"["+a.regex+"]":"a^";delete a.regex,r.entities&&r.entities_processNumerical&&(s="[^ -~]|"+s),s=new RegExp(s,"g");var l=t("nbsp,gt,lt,amp,shy",!0),c=new RegExp(l.regex,"g");e.addRules({text:function(t){return t.replace(c,n).replace(s,i)}},{applyToAll:!0,excludeNestedEditable:!0})}}})}(),CKEDITOR.config.basicEntities=!0,CKEDITOR.config.entities=!0,CKEDITOR.config.entities_latin=!0,CKEDITOR.config.entities_greek=!0,CKEDITOR.config.entities_additional="#39",CKEDITOR.plugins.add("popup"),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(t,e,n,i){e=e||"80%",n=n||"70%","string"==typeof e&&1<e.length&&"%"==e.substr(e.length-1,1)&&(e=parseInt(window.screen.width*parseInt(e,10)/100,10)),"string"==typeof n&&1<n.length&&"%"==n.substr(n.length-1,1)&&(n=parseInt(window.screen.height*parseInt(n,10)/100,10)),640>e&&(e=640),420>n&&(n=420);var r=parseInt((window.screen.height-n)/2,10),o=parseInt((window.screen.width-e)/2,10);i=(i||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+",width="+e+",height="+n+",top="+r+",left="+o;var a=window.open("",null,i,!0);if(!a)return!1;try{-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(a.moveTo(o,r),a.resizeTo(e,n)),a.focus(),a.location.href=t}catch(e){window.open(t,null,i,!0)}return!0}}),function(){function t(t,e){var n=[];if(!e)return t;for(var i in e)n.push(i+"="+encodeURIComponent(e[i]));return t+(-1!=t.indexOf("?")?"&":"?")+n.join("&")}function e(t){return(t+="").charAt(0).toUpperCase()+t.substr(1)}function n(){var n=(r=this.getDialog()).getParentEditor();n._.filebrowserSe=this;var i=n.config["filebrowser"+e(r.getName())+"WindowWidth"]||n.config.filebrowserWindowWidth||"80%",r=n.config["filebrowser"+e(r.getName())+"WindowHeight"]||n.config.filebrowserWindowHeight||"70%",o=this.filebrowser.params||{};o.CKEditor=n.name,o.CKEditorFuncNum=n._.filebrowserFn,o.langCode||(o.langCode=n.langCode),o=t(this.filebrowser.url,o),n.popup(o,i,r,n.config.filebrowserWindowFeatures||n.config.fileBrowserWindowFeatures)}function i(){var t=this.getDialog();return t.getParentEditor()._.filebrowserSe=this,!(!t.getContentElement(this.for[0],this.for[1]).getInputElement().$.value||!t.getContentElement(this.for[0],this.for[1]).getAction())}function r(e,n,i){var r=i.params||{};r.CKEditor=e.name,r.CKEditorFuncNum=e._.filebrowserFn,r.langCode||(r.langCode=e.langCode),n.action=t(i.url,r),n.filebrowser=i}function o(t,a,s,l){if(l&&l.length)for(var c,u=l.length;u--;)if("hbox"!=(c=l[u]).type&&"vbox"!=c.type&&"fieldset"!=c.type||o(t,a,s,c.children),c.filebrowser)if("string"==typeof c.filebrowser&&(c.filebrowser={action:"fileButton"==c.type?"QuickUpload":"Browse",target:c.filebrowser}),"Browse"==c.filebrowser.action){var d=c.filebrowser.url;void 0===d&&void 0===(d=t.config["filebrowser"+e(a)+"BrowseUrl"])&&(d=t.config.filebrowserBrowseUrl),d&&(c.onClick=n,c.filebrowser.url=d,c.hidden=!1)}else if("QuickUpload"==c.filebrowser.action&&c.for&&(void 0===(d=c.filebrowser.url)&&void 0===(d=t.config["filebrowser"+e(a)+"UploadUrl"])&&(d=t.config.filebrowserUploadUrl),d)){var h=c.onClick;c.onClick=function(t){var e=t.sender;return!(h&&!1===h.call(e,t)||!i.call(e,t)||(t=e.getDialog().getContentElement(this.for[0],this.for[1]).getInputElement(),(e=new CKEDITOR.dom.element(t.$.form))&&((t=e.$.elements.ckCsrfToken)?t=new CKEDITOR.dom.element(t):((t=new CKEDITOR.dom.element("input")).setAttributes({name:"ckCsrfToken",type:"hidden"}),e.append(t)),t.setAttribute("value",CKEDITOR.tools.getCsrfToken())),0))},c.filebrowser.url=d,c.hidden=!1,r(t,s.getContents(c.for[0]).get(c.for[1]),c.filebrowser)}}function a(t,e,n){if(-1!==n.indexOf(";")){n=n.split(";");for(var i=0;i<n.length;i++)if(a(t,e,n[i]))return!0;return!1}return(t=t.getContents(e).get(n).filebrowser)&&t.url}function s(t,e){var n=this._.filebrowserSe.getDialog(),i=this._.filebrowserSe.for,r=this._.filebrowserSe.filebrowser.onSelect;i&&n.getContentElement(i[0],i[1]).reset(),"function"==typeof e&&!1===e.call(this._.filebrowserSe)||r&&!1===r.call(this._.filebrowserSe,t,e)||("string"==typeof e&&e&&alert(e),t&&(n=(i=this._.filebrowserSe).getDialog(),i=i.filebrowser.target||null)&&(i=i.split(":"),(r=n.getContentElement(i[0],i[1]))&&(r.setValue(t),n.selectPage(i[0]))))}CKEDITOR.plugins.add("filebrowser",{requires:"popup",init:function(t){t._.filebrowserFn=CKEDITOR.tools.addFunction(s,t),t.on("destroy",function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)})}}),CKEDITOR.on("dialogDefinition",function(t){if(t.editor.plugins.filebrowser)for(var e,n=t.data.definition,i=0;i<n.contents.length;++i)(e=n.contents[i])&&(o(t.editor,t.data.name,n,e.elements),e.hidden&&e.filebrowser&&(e.hidden=!a(n,e.id,e.filebrowser)))})}(),function(){function t(t){var i=t.config,r=t.fire("uiSpace",{space:"top",html:""}).html,o=function(){function r(t,e,i){s.setStyle(e,n(i)),s.setStyle("position",t)}function a(t){var e=c.getDocumentPosition();switch(t){case"top":r("absolute","top",e.y-f-m);break;case"pin":r("fixed","top",y);break;case"bottom":r("absolute","top",e.y+(d.height||d.bottom-d.top)+m)}l=t}var l,c,u,d,h,f,p,g=i.floatSpaceDockedOffsetX||0,m=i.floatSpaceDockedOffsetY||0,v=i.floatSpacePinnedOffsetX||0,y=i.floatSpacePinnedOffsetY||0;return function(r){if(c=t.editable()){var y=r&&"focus"==r.name;y&&s.show(),t.fire("floatingSpaceLayout",{show:y}),s.removeStyle("left"),s.removeStyle("right"),u=s.getClientRect(),d=c.getClientRect(),h=e.getViewPaneSize(),f=u.height,p="pageXOffset"in e.$?e.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft,l?(f+m<=d.top?a("top"):f+m>h.height-d.bottom?a("pin"):a("bottom"),r=h.width/2,r=i.floatSpacePreferRight?"right":0<d.left&&d.right<h.width&&d.width>u.width?"rtl"==i.contentsLangDirection?"right":"left":r-d.left>d.right-r?"left":"right",u.width>h.width?(r="left",y=0):(y="left"==r?0<d.left?d.left:0:d.right<h.width?h.width-d.right:0)+u.width>h.width&&(r="left"==r?"right":"left",y=0),s.setStyle(r,n(("pin"==l?v:g)+y+("pin"==l?0:"left"==r?p:-p)))):(l="pin",a("pin"),o(r))}}}();if(r){var a=new CKEDITOR.template('<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir="{langDir}" title="'+(CKEDITOR.env.gecko?" ":"")+'" lang="{langCode}" role="application" style="{style}"'+(t.title?' aria-labelledby="cke_{name}_arialbl"':" ")+">"+(t.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':" ")+'<div class="cke_inner"><div id="{topId}" class="cke_top" role="presentation">{content}</div></div></div>'),s=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(a.output({content:r,id:t.id,langDir:t.lang.dir,langCode:t.langCode,name:t.name,style:"display:none;z-index:"+(i.baseFloatZIndex-1),topId:t.ui.spaceId("top"),voiceLabel:t.title}))),l=CKEDITOR.tools.eventsBuffer(500,o),c=CKEDITOR.tools.eventsBuffer(100,o);s.unselectable(),s.on("mousedown",function(t){(t=t.data).getTarget().hasAscendant("a",1)||t.preventDefault()}),t.on("focus",function(n){o(n),t.on("change",l.input),e.on("scroll",c.input),e.on("resize",c.input)}),t.on("blur",function(){s.hide(),t.removeListener("change",l.input),e.removeListener("scroll",c.input),e.removeListener("resize",c.input)}),t.on("destroy",function(){e.removeListener("scroll",c.input),e.removeListener("resize",c.input),s.clearCustomData(),s.remove()}),t.focusManager.hasFocus&&s.show(),t.focusManager.add(s,1)}}var e=CKEDITOR.document.getWindow(),n=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(e){e.on("loaded",function(){t(this)},null,null,20)}})}(),CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var t=CKEDITOR.addTemplate("panel-list",'<ul role="presentation" class="cke_panel_list">{items}</ul>'),e=CKEDITOR.addTemplate("panel-list-item",'<li id="{id}" class="cke_panel_listItem" role=presentation><a id="{id}_option" _cke_focus=1 hidefocus=true title="{title}" href="javascript:void(\'{val}\')"  {onclick}="CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role="option">{text}</a></li>'),n=CKEDITOR.addTemplate("panel-list-group",'<h1 id="{id}" class="cke_panel_grouptitle" role="presentation" >{label}</h1>'),i=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(t,e){return this.addBlock(t,new CKEDITOR.ui.listBlock(this.getHolderElement(),e))},CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(t,e){var n=(e=e||{}).attributes||(e.attributes={});(this.multiSelect=!!e.multiSelect)&&(n["aria-multiselectable"]=!0),!n.role&&(n.role="listbox"),this.base.apply(this,arguments),this.element.setAttribute("role",n.role),(n=this.keys)[40]="next",n[9]="next",n[38]="prev",n[CKEDITOR.SHIFT+9]="prev",n[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(n[13]="mouseup"),this._.pendingHtml=[],this._.pendingList=[],this._.items={},this._.groups={}},_:{close:function(){if(this._.started){var e=t.output({items:this._.pendingList.join("")});this._.pendingList=[],this._.pendingHtml.push(e),delete this._.started}},getClick:function(){return this._.click||(this._.click=CKEDITOR.tools.addFunction(function(t){var e=this.toggle(t);this.onClick&&this.onClick(t,e)},this)),this._.click}},proto:{add:function(t,n,r){var o=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0),this._.items[t]=o,t={id:o,val:CKEDITOR.tools.htmlEncodeAttr(t).replace(i,"\\'"),onclick:CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(r||t),text:n||t},this._.pendingList.push(e.output(t))},startGroup:function(t){this._.close();var e=CKEDITOR.tools.getNextId();this._.groups[t]=e,this._.pendingHtml.push(n.output({id:e,label:t}))},commit:function(){this._.close(),this.element.appendHtml(this._.pendingHtml.join("")),delete this._.size,this._.pendingHtml=[]},toggle:function(t){var e=this.isMarked(t);return e?this.unmark(t):this.mark(t),!e},hideGroup:function(t){var e=(t=this.element.getDocument().getById(this._.groups[t]))&&t.getNext();t&&(t.setStyle("display","none"),e&&"ul"==e.getName()&&e.setStyle("display","none"))},hideItem:function(t){this.element.getDocument().getById(this._.items[t]).setStyle("display","none")},showAll:function(){var t,e=this._.items,n=this._.groups,i=this.element.getDocument();for(t in e)i.getById(e[t]).setStyle("display","");for(var r in n)t=(e=i.getById(n[r])).getNext(),e.setStyle("display",""),t&&"ul"==t.getName()&&t.setStyle("display","")},mark:function(t){this.multiSelect||this.unmarkAll(),t=this._.items[t];var e=this.element.getDocument().getById(t);e.addClass("cke_selected"),this.element.getDocument().getById(t+"_option").setAttribute("aria-selected",!0),this.onMark&&this.onMark(e)},unmark:function(t){var e=this.element.getDocument();t=this._.items[t];var n=e.getById(t);n.removeClass("cke_selected"),e.getById(t+"_option").removeAttribute("aria-selected"),this.onUnmark&&this.onUnmark(n)},unmarkAll:function(){var t,e=this._.items,n=this.element.getDocument();for(t in e){var i=e[t];n.getById(i).removeClass("cke_selected"),n.getById(i+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(t){return this.element.getDocument().getById(this._.items[t]).hasClass("cke_selected")},focus:function(t){this._.focusIndex=-1;var e,n=this.element.getElementsByTag("a"),i=-1;if(t){for(e=this.element.getDocument().getById(this._.items[t]).getFirst();t=n.getItem(++i);)if(t.equals(e)){this._.focusIndex=i;break}}else this.element.focus();e&&setTimeout(function(){e.focus()},0)}}})}}),function(){var t='<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-describedby="{id}_description" aria-haspopup="{hasArrow}" aria-disabled="{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(t+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(t+=' onblur="this.style.cssText = this.style.cssText;"'),t=(t=t+' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}"')+'>&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label" aria-hidden="false">{label}</span><span id="{id}_description" class="cke_button_label" aria-hidden="false">{ariaShortcut}</span>{arrowHtml}</a>';var e=CKEDITOR.addTemplate("buttonArrow",'<span class="cke_button_arrow">'+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),n=CKEDITOR.addTemplate("button",t);CKEDITOR.plugins.add("button",{beforeInit:function(t){t.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}}),CKEDITOR.UI_BUTTON="button",CKEDITOR.ui.button=function(t){CKEDITOR.tools.extend(this,t,{title:t.label,click:t.click||function(e){e.execCommand(t.command)}}),this._={}},CKEDITOR.ui.button.handler={create:function(t){return new CKEDITOR.ui.button(t)}},CKEDITOR.ui.button.prototype={render:function(t,i){function r(){var e=t.mode;e&&(e=this.modes[e]?void 0!==m[e]?m[e]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,e=t.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:e,this.setState(e),this.refresh&&this.refresh())}var o,a,s,l=CKEDITOR.env,c=this._.id=CKEDITOR.tools.getNextId(),u="",d=this.command;this._.editor=t;var h={id:c,button:this,editor:t,focus:function(){CKEDITOR.document.getById(c).focus()},execute:function(){this.button.click(t)},attach:function(t){this.button.attach(t)}},f=CKEDITOR.tools.addFunction(function(t){if(h.onkey)return t=new CKEDITOR.dom.event(t),!1!==h.onkey(h,t.getKeystroke())}),p=CKEDITOR.tools.addFunction(function(t){var e;return h.onfocus&&(e=!1!==h.onfocus(h,new CKEDITOR.dom.event(t))),e}),g=0;if(h.clickFn=o=CKEDITOR.tools.addFunction(function(){g&&(t.unlockSelection(1),g=0),h.execute(),l.iOS&&t.focus()}),this.modes){var m={};t.on("beforeModeUnload",function(){t.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(m[t.mode]=this._.state)},this),t.on("activeFilterChange",r,this),t.on("mode",r,this),!this.readOnly&&t.on("readOnly",r,this)}else d&&(d=t.getCommand(d))&&(d.on("state",function(){this.setState(d.state)},this),u+=d.state==CKEDITOR.TRISTATE_ON?"on":d.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off");this.directional&&t.on("contentDirChanged",function(e){var n=CKEDITOR.document.getById(this._.id),i=n.getFirst();(e=e.data)!=t.lang.dir?n.addClass("cke_"+e):n.removeClass("cke_ltr").removeClass("cke_rtl"),i.setAttribute("style",CKEDITOR.skin.getIconStyle(v,"rtl"==e,this.icon,this.iconOffset))},this),d?(a=t.getCommandKeystroke(d))&&(s=CKEDITOR.tools.keystrokeToString(t.lang.common.keyboard,a)):u+="off";var v=a=this.name||this.command;return this.icon&&!/\./.test(this.icon)&&(v=this.icon,this.icon=null),u={id:c,name:a,iconName:v,label:this.label,cls:this.className||"",state:u,ariaDisabled:"disabled"==u?"true":"false",title:this.title+(s?" ("+s.display+")":""),ariaShortcut:s?t.lang.common.keyboardShortcut+" "+s.aria:"",titleJs:l.gecko&&!l.hc?"":(this.title||"").replace("'",""),hasArrow:this.hasArrow?"true":"false",keydownFn:f,focusFn:p,clickFn:o,style:CKEDITOR.skin.getIconStyle(v,"rtl"==t.lang.dir,this.icon,this.iconOffset),arrowHtml:this.hasArrow?e.output():""},n.output(u,i),this.onRender&&this.onRender(),h},setState:function(t){if(this._.state==t)return!1;this._.state=t;var e=CKEDITOR.document.getById(this._.id);return!!e&&(e.setState(t,"cke_button"),t==CKEDITOR.TRISTATE_DISABLED?e.setAttribute("aria-disabled",!0):e.removeAttribute("aria-disabled"),this.hasArrow?(t=t==CKEDITOR.TRISTATE_ON?this._.editor.lang.button.selectedLabel.replace(/%1/g,this.label):this.label,CKEDITOR.document.getById(this._.id+"_label").setText(t)):t==CKEDITOR.TRISTATE_ON?e.setAttribute("aria-pressed",!0):e.removeAttribute("aria-pressed"),!0)},getState:function(){return this._.state},toFeature:function(t){if(this._.feature)return this._.feature;var e=this;return this.allowedContent||this.requiredContent||!this.command||(e=t.getCommand(this.command)||e),this._.feature=e}},CKEDITOR.ui.prototype.addButton=function(t,e){this.add(t,CKEDITOR.UI_BUTTON,e)}}(),CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(t){t.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}}),function(){var t='<span id="{id}" class="cke_combo cke_combo__{name} {cls}" role="presentation"><span id="{id}_label" class="cke_combo_label">{label}</span><a class="cke_combo_button" title="{title}" tabindex="-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="true"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(t+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(t+=' onblur="this.style.cssText = this.style.cssText;"'),t=t+' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span id="{id}_text" class="cke_combo_text cke_combo_inlinelabel">{label}</span><span class="cke_combo_open"><span class="cke_combo_arrow">'+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>";var e=CKEDITOR.addTemplate("combo",t);CKEDITOR.UI_RICHCOMBO="richcombo",CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(t){CKEDITOR.tools.extend(this,t,{canGroup:!1,title:t.label,modes:{wysiwyg:1},editorFocus:1}),t=this.panel||{},delete this.panel,this.id=CKEDITOR.tools.getNextNumber(),this.document=t.parent&&t.parent.getDocument()||CKEDITOR.document,t.className="cke_combopanel",t.block={multiSelect:t.multiSelect,attributes:t.attributes},t.toolbarRelated=!0,this._={panelDefinition:t,items:{}}},proto:{renderHtml:function(t){var e=[];return this.render(t,e),e.join("")},render:function(t,n){function i(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var e=this.modes[t.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;t.readOnly&&!this.readOnly&&(e=CKEDITOR.TRISTATE_DISABLED),this.setState(e),this.setValue(""),e!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}}var r=CKEDITOR.env,o="cke_"+this.id,a=CKEDITOR.tools.addFunction(function(e){d&&(t.unlockSelection(1),d=0),l.execute(e)},this),s=this,l={id:o,combo:this,focus:function(){CKEDITOR.document.getById(o).getChild(1).focus()},execute:function(e){var n=s._;if(n.state!=CKEDITOR.TRISTATE_DISABLED)if(s.createPanel(t),n.on)n.panel.hide();else{s.commit();var i=s.getValue();i?n.list.mark(i):n.list.unmarkAll(),n.panel.showBlock(s.id,new CKEDITOR.dom.element(e),4)}},clickFn:a};t.on("activeFilterChange",i,this),t.on("mode",i,this),t.on("selectionChange",i,this),!this.readOnly&&t.on("readOnly",i,this);var c=CKEDITOR.tools.addFunction(function(e,n){var i=(e=new CKEDITOR.dom.event(e)).getKeystroke();switch(40==i&&t.once("panelShow",function(t){t.data._.panel._.currentBlock.onKeyDown(40)}),i){case 13:case 32:case 40:CKEDITOR.tools.callFunction(a,n);break;default:l.onkey(l,i)}e.preventDefault()}),u=CKEDITOR.tools.addFunction(function(){l.onfocus&&l.onfocus()}),d=0;return l.keyDownFn=c,r={id:o,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:r.gecko&&!r.hc?"":(this.title||"").replace("'",""),keydownFn:c,focusFn:u,clickFn:a},e.output(r,n),this.onRender&&this.onRender(),l},createPanel:function(t){if(!this._.panel){var e=this._.panelDefinition,n=this._.panelDefinition.block,i=e.parent||CKEDITOR.document.getBody(),r="cke_combopanel__"+this.name,o=new CKEDITOR.ui.floatPanel(t,i,e),a=o.addListBlock(this.id,n),s=this;o.onShow=function(){this.element.addClass(r),s.setState(CKEDITOR.TRISTATE_ON),s._.on=1,s.editorFocus&&!t.focusManager.hasFocus&&t.focus(),s.onOpen&&s.onOpen(),t.once("panelShow",function(){a.focus(!a.multiSelect&&s.getValue())})},o.onHide=function(e){this.element.removeClass(r),s.setState(s.modes&&s.modes[t.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),s._.on=0,!e&&s.onClose&&s.onClose()},o.onEscape=function(){o.hide(1)},a.onClick=function(t,e){s.onClick&&s.onClick.call(s,t,e),o.hide()},this._.panel=o,this._.list=a,o.getBlock(this.id).onHide=function(){s._.on=0,s.setState(CKEDITOR.TRISTATE_OFF)},this.init&&this.init()}},setValue:function(t,e){this._.value=t;var n=this.document.getById("cke_"+this.id+"_text");n&&(t||e?n.removeClass("cke_combo_inlinelabel"):(e=this.label,n.addClass("cke_combo_inlinelabel")),n.setText(void 0!==e?e:t))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(t){this._.list.mark(t)},hideItem:function(t){this._.list.hideItem(t)},hideGroup:function(t){this._.list.hideGroup(t)},showAll:function(){this._.list.showAll()},add:function(t,e,n){this._.items[t]=n||t,this._.list.add(t,e,n)},startGroup:function(t){this._.list.startGroup(t)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this)),this._.committed=1},setState:function(t){if(this._.state!=t){var e=this.document.getById("cke_"+this.id);e.setState(t,"cke_combo"),t==CKEDITOR.TRISTATE_DISABLED?e.setAttribute("aria-disabled",!0):e.removeAttribute("aria-disabled"),this._.state=t}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))}},statics:{handler:{create:function(t){return new CKEDITOR.ui.richCombo(t)}}}}),CKEDITOR.ui.prototype.addRichCombo=function(t,e){this.add(t,CKEDITOR.UI_RICHCOMBO,e)}}(),CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(t){if(!t.blockless){for(var e=t.config,n=t.lang.format,i=e.format_tags.split(";"),r={},o=0,a=[],s=0;s<i.length;s++){var l=i[s],c=new CKEDITOR.style(e["format_"+l]);t.filter.customConfig&&!t.filter.check(c)||(o++,r[l]=c,r[l]._.enterMode=t.config.enterMode,a.push(c))}0!==o&&t.ui.addRichCombo("Format",{label:n.label,title:n.panelTitle,toolbar:"styles,20",allowedContent:a,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(e.contentsCss),multiSelect:!1,attributes:{"aria-label":n.panelTitle}},init:function(){for(var t in this.startGroup(n.panelTitle),r){var e=n["tag_"+t];this.add(t,r[t].buildPreview(e),e)}},onClick:function(e){t.focus(),t.fire("saveSnapshot"),e=r[e];var n=t.elementPath();t[e.checkActive(n,t)?"removeStyle":"applyStyle"](e),setTimeout(function(){t.fire("saveSnapshot")},0)},onRender:function(){t.on("selectionChange",function(e){var n=this.getValue();for(var i in e=e.data.path,this.refresh(),r)if(r[i].checkActive(e,t))return void(i!=n&&this.setValue(i,t.lang.format["tag_"+i]));this.setValue("")},this)},onOpen:function(){for(var e in this.showAll(),r)t.activeFilter.check(r[e])||this.hideItem(e)},refresh:function(){var e=t.elementPath();if(e){if(e.isContextFor("p"))for(var n in r)if(t.activeFilter.check(r[n]))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}}),CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div",CKEDITOR.config.format_p={element:"p"},CKEDITOR.config.format_div={element:"div"},CKEDITOR.config.format_pre={element:"pre"},CKEDITOR.config.format_address={element:"address"},CKEDITOR.config.format_h1={element:"h1"},CKEDITOR.config.format_h2={element:"h2"},CKEDITOR.config.format_h3={element:"h3"},CKEDITOR.config.format_h4={element:"h4"},CKEDITOR.config.format_h5={element:"h5"},CKEDITOR.config.format_h6={element:"h6"},function(){var t={canUndo:!1,exec:function(t){var e=t.document.createElement("hr");t.insertElement(e)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(e){e.blockless||(e.addCommand("horizontalrule",t),e.ui.addButton&&e.ui.addButton("HorizontalRule",{label:e.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})}(),CKEDITOR.plugins.add("htmlwriter",{init:function(t){var e=new CKEDITOR.htmlWriter;e.forceSimpleAmpersand=t.config.forceSimpleAmpersand,e.indentationChars=t.config.dataIndentationChars||"\t",t.dataProcessor.writer=e}}),CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base(),this.indentationChars="\t",this.selfClosingEnd=" />",this.lineBreakChars="\n",this.sortAttributes=1,this._.indent=0,this._.indentation="",this._.inPre=0,this._.rules={};var t,e=CKEDITOR.dtd;for(t in CKEDITOR.tools.extend({},e.$nonBodyContent,e.$block,e.$listItem,e.$tableContent))this.setRules(t,{indent:!e[t]["#"],breakBeforeOpen:1,breakBeforeClose:!e[t]["#"],breakAfterClose:1,needsSpace:t in e.$block&&!(t in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1}),this.setRules("title",{indent:0,breakAfterOpen:0}),this.setRules("style",{indent:0,breakBeforeClose:1}),this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(t){var e=this._.rules[t];this._.afterCloser&&e&&e.needsSpace&&this._.needsSpace&&this._.output.push("\n"),this._.indent?this.indentation():e&&e.breakBeforeOpen&&(this.lineBreak(),this.indentation()),this._.output.push("<",t),this._.afterCloser=0},openTagClose:function(t,e){var n=this._.rules[t];e?(this._.output.push(this.selfClosingEnd),n&&n.breakAfterClose&&(this._.needsSpace=n.needsSpace)):(this._.output.push(">"),n&&n.indent&&(this._.indentation+=this.indentationChars)),n&&n.breakAfterOpen&&this.lineBreak(),"pre"==t&&(this._.inPre=1)},attribute:function(t,e){"string"==typeof e&&(this.forceSimpleAmpersand&&(e=e.replace(/&amp;/g,"&")),e=CKEDITOR.tools.htmlEncodeAttr(e)),this._.output.push(" ",t,'="',e,'"')},closeTag:function(t){var e=this._.rules[t];e&&e.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length)),this._.indent?this.indentation():e&&e.breakBeforeClose&&(this.lineBreak(),this.indentation()),this._.output.push("</",t,">"),"pre"==t&&(this._.inPre=0),e&&e.breakAfterClose&&(this.lineBreak(),this._.needsSpace=e.needsSpace),this._.afterCloser=1},text:function(t){this._.indent&&(this.indentation(),!this._.inPre&&(t=CKEDITOR.tools.ltrim(t))),this._.output.push(t)},comment:function(t){this._.indent&&this.indentation(),this._.output.push("\x3c!--",t,"--\x3e")},lineBreak:function(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars),this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation),this._.indent=0},reset:function(){this._.output=[],this._.indent=0,this._.indentation="",this._.afterCloser=0,this._.inPre=0,this._.needsSpace=0},setRules:function(t,e){var n=this._.rules[t];n?CKEDITOR.tools.extend(n,e,!0):this._.rules[t]=e}}}),function(){function t(t,e){if(e||(e=t.getSelection().getSelectedElement()),e&&e.is("img")&&!e.data("cke-realelement")&&!e.isReadOnly())return e}function e(t){var e=t.getStyle("float");return"inherit"!=e&&"none"!=e||(e=0),e||(e=t.getAttribute("align")),e}CKEDITOR.plugins.add("image",{requires:"dialog",init:function(e){if(!e.plugins.image2){CKEDITOR.dialog.add("image",this.path+"dialogs/image.js");var n="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";CKEDITOR.dialog.isTabEnabled(e,"image","advanced")&&(n="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)"),e.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:n,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]})),e.ui.addButton&&e.ui.addButton("Image",{label:e.lang.common.image,command:"image",toolbar:"insert,10"}),e.on("doubleclick",function(t){var e=t.data.element;!e.is("img")||e.data("cke-realelement")||e.isReadOnly()||(t.data.dialog="image")}),e.addMenuItems&&e.addMenuItems({image:{label:e.lang.image.menu,command:"image",group:"image"}}),e.contextMenu&&e.contextMenu.addListener(function(n){if(t(e,n))return{image:CKEDITOR.TRISTATE_OFF}})}},afterInit:function(n){function i(i){var r=n.getCommand("justify"+i);r&&("left"!=i&&"right"!=i||r.on("exec",function(r){var o=t(n);o&&(e(o)==i?(o.removeStyle("float"),i==e(o)&&o.removeAttribute("align")):o.setStyle("float",i),r.cancel())}),r.on("refresh",function(r){var o=t(n);o&&(o=e(o),this.setState(o==i?CKEDITOR.TRISTATE_ON:"right"==i||"left"==i?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),r.cancel())}))}n.plugins.image2||(i("left"),i("right"),i("center"),i("block"))}})}(),CKEDITOR.config.image_removeLinkByEmptyURL=!0,function(){function t(t,e){var n=i.exec(t),r=i.exec(e);if(n){if(!n[2]&&"px"==r[2])return r[1];if("px"==n[2]&&!r[2])return r[1]+"px"}return e}var e=CKEDITOR.htmlParser.cssStyle,n=CKEDITOR.tools.cssLength,i=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,r={elements:{$:function(n){var i=n.attributes;if((i=(i=(i=i&&i["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(i)))&&i.children[0])&&n.attributes["data-cke-resizable"]){var r=new e(n).rules;n=i.attributes;var o=r.width;r=r.height,o&&(n.width=t(n.width,o)),r&&(n.height=t(n.height,r))}return i}}};CKEDITOR.plugins.add("fakeobjects",{init:function(t){t.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(t){(t=(t=t.dataProcessor)&&t.htmlFilter)&&t.addRules(r,{applyToAll:!0})}}),CKEDITOR.editor.prototype.createFakeElement=function(t,i,r,o){var a=(a=this.lang.fakeobjects)[r]||a.unknown;return i={class:i,"data-cke-realelement":encodeURIComponent(t.getOuterHtml()),"data-cke-real-node-type":t.type,alt:a,title:a,align:t.getAttribute("align")||""},CKEDITOR.env.hc||(i.src=CKEDITOR.tools.transparentImageData),r&&(i["data-cke-real-element-type"]=r),o&&(i["data-cke-resizable"]=o,r=new e,o=t.getAttribute("width"),t=t.getAttribute("height"),o&&(r.rules.width=n(o)),t&&(r.rules.height=n(t)),r.populate(i)),this.document.createElement("img",{attributes:i})},CKEDITOR.editor.prototype.createFakeParserElement=function(t,i,r,o){var a,s=(s=this.lang.fakeobjects)[r]||s.unknown;return a=new CKEDITOR.htmlParser.basicWriter,t.writeHtml(a),a=a.getHtml(),i={class:i,"data-cke-realelement":encodeURIComponent(a),"data-cke-real-node-type":t.type,alt:s,title:s,align:t.attributes.align||""},CKEDITOR.env.hc||(i.src=CKEDITOR.tools.transparentImageData),r&&(i["data-cke-real-element-type"]=r),o&&(i["data-cke-resizable"]=o,o=t.attributes,t=new e,r=o.width,o=o.height,void 0!==r&&(t.rules.width=n(r)),void 0!==o&&(t.rules.height=n(o)),t.populate(i)),new CKEDITOR.htmlParser.element("img",i)},CKEDITOR.editor.prototype.restoreRealElement=function(e){if(e.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var n=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(e.data("cke-realelement")),this.document);if(e.data("cke-resizable")){var i=e.getStyle("width");e=e.getStyle("height"),i&&n.setAttribute("width",t(n.getAttribute("width"),i)),e&&n.setAttribute("height",t(n.getAttribute("height"),e))}return n}}(),function(){function t(t){return t.replace(/'/g,"\\$&")}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function t(t){return n.replace(/%1/g,"rtl"==t?"right":"left").replace(/%2/g,"cke_contents_"+t)}var e="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",n=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+e+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+e+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(t("ltr")+t("rtl"))},init:function(t){var e="a[!href]";CKEDITOR.dialog.isTabEnabled(t,"link","advanced")&&(e=e.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type,download]{*}(*)")),CKEDITOR.dialog.isTabEnabled(t,"link","target")&&(e=e.replace("]",",target,onclick]")),t.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:e,requiredContent:"a[href]"})),t.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"})),t.addCommand("unlink",new CKEDITOR.unlinkCommand),t.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand),t.setKeystroke(CKEDITOR.CTRL+76,"link"),t.ui.addButton&&(t.ui.addButton("Link",{label:t.lang.link.toolbar,command:"link",toolbar:"links,10"}),t.ui.addButton("Unlink",{label:t.lang.link.unlink,command:"unlink",toolbar:"links,20"}),t.ui.addButton("Anchor",{label:t.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"})),CKEDITOR.dialog.add("link",this.path+"dialogs/link.js"),CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js"),t.on("doubleclick",function(e){var n=CKEDITOR.plugins.link.getSelectedLink(t)||e.data.element;n.isReadOnly()||(n.is("a")?(e.data.dialog=!n.getAttribute("name")||n.getAttribute("href")&&n.getChildCount()?"link":"anchor",e.data.link=n):CKEDITOR.plugins.link.tryRestoreFakeAnchor(t,n)&&(e.data.dialog="anchor"))},null,null,0),t.on("doubleclick",function(e){e.data.dialog in{link:1,anchor:1}&&e.data.link&&t.getSelection().selectElement(e.data.link)},null,null,20),t.addMenuItems&&t.addMenuItems({anchor:{label:t.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:t.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:t.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:t.lang.link.unlink,command:"unlink",group:"link",order:5}}),t.contextMenu&&t.contextMenu.addListener(function(e){if(!e||e.isReadOnly())return null;if(!(e=CKEDITOR.plugins.link.tryRestoreFakeAnchor(t,e))&&!(e=CKEDITOR.plugins.link.getSelectedLink(t)))return null;var n={};return e.getAttribute("href")&&e.getChildCount()&&(n={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF}),e&&e.hasAttribute("name")&&(n.anchor=n.removeAnchor=CKEDITOR.TRISTATE_OFF),n}),this.compiledProtectionFunction=function(t){var e;return(t=t.config.emailProtection||"")&&"encode"!=t&&(e={},t.replace(/^([^(]+)\(([^)]+)\)$/,function(t,n,i){e.name=n,e.params=[],i.replace(/[^,\s]+/g,function(t){e.params.push(t)})})),e}(t)},afterInit:function(t){t.dataProcessor.dataFilter.addRules({elements:{a:function(e){return e.attributes.name?e.children.length?null:t.createFakeParserElement(e,"cke_anchor","anchor"):null}}});var e=t._.elementsPath&&t._.elementsPath.filters;e&&e.push(function(e,n){if("a"==n&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(t,e)||e.getAttribute("name")&&(!e.getAttribute("href")||!e.getChildCount())))return"anchor"})}});var e=/^javascript:/,n=/^mailto:([^?]+)(?:\?(.+))?$/,i=/subject=([^;?:@&=$,\/]*)/i,r=/body=([^;?:@&=$,\/]*)/i,o=/^#(.*)$/,a=/^((?:http|https|ftp|news):\/\/)?(.*)$/,s=/^(_(?:self|top|parent|blank))$/,l=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,c=/^javascript:([^(]+)\(([^)]+)\)$/,u=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,d=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,h={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType",class:"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};CKEDITOR.plugins.link={getSelectedLink:function(t){var e=t.getSelection(),n=e.getSelectedElement();return n&&n.is("a")?n:(e=e.getRanges()[0])?(e.shrink(CKEDITOR.SHRINK_TEXT),t.elementPath(e.getCommonAncestor()).contains("a",1)):null},getEditorAnchors:function(t){for(var e,n=(i=(n=t.editable()).isInline()&&!t.plugins.divarea?t.document:n).getElementsByTag("a"),i=i.getElementsByTag("img"),r=[],o=0;e=n.getItem(o++);)(e.data("cke-saved-name")||e.hasAttribute("name"))&&r.push({name:e.data("cke-saved-name")||e.getAttribute("name"),id:e.getAttribute("id")});for(o=0;e=i.getItem(o++);)(e=this.tryRestoreFakeAnchor(t,e))&&r.push({name:e.getAttribute("name"),id:e.getAttribute("id")});return r},fakeAnchor:!0,tryRestoreFakeAnchor:function(t,e){if(e&&e.data("cke-real-element-type")&&"anchor"==e.data("cke-real-element-type")){var n=t.restoreRealElement(e);if(n.data("cke-saved-name"))return n}},parseLinkAttributes:function(t,f){var p,g=f&&(f.data("cke-saved-href")||f.getAttribute("href"))||"",m=t.plugins.link.compiledProtectionFunction,v=t.config.emailProtection,y={};if(g.match(e)&&("encode"==v?g=g.replace(l,function(t,e,n){return n=n||"","mailto:"+String.fromCharCode.apply(String,e.split(","))+n.replace(/\\'/g,"'")}):v&&g.replace(c,function(t,e,n){if(e==m.name){y.type="email",t=y.email={},e=/(^')|('$)/g;for(var i,r=(n=n.match(/[^,\s]+/g)).length,o=0;o<r;o++)i=decodeURIComponent(i=n[o].replace(e,"").replace(/\\'/g,"'")),t[m.params[o].toLowerCase()]=i;t.address=[t.name,t.domain].join("@")}})),!y.type)if(v=g.match(o))y.type="anchor",y.anchor={},y.anchor.name=y.anchor.id=v[1];else if(v=g.match(n)){p=g.match(i),g=g.match(r),y.type="email";var E=y.email={};E.address=v[1],p&&(E.subject=decodeURIComponent(p[1])),g&&(E.body=decodeURIComponent(g[1]))}else g&&(p=g.match(a))&&(y.type="url",y.url={},y.url.protocol=p[1],y.url.url=p[2]);if(f){if(g=f.getAttribute("target"))y.target={type:g.match(s)?g:"frame",name:g};else if(g=(g=f.data("cke-pa-onclick")||f.getAttribute("onclick"))&&g.match(u))for(y.target={type:"popup",name:g[1]};v=d.exec(g[2]);)"yes"!=v[2]&&"1"!=v[2]||v[1]in{height:1,width:1,top:1,left:1}?isFinite(v[2])&&(y.target[v[1]]=v[2]):y.target[v[1]]=!0;var b;for(b in null!==f.getAttribute("download")&&(y.download=!0),g={},h)(v=f.getAttribute(b))&&(g[h[b]]=v);(b=f.data("cke-saved-name")||g.advName)&&(g.advName=b),CKEDITOR.tools.isEmpty(g)||(y.advanced=g)}return y},getLinkAttributes:function(e,n){var i=e.config.emailProtection||"",r={};switch(n.type){case"url":i=n.url&&void 0!==n.url.protocol?n.url.protocol:"http://";var o=n.url&&CKEDITOR.tools.trim(n.url.url)||"";r["data-cke-saved-href"]=0===o.indexOf("/")?o:i+o;break;case"anchor":i=n.anchor&&n.anchor.id,r["data-cke-saved-href"]="#"+(n.anchor&&n.anchor.name||i||"");break;case"email":switch(o=(l=n.email).address,i){case"":case"encode":var a=encodeURIComponent(l.subject||""),s=encodeURIComponent(l.body||""),l=[];a&&l.push("subject="+a),s&&l.push("body="+s),l=l.length?"?"+l.join("&"):"","encode"==i?(i=["javascript:void(location.href='mailto:'+",function(t){for(var e,n=t.length,i=[],r=0;r<n;r++)e=t.charCodeAt(r),i.push(e);return"String.fromCharCode("+i.join(",")+")"}(o)],l&&i.push("+'",t(l),"'"),i.push(")")):i=["mailto:",o,l];break;default:i=o.split("@",2),l.name=i[0],l.domain=i[1],i=["javascript:",function(e,n){var i,r,o=e.plugins.link,a=o.compiledProtectionFunction.params;r=[o.compiledProtectionFunction.name,"("];for(var s=0;s<a.length;s++)i=n[o=a[s].toLowerCase()],0<s&&r.push(","),r.push("'",i?t(encodeURIComponent(n[o])):"","'");return r.push(")"),r.join("")}(e,l)]}r["data-cke-saved-href"]=i.join("")}if(n.target)if("popup"==n.target.type){i=["window.open(this.href, '",n.target.name||"","', '"];var c="resizable status location toolbar menubar fullscreen scrollbars dependent".split(" ");for(o=c.length,a=function(t){n.target[t]&&c.push(t+"="+n.target[t])},l=0;l<o;l++)c[l]+=n.target[c[l]]?"=yes":"=no";a("width"),a("left"),a("height"),a("top"),i.push(c.join(","),"'); return false;"),r["data-cke-pa-onclick"]=i.join("")}else"notSet"!=n.target.type&&n.target.name&&(r.target=n.target.name);if(n.download&&(r.download=""),n.advanced){for(var u in h)(i=n.advanced[h[u]])&&(r[u]=i);r.name&&(r["data-cke-saved-name"]=r.name)}for(var d in r["data-cke-saved-href"]&&(r.href=r["data-cke-saved-href"]),u={target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1,download:1},n.advanced&&CKEDITOR.tools.extend(u,h),r)delete u[d];return{set:r,removed:CKEDITOR.tools.objectKeys(u)}},showDisplayTextForElement:function(t,e){return!(e.widgets&&e.widgets.focused||t&&t.getName&&t.is({img:1,table:1,tbody:1,thead:1,tfoot:1,input:1,select:1,textarea:1}))}},CKEDITOR.unlinkCommand=function(){},CKEDITOR.unlinkCommand.prototype={exec:function(t){var e=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1});t.removeStyle(e)},refresh:function(t,e){var n=e.lastElement&&e.lastElement.getAscendant("a",!0);n&&"a"==n.getName()&&n.getAttribute("href")&&n.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]"},CKEDITOR.removeAnchorCommand=function(){},CKEDITOR.removeAnchorCommand.prototype={exec:function(t){var e,n=t.getSelection(),i=n.createBookmarks();n&&(e=n.getSelectedElement())&&(e.getChildCount()?e.is("a"):CKEDITOR.plugins.link.tryRestoreFakeAnchor(t,e))?e.remove(1):(e=CKEDITOR.plugins.link.getSelectedLink(t))&&(e.hasAttribute("href")?(e.removeAttributes({name:1,"data-cke-saved-name":1}),e.removeClass("cke_anchor")):e.remove(1)),n.selectBookmarks(i)},requiredContent:"a[name]"},CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0})}(),function(){function t(t,e,n){return d(e)&&d(n)&&n.equals(e.getNext(function(t){return!(W(t)||X(t)||h(t))}))}function e(t){this.upper=t[0],this.lower=t[1],this.set.apply(this,t.slice(2))}function n(t){var e=t.element;if(e&&d(e)&&(e=e.getAscendant(t.triggers,!0))&&t.editable.contains(e)){var n=a(e);if("true"==n.getAttribute("contenteditable"))return e;if(n.is(t.triggers))return n}return null}function i(t,e,n){return E(t,e),E(t,n),t=e.size.bottom,n=n.size.top,t&&n?0|(t+n)/2:t||n}function r(t,e,n){return e[n?"getPrevious":"getNext"](function(e){return e&&e.type==CKEDITOR.NODE_TEXT&&!W(e)||d(e)&&!h(e)&&!u(t,e)})}function o(t,e,n){return t>e&&t<n}function a(t,e){if(t.data("cke-editable"))return null;for(e||(t=t.getParent());t&&!t.data("cke-editable");){if(t.hasAttribute("contenteditable"))return t;t=t.getParent()}return null}function s(t){var e=t.doc,n=O('<span contenteditable="false" style="'+H+"position:absolute;border-top:1px dashed "+t.boxColor+'"></span>',e),i=CKEDITOR.getUrl(this.path+"images/"+(D.hidpi?"hidpi/":"")+"icon"+(t.rtl?"-rtl":"")+".png");for(w(n,{attach:function(){return this.wrap.getParent()||this.wrap.appendTo(t.editable,!0),this},lineChildren:[w(O('<span title="'+t.editor.lang.magicline.title+'" contenteditable="false">&#8629;</span>',e),{base:H+"height:17px;width:17px;"+(t.rtl?"left":"right")+":17px;background:url("+i+") center no-repeat "+t.boxColor+";cursor:pointer;"+(D.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(D.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px; border-radius: 2px;","top:-17px; border-radius: 2px 2px 0px 0px;","top:-1px; border-radius: 0px 0px 2px 2px;"]}),w(O(U,e),{base:V+"left:0px;border-left-color:"+t.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),w(O(U,e),{base:V+"right:0px;border-right-color:"+t.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){return this.wrap.getParent()&&this.wrap.remove(),this},mouseNear:function(){E(t,this);var e=t.holdDistance,n=this.size;return!!(n&&o(t.mouse.y,n.top-e,n.bottom+e)&&o(t.mouse.x,n.left-e,n.right+e))},place:function(){var e=t.view,n=t.editable,i=t.trigger,r=i.upper,a=i.lower,s=r||a,l=s.getParent(),c={};for(var u in this.trigger=i,r&&E(t,r,!0),a&&E(t,a,!0),E(t,l,!0),t.inInlineMode&&b(t,!0),l.equals(n)?(c.left=e.scroll.x,c.right=-e.scroll.x,c.width=""):(c.left=s.size.left-s.size.margin.left+e.scroll.x-(t.inInlineMode?e.editable.left+e.editable.border.left:0),c.width=s.size.outerWidth+s.size.margin.left+s.size.margin.right+e.scroll.x,c.right=""),r&&a?c.top=r.size.margin.bottom===a.size.margin.top?0|r.size.bottom+r.size.margin.bottom/2:r.size.margin.bottom<a.size.margin.top?r.size.bottom+r.size.margin.bottom:r.size.bottom+r.size.margin.bottom-a.size.margin.top:r?a||(c.top=r.size.bottom+r.size.margin.bottom):c.top=a.size.top-a.size.margin.top,i.is(A)||o(c.top,e.scroll.y-15,e.scroll.y+5)?(c.top=t.inInlineMode?0:e.scroll.y,this.look(A)):i.is(N)||o(c.top,e.pane.bottom-5,e.pane.bottom+15)?(c.top=t.inInlineMode?e.editable.height+e.editable.padding.top+e.editable.padding.bottom:e.pane.bottom-1,this.look(N)):(t.inInlineMode&&(c.top-=e.editable.top+e.editable.border.top),this.look(P)),t.inInlineMode&&(c.top--,c.top+=e.editable.scroll.top,c.left+=e.editable.scroll.left),c)c[u]=CKEDITOR.tools.cssLength(c[u]);this.setStyles(c)},look:function(t){if(this.oldLook!=t){for(var e,n=this.lineChildren.length;n--;)(e=this.lineChildren[n]).setAttribute("style",e.base+e.looks[0|t/2]);this.oldLook=t}},wrap:new I("span",t.doc)}),e=n.lineChildren.length;e--;)n.lineChildren[e].appendTo(n);n.look(P),n.appendTo(n.wrap),n.unselectable(),n.lineChildren[0].on("mouseup",function(e){n.detach(),l(t,function(e){var n=t.line.trigger;e[n.is(x)?"insertBefore":"insertAfter"](n.is(x)?n.lower:n.upper)},!0),t.editor.focus(),D.ie||t.enterMode==CKEDITOR.ENTER_BR||t.hotNode.scrollIntoView(),e.data.preventDefault(!0)}),n.on("mousedown",function(t){t.data.preventDefault(!0)}),t.line=n}function l(t,e,n){var i,r=new CKEDITOR.dom.range(t.doc),o=t.editor;D.ie&&t.enterMode==CKEDITOR.ENTER_BR?i=t.doc.createText(L):(i=(i=a(t.element,!0))&&i.data("cke-enter-mode")||t.enterMode,(i=new I(R[i],t.doc)).is("br")||t.doc.createText(L).appendTo(i)),n&&o.fire("saveSnapshot"),e(i),r.moveToPosition(i,CKEDITOR.POSITION_AFTER_START),o.getSelection().selectRanges([r]),t.hotNode=i,n&&o.fire("saveSnapshot")}function c(t,e){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function i(n){var i=D.ie&&9>D.version?" ":L,r=t.hotNode&&t.hotNode.getText()==i&&t.element.equals(t.hotNode)&&t.lastCmdDirection===!!e;l(t,function(i){r&&t.hotNode&&t.hotNode.remove(),i[e?"insertAfter":"insertBefore"](n),i.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!e}),t.lastCmdDirection=!!e}),D.ie||t.enterMode==CKEDITOR.ENTER_BR||t.hotNode.scrollIntoView(),t.line.detach()}return function(o){var s,l;o=(o=o.getSelection().getStartElement()).getAscendant(B,1),g(t,o)||!o||o.equals(t.editable)||o.contains(t.editable)||((s=a(o))&&"false"==s.getAttribute("contenteditable")&&(o=s),t.element=o,d(s=r(t,o,!e))&&s.is(t.triggers)&&s.is(j)&&(!r(t,s,!e)||(l=r(t,s,!e))&&d(l)&&l.is(t.triggers))?i(s):d(l=n(t))&&(r(t,l,!e)?(o=r(t,l,!e))&&d(o)&&o.is(t.triggers)&&i(l):i(l)))}}()}}function u(t,e){if(!e||e.type!=CKEDITOR.NODE_ELEMENT||!e.$)return!1;var n=t.line;return n.wrap.equals(e)||n.wrap.contains(e)}function d(t){return t&&t.type==CKEDITOR.NODE_ELEMENT&&t.$}function h(t){return!!d(t)&&((e=f(t))||(e=!(!d(t)||!(e={left:1,right:1,center:1})[t.getComputedStyle("float")]&&!e[t.getAttribute("align")])),e);var e}function f(t){return!!{absolute:1,fixed:1}[t.getComputedStyle("position")]}function p(t,e){return d(e)?e.is(t.triggers):null}function g(t,e){if(!e)return!1;for(var n=e.getParents(1),i=n.length;i--;)for(var r=t.tabuList.length;r--;)if(n[i].hasAttribute(t.tabuList[r]))return!0;return!1}function m(t){var n=t.editable,i=t.mouse,r=t.view,a=t.triggerOffset;b(t);var s=i.y>(t.inInlineMode?r.editable.top+r.editable.height/2:Math.min(r.editable.height,r.pane.height)/2);return(n=n[s?"getLast":"getFirst"](function(t){return!(W(t)||X(t))}))?(u(t,n)&&(n=t.line.wrap[s?"getPrevious":"getNext"](function(t){return!(W(t)||X(t))})),d(n)&&!h(n)&&p(t,n)?(E(t,n),!s&&0<=n.size.top&&o(i.y,0,n.size.top+a)?(t=t.inInlineMode||0===r.scroll.y?A:P,new e([null,n,x,$,t])):s&&n.size.bottom<=r.pane.height&&o(i.y,n.size.bottom-a,r.pane.height)?(t=t.inInlineMode||o(n.size.bottom,r.pane.height-a,r.pane.height)?N:P,new e([n,null,S,$,t])):null):null):null}function v(t){var i=t.mouse,a=t.view,s=t.triggerOffset,l=n(t);if(!l)return null;E(t,l),s=Math.min(s,0|l.size.outerHeight/2);var c,u,f=[];if(o(i.y,l.size.top-1,l.size.top+s))u=!1;else{if(!o(i.y,l.size.bottom-s,l.size.bottom+1))return null;u=!0}if(h(l)||function(t,e,n){return!!(e=e[n?"getLast":"getFirst"](function(e){return t.isRelevant(e)&&!e.is(M)}))&&(E(t,e),n?e.size.top>t.mouse.y:e.size.bottom<t.mouse.y)}(t,l,u)||l.getParent().is(F))return null;var g=r(t,l,!u);if(g){if(g&&g.type==CKEDITOR.NODE_TEXT)return null;if(d(g)){if(h(g)||!p(t,g)||g.getParent().is(F))return null;f=[g,l][u?"reverse":"concat"]().concat([K,$])}}else l.equals(t.editable[u?"getLast":"getFirst"](t.isRelevant))?(b(t),u&&o(i.y,l.size.bottom-s,a.pane.height)&&o(l.size.bottom,a.pane.height-s,a.pane.height)?c=N:o(i.y,0,l.size.top+s)&&(c=A)):c=P,f=[null,l][u?"reverse":"concat"]().concat([u?S:x,$,c,l.equals(t.editable[u?"getLast":"getFirst"](t.isRelevant))?u?N:A:P]);return 0 in f?new e(f):null}function y(t,e,n,i){for(var r=e.getDocumentPosition(),o={},a={},s={},l={},c=Y.length;c--;)o[Y[c]]=parseInt(e.getComputedStyle.call(e,"border-"+Y[c]+"-width"),10)||0,s[Y[c]]=parseInt(e.getComputedStyle.call(e,"padding-"+Y[c]),10)||0,a[Y[c]]=parseInt(e.getComputedStyle.call(e,"margin-"+Y[c]),10)||0;return n&&!i||C(t,i),l.top=r.y-(n?0:t.view.scroll.y),l.left=r.x-(n?0:t.view.scroll.x),l.outerWidth=e.$.offsetWidth,l.outerHeight=e.$.offsetHeight,l.height=l.outerHeight-(s.top+s.bottom+o.top+o.bottom),l.width=l.outerWidth-(s.left+s.right+o.left+o.right),l.bottom=l.top+l.outerHeight,l.right=l.left+l.outerWidth,t.inInlineMode&&(l.scroll={top:e.$.scrollTop,left:e.$.scrollLeft}),w({border:o,padding:s,margin:a,ignoreScroll:n},l,!0)}function E(t,e,n){if(!d(e))return e.size=null;if(e.size){if(e.size.ignoreScroll==n&&e.size.date>new Date-q)return null}else e.size={};return w(e.size,y(t,e,n),{date:+new Date},!0)}function b(t,e){t.view.editable=y(t,t.editable,e,!0)}function C(t,e){t.view||(t.view={});var n=t.view;if(!(!e&&n&&n.date>new Date-q)){n=(i=t.win).getScrollPosition();var i=i.getViewPaneSize();w(t.view,{scroll:{x:n.x,y:n.y,width:t.doc.$.documentElement.scrollWidth-i.width,height:t.doc.$.documentElement.scrollHeight-i.height},pane:{width:i.width,height:i.height,bottom:i.height+n.y},date:+new Date},!0)}}function T(t,n,i,r){for(var o=r,a=r,s=0,l=!1,c=!1,u=t.view.pane.height,d=t.mouse;d.y+s<u&&0<d.y-s&&(l||(l=n(o,r)),c||(c=n(a,r)),!l&&0<d.y-s&&(o=i(t,{x:d.x,y:d.y-s})),!c&&d.y+s<u&&(a=i(t,{x:d.x,y:d.y+s})),!l||!c);)s+=2;return new e([o,a,null,null])}CKEDITOR.plugins.add("magicline",{init:function(t){var i,o,a,p=t.config,E=p.magicline_triggerOffset||30,T={editor:t,enterMode:p.enterMode,triggerOffset:E,holdDistance:0|E*(p.magicline_holdDistance||.5),boxColor:p.magicline_color||"#ff0000",rtl:"rtl"==p.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(p.magicline_tabuList||[]),triggers:p.magicline_everywhere?B:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1},isRelevant:function(t){return d(t)&&!u(T,t)&&!h(t)}};t.on("contentDom",function(){var d=t.editable(),h=t.document,E=t.window;w(T,{editable:d,inInlineMode:d.isInline(),doc:h,win:E,hotNode:null},!0),T.boundary=T.inInlineMode?T.editable:T.doc.getDocumentElement(),d.is(k.$inline)||(T.inInlineMode&&!f(d)&&d.setStyles({position:"relative",top:null,left:null}),s.call(this,T),C(T),d.attachListener(t,"beforeUndoImage",function(){T.line.detach()}),d.attachListener(t,"beforeGetData",function(){T.line.wrap.getParent()&&(T.line.detach(),t.once("getData",function(){T.line.attach()},null,null,1e3))},null,null,0),d.attachListener(T.inInlineMode?h:h.getWindow().getFrame(),"mouseout",function(e){if("wysiwyg"==t.mode)if(T.inInlineMode){var n=e.data.$.clientX;e=e.data.$.clientY,C(T),b(T,!0);var i=T.view.editable,r=T.view.scroll;n>i.left-r.x&&n<i.right-r.x&&e>i.top-r.y&&e<i.bottom-r.y||(clearTimeout(a),a=null,T.line.detach())}else clearTimeout(a),a=null,T.line.detach()}),d.attachListener(d,"keyup",function(){T.hiddenMode=0}),d.attachListener(d,"keydown",function(e){if("wysiwyg"==t.mode)switch(e.data.getKeystroke()){case 2228240:case 16:T.hiddenMode=1,T.line.detach()}}),d.attachListener(T.inInlineMode?d:h,"mousemove",function(e){if(o=!0,"wysiwyg"==t.mode&&!t.readOnly&&!a){var n={x:e.data.$.clientX,y:e.data.$.clientY};a=setTimeout(function(){T.mouse=n,a=T.trigger=null,C(T),o&&!T.hiddenMode&&t.focusManager.hasFocus&&!T.line.mouseNear()&&(T.element=z(T,!0))&&((T.trigger=m(T)||v(T)||G(T))&&!g(T,T.trigger.upper||T.trigger.lower)?T.line.attach().place():(T.trigger=null,T.line.detach()),o=!1)},30)}}),d.attachListener(E,"scroll",function(){"wysiwyg"==t.mode&&(T.line.detach(),D.webkit&&(T.hiddenMode=1,clearTimeout(i),i=setTimeout(function(){T.mouseDown||(T.hiddenMode=0)},50)))}),d.attachListener(_?h:E,"mousedown",function(){"wysiwyg"==t.mode&&(T.line.detach(),T.hiddenMode=1,T.mouseDown=1)}),d.attachListener(_?h:E,"mouseup",function(){T.hiddenMode=0,T.mouseDown=0}),t.addCommand("accessPreviousSpace",c(T)),t.addCommand("accessNextSpace",c(T,!0)),t.setKeystroke([[p.magicline_keystrokePrevious,"accessPreviousSpace"],[p.magicline_keystrokeNext,"accessNextSpace"]]),t.on("loadSnapshot",function(){var e,n,i,r;for(r in{p:1,br:1,div:1})for(i=(e=t.document.getElementsByTag(r)).count();i--;)if((n=e.getItem(i)).data("cke-magicline-hot"))return T.hotNode=n,void(T.lastCmdDirection="true"===n.data("cke-magicline-dir"))}),this.backdoor={accessFocusSpace:l,boxTrigger:e,isLine:u,getAscendantTrigger:n,getNonEmptyNeighbour:r,getSize:y,that:T,triggerEdge:v,triggerEditable:m,triggerExpand:G})},this)}});var w=CKEDITOR.tools.extend,I=CKEDITOR.dom.element,O=I.createFromHtml,D=CKEDITOR.env,_=CKEDITOR.env.ie&&9>CKEDITOR.env.version,k=CKEDITOR.dtd,R={},x=128,S=64,K=32,$=16,A=4,N=2,P=1,L=" ",F=k.$listItem,M=k.$tableContent,j=w({},k.$nonEditable,k.$empty),B=k.$block,q=100,H="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",V=H+"border-color:transparent;display:block;border-style:solid;",U="<span>"+L+"</span>";R[CKEDITOR.ENTER_BR]="br",R[CKEDITOR.ENTER_P]="p",R[CKEDITOR.ENTER_DIV]="div",e.prototype={set:function(t,e,n){return this.properties=t+e+(n||P),this},is:function(t){return(this.properties&t)==t}};var z=function(){function t(t,e){var n=t.$.elementFromPoint(e.x,e.y);return n&&n.nodeType?new CKEDITOR.dom.element(n):null}return function(e,n,i){if(!e.mouse)return null;var r=e.doc,o=e.line.wrap,a=t(r,i=i||e.mouse);return n&&u(e,a)&&(o.hide(),a=t(r,i),o.show()),!a||a.type!=CKEDITOR.NODE_ELEMENT||!a.$||D.ie&&9>D.version&&!e.boundary.equals(a)&&!e.boundary.contains(a)?null:a}}(),W=CKEDITOR.dom.walker.whitespaces(),X=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),G=function(){function e(e){var r,a,s;if(!d(f=e.element)||f.contains(e.editable)||f.isReadOnly())return null;if(t(0,r=(s=T(e,function(t,e){return!e.equals(t)},function(t,e){return z(t,!0,e)},f)).upper,a=s.lower))return s.set(K,8);if(r&&f.contains(r))for(;!r.getParent().equals(f);)r=r.getParent();else r=f.getFirst(function(t){return n(e,t)});if(a&&f.contains(a))for(;!a.getParent().equals(f);)a=a.getParent();else a=f.getLast(function(t){return n(e,t)});if(!r||!a)return null;if(E(e,r),E(e,a),!o(e.mouse.y,r.size.top,a.size.bottom))return null;for(var l,c,u,h,f=Number.MAX_VALUE;a&&!a.equals(r)&&(c=r.getNext(e.isRelevant));)(l=Math.abs(i(e,r,c)-e.mouse.y))<f&&(f=l,u=r,h=c),E(e,r=c);return u&&h&&o(e.mouse.y,u.size.top,h.size.bottom)?(s.upper=u,s.lower=h,s.set(K,8)):null}function n(t,e){return!(e&&e.type==CKEDITOR.NODE_TEXT||X(e)||h(e)||u(t,e)||e.type==CKEDITOR.NODE_ELEMENT&&e.$&&e.is("br"))}return function(n){var i,r=e(n);if(i=r){i=r.upper;var o=r.lower;i=!(!i||!o||h(o)||h(i)||o.equals(i)||i.equals(o)||o.contains(i)||i.contains(o)||!(p(n,i)&&p(n,o)&&t(0,i,o)))}return i?r:null}}(),Y=["top","left","right","bottom"]}(),CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51,CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52,function(){function t(t){if(!t||t.type!=CKEDITOR.NODE_ELEMENT||"form"!=t.getName())return[];for(var e=[],n=["style","className"],i=0;i<n.length;i++){var r=t.$.elements.namedItem(n[i]);r&&(r=new CKEDITOR.dom.element(r),e.push([r,r.nextSibling]),r.remove())}return e}function e(t,e){if(t&&t.type==CKEDITOR.NODE_ELEMENT&&"form"==t.getName()&&0<e.length)for(var n=e.length-1;0<=n;n--){var i=e[n][0],r=e[n][1];r?i.insertBefore(r):i.appendTo(t)}}function n(n,i){var r=t(n),o={},a=n.$;return i||(o.class=a.className||"",a.className=""),o.inline=a.style.cssText||"",i||(a.style.cssText="position: static; overflow: visible"),e(r),o}function i(n,i){var r=t(n),o=n.$;"class"in i&&(o.className=i.class),"inline"in i&&(o.style.cssText=i.inline),e(r)}function r(t){if(!t.editable().isInline()){var e,n=CKEDITOR.instances;for(e in n){var i=n[e];"wysiwyg"!=i.mode||i.readOnly||((i=i.document.getBody()).setAttribute("contentEditable",!1),i.setAttribute("contentEditable",!0))}t.editable().hasFocus&&(t.toolbox.focus(),t.focus())}}CKEDITOR.plugins.add("maximize",{init:function(t){function e(){var e=u.getViewPaneSize();t.resize(e.width,e.height,null,!0)}if(t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var o,a,s,l=t.lang,c=CKEDITOR.document,u=c.getWindow(),d=CKEDITOR.TRISTATE_OFF;t.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var h=t.container.getFirst(function(t){return t.type==CKEDITOR.NODE_ELEMENT&&t.hasClass("cke_inner")}),f=t.ui.space("contents");if("wysiwyg"==t.mode){var p=t.getSelection();o=p&&p.getRanges(),a=u.getScrollPosition()}else{var g=t.editable().$;o=!CKEDITOR.env.ie&&[g.selectionStart,g.selectionEnd],a=[g.scrollLeft,g.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){for(u.on("resize",e),s=u.getScrollPosition(),p=t.container;p=p.getParent();)p.setCustomData("maximize_saved_styles",n(p)),p.setStyle("z-index",t.config.baseFloatZIndex-5);f.setCustomData("maximize_saved_styles",n(f,!0)),h.setCustomData("maximize_saved_styles",n(h,!0)),f={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0},c.getDocumentElement().setStyles(f),!CKEDITOR.env.gecko&&c.getDocumentElement().setStyle("position","fixed"),CKEDITOR.env.gecko&&CKEDITOR.env.quirks||c.getBody().setStyles(f),CKEDITOR.env.ie?setTimeout(function(){u.$.scrollTo(0,0)},0):u.$.scrollTo(0,0),h.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute"),h.$.offsetLeft,h.setStyles({"z-index":t.config.baseFloatZIndex-5,left:"0px",top:"0px"}),h.addClass("cke_maximized"),e(),f=h.getDocumentPosition(),h.setStyles({left:-1*f.x+"px",top:-1*f.y+"px"}),CKEDITOR.env.gecko&&r(t)}else if(this.state==CKEDITOR.TRISTATE_ON){u.removeListener("resize",e),p=[f,h];for(var m=0;m<p.length;m++)i(p[m],p[m].getCustomData("maximize_saved_styles")),p[m].removeCustomData("maximize_saved_styles");for(p=t.container;p=p.getParent();)i(p,p.getCustomData("maximize_saved_styles")),p.removeCustomData("maximize_saved_styles");CKEDITOR.env.ie?setTimeout(function(){u.$.scrollTo(s.x,s.y)},0):u.$.scrollTo(s.x,s.y),h.removeClass("cke_maximized"),CKEDITOR.env.webkit&&(h.setStyle("display","inline"),setTimeout(function(){h.setStyle("display","block")},0)),t.fire("resize",{outerHeight:t.container.$.offsetHeight,contentsHeight:f.$.offsetHeight,outerWidth:t.container.$.offsetWidth})}this.toggleState(),(p=this.uiItems[0])&&(f=this.state==CKEDITOR.TRISTATE_OFF?l.maximize.maximize:l.maximize.minimize,(p=CKEDITOR.document.getById(p._.id)).getChild(1).setHtml(f),p.setAttribute("title",f),p.setAttribute("href",'javascript:void("'+f+'");')),"wysiwyg"==t.mode?o?(CKEDITOR.env.gecko&&r(t),t.getSelection().selectRanges(o),(g=t.getSelection().getStartElement())&&g.scrollIntoView(!0)):u.$.scrollTo(a.x,a.y):(o&&(g.selectionStart=o[0],g.selectionEnd=o[1]),g.scrollLeft=a[0],g.scrollTop=a[1]),o=a=null,d=this.state,t.fire("maximize",this.state)},canUndo:!1}),t.ui.addButton&&t.ui.addButton("Maximize",{label:l.maximize.maximize,command:"maximize",toolbar:"tools,10"}),t.on("mode",function(){var e=t.getCommand("maximize");e.setState(e.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:d)},null,null,100)}}})}(),function(){function t(t){t.data.type="html"}CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(e){var n=0,i=this.path;e.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(e){var i=this;n=1,e.once("beforePaste",t),e.getClipboardData({title:e.lang.pastefromword.title},function(t){t&&e.fire("paste",{type:"html",dataValue:t.dataValue,method:"paste",dataTransfer:CKEDITOR.plugins.clipboard.initPasteDataTransfer()}),e.fire("afterCommandExec",{name:"pastefromword",command:i,returnValue:!!t})})}}),e.ui.addButton&&e.ui.addButton("PasteFromWord",{label:e.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"}),e.on("pasteState",function(t){e.getCommand("pastefromword").setState(t.data)}),e.on("paste",function(t){var r=t.data,o=r.dataValue,a={dataValue:o};if(o&&(n||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument|<o:\w+>|<\/font>)/.test(o))&&(!1!==e.fire("pasteFromWord",a)||n)){r.dontFilter=!0;var s=function(t,e,n){var i=CKEDITOR.cleanWord;return i?n():(t=CKEDITOR.getUrl(t.config.pasteFromWordCleanupFile||e+"filter/default.js"),CKEDITOR.scriptLoader.load(t,n,null,!0)),!i}(e,i,function(){s?e.fire("paste",r):(!e.config.pasteFromWordPromptCleanup||n||confirm(e.lang.pastefromword.confirmCleanup))&&(a.dataValue=CKEDITOR.cleanWord(a.dataValue,e),e.fire("afterPasteFromWord",a),r.dataValue=a.dataValue),n=0});s&&t.cancel()}},null,null,3)}})}(),function(){var t={canUndo:!1,async:!0,exec:function(e){e.getClipboardData({title:e.lang.pastetext.title},function(n){n&&e.fire("paste",{type:"text",dataValue:n.dataValue,method:"paste",dataTransfer:CKEDITOR.plugins.clipboard.initPasteDataTransfer()}),e.fire("afterCommandExec",{name:"pastetext",command:t,returnValue:!!n})})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(e){e.addCommand("pastetext",t),e.ui.addButton&&e.ui.addButton("PasteText",{label:e.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"}),e.config.forcePasteAsPlainText&&e.on("beforePaste",function(t){"html"!=t.data.type&&(t.data.type="text")}),e.on("pasteState",function(t){e.getCommand("pastetext").setState(t.data)})}})}(),CKEDITOR.plugins.add("removeformat",{init:function(t){t.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat),t.ui.addButton&&t.ui.addButton("RemoveFormat",{label:t.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}}),CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(t){for(var e,n=t._.removeFormatRegex||(t._.removeFormatRegex=new RegExp("^(?:"+t.config.removeFormatTags.replace(/,/g,"|")+")$","i")),i=t._.removeAttributes||(t._.removeAttributes=t.config.removeFormatAttributes.split(",")),r=CKEDITOR.plugins.removeformat.filter,o=t.getSelection().getRanges(),a=o.createIterator(),s=function(t){return t.type==CKEDITOR.NODE_ELEMENT};e=a.getNextRange();){e.collapsed||e.enlarge(CKEDITOR.ENLARGE_ELEMENT);var l=e.createBookmark(),c=l.startNode,u=l.endNode,d=function(e){for(var i,o=t.elementPath(e),a=o.elements,s=1;(i=a[s])&&!i.equals(o.block)&&!i.equals(o.blockLimit);s++)n.test(i.getName())&&r(t,i)&&e.breakParent(i)};if(d(c),u)for(d(u),c=c.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);c&&!c.equals(u);)if(c.isReadOnly()){if(c.getPosition(u)&CKEDITOR.POSITION_CONTAINS)break;c=c.getNext(s)}else d=c.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),"img"==c.getName()&&c.data("cke-realelement")||!r(t,c)||(n.test(c.getName())?c.remove(1):(c.removeAttributes(i),t.fire("removeFormatCleanup",c))),c=d;e.moveToBookmark(l)}t.forceNextSelectionCheck(),t.getSelection().selectRanges(o)}}},filter:function(t,e){for(var n=t._.removeFormatFilters||[],i=0;i<n.length;i++)if(!1===n[i](e))return!1;return!0}},CKEDITOR.editor.prototype.addRemoveFormatFilter=function(t){this._.removeFormatFilters||(this._.removeFormatFilters=[]),this._.removeFormatFilters.push(t)},CKEDITOR.config.removeFormatTags="b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var",CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",CKEDITOR.plugins.add("resize",{init:function(t){function e(e){var n=s.width,r=s.height,l=n+(e.data.$.screenX-a.x)*("rtl"==o?-1:1);e=r+(e.data.$.screenY-a.y),c&&(n=Math.max(i.resize_minWidth,Math.min(l,i.resize_maxWidth))),u&&(r=Math.max(i.resize_minHeight,Math.min(e,i.resize_maxHeight))),t.resize(c?n:null,r)}function n(){CKEDITOR.document.removeListener("mousemove",e),CKEDITOR.document.removeListener("mouseup",n),t.document&&(t.document.removeListener("mousemove",e),t.document.removeListener("mouseup",n))}var i=t.config,r=t.ui.spaceId("resizer"),o=t.element?t.element.getDirection(1):"ltr";if(!i.resize_dir&&(i.resize_dir="vertical"),void 0===i.resize_maxWidth&&(i.resize_maxWidth=3e3),void 0===i.resize_maxHeight&&(i.resize_maxHeight=3e3),void 0===i.resize_minWidth&&(i.resize_minWidth=750),void 0===i.resize_minHeight&&(i.resize_minHeight=250),!1!==i.resize_enabled){var a,s,l=null,c=("both"==i.resize_dir||"horizontal"==i.resize_dir)&&i.resize_minWidth!=i.resize_maxWidth,u=("both"==i.resize_dir||"vertical"==i.resize_dir)&&i.resize_minHeight!=i.resize_maxHeight,d=CKEDITOR.tools.addFunction(function(r){l||(l=t.getResizable()),s={width:l.$.offsetWidth||0,height:l.$.offsetHeight||0},a={x:r.screenX,y:r.screenY},i.resize_minWidth>s.width&&(i.resize_minWidth=s.width),i.resize_minHeight>s.height&&(i.resize_minHeight=s.height),CKEDITOR.document.on("mousemove",e),CKEDITOR.document.on("mouseup",n),t.document&&(t.document.on("mousemove",e),t.document.on("mouseup",n)),r.preventDefault&&r.preventDefault()});t.on("destroy",function(){CKEDITOR.tools.removeFunction(d)}),t.on("uiSpace",function(e){if("bottom"==e.data.space){var n="";c&&!u&&(n=" cke_resizer_horizontal"),!c&&u&&(n=" cke_resizer_vertical");var i='<span id="'+r+'" class="cke_resizer'+n+" cke_resizer_"+o+'" title="'+CKEDITOR.tools.htmlEncode(t.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+d+', event)">'+("ltr"==o?"◢":"◣")+"</span>";"ltr"==o&&"ltr"==n?e.data.html+=i:e.data.html=i+e.data.html}},t,null,100),t.on("maximize",function(e){t.ui.space("resizer")[e.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()})}}}),CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var t=function(t){var e=this._,n=e.menu;e.state!==CKEDITOR.TRISTATE_DISABLED&&(e.on&&n?n.hide():(e.previousState=e.state,n||((n=e.menu=new CKEDITOR.menu(t,{panel:{className:"cke_menu_panel",attributes:{"aria-label":t.lang.common.options}}})).onHide=CKEDITOR.tools.bind(function(){var n=this.command?t.getCommand(this.command).modes:this.modes;this.setState(!n||n[t.mode]?e.previousState:CKEDITOR.TRISTATE_DISABLED),e.on=0},this),this.onMenu&&n.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),e.on=1,setTimeout(function(){n.show(CKEDITOR.document.getById(e.id),4)},0)))};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(e){delete e.panel,this.base(e),this.hasArrow=!0,this.click=t},statics:{handler:{create:function(t){return new CKEDITOR.ui.menuButton(t)}}}})},beforeInit:function(t){t.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}}),CKEDITOR.UI_MENUBUTTON="menubutton",CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",tabToOpen:null,dialogName:"scaytDialog",onLoad:function(t){CKEDITOR.plugins.scayt.onLoadTimestamp=(new Date).getTime(),"moono-lisa"==(CKEDITOR.skinName||t.config.skin)&&CKEDITOR.document.appendStyleSheet(this.path+"skins/"+CKEDITOR.skin.name+"/scayt.css")},init:function(t){var e=this,n=CKEDITOR.plugins.scayt;this.bindEvents(t),this.parseConfig(t),this.addRule(t),CKEDITOR.dialog.add(this.dialogName,CKEDITOR.getUrl(this.path+"dialogs/options.js")),this.addMenuItems(t);var i=t.lang.scayt,r=CKEDITOR.env;t.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:i.text_title,title:t.plugins.wsc?t.lang.wsc.title:i.text_title,modes:{wysiwyg:!(r.ie&&(8>r.version||r.quirks))},toolbar:"spellchecker,20",refresh:function(){var e=t.ui.instances.Scayt.getState();t.scayt&&(e=n.state.scayt[t.name]?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),t.fire("scaytButtonState",e)},onRender:function(){var e=this;t.on("scaytButtonState",function(t){void 0!==typeof t.data&&e.setState(t.data)})},onMenu:function(){var e=t.scayt;return t.getMenuItem("scaytToggle").label=t.lang.scayt[e&&n.state.scayt[t.name]?"btn_disable":"btn_enable"],e={scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:e?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytLangs:e?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:e?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:e?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,WSC:t.plugins.wsc?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED},t.config.scayt_uiTabs[0]||delete e.scaytOptions,t.config.scayt_uiTabs[1]||delete e.scaytLangs,t.config.scayt_uiTabs[2]||delete e.scaytDict,e}}),t.contextMenu&&t.addMenuItems&&(t.contextMenu.addListener(function(n,i){var r,o,a=t.scayt;return a&&(o=a.getSelectionNode())&&(r=e.menuGenerator(t,o),a.showBanner("."+t.contextMenu._.definition.panel.className.split(" ").join(" ."))),r}),t.contextMenu._.onHide=CKEDITOR.tools.override(t.contextMenu._.onHide,function(e){return function(){var n=t.scayt;return n&&n.hideBanner(),e.apply(this)}}))},addMenuItems:function(t){var e=this,n=CKEDITOR.plugins.scayt;t.addMenuGroup("scaytButton");for(var i=t.config.scayt_contextMenuItemsOrder.split("|"),r=0;r<i.length;r++)i[r]="scayt_"+i[r];if((i=["grayt_description","grayt_suggest","grayt_control"].concat(i))&&i.length)for(r=0;r<i.length;r++)t.addMenuGroup(i[r],r-10);t.addCommand("scaytToggle",{exec:function(t){var e=t.scayt;n.state.scayt[t.name]=!n.state.scayt[t.name],!0===n.state.scayt[t.name]?e||n.createScayt(t):e&&n.destroy(t)}}),t.addCommand("scaytAbout",{exec:function(t){t.scayt.tabToOpen="about",t.lockSelection(),t.openDialog(e.dialogName)}}),t.addCommand("scaytOptions",{exec:function(t){t.scayt.tabToOpen="options",t.lockSelection(),t.openDialog(e.dialogName)}}),t.addCommand("scaytLangs",{exec:function(t){t.scayt.tabToOpen="langs",t.lockSelection(),t.openDialog(e.dialogName)}}),t.addCommand("scaytDict",{exec:function(t){t.scayt.tabToOpen="dictionaries",t.lockSelection(),t.openDialog(e.dialogName)}}),i={scaytToggle:{label:t.lang.scayt.btn_enable,group:"scaytButton",command:"scaytToggle"},scaytAbout:{label:t.lang.scayt.btn_about,group:"scaytButton",command:"scaytAbout"},scaytOptions:{label:t.lang.scayt.btn_options,group:"scaytButton",command:"scaytOptions"},scaytLangs:{label:t.lang.scayt.btn_langs,group:"scaytButton",command:"scaytLangs"},scaytDict:{label:t.lang.scayt.btn_dictionaries,group:"scaytButton",command:"scaytDict"}},t.plugins.wsc&&(i.WSC={label:t.lang.wsc.toolbar,group:"scaytButton",onClick:function(){var e=CKEDITOR.plugins.scayt,n=t.scayt,i=t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?t.container.getText():t.document.getBody().getText();(i=i.replace(/\s/g,""))?(n&&e.state.scayt[t.name]&&n.setMarkupPaused&&n.setMarkupPaused(!0),t.lockSelection(),t.execCommand("checkspell")):alert("Nothing to check!")}}),t.addMenuItems(i)},bindEvents:function(t){var e=CKEDITOR.plugins.scayt,n=t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE,i=function(){e.destroy(t)},r=function(){!e.state.scayt[t.name]||t.readOnly||t.scayt||e.createScayt(t)},o=function(){n?t.config.scayt_inlineModeImmediateMarkup?r():(t.on("blur",function(){setTimeout(i,0)}),t.on("focus",r),t.focusManager.hasFocus&&r()):r(),function(){var e=t.editable();e.attachListener(e,"focus",function(e){var i,o;if(CKEDITOR.plugins.scayt&&!t.scayt&&setTimeout(r,0),e=CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[t.name]&&t.scayt,(n||e)&&t._.savedSelection){e=!(e=t._.savedSelection.getSelectedElement())&&t._.savedSelection.getRanges();for(var a=0;a<e.length;a++)"string"==typeof(o=e[a]).startContainer.$.nodeValue&&((i=o.startContainer.getText().length)<o.startOffset||i<o.endOffset)&&t.unlockSelection(!1)}},this,null,-10)}();var e=t.editable();e.attachListener(e,"mousedown",function(e){e=e.data.getTarget();var n=t.widgets&&t.widgets.getByElement(e);n&&(n.wrapper=e.getAscendant(function(t){return t.hasAttribute("data-cke-widget-wrapper")},!0))},this,null,-10)};t.on("contentDom",o),t.on("beforeCommandExec",function(n){var i=t.scayt,r=null,o=!1,a=!0;n.data.name in e.options.disablingCommandExec&&"wysiwyg"==t.mode?i&&(e.destroy(t),t.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)):"bold"!==n.data.name&&"italic"!==n.data.name&&"underline"!==n.data.name&&"strike"!==n.data.name&&"subscript"!==n.data.name&&"superscript"!==n.data.name&&"enter"!==n.data.name&&"cut"!==n.data.name&&"language"!==n.data.name||!i||("cut"===n.data.name&&(a=!1,o=!0),"language"===n.data.name&&(r=(r=t.plugins.language.getCurrentLangElement(t))&&r.$,o=!0),t.fire("reloadMarkupScayt",{removeOptions:{removeInside:a,forceBookmark:o,selectionNode:r},timeout:0}))}),t.on("beforeSetMode",function(n){"source"==n.data&&((n=t.scayt)&&(e.destroy(t),t.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)),t.document&&t.document.getBody().removeAttribute("_jquid"))}),t.on("afterCommandExec",function(n){"wysiwyg"!=t.mode||"undo"!=n.data.name&&"redo"!=n.data.name||setTimeout(function(){e.reloadMarkup(t.scayt)},250)}),t.on("readOnly",function(n){var i;n&&(i=t.scayt,!0===n.editor.readOnly?i&&i.fire("removeMarkupInDocument",{}):i?e.reloadMarkup(i):"wysiwyg"==n.editor.mode&&!0===e.state.scayt[n.editor.name]&&(e.createScayt(t),n.editor.fire("scaytButtonState",CKEDITOR.TRISTATE_ON)))}),t.on("beforeDestroy",i),t.on("setData",function(){i(),(t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE||t.plugins.divarea)&&o()},this,null,50),t.on("reloadMarkupScayt",function(n){var i=n.data&&n.data.removeOptions;n=n.data&&n.data.timeout;var r=t.scayt;r&&setTimeout(function(){r.removeMarkupInSelectionNode(i),e.reloadMarkup(r)},n||0)}),t.on("insertElement",function(){t.fire("reloadMarkupScayt",{removeOptions:{forceBookmark:!0}})},this,null,50),t.on("insertHtml",function(){t.fire("reloadMarkupScayt")},this,null,50),t.on("insertText",function(){t.fire("reloadMarkupScayt")},this,null,50),t.on("scaytDialogShown",function(e){e.data.selectPage(t.scayt.tabToOpen)})},parseConfig:function(t){if((i=CKEDITOR.plugins.scayt).replaceOldOptionsNames(t.config),"boolean"!=typeof t.config.scayt_autoStartup&&(t.config.scayt_autoStartup=!1),i.state.scayt[t.name]=t.config.scayt_autoStartup,"boolean"!=typeof t.config.grayt_autoStartup&&(t.config.grayt_autoStartup=!1),"boolean"!=typeof t.config.scayt_inlineModeImmediateMarkup&&(t.config.scayt_inlineModeImmediateMarkup=!1),i.state.grayt[t.name]=t.config.grayt_autoStartup,t.config.scayt_contextCommands||(t.config.scayt_contextCommands="ignore|ignoreall|add"),t.config.scayt_contextMenuItemsOrder||(t.config.scayt_contextMenuItemsOrder="suggest|moresuggest|control"),t.config.scayt_sLang||(t.config.scayt_sLang="en_US"),(void 0===t.config.scayt_maxSuggestions||"number"!=typeof t.config.scayt_maxSuggestions||0>t.config.scayt_maxSuggestions)&&(t.config.scayt_maxSuggestions=5),(void 0===t.config.scayt_minWordLength||"number"!=typeof t.config.scayt_minWordLength||1>t.config.scayt_minWordLength)&&(t.config.scayt_minWordLength=4),void 0!==t.config.scayt_customDictionaryIds&&"string"==typeof t.config.scayt_customDictionaryIds||(t.config.scayt_customDictionaryIds=""),void 0!==t.config.scayt_userDictionaryName&&"string"==typeof t.config.scayt_userDictionaryName||(t.config.scayt_userDictionaryName=null),"string"==typeof t.config.scayt_uiTabs&&3===t.config.scayt_uiTabs.split(",").length){var e=[],n=[];t.config.scayt_uiTabs=t.config.scayt_uiTabs.split(","),CKEDITOR.tools.search(t.config.scayt_uiTabs,function(t){1===Number(t)||0===Number(t)?(n.push(!0),e.push(Number(t))):n.push(!1)}),null===CKEDITOR.tools.search(n,!1)?t.config.scayt_uiTabs=e:t.config.scayt_uiTabs=[1,1,1]}else t.config.scayt_uiTabs=[1,1,1];if("string"!=typeof t.config.scayt_serviceProtocol&&(t.config.scayt_serviceProtocol=null),"string"!=typeof t.config.scayt_serviceHost&&(t.config.scayt_serviceHost=null),"string"!=typeof t.config.scayt_servicePort&&(t.config.scayt_servicePort=null),"string"!=typeof t.config.scayt_servicePath&&(t.config.scayt_servicePath=null),t.config.scayt_moreSuggestions||(t.config.scayt_moreSuggestions="on"),"string"!=typeof t.config.scayt_customerId&&(t.config.scayt_customerId="1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2"),"string"!=typeof t.config.scayt_srcUrl&&(i=-1!=(i=document.location.protocol).search(/https?:/)?i:"http:",t.config.scayt_srcUrl=i+"//svc.webspellchecker.net/spellcheck31/lf/scayt3/ckscayt/ckscayt.js"),"boolean"!=typeof CKEDITOR.config.scayt_handleCheckDirty&&(CKEDITOR.config.scayt_handleCheckDirty=!0),"boolean"!=typeof CKEDITOR.config.scayt_handleUndoRedo&&(CKEDITOR.config.scayt_handleUndoRedo=!0),CKEDITOR.config.scayt_handleUndoRedo=!!CKEDITOR.plugins.undo&&CKEDITOR.config.scayt_handleUndoRedo,"boolean"!=typeof t.config.scayt_multiLanguageMode&&(t.config.scayt_multiLanguageMode=!1),"object"!=typeof t.config.scayt_multiLanguageStyles&&(t.config.scayt_multiLanguageStyles={}),t.config.scayt_ignoreAllCapsWords&&"boolean"!=typeof t.config.scayt_ignoreAllCapsWords&&(t.config.scayt_ignoreAllCapsWords=!1),t.config.scayt_ignoreDomainNames&&"boolean"!=typeof t.config.scayt_ignoreDomainNames&&(t.config.scayt_ignoreDomainNames=!1),t.config.scayt_ignoreWordsWithMixedCases&&"boolean"!=typeof t.config.scayt_ignoreWordsWithMixedCases&&(t.config.scayt_ignoreWordsWithMixedCases=!1),t.config.scayt_ignoreWordsWithNumbers&&"boolean"!=typeof t.config.scayt_ignoreWordsWithNumbers&&(t.config.scayt_ignoreWordsWithNumbers=!1),t.config.scayt_disableOptionsStorage){var i=CKEDITOR.tools.isArray(t.config.scayt_disableOptionsStorage)?t.config.scayt_disableOptionsStorage:"string"==typeof t.config.scayt_disableOptionsStorage?[t.config.scayt_disableOptionsStorage]:void 0,r="all options lang ignore-all-caps-words ignore-domain-names ignore-words-with-mixed-cases ignore-words-with-numbers".split(" "),o=["lang","ignore-all-caps-words","ignore-domain-names","ignore-words-with-mixed-cases","ignore-words-with-numbers"],a=CKEDITOR.tools.search,s=CKEDITOR.tools.indexOf;t.config.scayt_disableOptionsStorage=function(t){for(var e=0;e<t.length;e++){var n=t[e],i=!!a(t,"options");if(!a(r,n)||i&&a(o,function(t){if("lang"===t)return!1}))return;if(a(o,n)&&o.splice(s(o,n),1),"all"===n||i&&a(t,"lang"))return[];"options"===n&&(o=["lang"])}return[].concat(o)}(i)}},addRule:function(t){var e=CKEDITOR.plugins.scayt,n=(r=t.dataProcessor)&&r.htmlFilter,i=t._.elementsPath&&t._.elementsPath.filters,r=r&&r.dataFilter,o=t.addRemoveFormatFilter;i&&i.push(function(n){if(t.scayt&&(n.hasAttribute(e.options.data_attribute_name)||n.hasAttribute(e.options.problem_grammar_data_attribute)))return!1}),r&&r.addRules({elements:{span:function(t){var n=t.hasClass(e.options.misspelled_word_class)&&t.attributes[e.options.data_attribute_name],i=t.hasClass(e.options.problem_grammar_class)&&t.attributes[e.options.problem_grammar_data_attribute];return e&&(n||i)&&delete t.name,t}}}),n&&n.addRules({elements:{span:function(t){var n=t.hasClass(e.options.misspelled_word_class)&&t.attributes[e.options.data_attribute_name],i=t.hasClass(e.options.problem_grammar_class)&&t.attributes[e.options.problem_grammar_data_attribute];return e&&(n||i)&&delete t.name,t}}}),o&&o.call(t,function(n){var i=!0;return t.scayt&&(n.hasAttribute(e.options.data_attribute_name)||n.hasAttribute(e.options.problem_grammar_data_attribute))&&(i=!1),i})},scaytMenuDefinition:function(t){var e=this;return{scayt:{scayt_ignore:{label:(t=t.scayt).getLocal("btn_ignore"),group:"scayt_control",order:1,exec:function(t){t.scayt.ignoreWord()}},scayt_ignoreall:{label:t.getLocal("btn_ignoreAll"),group:"scayt_control",order:2,exec:function(t){t.scayt.ignoreAllWords()}},scayt_add:{label:t.getLocal("btn_addWord"),group:"scayt_control",order:3,exec:function(t){var e=t.scayt;setTimeout(function(){e.addWordToUserDictionary()},10)}},scayt_option:{label:t.getLocal("btn_options"),group:"scayt_control",order:4,exec:function(t){t.scayt.tabToOpen="options",t.lockSelection(),t.openDialog(e.dialogName)},verification:function(t){return 1==t.config.scayt_uiTabs[0]}},scayt_language:{label:t.getLocal("btn_langs"),group:"scayt_control",order:5,exec:function(t){t.scayt.tabToOpen="langs",t.lockSelection(),t.openDialog(e.dialogName)},verification:function(t){return 1==t.config.scayt_uiTabs[1]}},scayt_dictionary:{label:t.getLocal("btn_dictionaries"),group:"scayt_control",order:6,exec:function(t){t.scayt.tabToOpen="dictionaries",t.lockSelection(),t.openDialog(e.dialogName)},verification:function(t){return 1==t.config.scayt_uiTabs[2]}},scayt_about:{label:t.getLocal("btn_about"),group:"scayt_control",order:7,exec:function(t){t.scayt.tabToOpen="about",t.lockSelection(),t.openDialog(e.dialogName)}}},grayt:{grayt_problemdescription:{label:"Grammar problem description",group:"grayt_description",order:1,state:CKEDITOR.TRISTATE_DISABLED,exec:function(t){}},grayt_ignore:{label:t.getLocal("btn_ignore"),group:"grayt_control",order:2,exec:function(t){t.scayt.ignorePhrase()}}}}},buildSuggestionMenuItems:function(t,e,n){var i={},r={},o=n?"word":"phrase",a=n?"startGrammarCheck":"startSpellCheck",s=t.scayt;if(0<e.length&&"no_any_suggestions"!==e[0])if(n)for(n=0;n<e.length;n++){var l="scayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[n].replace(" ","_");t.addCommand(l,this.createCommand(CKEDITOR.plugins.scayt.suggestions[n],o,a)),n<t.config.scayt_maxSuggestions?(t.addMenuItem(l,{label:e[n],command:l,group:"scayt_suggest",order:n+1}),i[l]=CKEDITOR.TRISTATE_OFF):(t.addMenuItem(l,{label:e[n],command:l,group:"scayt_moresuggest",order:n+1}),r[l]=CKEDITOR.TRISTATE_OFF,"on"===t.config.scayt_moreSuggestions&&(t.addMenuItem("scayt_moresuggest",{label:s.getLocal("btn_moreSuggestions"),group:"scayt_moresuggest",order:10,getItems:function(){return r}}),i.scayt_moresuggest=CKEDITOR.TRISTATE_OFF))}else for(n=0;n<e.length;n++)l="grayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[n].replace(" ","_"),t.addCommand(l,this.createCommand(CKEDITOR.plugins.scayt.suggestions[n],o,a)),t.addMenuItem(l,{label:e[n],command:l,group:"grayt_suggest",order:n+1}),i[l]=CKEDITOR.TRISTATE_OFF;else i.no_scayt_suggest=CKEDITOR.TRISTATE_DISABLED,t.addCommand("no_scayt_suggest",{exec:function(){}}),t.addMenuItem("no_scayt_suggest",{label:s.getLocal("btn_noSuggestions")||"no_scayt_suggest",command:"no_scayt_suggest",group:"scayt_suggest",order:0});return i},menuGenerator:function(t,e){var n,i,r=t.scayt,o=this.scaytMenuDefinition(t),a={},s=t.config.scayt_contextCommands.split("|"),l=e.getAttribute(r.getLangAttribute())||r.getLang();if(n=r.isScaytNode(e),i=r.isGraytNode(e),n?(o=o.scayt,a=e.getAttribute(r.getScaytNodeAttributeName()),r.fire("getSuggestionsList",{lang:l,word:a}),a=this.buildSuggestionMenuItems(t,CKEDITOR.plugins.scayt.suggestions,n)):i&&(o=o.grayt,a=e.getAttribute(r.getGraytNodeAttributeName()),i=r.getProblemDescriptionText(a,l),o.grayt_problemdescription&&i&&(o.grayt_problemdescription.label=i),r.fire("getGrammarSuggestionsList",{lang:l,phrase:a}),a=this.buildSuggestionMenuItems(t,CKEDITOR.plugins.scayt.suggestions,n)),n&&"off"==t.config.scayt_contextCommands)return a;for(var c in o)n&&-1==CKEDITOR.tools.indexOf(s,c.replace("scayt_",""))&&"all"!=t.config.scayt_contextCommands||(a[c]=void 0!==o[c].state?o[c].state:CKEDITOR.TRISTATE_OFF,"function"!=typeof o[c].verification||o[c].verification(t)||delete a[c],t.addCommand(c,{exec:o[c].exec}),t.addMenuItem(c,{label:t.lang.scayt[o[c].label]||o[c].label,command:c,group:o[c].group,order:o[c].order}));return a},createCommand:function(t,e,n){return{exec:function(i){i=i.scayt;var r={};r[e]=t,i.replaceSelectionNode(r),"startGrammarCheck"===n&&i.removeMarkupInSelectionNode({grammarOnly:!0}),i.fire(n)}}}}),CKEDITOR.plugins.scayt={charsToObserve:[{charName:"cke-fillingChar",charCode:function(){var t;if(n=(n=CKEDITOR.version.match(/^\d(\.\d*)*/))&&n[0]){t="4.5.7";var e,n=n.replace(/\./g,"");t=t.replace(/\./g,""),e=0<=(e=n.length-t.length)?e:0,t=parseInt(n)>=parseInt(t)*Math.pow(10,e)}return t?Array(7).join(String.fromCharCode(8203)):String.fromCharCode(8203)}()}],onLoadTimestamp:"",state:{scayt:{},grayt:{}},warningCounter:0,suggestions:[],options:{disablingCommandExec:{source:!0,newpage:!0,templates:!0},data_attribute_name:"data-scayt-word",misspelled_word_class:"scayt-misspell-word",problem_grammar_data_attribute:"data-grayt-phrase",problem_grammar_class:"gramm-problem"},backCompatibilityMap:{scayt_service_protocol:"scayt_serviceProtocol",scayt_service_host:"scayt_serviceHost",scayt_service_port:"scayt_servicePort",scayt_service_path:"scayt_servicePath",scayt_customerid:"scayt_customerId"},alarmCompatibilityMessage:function(){5>this.warningCounter&&(console.warn("Note: You are using latest version of SCAYT plug-in. It is recommended to upgrade WebSpellChecker.net application to version v4.8.3.Contact us by e-mail at support@webspellchecker.net."),this.warningCounter+=1)},reloadMarkup:function(t){var e;t&&(e=t.getScaytLangList(),t.reloadMarkup?t.reloadMarkup():(this.alarmCompatibilityMessage(),e&&e.ltr&&e.rtl&&t.fire("startSpellCheck, startGrammarCheck")))},replaceOldOptionsNames:function(t){for(var e in t)e in this.backCompatibilityMap&&(t[this.backCompatibilityMap[e]]=t[e],delete t[e])},createScayt:function(t){var e=this,n=CKEDITOR.plugins.scayt;this.loadScaytLibrary(t,function(t){function i(t){return new SCAYT.CKSCAYT(t,function(){},function(){})}var r=t.window&&t.window.getFrame()||t.editable();if(r){var o;r={lang:t.config.scayt_sLang,container:r.$,customDictionary:t.config.scayt_customDictionaryIds,userDictionaryName:t.config.scayt_userDictionaryName,localization:t.langCode,customer_id:t.config.scayt_customerId,debug:t.config.scayt_debug,data_attribute_name:e.options.data_attribute_name,misspelled_word_class:e.options.misspelled_word_class,problem_grammar_data_attribute:e.options.problem_grammar_data_attribute,problem_grammar_class:e.options.problem_grammar_class,"options-to-restore":t.config.scayt_disableOptionsStorage,focused:t.editable().hasFocus,ignoreElementsRegex:t.config.scayt_elementsToIgnore,minWordLength:t.config.scayt_minWordLength,multiLanguageMode:t.config.scayt_multiLanguageMode,multiLanguageStyles:t.config.scayt_multiLanguageStyles,graytAutoStartup:n.state.grayt[t.name],charsToObserve:n.charsToObserve},t.config.scayt_serviceProtocol&&(r.service_protocol=t.config.scayt_serviceProtocol),t.config.scayt_serviceHost&&(r.service_host=t.config.scayt_serviceHost),t.config.scayt_servicePort&&(r.service_port=t.config.scayt_servicePort),t.config.scayt_servicePath&&(r.service_path=t.config.scayt_servicePath),"boolean"==typeof t.config.scayt_ignoreAllCapsWords&&(r["ignore-all-caps-words"]=t.config.scayt_ignoreAllCapsWords),"boolean"==typeof t.config.scayt_ignoreDomainNames&&(r["ignore-domain-names"]=t.config.scayt_ignoreDomainNames),"boolean"==typeof t.config.scayt_ignoreWordsWithMixedCases&&(r["ignore-words-with-mixed-cases"]=t.config.scayt_ignoreWordsWithMixedCases),"boolean"==typeof t.config.scayt_ignoreWordsWithNumbers&&(r["ignore-words-with-numbers"]=t.config.scayt_ignoreWordsWithNumbers);try{o=i(r)}catch(t){e.alarmCompatibilityMessage(),delete r.charsToObserve,o=i(r)}o.subscribe("suggestionListSend",function(t){for(var e={},n=[],i=0;i<t.suggestionList.length;i++)e["word_"+t.suggestionList[i]]||(e["word_"+t.suggestionList[i]]=t.suggestionList[i],n.push(t.suggestionList[i]));CKEDITOR.plugins.scayt.suggestions=n}),o.subscribe("selectionIsChanged",function(e){t.getSelection().isLocked&&t.lockSelection()}),o.subscribe("graytStateChanged",function(e){n.state.grayt[t.name]=e.state}),o.addMarkupHandler&&o.addMarkupHandler(function(e){var n=t.editable(),i=n.getCustomData(e.charName);i&&(i.$=e.node,n.setCustomData(e.charName,i))}),t.scayt=o,t.fire("scaytButtonState",t.readOnly?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_ON)}else n.state.scayt[t.name]=!1})},destroy:function(t){t.scayt&&t.scayt.destroy(),delete t.scayt,t.fire("scaytButtonState",CKEDITOR.TRISTATE_OFF)},loadScaytLibrary:function(t,e){var n,i=function(){CKEDITOR.fireOnce("scaytReady"),t.scayt||"function"==typeof e&&e(t)};void 0===window.SCAYT||"function"!=typeof window.SCAYT.CKSCAYT?(n=t.config.scayt_srcUrl+"?"+this.onLoadTimestamp,CKEDITOR.scriptLoader.load(n,function(t){t&&i()})):window.SCAYT&&"function"==typeof window.SCAYT.CKSCAYT&&i()}},CKEDITOR.on("dialogDefinition",function(t){var e=t.data.name;t=t.data.definition.dialog,"scaytDialog"===e&&t.on("cancel",function(t){return!1},this,null,-1),"checkspell"===e&&t.on("cancel",function(t){t=t.sender&&t.sender.getParentEditor();var e=CKEDITOR.plugins.scayt,n=t.scayt;n&&e.state.scayt[t.name]&&n.setMarkupPaused&&n.setMarkupPaused(!1),t.unlockSelection()},this,null,-2),"link"===e&&t.on("ok",function(t){var e=t.sender&&t.sender.getParentEditor();e&&setTimeout(function(){e.fire("reloadMarkupScayt",{removeOptions:{removeInside:!0,forceBookmark:!0},timeout:0})},0)})}),CKEDITOR.on("scaytReady",function(){if(!0===CKEDITOR.config.scayt_handleCheckDirty&&((t=CKEDITOR.editor.prototype).checkDirty=CKEDITOR.tools.override(t.checkDirty,function(t){return function(){var e=null,n=this.scayt;if(CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt){if(e="ready"==this.status){var i=n.removeMarkupFromString(this.getSnapshot());n=n.removeMarkupFromString(this._.previousValue),e=e&&n!==i}}else e=t.call(this);return e}}),t.resetDirty=CKEDITOR.tools.override(t.resetDirty,function(t){return function(){var e=this.scayt;CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt?this._.previousValue=e.removeMarkupFromString(this.getSnapshot()):t.call(this)}})),!0===CKEDITOR.config.scayt_handleUndoRedo){var t,e="function"==typeof(t=CKEDITOR.plugins.undo.Image.prototype).equalsContent?"equalsContent":"equals";t[e]=CKEDITOR.tools.override(t[e],function(t){return function(e){var n,i=e.editor.scayt,r=this.contents,o=e.contents;return CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[e.editor.name]&&e.editor.scayt&&(this.contents=i.removeMarkupFromString(r)||"",e.contents=i.removeMarkupFromString(o)||""),n=t.apply(this,arguments),this.contents=r,e.contents=o,n}})}}),function(){var t={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(t){this.toggleState(),this.refresh(t)},refresh:function(t){if(t.document){var e=this.state==CKEDITOR.TRISTATE_ON?"attachClass":"removeClass";t.editable()[e]("cke_show_borders")}}};CKEDITOR.plugins.add("showborders",{modes:{wysiwyg:1},onLoad:function(){var t;t=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:".%1 table.%2,;.%1 table.%2 > tr > td, .%1 table.%2 > tr > th,;.%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,;.%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,;.%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th;{;border : #d3d3d3 1px dotted;}".split(";")).join("").replace(/%2/g,"cke_show_border").replace(/%1/g,"cke_show_borders "),CKEDITOR.addCss(t)},init:function(e){var n=e.addCommand("showborders",t);n.canUndo=!1,!1!==e.config.startupShowBorders&&n.setState(CKEDITOR.TRISTATE_ON),e.on("mode",function(){n.state!=CKEDITOR.TRISTATE_DISABLED&&n.refresh(e)},null,null,100),e.on("contentDom",function(){n.state!=CKEDITOR.TRISTATE_DISABLED&&n.refresh(e)}),e.on("removeFormatCleanup",function(t){t=t.data,e.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&t.is("table")&&(!t.hasAttribute("border")||0>=parseInt(t.getAttribute("border"),10))&&t.addClass("cke_show_border")})},afterInit:function(t){var e=t.dataProcessor;t=e&&e.dataFilter,e=e&&e.htmlFilter,t&&t.addRules({elements:{table:function(t){var e=(t=t.attributes).class,n=parseInt(t.border,10);n&&!(0>=n)||e&&-1!=e.indexOf("cke_show_border")||(t.class=(e||"")+" cke_show_border")}}}),e&&e.addRules({elements:{table:function(t){var e=(t=t.attributes).class;e&&(t.class=e.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}})}}),CKEDITOR.on("dialogDefinition",function(t){var e=t.data.name;"table"!=e&&"tableProperties"!=e||((e=(t=t.data.definition).getContents("info").get("txtBorder")).commit=CKEDITOR.tools.override(e.commit,function(t){return function(e,n){t.apply(this,arguments);var i=parseInt(this.getValue(),10);n[!i||0>=i?"addClass":"removeClass"]("cke_show_border")}}),(t=(t=t.getContents("advanced"))&&t.get("advCSSClasses"))&&(t.setup=CKEDITOR.tools.override(t.setup,function(t){return function(){t.apply(this,arguments),this.setValue(this.getValue().replace(/cke_show_border/,""))}}),t.commit=CKEDITOR.tools.override(t.commit,function(t){return function(e,n){t.apply(this,arguments),parseInt(n.getAttribute("border"),10)||n.addClass("cke_show_border")}})))})}(),function(){CKEDITOR.plugins.add("sourcearea",{init:function(e){function n(){var t=r&&this.equals(CKEDITOR.document.getActive());this.hide(),this.setStyle("height",this.getParent().$.clientHeight+"px"),this.setStyle("width",this.getParent().$.clientWidth+"px"),this.show(),t&&this.focus()}if(e.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var i=CKEDITOR.plugins.sourcearea;e.addMode("source",function(i){var r=e.ui.space("contents").getDocument().createElement("textarea");r.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",e.config.sourceAreaTabSize||4))),r.setAttribute("dir","ltr"),r.addClass("cke_source").addClass("cke_reset").addClass("cke_enable_context_menu"),e.ui.space("contents").append(r),(r=e.editable(new t(e,r))).setData(e.getData(1)),CKEDITOR.env.ie&&(r.attachListener(e,"resize",n,r),r.attachListener(CKEDITOR.document.getWindow(),"resize",n,r),CKEDITOR.tools.setTimeout(n,0,r)),e.fire("ariaWidget",this),i()}),e.addCommand("source",i.commands.source),e.ui.addButton&&e.ui.addButton("Source",{label:e.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"}),e.on("mode",function(){e.getCommand("source").setState("source"==e.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)});var r=CKEDITOR.env.ie&&9==CKEDITOR.env.version}}});var t=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(t){this.setValue(t),this.status="ready",this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(t){this[(t?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){t.baseProto.detach.call(this),this.clearCustomData(),this.remove()}}})}(),CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(t){"wysiwyg"==t.mode&&t.fire("saveSnapshot"),t.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED),t.setMode("source"==t.mode?"wysiwyg":"source")},canUndo:!1}}},CKEDITOR.plugins.add("specialchar",{availableLangs:{af:1,ar:1,az:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,nb:1,nl:1,no:1,oc:1,pl:1,pt:1,"pt-br":1,ru:1,si:1,sk:1,sl:1,sq:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(t){var e=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js"),t.addCommand("specialchar",{exec:function(){var n=t.langCode;n=e.availableLangs[n]?n:e.availableLangs[n.replace(/-.*/,"")]?n.replace(/-.*/,""):"en",CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(e.path+"dialogs/lang/"+n+".js"),function(){CKEDITOR.tools.extend(t.lang.specialchar,e.langEntries[n]),t.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:!1}),t.ui.addButton&&t.ui.addButton("SpecialChar",{label:t.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}}),CKEDITOR.config.specialChars="! &quot; # $ % &amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ &euro; &lsquo; &rsquo; &ldquo; &rdquo; &ndash; &mdash; &iexcl; &cent; &pound; &curren; &yen; &brvbar; &sect; &uml; &copy; &ordf; &laquo; &not; &reg; &macr; &deg; &sup2; &sup3; &acute; &micro; &para; &middot; &cedil; &sup1; &ordm; &raquo; &frac14; &frac12; &frac34; &iquest; &Agrave; &Aacute; &Acirc; &Atilde; &Auml; &Aring; &AElig; &Ccedil; &Egrave; &Eacute; &Ecirc; &Euml; &Igrave; &Iacute; &Icirc; &Iuml; &ETH; &Ntilde; &Ograve; &Oacute; &Ocirc; &Otilde; &Ouml; &times; &Oslash; &Ugrave; &Uacute; &Ucirc; &Uuml; &Yacute; &THORN; &szlig; &agrave; &aacute; &acirc; &atilde; &auml; &aring; &aelig; &ccedil; &egrave; &eacute; &ecirc; &euml; &igrave; &iacute; &icirc; &iuml; &eth; &ntilde; &ograve; &oacute; &ocirc; &otilde; &ouml; &divide; &oslash; &ugrave; &uacute; &ucirc; &uuml; &yacute; &thorn; &yuml; &OElig; &oelig; &#372; &#374 &#373 &#375; &sbquo; &#8219; &bdquo; &hellip; &trade; &#9658; &bull; &rarr; &rArr; &hArr; &diams; &asymp;".split(" "),CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(t){var e=t.config,n=t.lang.stylescombo,i={},r=[],o=[];t.on("stylesSet",function(n){if(n=n.data.styles){for(var a,s,l,c=0,u=n.length;c<u;c++)a=n[c],t.blockless&&a.element in CKEDITOR.dtd.$block||"string"==typeof a.type&&!CKEDITOR.style.customHandlers[a.type]||(s=a.name,a=new CKEDITOR.style(a),t.filter.customConfig&&!t.filter.check(a))||(a._name=s,a._.enterMode=e.enterMode,a._.type=l=a.assignedTo||a.type,a._.weight=c+1e3*(l==CKEDITOR.STYLE_OBJECT?1:l==CKEDITOR.STYLE_BLOCK?2:3),i[s]=a,r.push(a),o.push(a));r.sort(function(t,e){return t._.weight-e._.weight})}}),t.ui.addRichCombo("Styles",{label:n.label,title:n.panelTitle,toolbar:"styles,10",allowedContent:o,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(e.contentsCss),multiSelect:!0,attributes:{"aria-label":n.panelTitle}},init:function(){var t,e,i,o,a,s;for(a=0,s=r.length;a<s;a++)e=(t=r[a])._name,(o=t._.type)!=i&&(this.startGroup(n["panelTitle"+String(o)]),i=o),this.add(e,t.type==CKEDITOR.STYLE_OBJECT?e:t.buildPreview(),e);this.commit()},onClick:function(e){t.focus(),t.fire("saveSnapshot"),e=i[e];var n=t.elementPath();e.group&&e.removeStylesFromSameGroup(t)?t.applyStyle(e):t[e.checkActive(n,t)?"removeStyle":"applyStyle"](e),t.fire("saveSnapshot")},onRender:function(){t.on("selectionChange",function(e){for(var n,r=this.getValue(),o=0,a=(e=e.data.path.elements).length;o<a;o++)for(var s in n=e[o],i)if(i[s].checkElementRemovable(n,!0,t))return void(s!=r&&this.setValue(s));this.setValue("")},this)},onOpen:function(){var e=t.getSelection().getSelectedElement(),r=(e=t.elementPath(e),[0,0,0,0]);for(var o in this.showAll(),this.unmarkAll(),i){var a=i[o],s=a._.type;a.checkApplicable(e,t,t.activeFilter)?r[s]++:this.hideItem(o),a.checkActive(e,t)&&this.mark(o)}r[CKEDITOR.STYLE_BLOCK]||this.hideGroup(n["panelTitle"+String(CKEDITOR.STYLE_BLOCK)]),r[CKEDITOR.STYLE_INLINE]||this.hideGroup(n["panelTitle"+String(CKEDITOR.STYLE_INLINE)]),r[CKEDITOR.STYLE_OBJECT]||this.hideGroup(n["panelTitle"+String(CKEDITOR.STYLE_OBJECT)])},refresh:function(){var e=t.elementPath();if(e){for(var n in i)if(i[n].checkApplicable(e,t,t.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){i={},r=[]}})}}),function(){function t(t){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(e){if(e.editable().hasFocus){var n,i=e.getSelection();if(n=new CKEDITOR.dom.elementPath(i.getCommonAncestor(),i.root).contains({td:1,th:1},1)){if(i=e.createRange(),(o=CKEDITOR.tools.tryThese(function(){var e=n.getParent().$.cells[n.$.cellIndex+(t?-1:1)];return e.parentNode.parentNode,e},function(){var e;return(e=(e=n.getParent()).getAscendant("table").$.rows[e.$.rowIndex+(t?-1:1)]).cells[t?e.cells.length-1:0]}))||t){if(!o)return!0;o=new CKEDITOR.dom.element(o),i.moveToElementEditStart(o),i.checkStartOfBlock()&&i.checkEndOfBlock()||i.selectNodeContents(o)}else{for(var r=n.getAscendant("table").$,o=n.getParent().$.cells,a=(r=new CKEDITOR.dom.element(r.insertRow(-1),e.document),0),s=o.length;a<s;a++)r.append(new CKEDITOR.dom.element(o[a],e.document).clone(!1,!1)).appendBogus();i.moveToElementEditStart(r)}return i.select(!0),!0}}return!1}}}var e={editorFocus:!1,modes:{wysiwyg:1,source:1}},n={exec:function(t){t.container.focusNext(!0,t.tabIndex)}},i={exec:function(t){t.container.focusPrevious(!0,t.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(r){for(var o=!1!==r.config.enableTabKeyTools,a=r.config.tabSpaces||0,s="";a--;)s+=" ";s&&r.on("key",function(t){9==t.data.keyCode&&(r.insertText(s),t.cancel())}),o&&r.on("key",function(t){(9==t.data.keyCode&&r.execCommand("selectNextCell")||t.data.keyCode==CKEDITOR.SHIFT+9&&r.execCommand("selectPreviousCell"))&&t.cancel()}),r.addCommand("blur",CKEDITOR.tools.extend(n,e)),r.addCommand("blurBack",CKEDITOR.tools.extend(i,e)),r.addCommand("selectNextCell",t()),r.addCommand("selectPreviousCell",t(!0))}})}(),CKEDITOR.dom.element.prototype.focusNext=function(t,e){var n,i,r,o,a,s,l=void 0===e?this.getTabIndex():e;if(0>=l)for(a=this.getNextSourceNode(t,CKEDITOR.NODE_ELEMENT);a;){if(a.isVisible()&&0===a.getTabIndex()){r=a;break}a=a.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(a=this.getDocument().getBody().getFirst();a=a.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!n)if(!i&&a.equals(this)){if(i=!0,t){if(!(a=a.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;n=1}}else i&&!this.contains(a)&&(n=1);if(a.isVisible()&&!(0>(s=a.getTabIndex()))){if(n&&s==l){r=a;break}s>l&&(!r||!o||s<o)?(r=a,o=s):r||0!==s||(r=a,o=s)}}r&&r.focus()},CKEDITOR.dom.element.prototype.focusPrevious=function(t,e){for(var n,i,r,o,a=void 0===e?this.getTabIndex():e,s=0,l=this.getDocument().getBody().getLast();l=l.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!n)if(!i&&l.equals(this)){if(i=!0,t){if(!(l=l.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;n=1}}else i&&!this.contains(l)&&(n=1);if(l.isVisible()&&!(0>(o=l.getTabIndex())))if(0>=a){if(n&&0===o){r=l;break}o>s&&(r=l,s=o)}else{if(n&&o==a){r=l;break}o<a&&(!r||o>s)&&(r=l,s=o)}}r&&r.focus()},CKEDITOR.plugins.add("table",{requires:"dialog",init:function(t){function e(t){return CKEDITOR.tools.extend(t||{},{contextSensitive:1,refresh:function(t,e){this.setState(e.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!t.blockless){var n=t.lang.table;t.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];"+(t.plugins.dialogadvtab?"table"+t.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"],["td: splitBorderShorthand"],[{element:"table",right:function(t){t.styles&&(t.styles.border&&t.styles.border.match(/solid/)&&(t.attributes.border=1),"collapse"==t.styles["border-collapse"]&&(t.attributes.cellspacing=0))}}]]})),t.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",e())),t.addCommand("tableDelete",e({exec:function(t){var e=t.elementPath().contains("table",1);if(e){var n=e.getParent(),i=t.editable();1!=n.getChildCount()||n.is("td","th")||n.equals(i)||(e=n),(t=t.createRange()).moveToPosition(e,CKEDITOR.POSITION_BEFORE_START),e.remove(),t.select()}}})),t.ui.addButton&&t.ui.addButton("Table",{label:n.toolbar,command:"table",toolbar:"insert,30"}),CKEDITOR.dialog.add("table",this.path+"dialogs/table.js"),CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js"),t.addMenuItems&&t.addMenuItems({table:{label:n.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:n.deleteTable,command:"tableDelete",group:"table",order:1}}),t.on("doubleclick",function(t){t.data.element.is("table")&&(t.data.dialog="tableProperties")}),t.contextMenu&&t.contextMenu.addListener(function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}})}}}),function(){function t(t){function e(t){0<n.length||t.type!=CKEDITOR.NODE_ELEMENT||!h.test(t.getName())||t.getCustomData("selected_cell")||(CKEDITOR.dom.element.setMarker(i,t,"selected_cell",!0),n.push(t))}t=t.getRanges();for(var n=[],i={},r=0;r<t.length;r++){var o,a;if((o=t[r]).collapsed)(o=(o=o.getCommonAncestor()).getAscendant("td",!0)||o.getAscendant("th",!0))&&n.push(o);else for((o=new CKEDITOR.dom.walker(o)).guard=e;a=o.next();)a.type==CKEDITOR.NODE_ELEMENT&&a.is(CKEDITOR.dtd.table)||(a=a.getAscendant("td",!0)||a.getAscendant("th",!0))&&!a.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(i,a,"selected_cell",!0),n.push(a))}return CKEDITOR.dom.element.clearAllMarkers(i),n}function e(e,n){var i=(r=(s=t(e))[0]).getAscendant("table"),r=r.getDocument(),o=(l=s[0].getParent()).$.rowIndex,a=(s=s[s.length-1]).getParent().$.rowIndex+s.$.rowSpan-1,s=new CKEDITOR.dom.element(i.$.rows[a]),l=(o=n?o:a,n?l:s);for(i=(s=CKEDITOR.tools.buildTableMap(i))[o],o=n?s[o-1]:s[o+1],s=s[0].length,r=r.createElement("tr"),a=0;i[a]&&a<s;a++){var c;1<i[a].rowSpan&&o&&i[a]==o[a]?(c=i[a]).rowSpan+=1:((c=new CKEDITOR.dom.element(i[a]).clone()).removeAttribute("rowSpan"),c.appendBogus(),r.append(c),c=c.$),a+=c.colSpan-1}n?r.insertBefore(l):r.insertAfter(l)}function n(e){if(e instanceof CKEDITOR.dom.selection){var i=(a=t(e))[0].getAscendant("table"),r=CKEDITOR.tools.buildTableMap(i);e=a[0].getParent().$.rowIndex;for(var o=(a=a[a.length-1]).getParent().$.rowIndex+a.$.rowSpan-1,a=[],s=e;s<=o;s++){for(var l=r[s],c=new CKEDITOR.dom.element(i.$.rows[s]),u=0;u<l.length;u++){var d=new CKEDITOR.dom.element(l[u]),h=d.getParent().$.rowIndex;1==d.$.rowSpan?d.remove():(--d.$.rowSpan,h==s&&((h=r[s+1])[u-1]?d.insertAfter(new CKEDITOR.dom.element(h[u-1])):new CKEDITOR.dom.element(i.$.rows[s+1]).append(d,1))),u+=d.$.colSpan-1}a.push(c)}for(r=i.$.rows,i=new CKEDITOR.dom.element(r[o+1]||(0<e?r[e-1]:null)||i.$.parentNode),s=a.length;0<=s;s--)n(a[s]);return i}return e instanceof CKEDITOR.dom.element&&(1==(i=e.getAscendant("table")).$.rows.length?i.remove():e.remove()),null}function i(t,e){for(var n=e?1/0:0,i=0;i<t.length;i++){for(var r,o=e,a=(r=t[i]).getParent().$.cells,s=0,l=0;l<a.length;l++){var c=a[l];if(s+=o?1:c.colSpan,c==r.$)break}r=s-1,(e?r<n:r>n)&&(n=r)}return n}function r(e,n){for(var r=(a=t(e))[0].getAscendant("table"),o=i(a,1),a=i(a),s=(o=n?o:a,CKEDITOR.tools.buildTableMap(r)),l=(r=[],a=[],s.length),c=0;c<l;c++)r.push(s[c][o]),a.push(n?s[c][o-1]:s[c][o+1]);for(c=0;c<l;c++)r[c]&&(1<r[c].colSpan&&a[c]==r[c]?(o=r[c]).colSpan+=1:((o=new CKEDITOR.dom.element(r[c]).clone()).removeAttribute("colSpan"),o.appendBogus(),o[n?"insertBefore":"insertAfter"].call(o,new CKEDITOR.dom.element(r[c])),o=o.$),c+=o.rowSpan-1)}function o(t,e){var n=t.getStartElement();if(n=n.getAscendant("td",1)||n.getAscendant("th",1)){var i=n.clone();i.appendBogus(),e?i.insertBefore(n):i.insertAfter(n)}}function a(e){if(e instanceof CKEDITOR.dom.selection){var n,i=(e=t(e))[0]&&e[0].getAscendant("table");t:{var r=0;n=e.length-1;for(var o,l,c={};o=e[r++];)CKEDITOR.dom.element.setMarker(c,o,"delete_cell",!0);for(r=0;o=e[r++];)if((l=o.getPrevious())&&!l.getCustomData("delete_cell")||(l=o.getNext())&&!l.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(c),n=l;break t}CKEDITOR.dom.element.clearAllMarkers(c),n=(l=(l=e[0].getParent()).getPrevious())?l.getLast():(l=(l=e[n].getParent()).getNext())?l.getChild(0):null}for(l=e.length-1;0<=l;l--)a(e[l]);n?s(n,!0):i&&i.remove()}else e instanceof CKEDITOR.dom.element&&(1==(i=e.getParent()).getChildCount()?i.remove():e.remove())}function s(t,e){var n=t.getDocument(),i=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(i.focus(),n.focus()),(n=new CKEDITOR.dom.range(n))["moveToElementEdit"+(e?"End":"Start")](t)||(n.selectNodeContents(t),n.collapse(!e)),n.select(!0)}function l(t,e,n){if(t=t[e],void 0===n)return t;for(e=0;t&&e<t.length;e++){if(n.is&&t[e]==n.$)return e;if(e==n)return new CKEDITOR.dom.element(t[e])}return n.is?-1:null}function c(e,n,i){var r,o,a=t(e);if((n?1!=a.length:2>a.length)||(r=e.getCommonAncestor())&&r.type==CKEDITOR.NODE_ELEMENT&&r.is("table"))return!1;r=(e=a[0]).getAscendant("table");var s=CKEDITOR.tools.buildTableMap(r),c=s.length,u=s[0].length,d=e.getParent().$.rowIndex,h=l(s,d,e);if(n){var f;try{var p=parseInt(e.getAttribute("rowspan"),10)||1;o=parseInt(e.getAttribute("colspan"),10)||1,f=s["up"==n?d-p:"down"==n?d+p:d]["left"==n?h-o:"right"==n?h+o:h]}catch(t){return!1}if(!f||e.$==f)return!1;a["up"==n||"left"==n?"unshift":"push"](new CKEDITOR.dom.element(f))}n=e.getDocument();var g=d,m=(p=f=0,!i&&new CKEDITOR.dom.documentFragment(n)),v=0;for(n=0;n<a.length;n++){var y=(o=a[n]).getParent(),E=o.getFirst(),b=o.$.colSpan,C=o.$.rowSpan,T=l(s,y=y.$.rowIndex,o);v+=b*C,p=Math.max(p,T-h+b),f=Math.max(f,y-d+C),i||((C=(b=o).getBogus())&&C.remove(),b.trim(),o.getChildren().count()&&(y==g||!E||E.isBlockBoundary&&E.isBlockBoundary({br:1})||!(g=m.getLast(CKEDITOR.dom.walker.whitespaces(!0)))||g.is&&g.is("br")||m.append("br"),o.moveChildren(m)),n?o.remove():o.setHtml("")),g=y}if(i)return f*p==v;for(m.moveChildren(e),e.appendBogus(),p>=u?e.removeAttribute("rowSpan"):e.$.rowSpan=f,f>=c?e.removeAttribute("colSpan"):e.$.colSpan=p,n=(a=(i=new CKEDITOR.dom.nodeList(r.$.rows)).count())-1;0<=n;n--)(r=i.getItem(n)).$.cells.length||(r.remove(),a++);return e}function u(e,n){if(1<(i=t(e)).length)return!1;if(n)return!0;var i,r,o=(u=(i=i[0]).getParent()).getAscendant("table"),a=l(d=CKEDITOR.tools.buildTableMap(o),h=u.$.rowIndex,i);if(1<(c=i.$.rowSpan)){r=Math.ceil(c/2);for(var s,c=Math.floor(c/2),u=h+r,d=(o=new CKEDITOR.dom.element(o.$.rows[u]),l(d,u)),h=(u=i.clone(),0);h<d.length;h++){if((s=d[h]).parentNode==o.$&&h>a){u.insertBefore(new CKEDITOR.dom.element(s));break}s=null}s||o.append(u)}else for(c=r=1,(o=u.clone()).insertAfter(u),o.append(u=i.clone()),s=l(d,h),a=0;a<s.length;a++)s[a].rowSpan++;return u.appendBogus(),i.$.rowSpan=r,u.$.rowSpan=c,1==r&&i.removeAttribute("rowSpan"),1==c&&u.removeAttribute("rowSpan"),u}function d(e,n){if(1<(i=t(e)).length)return!1;if(n)return!0;var i,r=(i=i[0]).getParent(),o=r.getAscendant("table"),a=l(o=CKEDITOR.tools.buildTableMap(o),r.$.rowIndex,i);if(1<(s=i.$.colSpan))r=Math.ceil(s/2),s=Math.floor(s/2);else{for(var s=r=1,c=[],u=0;u<o.length;u++){var d=o[u];c.push(d[a]),1<d[a].rowSpan&&(u+=d[a].rowSpan-1)}for(o=0;o<c.length;o++)c[o].colSpan++}return(o=i.clone()).insertAfter(i),o.appendBogus(),i.$.colSpan=r,o.$.colSpan=s,1==r&&i.removeAttribute("colSpan"),1==s&&o.removeAttribute("colSpan"),o}var h=/^(?:td|th)$/;CKEDITOR.plugins.tabletools={requires:"table,dialog,contextmenu",init:function(i){function l(t){return CKEDITOR.tools.extend(t||{},{contextSensitive:1,refresh:function(t,e){this.setState(e.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function h(t,e){var n=i.addCommand(t,e);i.addFeature(n)}var f=i.lang.table;h("cellProperties",new CKEDITOR.dialogCommand("cellProperties",l({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:"table",contentTransformations:[[{element:"td",left:function(t){return t.styles.background&&t.styles.background.match(/^(#[a-fA-F0-9]{3,6}|rgb\([\d, ]+\)|\w+)$/)},right:function(t){t.styles["background-color"]=t.styles.background}}]]}))),CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js"),h("rowDelete",l({requiredContent:"table",exec:function(t){s(n(t=t.getSelection()))}})),h("rowInsertBefore",l({requiredContent:"table",exec:function(t){e(t=t.getSelection(),!0)}})),h("rowInsertAfter",l({requiredContent:"table",exec:function(t){e(t=t.getSelection())}})),h("columnDelete",l({requiredContent:"table",exec:function(e){var n=(e=t(e=e.getSelection()))[0],i=e[e.length-1];e=n.getAscendant("table");for(var r,o,a=CKEDITOR.tools.buildTableMap(e),l=[],c=0,u=a.length;c<u;c++)for(var d=0,h=a[c].length;d<h;d++)a[c][d]==n.$&&(r=d),a[c][d]==i.$&&(o=d);for(c=r;c<=o;c++)for(d=0;d<a.length;d++)i=a[d],n=new CKEDITOR.dom.element(e.$.rows[d]),(i=new CKEDITOR.dom.element(i[c])).$&&(1==i.$.colSpan?i.remove():--i.$.colSpan,d+=i.$.rowSpan-1,n.$.cells.length||l.push(n));o=e.$.rows[0]&&e.$.rows[0].cells,r=new CKEDITOR.dom.element(o[r]||(r?o[r-1]:e.$.parentNode)),l.length==u&&e.remove(),r&&s(r,!0)}})),h("columnInsertBefore",l({requiredContent:"table",exec:function(t){r(t=t.getSelection(),!0)}})),h("columnInsertAfter",l({requiredContent:"table",exec:function(t){r(t=t.getSelection())}})),h("cellDelete",l({requiredContent:"table",exec:function(t){a(t=t.getSelection())}})),h("cellMerge",l({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(t){s(c(t.getSelection()),!0)}})),h("cellMergeRight",l({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(t){s(c(t.getSelection(),"right"),!0)}})),h("cellMergeDown",l({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(t){s(c(t.getSelection(),"down"),!0)}})),h("cellVerticalSplit",l({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(t){s(d(t.getSelection()))}})),h("cellHorizontalSplit",l({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(t){s(u(t.getSelection()))}})),h("cellInsertBefore",l({requiredContent:"table",exec:function(t){o(t=t.getSelection(),!0)}})),h("cellInsertAfter",l({requiredContent:"table",exec:function(t){o(t=t.getSelection())}})),i.addMenuItems&&i.addMenuItems({tablecell:{label:f.cell.menu,group:"tablecell",order:1,getItems:function(){var e=i.getSelection(),n=t(e);return{tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:c(e,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:c(e,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:c(e,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:d(e,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:u(e,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_properties:0<n.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}},tablecell_insertBefore:{label:f.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:f.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:f.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:f.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:f.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:f.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:f.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:f.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:f.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:f.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:f.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:f.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:f.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:f.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:f.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:f.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:f.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}}),i.contextMenu&&i.contextMenu.addListener(function(t,e,n){return(t=n.contains({td:1,th:1},1))&&!t.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null})},getSelectedCells:t},CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)}(),CKEDITOR.tools.buildTableMap=function(t){t=t.$.rows;for(var e=-1,n=[],i=0;i<t.length;i++){!n[++e]&&(n[e]=[]);for(var r=-1,o=0;o<t[i].cells.length;o++){var a=t[i].cells[o];for(r++;n[e][r];)r++;for(var s=isNaN(a.colSpan)?1:a.colSpan,l=(a=isNaN(a.rowSpan)?1:a.rowSpan,0);l<a;l++){n[e+l]||(n[e+l]=[]);for(var c=0;c<s;c++)n[e+l][r+c]=t[i].cells[o]}r+=s-1}}return n},function(){function t(t){function n(e,n){if(n.length){e.items?e.items.push(t.ui.create("-")):e.items=[];for(var r;r=n.shift();)r="string"==typeof r?r:r.name,i&&-1!=CKEDITOR.tools.indexOf(i,r)||(r=t.ui.create(r))&&t.addFeature(r)&&e.items.push(r)}}var i=(i=t.config.removeButtons)&&i.split(","),r=t.config.toolbar;return"string"==typeof r&&(r=t.config["toolbar_"+r]),t.toolbar=r?function(t){var e,i,r,o=[];for(e=0;e<t.length;++e)r={},"/"==(i=t[e])?o.push(i):CKEDITOR.tools.isArray(i)?(n(r,CKEDITOR.tools.clone(i)),o.push(r)):i.items&&(n(r,CKEDITOR.tools.clone(i.items)),r.name=i.name,o.push(r));return o}(r):function(){for(var i=function(){var e,n,i,r={};for(e in t.ui.items)n=(i=(i=(n=t.ui.items[e]).toolbar||"others").split(","))[0],i=parseInt(i[1]||-1,10),r[n]||(r[n]=[]),r[n].push({name:e,order:i});for(n in r)r[n]=r[n].sort(function(t,e){return t.order==e.order?0:0>e.order?-1:0>t.order?1:t.order<e.order?-1:1});return r}(),r=CKEDITOR.tools.clone(t.config.toolbarGroups)||e(t),o=0;o<r.length;o++){var a=r[o];if("/"!=a){"string"==typeof a&&(a=r[o]={name:a});var s,l=a.groups;if(l)for(var c=0;c<l.length;c++)(s=i[s=l[c]])&&n(a,s);(s=i[a.name])&&n(a,s)}}return r}()}function e(t){return t._.toolbarGroups||(t._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var n=function(){this.toolbars=[],this.focusCommandExecuted=!1};n.prototype.focus=function(){for(var t,e=0;t=this.toolbars[e++];)for(var n,i=0;n=t.items[i++];)if(n.focus)return void n.focus()};var i={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(t){t.toolbox&&(t.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){t.toolbox.focus()},100):t.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(e){var r,o=function(t,n){var i,a="rtl"==e.lang.dir,s=e.config.toolbarGroupCycling,l=a?37:39;switch(a=a?39:37,s=void 0===s||s,n){case 9:case CKEDITOR.SHIFT+9:for(;!i||!i.items.length;)if((i=9==n?(i?i.next:t.toolbar.next)||e.toolbox.toolbars[0]:(i?i.previous:t.toolbar.previous)||e.toolbox.toolbars[e.toolbox.toolbars.length-1]).items.length)for(t=i.items[r?i.items.length-1:0];t&&!t.focus;)(t=r?t.previous:t.next)||(i=0);return t&&t.focus(),!1;case l:i=t;do{!(i=i.next)&&s&&(i=t.toolbar.items[0])}while(i&&!i.focus);return i?i.focus():o(t,9),!1;case 40:return t.button&&t.button.hasArrow?(e.once("panelShow",function(t){t.data._.panel._.currentBlock.onKeyDown(40)}),t.execute()):o(t,40==n?l:a),!1;case a:case 38:i=t;do{!(i=i.previous)&&s&&(i=t.toolbar.items[t.toolbar.items.length-1])}while(i&&!i.focus);return i?i.focus():(r=1,o(t,CKEDITOR.SHIFT+9),r=0),!1;case 27:return e.focus(),!1;case 13:case 32:return t.execute(),!1}return!0};e.on("uiSpace",function(i){if(i.data.space==e.config.toolbarLocation){i.removeListener(),e.toolbox=new n;var r,a,s=['<span id="',l=CKEDITOR.tools.getNextId(),'" class="cke_voice_label">',e.lang.toolbar.toolbars,"</span>",'<span id="'+e.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',l,'" onmousedown="return false;">'],l=!1!==e.config.toolbarStartupExpanded;e.config.toolbarCanCollapse&&e.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&s.push('<span class="cke_toolbox_main"'+(l?">":' style="display:none">'));for(var c=e.toolbox.toolbars,u=t(e),d=u.length,h=0;h<d;h++){var f,p,g,m=0,v=u[h],y="/"!==v&&("/"===u[h+1]||h==d-1);if(v)if(r&&(s.push("</span>"),a=r=0),"/"===v)s.push('<span class="cke_toolbar_break"></span>');else{g=v.items||v;for(var E=0;E<g.length;E++){var b,C=g[E];if(C){var T=function(t){t=t.render(e,s),0<(w=m.items.push(t)-1)&&(t.previous=m.items[w-1],t.previous.next=t),t.toolbar=m,t.onkey=o,t.onfocus=function(){e.toolbox.focusCommandExecuted||e.focus()}};if(C.type==CKEDITOR.UI_SEPARATOR)a=r&&C;else{if(b=!1!==C.canGroup,!m){f=CKEDITOR.tools.getNextId(),m={id:f,items:[]},p=v.name&&(e.lang.toolbar.toolbarGroups[v.name]||v.name),s.push('<span id="',f,'" class="cke_toolbar'+(y?' cke_toolbar_last"':'"'),p?' aria-labelledby="'+f+'_label"':"",' role="toolbar">'),p&&s.push('<span id="',f,'_label" class="cke_voice_label">',p,"</span>"),s.push('<span class="cke_toolbar_start"></span>');var w=c.push(m)-1;0<w&&(m.previous=c[w-1],m.previous.next=m)}b?r||(s.push('<span class="cke_toolgroup" role="presentation">'),r=1):r&&(s.push("</span>"),r=0),a&&(T(a),a=0),T(C)}}}r&&(s.push("</span>"),a=r=0),m&&s.push('<span class="cke_toolbar_end"></span></span>')}}if(e.config.toolbarCanCollapse&&s.push("</span>"),e.config.toolbarCanCollapse&&e.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var I=CKEDITOR.tools.addFunction(function(){e.execCommand("toolbarCollapse")});e.on("destroy",function(){CKEDITOR.tools.removeFunction(I)}),e.addCommand("toolbarCollapse",{readOnly:1,exec:function(t){var e=t.ui.space("toolbar_collapser"),n=e.getPrevious(),i=t.ui.space("contents"),r=n.getParent(),o=parseInt(i.$.style.height,10),a=r.$.offsetHeight,s=e.hasClass("cke_toolbox_collapser_min");s?(n.show(),e.removeClass("cke_toolbox_collapser_min"),e.setAttribute("title",t.lang.toolbar.toolbarCollapse)):(n.hide(),e.addClass("cke_toolbox_collapser_min"),e.setAttribute("title",t.lang.toolbar.toolbarExpand)),e.getFirst().setText(s?"▲":"◀"),i.setStyle("height",o-(r.$.offsetHeight-a)+"px"),t.fire("resize",{outerHeight:t.container.$.offsetHeight,contentsHeight:i.$.offsetHeight,outerWidth:t.container.$.offsetWidth})},modes:{wysiwyg:1,source:1}}),e.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse"),s.push('<a title="'+(l?e.lang.toolbar.toolbarCollapse:e.lang.toolbar.toolbarExpand)+'" id="'+e.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser'),l||s.push(" cke_toolbox_collapser_min"),s.push('" onclick="CKEDITOR.tools.callFunction('+I+')">','<span class="cke_arrow">&#9650;</span>',"</a>")}s.push("</span>"),i.data.html+=s.join("")}}),e.on("destroy",function(){if(this.toolbox){var t,e,n,i,r=0;for(t=this.toolbox.toolbars;r<t.length;r++)for(n=t[r].items,e=0;e<n.length;e++)(i=n[e]).clickFn&&CKEDITOR.tools.removeFunction(i.clickFn),i.keyDownFn&&CKEDITOR.tools.removeFunction(i.keyDownFn)}}),e.on("uiReady",function(){var t=e.ui.space("toolbox");t&&e.focusManager.add(t,1)}),e.addCommand("toolbarFocus",i),e.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus"),e.ui.add("-",CKEDITOR.UI_SEPARATOR,{}),e.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(t,e){return e.push('<span class="cke_toolbar_separator" role="separator"></span>'),{}}}}})}}),CKEDITOR.ui.prototype.addToolbarGroup=function(t,n,i){var r=e(this.editor),o=0===n,a={name:t};if(i){if(i=CKEDITOR.tools.search(r,function(t){return t.name==i}))return!i.groups&&(i.groups=[]),n&&0<=(n=CKEDITOR.tools.indexOf(i.groups,n))?void i.groups.splice(n+1,0,t):void(o?i.groups.splice(0,0,t):i.groups.push(t));n=null}n&&(n=CKEDITOR.tools.indexOf(r,function(t){return t.name==n})),o?r.splice(0,0,t):"number"==typeof n?r.splice(n+1,0,a):r.push(t)}}(),CKEDITOR.UI_SEPARATOR="separator",CKEDITOR.config.toolbarLocation="top",function(){var t=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],e={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function(e){function i(t){a.enabled&&!1!==t.data.command.canUndo&&a.save()}function r(){a.enabled=!e.readOnly&&"wysiwyg"==e.mode,a.onChange()}var a=e.undoManager=new n(e),s=a.editingHandler=new o(a),l=e.addCommand("undo",{exec:function(){a.undo()&&(e.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),c=e.addCommand("redo",{exec:function(){a.redo()&&(e.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});e.setKeystroke([[t[0],"undo"],[t[1],"redo"],[t[2],"redo"]]),a.onChange=function(){l.setState(a.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),c.setState(a.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},e.on("beforeCommandExec",i),e.on("afterCommandExec",i),e.on("saveSnapshot",function(t){a.save(t.data&&t.data.contentOnly)}),e.on("contentDom",s.attachListeners,s),e.on("instanceReady",function(){e.fire("saveSnapshot")}),e.on("beforeModeUnload",function(){"wysiwyg"==e.mode&&a.save(!0)}),e.on("mode",r),e.on("readOnly",r),e.ui.addButton&&(e.ui.addButton("Undo",{label:e.lang.undo.undo,command:"undo",toolbar:"undo,10"}),e.ui.addButton("Redo",{label:e.lang.undo.redo,command:"redo",toolbar:"undo,20"})),e.resetUndo=function(){a.reset(),e.fire("saveSnapshot")},e.on("updateSnapshot",function(){a.currentImage&&a.update()}),e.on("lockSnapshot",function(t){t=t.data,a.lock(t&&t.dontUpdate,t&&t.forceUpdate)}),e.on("unlockSnapshot",a.unlock,a)}}),CKEDITOR.plugins.undo={};var n=CKEDITOR.plugins.undo.UndoManager=function(t){this.strokesRecorded=[0,0],this.locked=null,this.previousKeyGroup=-1,this.limit=t.config.undoStackSize||20,this.strokesLimit=25,this.editor=t,this.reset()};n.prototype={type:function(t,e){var i=n.getKeyGroup(t),r=this.strokesRecorded[i]+1;e=e||r>=this.strokesLimit,this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange()),e?(r=0,this.editor.fire("saveSnapshot")):this.editor.fire("change"),this.strokesRecorded[i]=r,this.previousKeyGroup=i},keyGroupChanged:function(t){return n.getKeyGroup(t)!=this.previousKeyGroup},reset:function(){this.snapshots=[],this.index=-1,this.currentImage=null,this.hasRedo=this.hasUndo=!1,this.locked=null,this.resetType()},resetType:function(){this.strokesRecorded=[0,0],this.typing=!1,this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0),this.hasRedo=!!this.getNextImage(!1),this.resetType(),this.onChange()},save:function(t,e,n){var r=this.editor;if(this.locked||"ready"!=r.status||"wysiwyg"!=r.mode)return!1;var o=r.editable();if(!o||"ready"!=o.status)return!1;if(o=this.snapshots,e||(e=new i(r)),!1===e.contents)return!1;if(this.currentImage)if(e.equalsContent(this.currentImage)){if(t||e.equalsSelection(this.currentImage))return!1}else!1!==n&&r.fire("change");return o.splice(this.index+1,o.length-this.index-1),o.length==this.limit&&o.shift(),this.index=o.push(e)-1,this.currentImage=e,!1!==n&&this.refreshState(),!0},restoreImage:function(t){var e,n=this.editor;t.bookmarks&&(n.focus(),e=n.getSelection()),this.locked={level:999},this.editor.loadSnapshot(t.contents),t.bookmarks?e.selectBookmarks(t.bookmarks):CKEDITOR.env.ie&&((e=this.editor.document.getBody().$.createTextRange()).collapse(!0),e.select()),this.locked=null,this.index=t.index,this.currentImage=this.snapshots[this.index],this.update(),this.refreshState(),n.fire("change")},getNextImage:function(t){var e,n=this.snapshots,i=this.currentImage;if(i)if(t){for(e=this.index-1;0<=e;e--)if(t=n[e],!i.equalsContent(t))return t.index=e,t}else for(e=this.index+1;e<n.length;e++)if(t=n[e],!i.equalsContent(t))return t.index=e,t;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var t=this.getNextImage(!0);if(t)return this.restoreImage(t),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var t=this.getNextImage(!1);if(t)return this.restoreImage(t),!0}return!1},update:function(t){if(!this.locked){t||(t=new i(this.editor));for(var e=this.index,n=this.snapshots;0<e&&this.currentImage.equalsContent(n[e-1]);)--e;n.splice(e,this.index-e+1,t),this.index=e,this.currentImage=t}},updateSelection:function(t){if(!this.snapshots.length)return!1;var e=this.snapshots,n=e[e.length-1];return!(!n.equalsContent(t)||n.equalsSelection(t)||(this.currentImage=e[e.length-1]=t,0))},lock:function(t,e){if(this.locked)this.locked.level++;else if(t)this.locked={level:1};else{var n=null;if(e)n=!0;else{var r=new i(this.editor,!0);this.currentImage&&this.currentImage.equalsContent(r)&&(n=r)}this.locked={update:n,level:1}}},unlock:function(){if(this.locked&&!--this.locked.level){var t=this.locked.update;if(this.locked=null,!0===t)this.update();else if(t){var e=new i(this.editor,!0);t.equalsContent(e)||this.update()}}}},n.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1},n.keyGroups={PRINTABLE:0,FUNCTIONAL:1},n.isNavigationKey=function(t){return!!n.navigationKeyCodes[t]},n.getKeyGroup=function(t){var i=n.keyGroups;return e[t]?i.FUNCTIONAL:i.PRINTABLE},n.getOppositeKeyGroup=function(t){var e=n.keyGroups;return t==e.FUNCTIONAL?e.PRINTABLE:e.FUNCTIONAL},n.ieFunctionalKeysBug=function(t){return CKEDITOR.env.ie&&n.getKeyGroup(t)==n.keyGroups.FUNCTIONAL};var i=CKEDITOR.plugins.undo.Image=function(t,e){this.editor=t,t.fire("beforeUndoImage");var n=t.getSnapshot();CKEDITOR.env.ie&&n&&(n=n.replace(/\s+data-cke-expando=".*?"/g,"")),this.contents=n,e||(this.bookmarks=(n=n&&t.getSelection())&&n.createBookmarks2(!0)),t.fire("afterUndoImage")},r=/\b(?:href|src|name)="[^"]*?"/gi;i.prototype={equalsContent:function(t){var e=this.contents;return t=t.contents,CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(e=e.replace(r,""),t=t.replace(r,"")),e==t},equalsSelection:function(t){var e=this.bookmarks;if(t=t.bookmarks,e||t){if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;n++){var i=e[n],r=t[n];if(i.startOffset!=r.startOffset||i.endOffset!=r.endOffset||!CKEDITOR.tools.arrayCompare(i.start,r.start)||!CKEDITOR.tools.arrayCompare(i.end,r.end))return!1}}return!0}};var o=CKEDITOR.plugins.undo.NativeEditingHandler=function(t){this.undoManager=t,this.ignoreInputEvent=!1,this.keyEventsStack=new a,this.lastKeydownImage=null};o.prototype={onKeydown:function(e){var r=e.data.getKey();229!==r&&(-1<CKEDITOR.tools.indexOf(t,e.data.getKeystroke())?e.data.preventDefault():(this.keyEventsStack.cleanUp(e),e=this.undoManager,this.keyEventsStack.getLast(r)||this.keyEventsStack.push(r),this.lastKeydownImage=new i(e.editor),(n.isNavigationKey(r)||this.undoManager.keyGroupChanged(r))&&(e.strokesRecorded[0]||e.strokesRecorded[1])&&(e.save(!1,this.lastKeydownImage,!1),e.resetType())))},onInput:function(){if(this.ignoreInputEvent)this.ignoreInputEvent=!1;else{var t=this.keyEventsStack.getLast();t||(t=this.keyEventsStack.push(0)),this.keyEventsStack.increment(t.keyCode),this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(t.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(t){var e=this.undoManager;t=t.data.getKey();var r=this.keyEventsStack.getTotalInputs();this.keyEventsStack.remove(t),n.ieFunctionalKeysBug(t)&&this.lastKeydownImage&&this.lastKeydownImage.equalsContent(new i(e.editor,!0))||(0<r?e.type(t):n.isNavigationKey(t)&&this.onNavigationKey(!0))},onNavigationKey:function(t){var e=this.undoManager;!t&&e.save(!0,null,!1)||e.updateSelection(new i(e.editor)),e.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},attachListeners:function(){var t=this.undoManager.editor,e=t.editable(),i=this;e.attachListener(e,"keydown",function(t){i.onKeydown(t),n.ieFunctionalKeysBug(t.data.getKey())&&i.onInput()},null,null,999),e.attachListener(e,CKEDITOR.env.ie?"keypress":"input",i.onInput,i,null,999),e.attachListener(e,"keyup",i.onKeyup,i,null,999),e.attachListener(e,"paste",i.ignoreInputEventListener,i,null,999),e.attachListener(e,"drop",i.ignoreInputEventListener,i,null,999),e.attachListener(e.isInline()?e:t.document.getDocumentElement(),"click",function(){i.onNavigationKey()},null,null,999),e.attachListener(this.undoManager.editor,"blur",function(){i.keyEventsStack.remove(9)},null,null,999)}};var a=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};a.prototype={push:function(t){return t=this.stack.push({keyCode:t,inputs:0}),this.stack[t-1]},getLastIndex:function(t){if("number"!=typeof t)return this.stack.length-1;for(var e=this.stack.length;e--;)if(this.stack[e].keyCode==t)return e;return-1},getLast:function(t){return-1!=(t=this.getLastIndex(t))?this.stack[t]:null},increment:function(t){this.getLast(t).inputs++},remove:function(t){-1!=(t=this.getLastIndex(t))&&this.stack.splice(t,1)},resetInputs:function(t){if("number"==typeof t)this.getLast(t).inputs=0;else for(t=this.stack.length;t--;)this.stack[t].inputs=0},getTotalInputs:function(){for(var t=this.stack.length,e=0;t--;)e+=this.stack[t].inputs;return e},cleanUp:function(t){(t=t.data.$).ctrlKey||t.metaKey||this.remove(17),t.shiftKey||this.remove(16),t.altKey||this.remove(18)}}}(),CKEDITOR.plugins.add("wsc",{requires:"dialog",parseApi:function(t){t.config.wsc_onFinish="function"==typeof t.config.wsc_onFinish?t.config.wsc_onFinish:function(){},t.config.wsc_onClose="function"==typeof t.config.wsc_onClose?t.config.wsc_onClose:function(){}},parseConfig:function(t){t.config.wsc_customerId=t.config.wsc_customerId||CKEDITOR.config.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk",t.config.wsc_customDictionaryIds=t.config.wsc_customDictionaryIds||CKEDITOR.config.wsc_customDictionaryIds||"",t.config.wsc_userDictionaryName=t.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||"",t.config.wsc_customLoaderScript=t.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript,t.config.wsc_interfaceLang=t.config.wsc_interfaceLang,CKEDITOR.config.wsc_cmd=t.config.wsc_cmd||CKEDITOR.config.wsc_cmd||"spell",CKEDITOR.config.wsc_version="v4.3.0-master-d769233",CKEDITOR.config.wsc_removeGlobalVariable=!0},onLoad:function(t){"moono-lisa"==(CKEDITOR.skinName||t.config.skin)&&CKEDITOR.document.appendStyleSheet(this.path+"skins/"+CKEDITOR.skin.name+"/wsc.css")},init:function(t){var e=CKEDITOR.env;this.parseConfig(t),this.parseApi(t),t.addCommand("checkspell",new CKEDITOR.dialogCommand("checkspell")).modes={wysiwyg:!(CKEDITOR.env.opera||CKEDITOR.env.air||document.domain!=window.location.hostname||e.ie&&(8>e.version||e.quirks))},void 0===t.plugins.scayt&&t.ui.addButton&&t.ui.addButton("SpellChecker",{label:t.lang.wsc.toolbar,click:function(t){var e=t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?t.container.getText():t.document.getBody().getText();(e=e.replace(/\s/g,""))?t.execCommand("checkspell"):alert("Nothing to check!")},toolbar:"spellchecker,10"}),CKEDITOR.dialog.add("checkspell",this.path+(CKEDITOR.env.ie&&7>=CKEDITOR.env.version?"dialogs/wsc_ie.js":window.postMessage?"dialogs/wsc.js":"dialogs/wsc_ie.js"))}}),function(){function t(t){function e(t){var e=!1;a.attachListener(a,"keydown",function(){var n=i.getBody().getElementsByTag(t);if(!e){for(var r=0;r<n.count();r++)n.getItem(r).setCustomData("retain",!0);e=!0}},null,null,1),a.attachListener(a,"keyup",function(){var n=i.getElementsByTag(t);e&&(1!=n.count()||n.getItem(0).getCustomData("retain")||n.getItem(0).hasAttribute("data-cke-temp")||n.getItem(0).remove(1),e=!1)})}var n=this.editor,i=t.document,r=i.body,o=i.getElementById("cke_actscrpt");o&&o.parentNode.removeChild(o),(o=i.getElementById("cke_shimscrpt"))&&o.parentNode.removeChild(o),(o=i.getElementById("cke_basetagscrpt"))&&o.parentNode.removeChild(o),r.contentEditable=!0,CKEDITOR.env.ie&&(r.hideFocus=!0,r.disabled=!0,r.removeAttribute("disabled")),delete this._.isLoadingData,this.$=r,i=new CKEDITOR.dom.document(i),this.setup(),this.fixInitialSelection();var a=this;CKEDITOR.env.ie&&!CKEDITOR.env.edge&&i.getDocumentElement().addClass(i.$.compatMode),CKEDITOR.env.ie&&!CKEDITOR.env.edge&&n.enterMode!=CKEDITOR.ENTER_P?e("p"):CKEDITOR.env.edge&&n.enterMode!=CKEDITOR.ENTER_DIV&&e("div"),(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version)&&i.getDocumentElement().on("mousedown",function(t){t.data.getTarget().is("html")&&setTimeout(function(){n.editable().focus()})}),function(t){function e(t){t.returnValue=!1}if(CKEDITOR.env.gecko)try{var n=t.document.$;n.execCommand("enableObjectResizing",!1,!t.config.disableObjectResizing),n.execCommand("enableInlineTableEditing",!1,!t.config.disableNativeTableHandles)}catch(t){}else CKEDITOR.env.ie&&11>CKEDITOR.env.version&&t.config.disableObjectResizing&&function(){var n;t.editable().attachListener(t,"selectionChange",function(){var i=t.getSelection().getSelectedElement();i&&(n&&(n.detachEvent("onresizestart",e),n=null),i.$.attachEvent("onresizestart",e),n=i.$)})}()}(n);try{n.document.$.execCommand("2D-position",!1,!0)}catch(t){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==n.document.$.compatMode)&&this.attachListener(this,"keydown",function(t){var e=t.data.getKeystroke();if(33==e||34==e)if(CKEDITOR.env.ie)setTimeout(function(){n.getSelection().scrollIntoView()},0);else if(n.window.$.innerHeight>this.$.offsetHeight){var i=n.createRange();i[33==e?"moveToElementEditStart":"moveToElementEditEnd"](this),i.select(),t.data.preventDefault()}}),CKEDITOR.env.ie&&this.attachListener(i,"blur",function(){try{i.$.selection.empty()}catch(t){}}),CKEDITOR.env.iOS&&this.attachListener(i,"touchend",function(){t.focus()}),(r=n.document.getElementsByTag("title").getItem(0)).data("cke-title",r.getText()),CKEDITOR.env.ie&&(n.document.$.title=this._.docTitle),CKEDITOR.tools.setTimeout(function(){"unloaded"==this.status&&(this.status="ready"),n.fire("contentDom"),this._.isPendingFocus&&(n.focus(),this._.isPendingFocus=!1),setTimeout(function(){n.fire("dataReady")},0)},0,this)}var e;CKEDITOR.plugins.add("wysiwygarea",{init:function(t){t.config.fullPage&&t.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"}),t.addMode("wysiwyg",function(n){function i(i){i&&i.removeListener(),t.editable(new e(t,o.$.contentWindow.document.body)),t.setData(t.getData(1),n)}var r="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",o=(r=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent(r)+"}())":"",CKEDITOR.dom.element.createFromHtml('<iframe src="'+r+'" frameBorder="0"></iframe>'));o.setStyles({width:"100%",height:"100%"}),o.addClass("cke_wysiwyg_frame").addClass("cke_reset"),(r=t.ui.space("contents")).append(o);var a=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.gecko;a&&o.on("load",i);var s=t.title,l=t.fire("ariaEditorHelpLabel",{}).label;if(s&&(CKEDITOR.env.ie&&l&&(s+=", "+l),o.setAttribute("title",s)),l){s=CKEDITOR.tools.getNextId();var c=CKEDITOR.dom.element.createFromHtml('<span id="'+s+'" class="cke_voice_label">'+l+"</span>");r.append(c,1),o.setAttribute("aria-describedby",s)}t.on("beforeModeUnload",function(t){t.removeListener(),c&&c.remove()}),o.setAttributes({tabIndex:t.tabIndex,allowTransparency:"true"}),!a&&i(),t.fire("ariaWidget",o)})}}),CKEDITOR.editor.prototype.addContentsCss=function(t){var e=this.config,n=e.contentsCss;CKEDITOR.tools.isArray(n)||(e.contentsCss=n?[n]:[]),e.contentsCss.push(t)},e=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments),this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(e){CKEDITOR.tools.setTimeout(t,0,this,e)},this),this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(t,e){var n=this.editor;if(e)this.setHtml(t),this.fixInitialSelection(),n.fire("dataReady");else{this._.isLoadingData=!0,n._.dataStore={id:1};var i=n.config,r=i.fullPage,o=i.docType,a=CKEDITOR.tools.buildStyleHtml(function(){var t=[];if(8<=CKEDITOR.document.$.documentMode){t.push("html.CSS1Compat [contenteditable=false]{min-height:0 !important}");var e,n=[];for(e in CKEDITOR.dtd.$removeEmpty)n.push("html.CSS1Compat "+e+"[contenteditable=false]");t.push(n.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&(t.push("html{height:100% !important}"),t.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));return t.push("html{cursor:text;*cursor:auto}"),t.push("img,input,textarea{cursor:default}"),t.join("\n")}()).replace(/<style>/,'<style data-cke-temp="1">');r||(a+=CKEDITOR.tools.buildStyleHtml(n.config.contentsCss));var s=i.baseHref?'<base href="'+i.baseHref+'" data-cke-temp="1" />':"";r&&(t=t.replace(/<!DOCTYPE[^>]*>/i,function(t){return n.docType=o=t,""}).replace(/<\?xml\s[^\?]*\?>/i,function(t){return n.xmlDeclaration=t,""})),t=n.dataProcessor.toHtml(t),r?(/<body[\s|>]/.test(t)||(t="<body>"+t),/<html[\s|>]/.test(t)||(t="<html>"+t+"</html>"),/<head[\s|>]/.test(t)?/<title[\s|>]/.test(t)||(t=t.replace(/<head[^>]*>/,"$&<title></title>")):t=t.replace(/<html[^>]*>/,"$&<head><title></title></head>"),s&&(t=t.replace(/<head[^>]*?>/,"$&"+s)),t=t.replace(/<\/head\s*>/,a+"$&"),t=o+t):t=i.docType+'<html dir="'+i.contentsLangDirection+'" lang="'+(i.contentsLanguage||n.langCode)+'"><head><title>'+this._.docTitle+"</title>"+s+a+"</head><body"+(i.bodyId?' id="'+i.bodyId+'"':"")+(i.bodyClass?' class="'+i.bodyClass+'"':"")+">"+t+"</body></html>",CKEDITOR.env.gecko&&(t=t.replace(/<body/,'<body contenteditable="true" '),2e4>CKEDITOR.env.version&&(t=t.replace(/<body[^>]*>/,"$&\x3c!-- cke-content-start --\x3e"))),i='<script id="cke_actscrpt" type="text/javascript"'+(CKEDITOR.env.ie?' defer="defer" ':"")+">var wasLoaded=0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded=1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"<\/script>",CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(i+='<script id="cke_shimscrpt">window.parent.CKEDITOR.tools.enableHtml5Elements(document)<\/script>'),s&&CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(i+='<script id="cke_basetagscrpt">var baseTag = document.querySelector( "base" );baseTag.href = baseTag.href;<\/script>'),t=t.replace(/(?=\s*<\/(:?head)>)/,i),this.clearCustomData(),this.clearListeners(),n.fire("contentDomUnload");var l=this.getDocument();try{l.write(t)}catch(e){setTimeout(function(){l.write(t)},0)}}},getData:function(t){if(t)return this.getHtml();var e=(t=this.editor).config,n=(o=e.fullPage)&&t.docType,i=o&&t.xmlDeclaration,r=this.getDocument(),o=o?r.getDocumentElement().getOuterHtml():r.getBody().getHtml();return CKEDITOR.env.gecko&&e.enterMode!=CKEDITOR.ENTER_BR&&(o=o.replace(/<br>(?=\s*(:?$|<\/body>))/,"")),o=t.dataProcessor.toDataFormat(o),i&&(o=i+"\n"+o),n&&(o=n+"\n"+o),o},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:e.baseProto.focus.call(this)},detach:function(){var t,n=this.editor,i=n.document;try{t=n.window.getFrame()}catch(t){}e.baseProto.detach.call(this),this.clearCustomData(),i.getDocumentElement().clearCustomData(),CKEDITOR.tools.removeFunction(this._.frameLoadedHandler),t&&t.getParent()?(t.clearCustomData(),(n=t.removeCustomData("onResize"))&&n.removeListener(),t.remove()):CKEDITOR.warn("editor-destroy-iframe")}}})}(),CKEDITOR.config.disableObjectResizing=!1,CKEDITOR.config.disableNativeTableHandles=!0,CKEDITOR.config.disableNativeSpellChecker=!0,CKEDITOR.config.plugins="dialogui,dialog,a11yhelp,about,basicstyles,blockquote,clipboard,panel,floatpanel,menu,contextmenu,elementspath,indent,indentlist,list,enterkey,entities,popup,filebrowser,floatingspace,listblock,button,richcombo,format,horizontalrule,htmlwriter,image,fakeobjects,link,magicline,maximize,pastefromword,pastetext,removeformat,resize,menubutton,scayt,showborders,sourcearea,specialchar,stylescombo,tab,table,tabletools,toolbar,undo,wsc,wysiwygarea",CKEDITOR.config.skin="moono-lisa",function(){var t=function(t,e){var n=CKEDITOR.getUrl("plugins/"+e);t=t.split(",");for(var i=0;i<t.length;i++)CKEDITOR.skin.icons[t[i]]={path:n,offset:-t[++i],bgsize:t[++i]}};CKEDITOR.env.hidpi?t("about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,bidiltr,168,,bidirtl,192,,blockquote,216,,copy-rtl,240,,copy,264,,cut-rtl,288,,cut,312,,paste-rtl,336,,paste,360,,codesnippet,384,,bgcolor,408,,textcolor,432,,copyformatting,456,,creatediv,480,,docprops-rtl,504,,docprops,528,,embed,552,,embedsemantic,576,,find-rtl,600,,find,624,,replace,648,,flash,672,,button,696,,checkbox,720,,form,744,,hiddenfield,768,,imagebutton,792,,radio,816,,select-rtl,840,,select,864,,textarea-rtl,888,,textarea,912,,textfield-rtl,936,,textfield,960,,horizontalrule,984,,iframe,1008,,image,1032,,indent-rtl,1056,,indent,1080,,outdent-rtl,1104,,outdent,1128,,justifyblock,1152,,justifycenter,1176,,justifyleft,1200,,justifyright,1224,,language,1248,,anchor-rtl,1272,,anchor,1296,,link,1320,,unlink,1344,,bulletedlist-rtl,1368,,bulletedlist,1392,,numberedlist-rtl,1416,,numberedlist,1440,,mathjax,1464,,maximize,1488,,newpage-rtl,1512,,newpage,1536,,pagebreak-rtl,1560,,pagebreak,1584,,pastefromword-rtl,1608,,pastefromword,1632,,pastetext-rtl,1656,,pastetext,1680,,placeholder,1704,,preview-rtl,1728,,preview,1752,,print,1776,,removeformat,1800,,save,1824,,scayt,1848,,selectall,1872,,showblocks-rtl,1896,,showblocks,1920,,smiley,1944,,source-rtl,1968,,source,1992,,sourcedialog-rtl,2016,,sourcedialog,2040,,specialchar,2064,,table,2088,,templates-rtl,2112,,templates,2136,,uicolor,2160,,redo-rtl,2184,,redo,2208,,undo-rtl,2232,,undo,2256,,simplebox,4560,auto,spellchecker,2304,","icons_hidpi.png"):t("about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,bidiltr,168,auto,bidirtl,192,auto,blockquote,216,auto,copy-rtl,240,auto,copy,264,auto,cut-rtl,288,auto,cut,312,auto,paste-rtl,336,auto,paste,360,auto,codesnippet,384,auto,bgcolor,408,auto,textcolor,432,auto,copyformatting,456,auto,creatediv,480,auto,docprops-rtl,504,auto,docprops,528,auto,embed,552,auto,embedsemantic,576,auto,find-rtl,600,auto,find,624,auto,replace,648,auto,flash,672,auto,button,696,auto,checkbox,720,auto,form,744,auto,hiddenfield,768,auto,imagebutton,792,auto,radio,816,auto,select-rtl,840,auto,select,864,auto,textarea-rtl,888,auto,textarea,912,auto,textfield-rtl,936,auto,textfield,960,auto,horizontalrule,984,auto,iframe,1008,auto,image,1032,auto,indent-rtl,1056,auto,indent,1080,auto,outdent-rtl,1104,auto,outdent,1128,auto,justifyblock,1152,auto,justifycenter,1176,auto,justifyleft,1200,auto,justifyright,1224,auto,language,1248,auto,anchor-rtl,1272,auto,anchor,1296,auto,link,1320,auto,unlink,1344,auto,bulletedlist-rtl,1368,auto,bulletedlist,1392,auto,numberedlist-rtl,1416,auto,numberedlist,1440,auto,mathjax,1464,auto,maximize,1488,auto,newpage-rtl,1512,auto,newpage,1536,auto,pagebreak-rtl,1560,auto,pagebreak,1584,auto,pastefromword-rtl,1608,auto,pastefromword,1632,auto,pastetext-rtl,1656,auto,pastetext,1680,auto,placeholder,1704,auto,preview-rtl,1728,auto,preview,1752,auto,print,1776,auto,removeformat,1800,auto,save,1824,auto,scayt,1848,auto,selectall,1872,auto,showblocks-rtl,1896,auto,showblocks,1920,auto,smiley,1944,auto,source-rtl,1968,auto,source,1992,auto,sourcedialog-rtl,2016,auto,sourcedialog,2040,auto,specialchar,2064,auto,table,2088,auto,templates-rtl,2112,auto,templates,2136,auto,uicolor,2160,auto,redo-rtl,2184,auto,redo,2208,auto,undo-rtl,2232,auto,undo,2256,auto,simplebox,2280,auto,spellchecker,2304,auto","icons.png")}()),org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.richtext",ver:"1.0",shortId:"org.ekstep.richtext",displayName:"Rich Text",author:"Kartheek Palla",title:"Text Plugin",description:"",publishedDate:"",editor:{main:"editor/plugin.js",dependencies:[{type:"js",src:"editor/libs/ckeditor.js"},{type:"css",src:"editor/style.css"}],views:[{template:"./richtexteditor.html",controller:"./richtexteditorapp.js"}],behaviour:{rotatable:!1},configManifest:[{type:"custom_template",templateURL:"editor/configTemplate.html"}],help:{src:"editor/help.md",dataType:"text"}},renderer:{main:"renderer/richtextrendererplugin.js"}},org.ekstep.contenteditor.basePlugin.extend({type:"org.ekstep.richtext",magicNumber:1920,editorWidth:720,richTextId:"richtext-wrapper",initialize:function(){var t=this;CKEDITOR.basePath=ecEditor.resolvePluginResource(this.manifest.id,this.manifest.ver,"editor/libs/"),ecEditor.addEventListener(this.type+":showpopup",this.loadHtml,this),ecEditor.addEventListener("stage:unselect",this.removeHtmlElements,this),ecEditor.addEventListener("stage:create",this.removeHtmlElements,this),ecEditor.addEventListener(t.manifest.id+":adddiv",this.addDivElement,this),org.ekstep.contenteditor.api.getCanvas().on("object:scaling",this.resizeObject,this),ecEditor.resolvePluginResource(t.manifest.id,t.manifest.ver,"editor/richtexteditor.html"),ecEditor.resolvePluginResource(t.manifest.id,t.manifest.ver,"editor/richtexteditorapp.js"),ecEditor.getService("popup").loadNgModules(n(70),n(71),!0);var e=document.createElement("div");e.setAttribute("id",this.richTextId),e.setAttribute("class",this.richTextId),ecEditor.jQuery(".canvas-container").append(e)},newInstance:function(){this.configManifest=_.remove(this.configManifest,function(t){return"stroke"!=t.propertyName});var t=this.convertToFabric(this.attributes);ecEditor._.isUndefined(this.config.text)&&(this.config.text=ecEditor._.isUndefined(this.attributes.__text)?"":this.attributes.__text),delete t.__text,this.editorObj=new fabric.Rect(t),this.editorObj.visible=!0,this.editorObj&&this.editorObj.setFill(t.fill),ecEditor.dispatchEvent(this.manifest.id+":adddiv",{data:this})},resizeObject:function(t){if(ecEditor.getCurrentObject()&&"org.ekstep.richtext"==ecEditor.getCurrentObject().manifest.id){var e=ecEditor.jQuery("#canvas").offset(),n=ecEditor.getCurrentObject();ecEditor.jQuery("#"+t.target.id).offset({top:t.target.top+e.top,left:t.target.left+e.left}),n.attributes.w=t.target.getWidth(),n.attributes.h=t.target.getHeight(),ecEditor.jQuery("#"+t.target.id).width(t.target.getWidth()),ecEditor.jQuery("#"+t.target.id).height(t.target.getHeight())}},moving:function(t){var e=ecEditor.jQuery("#canvas").offset();ecEditor.jQuery("#"+this.editorObj.id).offset({top:this.editorObj.top+e.top,left:this.editorObj.left+e.left})},selected:function(t){fabric.util.addListener(fabric.document,"dblclick",this.dblClickHandler)},deselected:function(t,e,n){fabric.util.removeListener(fabric.document,"dblclick",this.dblClickHandler)},removed:function(t,e,n){ecEditor.jQuery("div#"+t.id).remove()},addDivElement:function(t,e){var n=ecEditor.jQuery("#canvas").offset(),i=document.createElement("div");i.setAttribute("id",e.data.id),i.style.position="absolute",i.style.fontSize="14px",i.style.fontFamily="NotoSans",i.style.width=e.data.editorObj.width?e.data.editorObj.width+1+"px":"auto",i.style.height=e.data.editorObj.height?e.data.editorObj.height+1+"px":"auto",i.style.pointerEvents="none",ecEditor.jQuery(".canvas-container #"+this.richTextId).append(i),ecEditor.jQuery(".canvas-container #"+this.richTextId+" div#"+e.data.id).html(e.data.config.text),ecEditor.jQuery("#"+e.data.id).offset({top:e.data.editorObj.top+n.top,left:Number(parseInt(ecEditor.jQuery(".canvas-container").css("margin-left")))+(e.data.editorObj.left+n.left)});var r=ecEditor.jQuery("#"+e.data.id).width(),o=ecEditor.jQuery("#"+e.data.id).height();ecEditor.jQuery("#"+e.data.id).width(r),ecEditor.jQuery("#"+e.data.id).height(o),e.data.editorObj.width=r,e.data.editorObj.height=o},dblClickHandler:function(t){"canvas"==t.target.tagName.toLowerCase()&&ecEditor.getCurrentObject()&&"org.ekstep.richtext"===ecEditor.getCurrentObject().manifest.id&&ecEditor.dispatchEvent("org.ekstep.richtext:showpopup",{textSelected:!0})},loadHtml:function(t,e){0<document.getElementsByClassName("richtextEditor_1").length||(this.textSelected=!!e&&e.textSelected,currentInstance=this,ecEditor.getService("popup").open({template:"richtexteditor",controller:"richtexteditorcontroller",controllerAs:"$ctrl",resolve:{instance:function(){return currentInstance}},data:{textSelected:this.textSelected},width:500,showClose:!1,className:"ngdialog-theme-plain richtextEditor_1"}))},render:function(t){t.add(this.editorObj),ecEditor.dispatchEvent(this.manifest.id+":adddiv",{data:this})},removeHtmlElements:function(){org.ekstep.contenteditor.api.jQuery("#"+this.richTextId).empty()},getAttributes:function(){var t=this._super();return t.fontSize=this.updateFontSize(ecEditor.jQuery("#"+this.richTextId).css("font-size"),!1),t},getConfig:function(){var t=this._super();return t.fontsize=ecEditor.jQuery("#"+this.id).css("font-size"),_.omit(t,["stroke","strokeWidth"])},toECML:function(){return _.omit(this._super(),["__text"])},onConfigChange:function(t,e){var n="";switch(t){case"fontweight":_.each(ecEditor.jQuery("#"+this.id).children(),function(t){t.innerHTML="<strong>"+t.innerHTML+"</strong>",n+=t.outerHTML}),this.config.text=n;break;case"fontstyle":_.each(ecEditor.jQuery("#"+this.id).children(),function(t){t.innerHTML="<em>"+t.innerHTML+"</em>",n+=t.outerHTML}),this.config.text=n;break;case"fontsize":break;case"align":_.each(ecEditor.jQuery("#"+this.id).children(),function(t){t.style.textAlign=e,n+=t.outerHTML}),this.config.text=n}ecEditor.render(),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()})},updateFontSize:function(t,e){var n,i,r=void 0;return e?(i=this.attributes.w*(this.magicNumber/100),r=this.editorWidth*this.attributes.w/100,n=parseInt(Math.round(t*(r/i)).toString())):(i=this.editorObj.width/this.magicNumber*100,r=this.editorObj.width/this.editorWidth*100,n=parseFloat((parseInt(t)*(r/i)).toFixed(2))),n}}))},function(t,e){t.exports='<script type="text/ng-template" ng-app="richtexteditorapp" ng-controller="richtexteditorcontroller as $ctrl" id="richtexteditor">\n    <div class="ui modal small active" style="top: 10% !important; width:730px!important;">\n        <div class="header">\n            <div class="ui two column grid">\n                <div class="row">\n                    <div class="column">\n                        <span><i class="fa fa-file-text-o"></i> Text Editor</span>\n                    </div>\n                    <div class="column" style="text-align: right; cursor: pointer;">\n                        <i class="cursor-pointer close icon" ng-click="closeThisDialog()"></i>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="content">\n            <textarea name="editor1" id="editor1" rows="10" cols="80" ng-model="$ctrl.text"></textarea>\n        </div>\n        <div class="actions">\n            <div class="ui buttons">\n                <div class="ui grid">\n                    <div class="eight wide column left aligned richtext-message">\n                        <p>Please select appropriate font name (typeface) as per the language of your text.</p>\n                    </div>\n                    <div class="four wide column right aligned">\n                        <div class="ui buttons" style="margin:0;">\n                            <button class="ui orange button" ng-click="closeThisDialog()" type="button">Cancel</button>\n                            <div class="or"></div>\n                            <button class="ui blue button" id="addLesson" type="button" ng-click="$ctrl.addText()">Add To Lesson</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n<\/script>'},function(t,e,n){"use strict";angular.module("richtexteditorapp",[]).controller("richtexteditorcontroller",["$scope","$injector","instance",function(t,e,n){var i=this;i.text="",t.$on("ngDialog.opened",function(t,e){var n=document.getElementsByClassName("richtextEditor_1");(n=n[0]).addEventListener("click",function(t){var e=i.mapElementWithName(t.srcElement);e&&i.generateTelemetry({type:"click",subtype:e.subtype,target:e.target})}),i.selectedText=!1;var r=org.ekstep.pluginframework.pluginManager.getPluginManifest("org.ekstep.richtext");CKEDITOR.replace("editor1",{customConfig:ecEditor.resolvePluginResource(r.id,r.ver,"editor/libs/config.js"),skin:"moono-lisa,"+CKEDITOR.basePath+"skins/moono-lisa/",contentsCss:ecEditor.resolvePluginResource(r.id,r.ver,"editor/libs/contents.css")});var o=ecEditor.getCurrentObject();t.currentScope.ngDialogData&&t.currentScope.ngDialogData.textSelected&&o&&(i.selectedText=!0,CKEDITOR.instances.editor1.setData(o.config.text))}),i.generateTelemetry=function(t){t&&org.ekstep.contenteditor.api.getService(ServiceConstants.TELEMETRY_SERVICE).interact({type:t.type,subtype:t.subtype,target:t.target,pluginid:n.manifest.id,pluginver:n.manifest.ver,objectid:i.selectedText?org.ekstep.contenteditor.api.getCurrentObject().id:"",stage:ecEditor.getCurrentStage().id})},i.addText=function(){var e=ecEditor.getCurrentObject();e&&i.selectedText?(e.config.text=CKEDITOR.instances.editor1.getData(),e.attributes.__text=e.config.text,ecEditor.jQuery("#richtext-wrapper div#"+e.id).html(e.config.text)):ecEditor.dispatchEvent("org.ekstep.richtext:create",{__text:CKEDITOR.instances.editor1.getData(),type:"rect",x:10,y:20,fill:"rgba(0, 0, 0, 0)",opacity:1}),org.ekstep.contenteditor.api.dispatchEvent("object:modified"),t.closeThisDialog()},i.mapElementWithName=function(t){var e={},n="select",i="dropdown",r=t.title||t.parentElement.title||t.outerText||t.parentElement.text;switch(r){case"Bold (Ctrl+B)":e.target="Bold",e.subtype=n;break;case"Italic (Ctrl+I)":e.target="Italic",e.subtype=n;break;case"Strikethrough":e.target=r,e.subtype=n;break;case"Remove Format":e.target="RemoveFromat",e.subtype=n;break;case"Insert/Remove Numbered List":e.target="NumberedList",e.subtype=n;break;case"Insert/Remove Bulleted List":e.target="BulletList",e.subtype=n;break;case"Align Left":e.target="AlignLeft",e.subtype=n;break;case"Center":e.target="AlignCenter",e.subtype=n;break;case"Align Right":e.target="AlignRight",e.subtype=n;break;case"Justify":e.target="Justify",e.subtype=n;break;case"Paragraph Format":e.target="ParagraphFromat",e.subtype=i;break;case"Font Name":e.target="FontName",e.subtype=i;break;case"Font Size":e.target="FontSize",e.subtype=i;break;case"Text Color":e.target="TextColor",e.subtype=n;break;case"Background Color":e.target="BackgroundColor",e.subtype=n;break;case"Cancel":e.target="Cancel",e.subtype=n;break;case"Add To Lesson":e.target="AddToLesson",e.subtype=n}return e}}])},function(t,e){org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.iterator",ver:"1.0",author:"Jagadish",type:"plugin",title:"Iterator",description:"It is a base plugin for all collection plugins which needs navigation control",editor:{main:"editor/plugin.js",dependencies:[],menu:[]},renderer:{main:"renderer/plugin.js"},icon:"assets/icon.png",languages:["English"],categories:[""],keywords:[""]},org.ekstep.contenteditor.basePlugin.extend({initialize:function(){},newInstance:function(){}}))},function(t,e){org.ekstep.pluginframework.pluginManager.registerPlugin({id:"org.ekstep.navigation",ver:"1.0",author:"Jagadish",type:"plugin",title:"Navigation",description:"",editor:{main:"editor/plugin.js",menu:[]},renderer:{main:"renderer/plugin.js",dependencies:[{type:"js",src:"renderer/controller/navigation_ctrl.js",scope:"all"},{type:"js",src:"renderer/templates/navigation.html",scope:"all"}]},icon:"assets/icon.png",languages:["English"],categories:[""],keywords:[""]},org.ekstep.contenteditor.basePlugin.extend({initialize:function(){var t=this;ecEditor.addEventListener("content:load:complete",function(e){ecEditor.instantiatePlugin(t.manifest.id,{},void 0)})},newInstance:function(){}}))}]);