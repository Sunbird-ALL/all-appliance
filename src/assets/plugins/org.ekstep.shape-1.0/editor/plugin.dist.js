org.ekstep.pluginframework.pluginManager.registerPlugin({"id":"org.ekstep.shape","ver":"1.0","shortId":"shape","displayName":"Shape","author":"Santhosh Vasabhaktula","title":"Shape Plugin","description":"","publishedDate":"","editor":{"main":"editor/plugin.js","dependencies":[],"menu":[{"id":"shape","category":"main","type":"icon","toolTip":"Add Shapes","title":"Shapes","iconClass":"icon-shape icon","submenu":[{"id":"triangle","type":"icon","toolTip":"Add Triangle","title":"Triangle","iconClass":"icon-triangle icon","onclick":{"id":"org.ekstep.shape:create","data":{"type":"triangle","x":20,"y":20,"fill":"#00FF00","w":14,"h":25,"stroke":"rgba(255, 255, 255, 0)","strokeWidth":1,"opacity":1}}},{"id":"rectangle","type":"icon","toolTip":"Add Rectangle","title":"Rectangle","iconClass":"icon-rectangle icon","onclick":{"id":"org.ekstep.shape:create","data":{"type":"rect","x":10,"y":20,"fill":"#FFFF00","w":14,"h":25,"stroke":"rgba(255, 255, 255, 0)","strokeWidth":1,"opacity":1}}},{"id":"circle","type":"icon","toolTip":"Add Circle","title":"Circle","iconClass":"icon-circle icon","onclick":{"id":"org.ekstep.shape:create","data":{"type":"ellipse","x":15,"y":15,"fill":"#00FF00","w":18,"h":32,"stroke":"rgba(255, 255, 255, 0)","strokeWidth":1,"opacity":1}}},{"id":"rounded-rectangle","type":"icon","toolTip":"Add Rounded Rectangle","title":"Rounded Rectangle","iconClass":"icon-roundedrect icon","onclick":{"id":"org.ekstep.shape:create","data":{"type":"roundrect","x":20,"y":20,"fill":"#FF0000","w":14,"h":25,"radius":10,"stroke":"rgba(255, 255, 255, 0)","strokeWidth":1,"opacity":1}}},{"id":"star","type":"icon","toolTip":"Add Star","title":"Star","iconClass":"star icon","onclick":{"id":"org.ekstep.shape:create","data":{"type":"star","x":20,"y":20,"fill":"#FF0000","w":14,"h":25,"corners":5,"stroke":"rgba(255, 255, 255, 0)","strokeWidth":1,"opacity":1}}},{"id":"polygon","type":"icon","toolTip":"Add Polygon","title":"Polygon","iconClass":"first order icon","onclick":{"id":"org.ekstep.shape:create","data":{"type":"polygon","x":20,"y":20,"fill":"#FF0000","w":14,"h":25,"sides":5,"stroke":"rgba(255, 255, 255, 0)","strokeWidth":1,"opacity":1}}},{"id":"trapezium","type":"icon","toolTip":"Add Trapezium","title":"Trapezium","iconClass":"road icon","onclick":{"id":"org.ekstep.shape:create","data":{"type":"trapezium","x":20,"y":20,"fill":"#FF0000","w":14,"h":25,"stroke":"rgba(255, 255, 255, 0)","strokeWidth":1,"opacity":1}}},{"id":"rarrow","type":"icon","toolTip":"Add Arrow","title":"Arrow","iconClass":"long right arrow icon","onclick":{"id":"org.ekstep.shape:create","data":{"type":"rarrow","x":20,"y":20,"fill":"#000000","w":30,"h":25,"stroke":"rgba(255, 255, 255, 0)","strokeWidth":1,"opacity":1}}},{"id":"harrow","type":"icon","toolTip":"Add double arrow","title":"Double Arrow","iconClass":"resize horizontal icon","onclick":{"id":"org.ekstep.shape:create","data":{"type":"harrow","x":20,"y":20,"fill":"#000000","w":30,"h":25,"stroke":"rgba(255, 255, 255, 0)","strokeWidth":1,"opacity":1}}}]}],"behaviour":{"rotatable":true},"configManifest":[{"propertyName":"color","title":"Fill Color","description":"Choose a color from the color picker","dataType":"colorpicker","required":true,"defaultValue":"#000000"},{"propertyName":"opacity","title":"Transparency","description":"Set the transparency for element","dataType":"rangeslider","labelSuffix":"%","required":true,"defaultValue":100,"minimumValue":0,"maximumValue":100}],"help":{"src":"editor/help.md","dataType":"text"},"init-data":{"type":"rect","x":10,"y":20,"fill":"#FFFF00","w":14,"h":25}}},org.ekstep.contenteditor.basePlugin.extend({type:"shape",_points:void 0,shapeType:void 0,initialize:function(){},newInstance:function(){var e=this.convertToFabric(this.attributes);switch(this.attributes.type){case"ellipse":e.rx=e.w/2,e.ry=e.h/2,this.shapeType="ellipse",this.editorObj=new fabric.Ellipse(e);break;case"roundrect":this.manifest.editor.configManifest.push({propertyName:"radius",title:"Radius",placeholder:"Radius",description:"Input radius for the rounded rectangle",dataType:"input",valueType:"number",required:!1,defaultValue:10,minimumValue:0}),this.shapeType="roundrect",this.editorObj=new fabric.Rect(e);break;case"rect":this.shapeType="rect","slidebackground"!==e.subtype&&(this.editorObj=new fabric.Rect(e));break;case"triangle":e.sides=3,this.shapeType="3polygon",this.drawShape(this.shapeType,e);break;case"star":this.manifest.editor.configManifest.push({propertyName:"corners",title:"Corners",placeholder:"Corners",description:"No of corners for the star",dataType:"rangeslider",valueType:"number",required:!1,defaultValue:5,minimumValue:4,maximumValue:10});var t=e.corners;this.shapeType=t+"star",this.drawShape(this.shapeType,e);break;case"polygon":this.manifest.editor.configManifest.push({propertyName:"sides",title:"Sides",placeholder:"Sides",description:"No of sides for the shape",dataType:"rangeslider",valueType:"number",required:!1,defaultValue:5,minimumValue:4,maximumValue:10});t=e.sides;this.shapeType=t+"polygon",this.drawShape(this.shapeType,e);break;case"trapezium":this.shapeType="trapezium",this.drawShape(this.shapeType,e);break;case"rarrow":this.shapeType="rarrow",this.drawShape(this.shapeType,e);break;case"harrow":this.shapeType="harrow",this.drawShape(this.shapeType,e)}this.editorObj&&this.editorObj.setFill(e.fill)},onConfigChange:function(e,t){switch(e){case"color":this.editorObj.setFill(t),this.attributes.fill=t;break;case"radius":"ellipse"==this.attributes.type&&(this.editorObj.set({w:2*t}),this.editorObj.set({h:2*t}),this.attributes.w=2*t,this.attributes.h=2*t),this.editorObj.set({rx:t}),this.editorObj.set({ry:t}),this.attributes.radius=t;break;case"sides":var s=t,i=(this.shapeType=s+"polygon",this.shapes[this.shapeType]);this.attributes.sides=s,this.editorObj.set({points:i});break;case"corners":s=t,i=(this.shapeType=s+"star",this.shapes[this.shapeType]);this.attributes.corners=s,this.editorObj.set({points:i})}ecEditor.render(),ecEditor.dispatchEvent("object:modified",{target:ecEditor.getEditorObject()})},getConfig:function(){var e=this._super();return e.color=this.attributes.fill,"roundrect"==this.attributes.type&&(e.radius=this.editorObj.rx),"ellipse"==this.attributes.type&&(e.radius=this.editorObj.rx),this.attributes.corners&&(e.corners=this.attributes.corners),this.attributes.sides&&(e.sides=this.attributes.sides),e.points=this.shapes[this.shapeType],e},drawShape:function(e,t){this._points=_.cloneDeep(this.shapes[e]),this.toPixel(this._points),t.strokeLineJoin="bevil",this.editorObj=new fabric.Polygon(this._points,t)},toPixel:function(e){var t=this;return e&&e.forEach(function(e){e.x=t.attributes.w*e.x/100,e.y=t.attributes.h*e.y/100}),e},changed:function(e,t,s){"roundrect"==e.attributes.type&&(e.editorObj.setWidth(e.editorObj.getWidth()-e.editorObj.getStrokeWidth()),e.editorObj.setHeight(e.editorObj.getHeight()-e.editorObj.getStrokeWidth()),e.editorObj.setScaleX(1),e.editorObj.setScaleY(1))},shapes:{"4star":[{x:100,y:50},{x:62.7,y:62.7},{x:50,y:100},{x:37.3,y:62.7},{x:0,y:50},{x:37.3,y:37.3},{x:50,y:0},{x:62.7,y:37.3}],"5star":[{x:50,y:0},{x:60.9,y:35},{x:100,y:35},{x:67.6,y:60},{x:79.4,y:100},{x:50,y:72},{x:20.6,y:100},{x:32.4,y:60},{x:0,y:35},{x:39.1,y:35}],"6star":[{x:50,y:100},{x:35,y:76},{x:0,y:75},{x:20,y:50},{x:0,y:25},{x:35,y:24},{x:50,y:0},{x:65,y:24},{x:100,y:25},{x:80,y:50},{x:100,y:75},{x:65,y:76}],"7star":[{x:100,y:59.8},{x:74,y:68},{x:72.9,y:100},{x:50.8,y:80},{x:29.6,y:100},{x:27.1,y:69.4},{x:0,y:62.5},{x:20.6,y:44.1},{x:10,y:19.9},{x:36.2,y:23.3},{x:48.6,y:0},{x:62.3,y:22.6},{x:88.2,y:17.7},{x:79,y:42.5}],"8star":[{x:100,y:50},{x:82.3,y:63.4},{x:85.4,y:85.4},{x:63.4,y:82.3},{x:50,y:100},{x:36.6,y:82.3},{x:14.6,y:85.4},{x:17.7,y:63.4},{x:0,y:50},{x:17.7,y:36.6},{x:14.6,y:14.6},{x:36.6,y:17.7},{x:50,y:0},{x:63.4,y:17.7},{x:85.4,y:14.6},{x:82.3,y:36.6}],"9star":[{x:100,y:40.2},{x:84.6,y:55.3},{x:93.8,y:74},{x:73.1,y:76.3},{x:68.1,y:100},{x:50.8,y:85},{x:33.9,y:100},{x:28.1,y:77.3},{x:7.3,y:75.9},{x:15.7,y:56.8},{x:0,y:42.4},{x:19.3,y:33.2},{x:17,y:12.4},{x:37.3,y:17.4},{x:48.9,y:0},{x:61.3,y:16.9},{x:81.3,y:11},{x:79.9,y:31.8}],"10star":[{x:100,y:65.5},{x:78.3,y:70.6},{x:79.4,y:90.5},{x:60.8,y:83.3},{x:50,y:100},{x:39.2,y:83.3},{x:20.6,y:90.5},{x:21.7,y:70.6},{x:0,y:65.5},{x:15,y:50},{x:0,y:34.5},{x:21.7,y:29.4},{x:20.6,y:9.5},{x:39.2,y:16.7},{x:50,y:0},{x:60.8,y:16.7},{x:79.4,y:9.5},{x:78.3,y:29.4},{x:100,y:34.5},{x:85,y:50}],"3polygon":[{x:50,y:0},{x:100,y:100},{x:0,y:100}],"4polygon":[{x:50,y:0},{x:100,y:50},{x:50,y:100},{x:0,y:50}],"5polygon":[{x:50,y:0},{x:100,y:34.5},{x:79.4,y:100},{x:20.6,y:100},{x:0,y:34.5}],"6polygon":[{x:100,y:50},{x:75,y:100},{x:25,y:100},{x:0,y:50},{x:25,y:0},{x:75,y:0}],"7polygon":[{x:50,y:0},{x:89.1,y:18.8},{x:100,y:61.1},{x:71.7,y:100},{x:28.3,y:100},{x:0,y:61.1},{x:10.9,y:18.8}],"8polygon":[{x:100,y:69.1},{x:69.1,y:100},{x:30.9,y:100},{x:0,y:69.1},{x:0,y:30.9},{x:30.9,y:0},{x:69.1,y:0},{x:100,y:30.9}],"9polygon":[{x:50,y:0},{x:82.1,y:11.7},{x:100,y:41.3},{x:93.3,y:75},{x:67.1,y:100},{x:32.9,y:100},{x:6.7,y:75},{x:0,y:41.3},{x:17.9,y:11.7}],"10polygon":[{x:100,y:50},{x:90.5,y:79.4},{x:65.5,y:100},{x:34.5,y:100},{x:9.5,y:79.4},{x:0,y:50},{x:9.5,y:20.6},{x:34.5,y:0},{x:65.5,y:0},{x:90.5,y:20.6}],trapezium:[{x:25,y:0},{x:75,y:0},{x:100,y:100},{x:0,y:100}],rarrow:[{x:0,y:25},{x:75,y:25},{x:75,y:0},{x:100,y:50},{x:75,y:100},{x:75,y:75},{x:0,y:75}],harrow:[{x:0,y:50},{x:25,y:0},{x:25,y:25},{x:75,y:25},{x:75,y:0},{x:100,y:50},{x:75,y:100},{x:75,y:75},{x:25,y:75},{x:25,y:100}]}}))