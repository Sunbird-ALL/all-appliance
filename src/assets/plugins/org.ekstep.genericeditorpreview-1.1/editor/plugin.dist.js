org.ekstep.pluginframework.pluginManager.registerPlugin({"id":"org.ekstep.genericeditorpreview","ver":"1.1","author":"Manjunath Davanam","title":"preview","description":"content preview","publishedDate":"","editor":{"main":"editor/plugin.js","dependencies":[{"type":"css","src":"editor/style.css"}],"canvasarea":[{"templateURL":"editor/contentPreview.html","controllerURL":"editor/previewApp.js"}]}},org.ekstep.genericeditor.basePlugin.extend({type:"preview",previewURL:(ecEditor.getConfig("previewURL")||"content/preview/preview.html")+"?webview=true",contentBody:void 0,initialize:function(){ecEditor.addEventListener("atpreview:show",this.showPreview,this)},showPreview:function(){console.log(this.previewURL);var e=this,n=(ecEditor.getService("content"),{showEndpage:!0});angular.element(document).ready(function(){var i=angular.element("#previewContentIframe")[0];i.src=e.previewURL,i.onload=function(){var e={},t={};t.etags=ecEditor.getContext("etags")||[],e.context={mode:"edit",contentId:ecEditor.getContext("contentId"),sid:ecEditor.getContext("sid"),uid:ecEditor.getContext("uid"),channel:ecEditor.getContext("channel")||"in.ekstep",pdata:ecEditor.getContext("pdata")||{id:"in.ekstep",pid:"",ver:"1.0"},app:t.etags.app||[],dims:t.etags.dims||[],partner:t.etags.partner||[]},ecEditor.getConfig("previewConfig")?e.config=ecEditor.getConfig("previewConfig"):e.config=n,e.metadata=ecEditor.getService(ServiceConstants.CONTENT_SERVICE).getContentMeta(ecEditor.getContext("contentId")),console.log("metadata ",e.metadata),e.data={},i.contentWindow.initializePreview(e)}})}}))