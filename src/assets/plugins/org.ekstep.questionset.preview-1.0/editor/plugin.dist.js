org.ekstep.pluginframework.pluginManager.registerPlugin({"id":"org.ekstep.questionset.preview","ver":"1.0","shortId":"qs","author":"Rajeev Sathish","title":"Question Set Preview Plugin","description":"Plugin to create the preview content for question set","publishedDate":"","editor":{"main":"editor/plugin.js"}},org.ekstep.questionsetPreview={},org.ekstep.questionsetPreview.EditorPlugin=org.ekstep.contenteditor.basePlugin.extend({type:"org.ekstep.questionset.preview",initialize:function(){},newInstance:function(){},getQuestionPreviwContent:function(e){var t,i,n={theme:{startStage:"splash",id:"theme",ver:.3,stage:[{id:"splash","org.ekstep.questionset":{x:9,y:6,w:80,h:85},x:0,y:0,w:100,h:100}],manifest:{media:[]},"plugin-manifest":{}}},e=this.getQuestionList(e["org.ekstep.question"]);return _.each(e["org.ekstep.question"],function(e,t){var i;_.has(e.data,"__cdata")&&(i=JSON.parse(e.data.__cdata)),_.has(i,"mediamanifest")&&(e=i.mediamanifest.media,_.isArray(e))&&_.each(e,function(e,t){n.theme.manifest.media.push(e)})}),n.theme.stage[0]["org.ekstep.questionset"].isQuestionPreview=!0,n.theme.stage[0]["org.ekstep.questionset"]["org.ekstep.question"]=e["org.ekstep.question"],t=_.uniqBy(e.media),e=_.uniqBy(e.pluginIds),i={},_.forEach(e,function(e){i[e]=e}),i["org.ekstep.questionset"]="org.ekstep.questionset",ManifestGenerator.generate(i),e=_.uniqBy(ManifestGenerator.getMediaManifest()),0<t.length&&n.theme.manifest.media.push(t),0<e.length&&n.theme.manifest.media.push(e),n.theme["plugin-manifest"].plugin=ManifestGenerator.getPluginManifest(),n},getQuestionList:function(e){var i={"org.ekstep.question":[],media:[],pluginIds:[]};return e.forEach(function(e){var t={id:e.id,pluginId:e.pluginId,pluginVer:e.pluginVer,templateId:e.templateId,data:e.data,config:e.config,w:"80",x:"9",h:"85",y:"6"};i.pluginIds.push(e.pluginId),e.media&&i.media.push(e.media),i["org.ekstep.question"].push(t)}),i.pluginIds.push("org.ekstep.navigation"),i}}))