org.ekstep.pluginframework.pluginManager.registerPlugin({"id":"org.ekstep.utils","ver":"1.0","author":"HarishKumar Gangula","title":"Utils Plugin","description":"This plugin is used to add utilitites","publishedDate":"","editor":{"main":"editor/plugin.js","menu":[{"id":"copy","category":"context","type":"icon","toolTip":"copy","title":"copy","iconClass":"copy icon","state":"HIDE","onclick":{"id":"copy:copyItem","data":{}}},{"id":"paste","category":"context","type":"icon","toolTip":"paste","title":"paste","iconClass":"paste icon","state":"HIDE","onclick":{"id":"paste:pasteItem","data":{}}},{"id":"delete","category":"context","type":"icon","toolTip":"Delete","title":"Delete","iconClass":"trash outline icon","state":"HIDE","onclick":{"id":"delete:invoke","data":{}}},{"id":"reorder","category":"context","type":"icon","toolTip":"Arrange","title":"Arrange","iconClass":"icon-arrange icon","state":"HIDE","submenu":[{"id":"bringforward","category":"context","type":"icon","toolTip":"Bring forward","title":"Bring forward","iconClass":"icon-bringforward icon","onclick":{"id":"reorder:bringforward","data":{}}},{"id":"bringfront","category":"context","type":"icon","toolTip":"Bring to front","title":"Bring to front","iconClass":"icon-bringfront icon","onclick":{"id":"reorder:bringfront","data":{}}},{"id":"sendbackward","category":"context","type":"icon","toolTip":"Send backward","title":"Send backward","iconClass":"icon-sendbackward icon","onclick":{"id":"reorder:sendbackward","data":{}}},{"id":"sendback","category":"context","type":"icon","toolTip":"Send to back","title":"Send to back","iconClass":"icon-sendback icon","onclick":{"id":"reorder:sendback","data":{}}}]}]}},org.ekstep.contenteditor.basePlugin.extend({type:"utils",picker:void 0,clipboard:void 0,activeGroup:void 0,initialize:function(){ecEditor.addEventListener("reorder:bringforward",this.bringforward,this),ecEditor.addEventListener("reorder:bringfront",this.bringfront,this),ecEditor.addEventListener("reorder:sendbackward",this.sendbackward,this),ecEditor.addEventListener("reorder:sendback",this.sendback,this),ecEditor.addEventListener("copy:copyItem",this.copyItem,this),ecEditor.addEventListener("paste:pasteItem",this.pasteItem,this),ecEditor.addEventListener("delete:invoke",this.deleteObject,this),ecEditor.addEventListener("object:selected",this.objectSelected,this),ecEditor.addEventListener("object:unselected",this.objectUnSelected,this)},bringfront:function(e,t){ecEditor.getCanvas().bringToFront(ecEditor.getEditorObject()),ecEditor.render(),ecEditor.dispatchEvent("object:modified",{id:ecEditor.getEditorObject().id})},sendback:function(e,t){ecEditor.getCanvas().sendToBack(ecEditor.getEditorObject()),ecEditor.render(),ecEditor.dispatchEvent("object:modified",{id:ecEditor.getEditorObject().id})},bringforward:function(e,t){ecEditor.getCanvas().bringForward(ecEditor.getEditorObject()),ecEditor.render(),ecEditor.dispatchEvent("object:modified",{id:ecEditor.getEditorObject().id})},sendbackward:function(e,t){ecEditor.getCanvas().sendBackwards(ecEditor.getEditorObject()),ecEditor.render(),ecEditor.dispatchEvent("object:modified",{id:ecEditor.getEditorObject().id})},copyItem:function(){this.clipboard=_.cloneDeep(ecEditor.getCurrentObject()?ecEditor.getCurrentObject():ecEditor.getCurrentGroup()),this.activeGroup=ecEditor.getCanvas().getActiveGroup()&&ecEditor.getCanvas().getActiveGroup().getObjects(),this.clipboard&&ecEditor.updateContextMenu({id:"paste",state:"SHOW",data:{}})},pasteItem:function(){var i=this;this.clipboard&&(_.isArray(this.clipboard)?(ecEditor.getCanvas().discardActiveGroup(),this.clipboard.forEach(function(e,t){e.editorObj.top=i.activeGroup[t].top+10,e.editorObj.left=i.activeGroup[t].left+10,ecEditor.cloneInstance(e)})):ecEditor.cloneInstance(this.clipboard),this.clipboard=void 0,ecEditor.updateContextMenu({id:"paste",state:"HIDE",data:{}}))},deleteObject:function(e,t){var i=ecEditor.getEditorGroup(),d=ecEditor.getEditorObject(),r=this;i?(ecEditor.getCanvas().discardActiveGroup(),i.getObjects().forEach(function(e){r.remove(e)})):d&&r.remove(d)},remove:function(e){ecEditor.dispatchEvent("delete:invoked",{editorObj:ecEditor.getPluginInstance(e.id).attributes}),ecEditor.getCanvas().remove(e),ecEditor.dispatchEvent("stage:modified",{id:e.id})},objectSelected:function(e,t){ecEditor.updateContextMenus([{id:"reorder",state:"SHOW",data:{}},{id:"copy",state:"SHOW",data:{}},{id:"delete",state:"SHOW",data:{}}])},objectUnSelected:function(e,t){ecEditor.updateContextMenus([{id:"reorder",state:"HIDE",data:{}},{id:"copy",state:"HIDE",data:{}},{id:"delete",state:"HIDE",data:{}}])}}))